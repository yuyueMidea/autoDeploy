const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-CQE1YJYP.js","assets/vendor-Crb1Va-d.js","assets/vendor-Cp6N4WjJ.css","assets/LoginPage-qTnymkDI.js","assets/LoginPage-CaLd4svl.css","assets/About-dlF-UHbq.js","assets/CryptoPage-iVAJNt0m.js","assets/FormDesigner-CrTBZyQ7.js","assets/FormDesigner-C9MtEe3c.css","assets/ProjectList-BJxrxlUb.js","assets/ProjectDetail-u1enE4i9.js","assets/CalculationView-Dsi0bG3W.js","assets/WebSocketPage-BUIAQ6S2.js","assets/WebSocketPage-CvMpOmu9.css","assets/WorkflowView-B48dln6-.js","assets/WorkflowView-5HVZEjIr.css","assets/BpmnContainerView-bnXaH1XR.js","assets/BpmnContainerView-Cpk4ZYrE.css","assets/NotFound-g1EKa3gu.js"])))=>i.map(i=>d[i]);
import{c as w,r as O,o as m,d as J,a as M,b as K,e as p,f as l,g as I,n as D,u as _,t as y,F as x,h as B,i as S,w as k,j as F,T as U,K as W,k as G,l as H,m as z,E as Q,p as C,q as X,s as Y}from"./vendor-Crb1Va-d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const T=(e,t)=>{const s=e.__vccOpts||e;for(const[r,o]of t)s[r]=o;return s},Z={};function ee(e,t){const s=O("router-view");return m(),w(s)}const te=T(Z,[["render",ee]]),oe="modulepreload",se=function(e){return"/autoDeploy/"+e},N={},d=function(t,s,r){let o=Promise.resolve();if(s&&s.length>0){let a=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),v=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=a(s.map(u=>{if(u=se(u),u in N)return;N[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const c=document.createElement("link");if(c.rel=h?"stylesheet":oe,h||(c.as="script"),c.crossOrigin="",c.href=u,v&&c.setAttribute("nonce",v),document.head.appendChild(c),h)return new Promise((P,q)=>{c.addEventListener("load",P),c.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return o.then(a=>{for(const i of a||[])i.status==="rejected"&&n(i.reason);return t().catch(n)})};let b=[];function L(e){b=Array.isArray(e)?e:[],localStorage.setItem("user_permissions",JSON.stringify(b))}function re(){if(b.length===0){const e=localStorage.getItem("user_permissions");b=e?JSON.parse(e):[]}return b}function j(e){if(!e)return!0;const t=re();return Array.isArray(e)?e.every(s=>t.includes(s)):t.includes(e)}const ne={mounted(e,t){var r;const{value:s}=t;j(s)||(r=e.parentNode)==null||r.removeChild(e)}},ae={methods:{$hasPermission(e){return j(e)}}},E=J("app1",{state:()=>({count:0,cmenuName:"",logRouterFlag:!1,logClickFlag:!1,loading:!1,error:"",username:"",password:"",crole:"",isAuthenticated:!1,passwordLevel:0,cachedComList:[],sideBarCollapse:!1}),actions:{increment(){this.count++},toggleLogRouter(){this.logRouterFlag=!this.logRouterFlag},setMenuName(e){this.cmenuName=e},setCrole(e){this.crole=e},setisAuthenticated(e){this.isAuthenticated=e},logOut(){this.crole="",this.password="",this.username="",this.isAuthenticated=!1,localStorage.removeItem("authToken")},login(e,t){e==="superAdmin"?(this.setPassword(5),this.setCrole(e),this.setisAuthenticated(!0),localStorage.setItem("authToken",`mock-jwt-token-${t}`),L(["admin","guest"])):e==="admin"?(this.setPassword(3),this.setCrole(e),this.setisAuthenticated(!0),localStorage.setItem("authToken",`mock-jwt-token-${t}`),L(["admin","guest"])):e==="operator"?(this.setPassword(2),this.setCrole(e),this.setisAuthenticated(!0),L(["operator"])):e==="guest"?(this.setPassword(1),this.setCrole(e),this.setisAuthenticated(!0),L(["guest"])):this.error="用户名或密码错误"},setPassword(e){this.passwordLevel=e},setError(){this.error="用户名或密码不能为空"},setcachedComList(e){this.cachedComList=e},toggleCollapse(){this.sideBarCollapse=!this.sideBarCollapse}}}),R={light:{"--primary-color":"#42b983","--secondary-color":"#34495e","--background-color":"#ffffff","--text-color":"#2c3e50","--border-color":"#eaeaea","--sidebar-bg":"#34495e","--sidebar-text":"#ecf0f1","--topbar-bg":"#2c3e50","--topbar-text":"#ffffff"},dark:{"--primary-color":"#42b983","--secondary-color":"#1a1a1a","--background-color":"#676767","--text-color":"#f5f5f5","--border-color":"#333333","--sidebar-bg":"#1a1a1a","--sidebar-text":"#f5f5f5","--topbar-bg":"#121212","--topbar-text":"#ffffff"}};function $(e){const t=R[e]||R.light;Object.keys(t).forEach(s=>{document.documentElement.style.setProperty(s,t[s])}),localStorage.setItem("theme",e)}function ie(){return localStorage.getItem("theme")||"light"}const ce={class:"layout"},le={class:"top-bar"},ue={class:"topbar_left"},de={class:"p-5"},me={class:"topbar_right"},pe={key:0,class:"user-info"},he={class:"main-content"},fe={class:"menu-list"},_e=["title"],ge={class:"content-area"},ve={__name:"Layout",props:{routeList:{type:Array,default:()=>[]}},setup(e){const s=e.routeList.filter(v=>!v.hide),r=E(),o=()=>{r.logOut(),A.push("/login"),L([])},n=()=>{r.toggleCollapse()},a=M(ie()),i=()=>{a.value=a.value==="light"?"dark":"light",$(a.value)};return K(()=>{$(a.value)}),(v,u)=>{const h=O("router-link"),f=O("router-view");return m(),p("div",ce,[l("div",le,[l("div",ue,[l("button",{class:D(["menu-toggle",{"icon-collapsed":_(r).sideBarCollapse}]),onClick:n},u[0]||(u[0]=[l("span",{class:"icon"},"☰",-1)]),2),l("span",de,y(_(r).cmenuName),1)]),l("div",me,[l("button",{class:"theme-toggle",onClick:i},y(a.value==="light"?"🌙":"☀️"),1)]),_(r).isAuthenticated?(m(),p("div",pe,[l("span",null,"welcome, "+y(_(r).crole),1),l("button",{onClick:o,class:"btn"},"退出")])):I("",!0)]),l("div",he,[l("div",{class:D(["side-menu",{"menu-collapsed":_(r).sideBarCollapse}])},[l("ul",fe,[(m(!0),p(x,null,B(_(s),(c,P)=>(m(),p("li",{key:P,title:c.meta?`${c.meta.requiresAuth} only`:""},[S(h,{to:c.path},{default:k(()=>[F(y(c.name),1)]),_:2},1032,["to"])],8,_e))),128))])],2),l("div",ge,[S(f,null,{default:k(({Component:c})=>[S(U,{name:"fade",mode:"out-in"},{default:k(()=>[(m(),w(W,{include:_(r).cachedComList},[(m(),w(G(c)))],1032,["include"]))]),_:2},1024)]),_:1})])])])}}},ye=T(ve,[["__scopeId","data-v-ca50e405"]]);function Le(e){const t=JSON.parse(localStorage.getItem("userLogs")||"[]");t.push(e),localStorage.setItem("userLogs",JSON.stringify(t))}function be(e){const t=JSON.parse(localStorage.getItem("evtLogs")||"[]");t.push(e),localStorage.setItem("evtLogs",JSON.stringify(t))}const V=[{path:"/",name:"首页",component:()=>d(()=>import("./Home-CQE1YJYP.js"),__vite__mapDeps([0,1,2]))},{path:"/login",name:"登录",component:()=>d(()=>import("./LoginPage-qTnymkDI.js"),__vite__mapDeps([3,1,2,4]))},{path:"/about",name:"关于",component:()=>d(()=>import("./About-dlF-UHbq.js"),__vite__mapDeps([5,1,2]))},{path:"/cryptoPage",name:"数据加密",component:()=>d(()=>import("./CryptoPage-iVAJNt0m.js"),__vite__mapDeps([6,1,2]))},{path:"/formDesigner",name:"表单设计器",component:()=>d(()=>import("./FormDesigner-CrTBZyQ7.js"),__vite__mapDeps([7,1,2,8])),meta:{requiresAuth:"admin"}},{path:"/projectList",name:"项目列表",component:()=>d(()=>import("./ProjectList-BJxrxlUb.js"),__vite__mapDeps([9,1,2]))},{path:"/projectDetail/:id",name:"项目详情",component:()=>d(()=>import("./ProjectDetail-u1enE4i9.js"),__vite__mapDeps([10,1,2])),props:!0,hide:!0},{path:"/calculation",name:"worker计算",component:()=>d(()=>import("./CalculationView-Dsi0bG3W.js"),__vite__mapDeps([11,1,2]))},{path:"/webSocketPage",name:"WebSocket连接",component:()=>d(()=>import("./WebSocketPage-BUIAQ6S2.js"),__vite__mapDeps([12,1,2,13]))},{path:"/workflowView",name:"工作流",component:()=>d(()=>import("./WorkflowView-B48dln6-.js"),__vite__mapDeps([14,1,2,15]))},{path:"/BpmnContainerView",name:"工作流2",component:()=>d(()=>import("./BpmnContainerView-bnXaH1XR.js"),__vite__mapDeps([16,1,2,17]))},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>d(()=>import("./NotFound-g1EKa3gu.js"),__vite__mapDeps([18,1,2])),hide:!0}],A=H({history:z("/autoDeploy/"),routes:[{path:"/",props:{routeList:V},component:ye,children:V}]});A.beforeEach((e,t,s)=>{const r=E();if(document.title=e.name?`${e.name} - 我的应用`:"我的应用",e.meta.requiresAuth&&e.meta.requiresAuth!==r.crole){Q({type:"info",message:"未登录! 请先登录再操作",duration:3e3}),s("/login");return}s()});A.afterEach((e,t)=>{const s=E();s.setMenuName(e.name),s.logRouterFlag&&Le({from:t.fullPath,to:e.fullPath,routeName:e.name||"unnamed",timestamp:new Date().toISOString()})});const Ee={mounted(e,t){const s=E(),r=t.arg||"click",o=t.value;e.addEventListener(r,n=>{s.logClickFlag&&be({timestamp:new Date().toISOString(),element:e.tagName.toLowerCase(),id:e.id||null,class:e.className||null,text:e.textContent.trim().substring(0,50),...typeof o=="object"?o:{value:o}})})}},Ae={class:"global-list"},Pe={key:0,class:"list-header"},Se={class:"list-content"},ke={key:1,class:"list-footer"},Ce={__name:"GlobalList",props:{items:{type:Array,default:()=>[]}},setup(e){return(t,s)=>(m(),p("div",Ae,[t.$slots.header?(m(),p("div",Pe,[C(t.$slots,"header",{},void 0,!0)])):I("",!0),l("div",Se,[(m(!0),p(x,null,B(e.items,(r,o)=>(m(),p("li",{key:o,class:"list-item"},[C(t.$slots,"default",{unit:r,index:o},()=>[F(y(r),1)],!0)]))),128))]),t.$slots.footer?(m(),p("div",ke,[C(t.$slots,"footer",{},void 0,!0)])):I("",!0)]))}},we=T(Ce,[["__scopeId","data-v-6b693776"]]),g=X(te);g.use(Y());g.component("CommonList",we);g.directive("track",Ee);g.directive("permission",ne);g.mixin(ae);g.use(A);g.mount("#app");export{T as _,A as r,E as u};
