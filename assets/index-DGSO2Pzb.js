const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-CIGwqffl.js","assets/vendor-DpYf_-LF.js","assets/vendor-Cp6N4WjJ.css","assets/LoginPage-CxmRX09k.js","assets/LoginPage-CaLd4svl.css","assets/About-DQwgtOwN.js","assets/CryptoPage-C9JAsqm7.js","assets/Contract-DsmcgGzf.js","assets/Contract-DCQn6SOt.css","assets/FormDesigner-DTdOvXsH.js","assets/FormDesigner-C9MtEe3c.css","assets/ProjectList-CgVXaIIQ.js","assets/ProjectDetail-CwaGBg8L.js","assets/CalculationView-BZXek3tC.js","assets/WebSocketPage-C_88GfoL.js","assets/WebSocketPage-CvMpOmu9.css","assets/WorkflowView-CFJlAbtT.js","assets/WorkflowView-5HVZEjIr.css","assets/BpmnContainerView-BhzcS3cm.js","assets/BpmnContainerView-Cpk4ZYrE.css","assets/NotFound-aH7scwnL.js"])))=>i.map(i=>d[i]);
import{c as A,r as E,o as c,d as M,a as j,b as q,e as u,f as n,g as P,n as S,u as d,t as _,F as N,h as D,i as y,w as L,j as R,T as J,K,k as G,l as H,m as W,_ as i,E as z,p as b,q as Q,s as U}from"./vendor-DpYf_-LF.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();const k=(e,t)=>{const s=e.__vccOpts||e;for(const[r,o]of t)s[r]=o;return s},X={};function Y(e,t){const s=E("router-view");return c(),A(s)}const Z=k(X,[["render",Y]]);let f=[];function h(e){f=Array.isArray(e)?e:[],localStorage.setItem("user_permissions",JSON.stringify(f))}function ee(){if(f.length===0){const e=localStorage.getItem("user_permissions");f=e?JSON.parse(e):[]}return f}function V(e){if(!e)return!0;const t=ee();return Array.isArray(e)?e.every(s=>t.includes(s)):t.includes(e)}const te={mounted(e,t){var r;const{value:s}=t;V(s)||(r=e.parentNode)==null||r.removeChild(e)}},oe={methods:{$hasPermission(e){return V(e)}}},g=M("app1",{state:()=>({count:0,cmenuName:"",logRouterFlag:!1,logClickFlag:!1,loading:!1,error:"",username:"",password:"",crole:"",isAuthenticated:!1,passwordLevel:0,cachedComList:[],sideBarCollapse:!1}),actions:{increment(){this.count++},toggleLogRouter(){this.logRouterFlag=!this.logRouterFlag},setMenuName(e){this.cmenuName=e},setCrole(e){this.crole=e},setisAuthenticated(e){this.isAuthenticated=e},logOut(){this.crole="",this.password="",this.username="",this.isAuthenticated=!1,localStorage.removeItem("authToken")},login(e,t){e==="superAdmin"?(this.setPassword(5),this.setCrole(e),this.setisAuthenticated(!0),localStorage.setItem("authToken",`mock-jwt-token-${t}`),h(["admin","guest"])):e==="admin"?(this.setPassword(3),this.setCrole(e),this.setisAuthenticated(!0),localStorage.setItem("authToken",`mock-jwt-token-${t}`),h(["admin","guest"])):e==="operator"?(this.setPassword(2),this.setCrole(e),this.setisAuthenticated(!0),h(["operator"])):e==="guest"?(this.setPassword(1),this.setCrole(e),this.setisAuthenticated(!0),h(["guest"])):this.error="用户名或密码错误"},setPassword(e){this.passwordLevel=e},setError(){this.error="用户名或密码不能为空"},setcachedComList(e){this.cachedComList=e},toggleCollapse(){this.sideBarCollapse=!this.sideBarCollapse}}}),I={light:{"--primary-color":"#42b983","--secondary-color":"#34495e","--background-color":"#ffffff","--text-color":"#2c3e50","--border-color":"#eaeaea","--sidebar-bg":"#34495e","--sidebar-text":"#ecf0f1","--topbar-bg":"#2c3e50","--topbar-text":"#ffffff"},dark:{"--primary-color":"#42b983","--secondary-color":"#1a1a1a","--background-color":"#676767","--text-color":"#f5f5f5","--border-color":"#333333","--sidebar-bg":"#1a1a1a","--sidebar-text":"#f5f5f5","--topbar-bg":"#121212","--topbar-text":"#ffffff"}};function w(e){const t=I[e]||I.light;Object.keys(t).forEach(s=>{document.documentElement.style.setProperty(s,t[s])}),localStorage.setItem("theme",e)}function se(){return localStorage.getItem("theme")||"light"}const re={class:"layout"},ae={class:"top-bar"},ne={class:"topbar_left"},ie={class:"p-5"},ce={class:"topbar_right"},le={key:0,class:"user-info"},ue={class:"main-content"},de={class:"menu-list"},me=["title"],pe={class:"content-area"},_e={__name:"Layout",props:{routeList:{type:Array,default:()=>[]}},setup(e){const s=e.routeList.filter(C=>!C.hide),r=g(),o=()=>{r.logOut(),v.push("/login"),h([])},a=()=>{r.toggleCollapse()},l=j(se()),$=()=>{l.value=l.value==="light"?"dark":"light",w(l.value)};return q(()=>{w(l.value)}),(C,O)=>{const x=E("router-link"),B=E("router-view");return c(),u("div",re,[n("div",ae,[n("div",ne,[n("button",{class:S(["menu-toggle",{"icon-collapsed":d(r).sideBarCollapse}]),onClick:a},O[0]||(O[0]=[n("span",{class:"icon"},"☰",-1)]),2),n("span",ie,_(d(r).cmenuName),1)]),n("div",ce,[n("button",{class:"theme-toggle",onClick:$},_(l.value==="light"?"🌙":"☀️"),1)]),d(r).isAuthenticated?(c(),u("div",le,[n("span",null,"welcome, "+_(d(r).crole),1),n("button",{onClick:o,class:"btn"},"退出")])):P("",!0)]),n("div",ue,[n("div",{class:S(["side-menu",{"menu-collapsed":d(r).sideBarCollapse}])},[n("ul",de,[(c(!0),u(N,null,D(d(s),(p,F)=>(c(),u("li",{key:F,title:p.meta?`${p.meta.requiresAuth} only`:""},[y(x,{to:p.path},{default:L(()=>[R(_(p.name),1)]),_:2},1032,["to"])],8,me))),128))])],2),n("div",pe,[y(B,null,{default:L(({Component:p})=>[y(J,{name:"fade",mode:"out-in"},{default:L(()=>[(c(),A(K,{include:d(r).cachedComList},[(c(),A(G(p)))],1032,["include"]))]),_:2},1024)]),_:1})])])])}}},he=k(_e,[["__scopeId","data-v-ca50e405"]]);function fe(e){const t=JSON.parse(localStorage.getItem("userLogs")||"[]");t.push(e),localStorage.setItem("userLogs",JSON.stringify(t))}function ge(e){const t=JSON.parse(localStorage.getItem("evtLogs")||"[]");t.push(e),localStorage.setItem("evtLogs",JSON.stringify(t))}const T=[{path:"/",name:"首页",component:()=>i(()=>import("./Home-CIGwqffl.js"),__vite__mapDeps([0,1,2]))},{path:"/login",name:"登录",component:()=>i(()=>import("./LoginPage-CxmRX09k.js"),__vite__mapDeps([3,1,2,4]))},{path:"/about",name:"关于",component:()=>i(()=>import("./About-DQwgtOwN.js"),__vite__mapDeps([5,1,2]))},{path:"/cryptoPage",name:"数据加密",component:()=>i(()=>import("./CryptoPage-C9JAsqm7.js"),__vite__mapDeps([6,1,2]))},{path:"/contract",name:"用户管理",component:()=>i(()=>import("./Contract-DsmcgGzf.js"),__vite__mapDeps([7,1,2,8])),meta:{requiresAuth:"admin"}},{path:"/formDesigner",name:"表单设计器",component:()=>i(()=>import("./FormDesigner-DTdOvXsH.js"),__vite__mapDeps([9,1,2,10])),meta:{requiresAuth:"admin"}},{path:"/projectList",name:"项目列表",component:()=>i(()=>import("./ProjectList-CgVXaIIQ.js"),__vite__mapDeps([11,1,2]))},{path:"/projectDetail/:id",name:"项目详情",component:()=>i(()=>import("./ProjectDetail-CwaGBg8L.js"),__vite__mapDeps([12,1,2])),props:!0,hide:!0},{path:"/calculation",name:"worker计算",component:()=>i(()=>import("./CalculationView-BZXek3tC.js"),__vite__mapDeps([13,1,2]))},{path:"/webSocketPage",name:"WebSocket连接",component:()=>i(()=>import("./WebSocketPage-C_88GfoL.js"),__vite__mapDeps([14,1,2,15]))},{path:"/workflowView",name:"工作流",component:()=>i(()=>import("./WorkflowView-CFJlAbtT.js"),__vite__mapDeps([16,1,2,17]))},{path:"/BpmnContainerView",name:"工作流2",component:()=>i(()=>import("./BpmnContainerView-BhzcS3cm.js"),__vite__mapDeps([18,1,2,19]))},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>i(()=>import("./NotFound-aH7scwnL.js"),__vite__mapDeps([20,1,2])),hide:!0}],v=H({history:W("/autoDeploy/"),routes:[{path:"/",props:{routeList:T},component:he,children:T}]});v.beforeEach((e,t,s)=>{const r=g();if(document.title=e.name?`${e.name} - 我的应用`:"我的应用",e.meta.requiresAuth&&e.meta.requiresAuth!==r.crole){z({type:"info",message:"未登录! 请先登录再操作",duration:3e3}),s("/login");return}s()});v.afterEach((e,t)=>{const s=g();s.setMenuName(e.name),s.logRouterFlag&&fe({from:t.fullPath,to:e.fullPath,routeName:e.name||"unnamed",timestamp:new Date().toISOString()})});const ve={mounted(e,t){const s=g(),r=t.arg||"click",o=t.value;e.addEventListener(r,a=>{s.logClickFlag&&ge({timestamp:new Date().toISOString(),element:e.tagName.toLowerCase(),id:e.id||null,class:e.className||null,text:e.textContent.trim().substring(0,50),...typeof o=="object"?o:{value:o}})})}},ye={class:"global-list"},Le={key:0,class:"list-header"},be={class:"list-content"},Ae={key:1,class:"list-footer"},Ee={__name:"GlobalList",props:{items:{type:Array,default:()=>[]}},setup(e){return(t,s)=>(c(),u("div",ye,[t.$slots.header?(c(),u("div",Le,[b(t.$slots,"header",{},void 0,!0)])):P("",!0),n("div",be,[(c(!0),u(N,null,D(e.items,(r,o)=>(c(),u("li",{key:o,class:"list-item"},[b(t.$slots,"default",{unit:r,index:o},()=>[R(_(r),1)],!0)]))),128))]),t.$slots.footer?(c(),u("div",Ae,[b(t.$slots,"footer",{},void 0,!0)])):P("",!0)]))}},Pe=k(Ee,[["__scopeId","data-v-6b693776"]]),m=Q(Z);m.use(U());m.component("CommonList",Pe);m.directive("track",ve);m.directive("permission",te);m.mixin(oe);m.use(v);m.mount("#app");export{k as _,v as r,g as u};
