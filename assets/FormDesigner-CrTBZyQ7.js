import{e as o,o as n,f as s,F as f,h as V,t as _,n as x,C as S,D as F,g as y,v as b,z as g,B as N,G as w,a as k,i as U,j as O}from"./vendor-Crb1Va-d.js";import{_ as D}from"./index-CLG5q7cM.js";const C={class:"palette"},j=["onDragstart"],J={__name:"FieldPalette",emits:["drag"],setup(c,{emit:v}){const r=[{type:"input",label:"æ–‡æœ¬è¾“å…¥"},{type:"select",label:"ä¸‹æ‹‰æ¡†",options:["a","b"]},{type:"textarea",label:"å¤šè¡Œæ–‡æœ¬"}];function t(e){event.dataTransfer.setData("field",JSON.stringify(e))}return(e,u)=>(n(),o("div",C,[u[0]||(u[0]=s("h3",null,"å­—æ®µç»„ä»¶(å¯æ‹–æ‹½åˆ°ç”»å¸ƒåŒºåŸŸ)",-1)),(n(),o(f,null,V(r,l=>s("div",{key:l.type,class:"draggable-item",draggable:"true",onDragstart:a=>t(l)},_(l.label),41,j)),64))]))}},R=["onClick"],T={__name:"DesignerCanvas",props:["schema","selected"],emits:["update:schema","select"],setup(c,{emit:v}){const r=c,t=v;function e(l){const a=JSON.parse(l.dataTransfer.getData("field")),d={...a,id:F(),label:a.label,field:`field_${Date.now()}`,props:{placeholder:""}};t("update:schema",[...r.schema,d])}function u(l){t("select",l)}return(l,a)=>(n(),o("div",{class:"canvas",onDragover:a[0]||(a[0]=S(()=>{},["prevent"])),onDrop:e},[a[1]||(a[1]=s("h3",null,"ç”»å¸ƒåŒºåŸŸ",-1)),(n(!0),o(f,null,V(c.schema,(d,p)=>(n(),o("div",{key:d.id,class:x(["canvas-item",{active:c.selected===d.id}]),onClick:i=>u(d.id)},_(d.label)+": "+_(d.type),11,R))),128))],32))}},B={class:"field-editor"},I={class:"field-group"},L={class:"field-group"},E=["onUpdate:modelValue"],M={key:0,class:"field-group"},z=["onUpdate:modelValue"],A={key:1,class:"field-group"},G=["onUpdate:modelValue"],P={key:2,class:"field-group"},q=["value","onInput"],H={__name:"FieldEditor",props:{schema:Array},setup(c){function v(r,t){t.options=r.target.value.split(",").map(e=>e.trim())}return(r,t)=>(n(),o("div",B,[t[5]||(t[5]=s("h3",null,"âš™ å­—æ®µé…ç½®",-1)),(n(!0),o(f,null,V(c.schema,(e,u)=>(n(),o("div",{key:e.id,class:"field-block"},[s("label",null,"å­—æ®µ "+_(u+1),1),s("div",I,[t[0]||(t[0]=s("span",{class:"field-label"},"å­—æ®µç±»åž‹ï¼š",-1)),s("span",null,_(e.type),1)]),s("div",L,[t[1]||(t[1]=s("label",{class:"field-label"},"æ ‡é¢˜ï¼š",-1)),b(s("input",{"onUpdate:modelValue":l=>e.label=l,class:"input"},null,8,E),[[g,e.label]])]),e.type==="input"?(n(),o("div",M,[t[2]||(t[2]=s("label",{class:"field-label"},"å ä½ç¬¦ï¼š",-1)),b(s("input",{"onUpdate:modelValue":l=>e.placeholder=l,class:"input"},null,8,z),[[g,e.placeholder]])])):y("",!0),e.type==="textarea"?(n(),o("div",A,[t[3]||(t[3]=s("label",{class:"field-label"},"å ä½ç¬¦ï¼š",-1)),b(s("input",{"onUpdate:modelValue":l=>e.placeholder=l,class:"input"},null,8,G),[[g,e.placeholder]])])):y("",!0),e.type==="select"?(n(),o("div",P,[t[4]||(t[4]=s("label",{class:"field-label"},"é€‰é¡¹ï¼ˆé€—å·åˆ†éš”ï¼‰ï¼š",-1)),s("input",{value:(e.options||[]).join(","),onInput:l=>v(l,e),class:"input"},null,40,q)])):y("",!0)]))),128))]))}},K=D(H,[["__scopeId","data-v-832800d2"]]),Q={class:"form-renderer"},W=["onUpdate:modelValue"],X=["onUpdate:modelValue"],Y=["onUpdate:modelValue"],Z=["value"],ee={__name:"FormRenderer",props:["schema","modelValue"],emits:["update:modelValue"],setup(c,{emit:v}){const r=c,t=v,e=N({get:()=>r.modelValue||{},set:u=>t("update:modelValue",u)});return(u,l)=>(n(),o("div",Q,[l[0]||(l[0]=s("h3",null,"ðŸ“‹ è¡¨å•é¢„è§ˆ",-1)),(n(!0),o(f,null,V(c.schema,a=>(n(),o("div",{key:a.id,class:"form-item"},[s("label",null,_(a.label)+": ",1),a.type==="input"?b((n(),o("input",{key:0,"onUpdate:modelValue":d=>e.value[a.id]=d,class:"input"},null,8,W)),[[g,e.value[a.id]]]):y("",!0),a.type==="textarea"?b((n(),o("textarea",{key:1,"onUpdate:modelValue":d=>e.value[a.id]=d,class:"input"},null,8,X)),[[g,e.value[a.id]]]):a.type==="select"?b((n(),o("select",{key:2,"onUpdate:modelValue":d=>e.value[a.id]=d,class:"input"},[(n(!0),o(f,null,V(a.options,d=>(n(),o("option",{key:d,value:d},_(d),9,Z))),128))],8,Y)),[[w,e.value[a.id]]]):y("",!0)]))),128))]))}},te=D(ee,[["__scopeId","data-v-ad44b7f5"]]),se={class:"lowcode-editor"},ae={class:"editor-main"},le={class:"editor-footer"},oe={class:"toolbar"},ne={class:"btn"},de={__name:"FormDesigner",setup(c){function v(p,i="form-schema.json"){const m=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),h=URL.createObjectURL(m),$=document.createElement("a");$.href=h,$.download=i,$.click(),URL.revokeObjectURL(h)}const r=k({}),t=k([]),e=k(null);function u(p){t.value=p}function l(p){e.value=p}function a(){v({schema:t.value,data:r.value})}function d(p){const i=p.target.files[0],m=new FileReader;m.onload=()=>{try{const h=JSON.parse(m.result);t.value=h.schema||[],r.value=h.data||{}}catch{alert("å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼é”™è¯¯")}},m.readAsText(i)}return(p,i)=>(n(),o("div",se,[i[3]||(i[3]=s("h2",{class:"header"},"ðŸ§© ä½Žä»£ç è¡¨å•ç¼–è¾‘å™¨",-1)),s("div",ae,[U(J,{class:"editor-panel"}),U(T,{class:"editor-canvas",schema:t.value,selected:e.value,"onUpdate:selected":i[0]||(i[0]=m=>e.value=m),"onUpdate:schema":u,onSelect:l},null,8,["schema","selected"]),U(K,{class:"editor-panel",schema:t.value,selected:e.value,"onUpdate:schema":u},null,8,["schema","selected"])]),s("div",le,[s("div",oe,[s("button",{class:"btn",onClick:a},"å¯¼å‡º JSON"),s("label",ne,[i[2]||(i[2]=O(" å¯¼å…¥ JSON ")),s("input",{type:"file",accept:"application/json",onChange:d,hidden:""},null,32)])]),U(te,{schema:t.value,modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=m=>r.value=m)},null,8,["schema","modelValue"])])]))}},ue=D(de,[["__scopeId","data-v-5d90b735"]]);export{ue as default};
