import{p as a,J as y,C as D,a as r,o as u,b as l,e as k,q as x,x as V,h as B,t as f,s as w}from"./vendor-5kUzFu23.js";function T(o){return new Worker("/autoDeploy/assets/calculator.worker-FEYjYm_A.js",{name:o==null?void 0:o.name})}const W={class:"calculation-view"},$={class:"border p-5 m-5"},j={key:0,class:"border p-5 m-5"},F={key:1,class:"border p-5 m-5"},N=Object.assign({name:"calcPage"},{__name:"CalculationView",setup(o){const i=a(null),t=a(null),c=a(!1),v=a(0),n=a(null),_=a(null),C=()=>{t.value=new T,t.value.onmessage=g=>{const{type:e,progress:m,result:p}=g.data;if(e==="progress")v.value=m.toFixed(2);else if(e==="result"){n.value=p.toFixed(4),_.value=new Date().toLocaleTimeString(),c.value=!1;const d=performance.now();console.log(`maxcnt_: ${s.value}, 耗时：${d-i.value} 微秒`)}}},s=a(5e8),b=()=>{i.value=performance.now(),console.log(`maxcnt_: ${s.value}, start_: ${i.value}`),t.value||C(),c.value=!0,v.value=0,n.value=null,t.value.postMessage({type:"start",data:{maxIterations:s.value}})};return y(()=>{t.value&&(t.value.terminate(),t.value=null)}),D(()=>{t.value}),(g,e)=>{const m=w("track"),p=w("permission");return u(),r("div",W,[e[3]||(e[3]=l("h2",null,"耗时计算界面",-1)),l("div",$,[x(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>s.value=d),placeholder:"please input timeCount",class:"p-5 m-5"},null,512),[[V,s.value]]),x((u(),r("button",{class:"btn",onClick:b},e[1]||(e[1]=[B("开始计算(管理员权限)")]))),[[m,"calcBtn",void 0,{click:!0}],[p,"admin"]])]),c.value?(u(),r("div",j,[l("p",null,"计算进度: "+f(v.value)+"%",1),e[2]||(e[2]=l("p",null,"计算中... 可以切换到其他界面，计算不会中断",-1))])):k("",!0),n.value?(u(),r("div",F,[l("h3",null,"计算结果: "+f(n.value),1),l("p",null,"计算完成时间: "+f(_.value),1)])):k("",!0)])}}});export{N as default};
