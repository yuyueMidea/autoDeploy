/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Jh(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ye={},fs=[],Kn=()=>{},ZC=()=>!1,Tu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Xh=e=>e.startsWith("onUpdate:"),Ot=Object.assign,Zh=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},QC=Object.prototype.hasOwnProperty,je=(e,t)=>QC.call(e,t),ue=Array.isArray,ps=e=>Is(e)==="[object Map]",Ms=e=>Is(e)==="[object Set]",km=e=>Is(e)==="[object Date]",eR=e=>Is(e)==="[object RegExp]",_e=e=>typeof e=="function",Je=e=>typeof e=="string",Xn=e=>typeof e=="symbol",Ge=e=>e!==null&&typeof e=="object",P0=e=>(Ge(e)||_e(e))&&_e(e.then)&&_e(e.catch),A0=Object.prototype.toString,Is=e=>A0.call(e),tR=e=>Is(e).slice(8,-1),k0=e=>Is(e)==="[object Object]",Qh=e=>Je(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ca=Jh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Pu=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},nR=/-(\w)/g,Mn=Pu(e=>e.replace(nR,(t,n)=>n?n.toUpperCase():"")),iR=/\B([A-Z])/g,Ro=Pu(e=>e.replace(iR,"-$1").toLowerCase()),Au=Pu(e=>e.charAt(0).toUpperCase()+e.slice(1)),Kf=Pu(e=>e?`on${Au(e)}`:""),wr=(e,t)=>!Object.is(e,t),hs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},O0=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},ql=e=>{const t=parseFloat(e);return isNaN(t)?e:t},rR=e=>{const t=Je(e)?Number(e):NaN;return isNaN(t)?e:t};let Om;const ku=()=>Om||(Om=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function uc(e){if(ue(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=Je(i)?cR(i):uc(i);if(r)for(const o in r)t[o]=r[o]}return t}else if(Je(e)||Ge(e))return e}const oR=/;(?![^(]*\))/g,sR=/:([^]+)/,aR=/\/\*[^]*?\*\//g;function cR(e){const t={};return e.replace(aR,"").split(oR).forEach(n=>{if(n){const i=n.split(sR);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Vn(e){let t="";if(Je(e))t=e;else if(ue(e))for(let n=0;n<e.length;n++){const i=Vn(e[n]);i&&(t+=i+" ")}else if(Ge(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const lR="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",uR=Jh(lR);function D0(e){return!!e||e===""}function fR(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=fc(e[i],t[i]);return n}function fc(e,t){if(e===t)return!0;let n=km(e),i=km(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=Xn(e),i=Xn(t),n||i)return e===t;if(n=ue(e),i=ue(t),n||i)return n&&i?fR(e,t):!1;if(n=Ge(e),i=Ge(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,o=Object.keys(t).length;if(r!==o)return!1;for(const s in e){const a=e.hasOwnProperty(s),c=t.hasOwnProperty(s);if(a&&!c||!a&&c||!fc(e[s],t[s]))return!1}}return String(e)===String(t)}function ed(e,t){return e.findIndex(n=>fc(n,t))}const M0=e=>!!(e&&e.__v_isRef===!0),td=e=>Je(e)?e:e==null?"":ue(e)||Ge(e)&&(e.toString===A0||!_e(e.toString))?M0(e)?td(e.value):JSON.stringify(e,I0,2):String(e),I0=(e,t)=>M0(t)?I0(e,t.value):ps(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],o)=>(n[qf(i,o)+" =>"]=r,n),{})}:Ms(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>qf(n))}:Xn(t)?qf(t):Ge(t)&&!ue(t)&&!k0(t)?String(t):t,qf=(e,t="")=>{var n;return Xn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let en;class N0{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=en,!t&&en&&(this.index=(en.scopes||(en.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=en;try{return en=this,t()}finally{en=n}}}on(){en=this}off(){en=this.parent}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function $0(e){return new N0(e)}function nd(){return en}function L0(e,t=!1){en&&en.cleanups.push(e)}let Qe;const Yf=new WeakSet;class B0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,en&&en.active&&en.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yf.has(this)&&(Yf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||F0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Dm(this),H0(this);const t=Qe,n=qn;Qe=this,qn=!0;try{return this.fn()}finally{z0(this),Qe=t,qn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)od(t);this.deps=this.depsTail=void 0,Dm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zp(this)&&this.run()}get dirty(){return zp(this)}}let j0=0,Ra,Ta;function F0(e,t=!1){if(e.flags|=8,t){e.next=Ta,Ta=e;return}e.next=Ra,Ra=e}function id(){j0++}function rd(){if(--j0>0)return;if(Ta){let t=Ta;for(Ta=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ra;){let t=Ra;for(Ra=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function H0(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function z0(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),od(i),pR(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function zp(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(U0(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function U0(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ua))return;e.globalVersion=Ua;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!zp(e)){e.flags&=-3;return}const n=Qe,i=qn;Qe=e,qn=!0;try{H0(e);const r=e.fn(e._value);(t.version===0||wr(r,e._value))&&(e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Qe=n,qn=i,z0(e),e.flags&=-3}}function od(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)od(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function pR(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let qn=!0;const V0=[];function Ar(){V0.push(qn),qn=!1}function kr(){const e=V0.pop();qn=e===void 0?!0:e}function Dm(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Qe;Qe=void 0;try{t()}finally{Qe=n}}}let Ua=0;class hR{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class sd{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Qe||!qn||Qe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Qe)n=this.activeLink=new hR(Qe,this),Qe.deps?(n.prevDep=Qe.depsTail,Qe.depsTail.nextDep=n,Qe.depsTail=n):Qe.deps=Qe.depsTail=n,W0(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Qe.depsTail,n.nextDep=void 0,Qe.depsTail.nextDep=n,Qe.depsTail=n,Qe.deps===n&&(Qe.deps=i)}return n}trigger(t){this.version++,Ua++,this.notify(t)}notify(t){id();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{rd()}}}function W0(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)W0(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Yl=new WeakMap,go=Symbol(""),Up=Symbol(""),Va=Symbol("");function Gt(e,t,n){if(qn&&Qe){let i=Yl.get(e);i||Yl.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new sd),r.map=i,r.key=n),r.track()}}function Oi(e,t,n,i,r,o){const s=Yl.get(e);if(!s){Ua++;return}const a=c=>{c&&c.trigger()};if(id(),t==="clear")s.forEach(a);else{const c=ue(e),l=c&&Qh(n);if(c&&n==="length"){const u=Number(i);s.forEach((f,p)=>{(p==="length"||p===Va||!Xn(p)&&p>=u)&&a(f)})}else switch((n!==void 0||s.has(void 0))&&a(s.get(n)),l&&a(s.get(Va)),t){case"add":c?l&&a(s.get("length")):(a(s.get(go)),ps(e)&&a(s.get(Up)));break;case"delete":c||(a(s.get(go)),ps(e)&&a(s.get(Up)));break;case"set":ps(e)&&a(s.get(go));break}}rd()}function dR(e,t){const n=Yl.get(e);return n&&n.get(t)}function Fo(e){const t=Be(e);return t===e?t:(Gt(t,"iterate",Va),On(e)?t:t.map(Kt))}function Ou(e){return Gt(e=Be(e),"iterate",Va),e}const gR={__proto__:null,[Symbol.iterator](){return Jf(this,Symbol.iterator,Kt)},concat(...e){return Fo(this).concat(...e.map(t=>ue(t)?Fo(t):t))},entries(){return Jf(this,"entries",e=>(e[1]=Kt(e[1]),e))},every(e,t){return Si(this,"every",e,t,void 0,arguments)},filter(e,t){return Si(this,"filter",e,t,n=>n.map(Kt),arguments)},find(e,t){return Si(this,"find",e,t,Kt,arguments)},findIndex(e,t){return Si(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Si(this,"findLast",e,t,Kt,arguments)},findLastIndex(e,t){return Si(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Si(this,"forEach",e,t,void 0,arguments)},includes(...e){return Xf(this,"includes",e)},indexOf(...e){return Xf(this,"indexOf",e)},join(e){return Fo(this).join(e)},lastIndexOf(...e){return Xf(this,"lastIndexOf",e)},map(e,t){return Si(this,"map",e,t,void 0,arguments)},pop(){return na(this,"pop")},push(...e){return na(this,"push",e)},reduce(e,...t){return Mm(this,"reduce",e,t)},reduceRight(e,...t){return Mm(this,"reduceRight",e,t)},shift(){return na(this,"shift")},some(e,t){return Si(this,"some",e,t,void 0,arguments)},splice(...e){return na(this,"splice",e)},toReversed(){return Fo(this).toReversed()},toSorted(e){return Fo(this).toSorted(e)},toSpliced(...e){return Fo(this).toSpliced(...e)},unshift(...e){return na(this,"unshift",e)},values(){return Jf(this,"values",Kt)}};function Jf(e,t,n){const i=Ou(e),r=i[t]();return i!==e&&!On(e)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.value&&(o.value=n(o.value)),o}),r}const mR=Array.prototype;function Si(e,t,n,i,r,o){const s=Ou(e),a=s!==e&&!On(e),c=s[t];if(c!==mR[t]){const f=c.apply(e,o);return a?Kt(f):f}let l=n;s!==e&&(a?l=function(f,p){return n.call(this,Kt(f),p,e)}:n.length>2&&(l=function(f,p){return n.call(this,f,p,e)}));const u=c.call(s,l,i);return a&&r?r(u):u}function Mm(e,t,n,i){const r=Ou(e);let o=n;return r!==e&&(On(e)?n.length>3&&(o=function(s,a,c){return n.call(this,s,a,c,e)}):o=function(s,a,c){return n.call(this,s,Kt(a),c,e)}),r[t](o,...i)}function Xf(e,t,n){const i=Be(e);Gt(i,"iterate",Va);const r=i[t](...n);return(r===-1||r===!1)&&fd(n[0])?(n[0]=Be(n[0]),i[t](...n)):r}function na(e,t,n=[]){Ar(),id();const i=Be(e)[t].apply(e,n);return rd(),kr(),i}const vR=Jh("__proto__,__v_isRef,__isVue"),G0=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Xn));function yR(e){Xn(e)||(e=String(e));const t=Be(this);return Gt(t,"has",e),t.hasOwnProperty(e)}class K0{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return o;if(n==="__v_raw")return i===(r?o?PR:X0:o?J0:Y0).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const s=ue(t);if(!r){let c;if(s&&(c=gR[n]))return c;if(n==="hasOwnProperty")return yR}const a=Reflect.get(t,n,ft(t)?t:i);return(Xn(n)?G0.has(n):vR(n))||(r||Gt(t,"get",n),o)?a:ft(a)?s&&Qh(n)?a:a.value:Ge(a)?r?ld(a):pc(a):a}}class q0 extends K0{constructor(t=!1){super(!1,t)}set(t,n,i,r){let o=t[n];if(!this._isShallow){const c=_o(o);if(!On(i)&&!_o(i)&&(o=Be(o),i=Be(i)),!ue(t)&&ft(o)&&!ft(i))return c?!1:(o.value=i,!0)}const s=ue(t)&&Qh(n)?Number(n)<t.length:je(t,n),a=Reflect.set(t,n,i,ft(t)?t:r);return t===Be(r)&&(s?wr(i,o)&&Oi(t,"set",n,i):Oi(t,"add",n,i)),a}deleteProperty(t,n){const i=je(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&Oi(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!Xn(n)||!G0.has(n))&&Gt(t,"has",n),i}ownKeys(t){return Gt(t,"iterate",ue(t)?"length":go),Reflect.ownKeys(t)}}class _R extends K0{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const bR=new q0,wR=new _R,ER=new q0(!0);const Vp=e=>e,Jc=e=>Reflect.getPrototypeOf(e);function xR(e,t,n){return function(...i){const r=this.__v_raw,o=Be(r),s=ps(o),a=e==="entries"||e===Symbol.iterator&&s,c=e==="keys"&&s,l=r[e](...i),u=n?Vp:t?Wp:Kt;return!t&&Gt(o,"iterate",c?Up:go),{next(){const{value:f,done:p}=l.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Xc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function SR(e,t){const n={get(r){const o=this.__v_raw,s=Be(o),a=Be(r);e||(wr(r,a)&&Gt(s,"get",r),Gt(s,"get",a));const{has:c}=Jc(s),l=t?Vp:e?Wp:Kt;if(c.call(s,r))return l(o.get(r));if(c.call(s,a))return l(o.get(a));o!==s&&o.get(r)},get size(){const r=this.__v_raw;return!e&&Gt(Be(r),"iterate",go),Reflect.get(r,"size",r)},has(r){const o=this.__v_raw,s=Be(o),a=Be(r);return e||(wr(r,a)&&Gt(s,"has",r),Gt(s,"has",a)),r===a?o.has(r):o.has(r)||o.has(a)},forEach(r,o){const s=this,a=s.__v_raw,c=Be(a),l=t?Vp:e?Wp:Kt;return!e&&Gt(c,"iterate",go),a.forEach((u,f)=>r.call(o,l(u),l(f),s))}};return Ot(n,e?{add:Xc("add"),set:Xc("set"),delete:Xc("delete"),clear:Xc("clear")}:{add(r){!t&&!On(r)&&!_o(r)&&(r=Be(r));const o=Be(this);return Jc(o).has.call(o,r)||(o.add(r),Oi(o,"add",r,r)),this},set(r,o){!t&&!On(o)&&!_o(o)&&(o=Be(o));const s=Be(this),{has:a,get:c}=Jc(s);let l=a.call(s,r);l||(r=Be(r),l=a.call(s,r));const u=c.call(s,r);return s.set(r,o),l?wr(o,u)&&Oi(s,"set",r,o):Oi(s,"add",r,o),this},delete(r){const o=Be(this),{has:s,get:a}=Jc(o);let c=s.call(o,r);c||(r=Be(r),c=s.call(o,r)),a&&a.call(o,r);const l=o.delete(r);return c&&Oi(o,"delete",r,void 0),l},clear(){const r=Be(this),o=r.size!==0,s=r.clear();return o&&Oi(r,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=xR(r,e,t)}),n}function ad(e,t){const n=SR(e,t);return(i,r,o)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(je(n,r)&&r in i?n:i,r,o)}const CR={get:ad(!1,!1)},RR={get:ad(!1,!0)},TR={get:ad(!0,!1)};const Y0=new WeakMap,J0=new WeakMap,X0=new WeakMap,PR=new WeakMap;function AR(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kR(e){return e.__v_skip||!Object.isExtensible(e)?0:AR(tR(e))}function pc(e){return _o(e)?e:ud(e,!1,bR,CR,Y0)}function cd(e){return ud(e,!1,ER,RR,J0)}function ld(e){return ud(e,!0,wR,TR,X0)}function ud(e,t,n,i,r){if(!Ge(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=r.get(e);if(o)return o;const s=kR(e);if(s===0)return e;const a=new Proxy(e,s===2?i:n);return r.set(e,a),a}function Er(e){return _o(e)?Er(e.__v_raw):!!(e&&e.__v_isReactive)}function _o(e){return!!(e&&e.__v_isReadonly)}function On(e){return!!(e&&e.__v_isShallow)}function fd(e){return e?!!e.__v_raw:!1}function Be(e){const t=e&&e.__v_raw;return t?Be(t):e}function pd(e){return!je(e,"__v_skip")&&Object.isExtensible(e)&&O0(e,"__v_skip",!0),e}const Kt=e=>Ge(e)?pc(e):e,Wp=e=>Ge(e)?ld(e):e;function ft(e){return e?e.__v_isRef===!0:!1}function nn(e){return Z0(e,!1)}function OR(e){return Z0(e,!0)}function Z0(e,t){return ft(e)?e:new DR(e,t)}class DR{constructor(t,n){this.dep=new sd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Be(t),this._value=n?t:Kt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||On(t)||_o(t);t=i?t:Be(t),wr(t,n)&&(this._rawValue=t,this._value=i?t:Kt(t),this.dep.trigger())}}function be(e){return ft(e)?e.value:e}const MR={get:(e,t,n)=>t==="__v_raw"?e:be(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return ft(r)&&!ft(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function Q0(e){return Er(e)?e:new Proxy(e,MR)}function IR(e){const t=ue(e)?new Array(e.length):{};for(const n in e)t[n]=$R(e,n);return t}class NR{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return dR(Be(this._object),this._key)}}function $R(e,t,n){const i=e[t];return ft(i)?i:new NR(e,t,n)}class LR{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new sd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ua-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Qe!==this)return F0(this,!0),!0}get value(){const t=this.dep.track();return U0(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function BR(e,t,n=!1){let i,r;return _e(e)?i=e:(i=e.get,r=e.set),new LR(i,r,n)}const Zc={},Jl=new WeakMap;let so;function jR(e,t=!1,n=so){if(n){let i=Jl.get(n);i||Jl.set(n,i=[]),i.push(e)}}function FR(e,t,n=Ye){const{immediate:i,deep:r,once:o,scheduler:s,augmentJob:a,call:c}=n,l=y=>r?y:On(y)||r===!1||r===0?Di(y,1):Di(y);let u,f,p,h,d=!1,g=!1;if(ft(e)?(f=()=>e.value,d=On(e)):Er(e)?(f=()=>l(e),d=!0):ue(e)?(g=!0,d=e.some(y=>Er(y)||On(y)),f=()=>e.map(y=>{if(ft(y))return y.value;if(Er(y))return l(y);if(_e(y))return c?c(y,2):y()})):_e(e)?t?f=c?()=>c(e,2):e:f=()=>{if(p){Ar();try{p()}finally{kr()}}const y=so;so=u;try{return c?c(e,3,[h]):e(h)}finally{so=y}}:f=Kn,t&&r){const y=f,R=r===!0?1/0:r;f=()=>Di(y(),R)}const m=nd(),E=()=>{u.stop(),m&&m.active&&Zh(m.effects,u)};if(o&&t){const y=t;t=(...R)=>{y(...R),E()}}let x=g?new Array(e.length).fill(Zc):Zc;const b=y=>{if(!(!(u.flags&1)||!u.dirty&&!y))if(t){const R=u.run();if(r||d||(g?R.some((P,N)=>wr(P,x[N])):wr(R,x))){p&&p();const P=so;so=u;try{const N=[R,x===Zc?void 0:g&&x[0]===Zc?[]:x,h];c?c(t,3,N):t(...N),x=R}finally{so=P}}}else u.run()};return a&&a(b),u=new B0(f),u.scheduler=s?()=>s(b,!1):b,h=y=>jR(y,!1,u),p=u.onStop=()=>{const y=Jl.get(u);if(y){if(c)c(y,4);else for(const R of y)R();Jl.delete(u)}},t?i?b(!0):x=u.run():s?s(b.bind(null,!0),!0):u.run(),E.pause=u.pause.bind(u),E.resume=u.resume.bind(u),E.stop=E,E}function Di(e,t=1/0,n){if(t<=0||!Ge(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ft(e))Di(e.value,t,n);else if(ue(e))for(let i=0;i<e.length;i++)Di(e[i],t,n);else if(Ms(e)||ps(e))e.forEach(i=>{Di(i,t,n)});else if(k0(e)){for(const i in e)Di(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&Di(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hc(e,t,n,i){try{return i?e(...i):e()}catch(r){Du(r,t,n)}}function Zn(e,t,n,i){if(_e(e)){const r=hc(e,t,n,i);return r&&P0(r)&&r.catch(o=>{Du(o,t,n)}),r}if(ue(e)){const r=[];for(let o=0;o<e.length;o++)r.push(Zn(e[o],t,n,i));return r}}function Du(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||Ye;if(t){let a=t.parent;const c=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,c,l)===!1)return}a=a.parent}if(o){Ar(),hc(o,null,10,[e,c,l]),kr();return}}HR(e,n,r,i,s)}function HR(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const tn=[];let li=-1;const ds=[];let fr=null,ss=0;const ew=Promise.resolve();let Xl=null;function Ns(e){const t=Xl||ew;return e?t.then(this?e.bind(this):e):t}function zR(e){let t=li+1,n=tn.length;for(;t<n;){const i=t+n>>>1,r=tn[i],o=Wa(r);o<e||o===e&&r.flags&2?t=i+1:n=i}return t}function hd(e){if(!(e.flags&1)){const t=Wa(e),n=tn[tn.length-1];!n||!(e.flags&2)&&t>=Wa(n)?tn.push(e):tn.splice(zR(t),0,e),e.flags|=1,tw()}}function tw(){Xl||(Xl=ew.then(iw))}function UR(e){ue(e)?ds.push(...e):fr&&e.id===-1?fr.splice(ss+1,0,e):e.flags&1||(ds.push(e),e.flags|=1),tw()}function Im(e,t,n=li+1){for(;n<tn.length;n++){const i=tn[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;tn.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function nw(e){if(ds.length){const t=[...new Set(ds)].sort((n,i)=>Wa(n)-Wa(i));if(ds.length=0,fr){fr.push(...t);return}for(fr=t,ss=0;ss<fr.length;ss++){const n=fr[ss];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fr=null,ss=0}}const Wa=e=>e.id==null?e.flags&2?-1:1/0:e.id;function iw(e){try{for(li=0;li<tn.length;li++){const t=tn[li];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),hc(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;li<tn.length;li++){const t=tn[li];t&&(t.flags&=-2)}li=-1,tn.length=0,nw(),Xl=null,(tn.length||ds.length)&&iw()}}let St=null,rw=null;function Zl(e){const t=St;return St=e,rw=e&&e.type.__scopeId||null,t}function Pa(e,t=St,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Vm(-1);const o=Zl(t);let s;try{s=e(...r)}finally{Zl(o),i._d&&Vm(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function ow(e,t){if(St===null)return e;const n=Lu(St),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,s,a,c=Ye]=t[r];o&&(_e(o)&&(o={mounted:o,updated:o}),o.deep&&Di(s),i.push({dir:o,instance:n,value:s,oldValue:void 0,arg:a,modifiers:c}))}return e}function Jr(e,t,n,i){const r=e.dirs,o=t&&t.dirs;for(let s=0;s<r.length;s++){const a=r[s];o&&(a.oldValue=o[s].value);let c=a.dir[i];c&&(Ar(),Zn(c,n,8,[e.el,a,e,t]),kr())}}const VR=Symbol("_vte"),sw=e=>e.__isTeleport,pr=Symbol("_leaveCb"),Qc=Symbol("_enterCb");function WR(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return dc(()=>{e.isMounted=!0}),dd(()=>{e.isUnmounting=!0}),e}const Sn=[Function,Array],aw={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Sn,onEnter:Sn,onAfterEnter:Sn,onEnterCancelled:Sn,onBeforeLeave:Sn,onLeave:Sn,onAfterLeave:Sn,onLeaveCancelled:Sn,onBeforeAppear:Sn,onAppear:Sn,onAfterAppear:Sn,onAppearCancelled:Sn},cw=e=>{const t=e.subTree;return t.component?cw(t.component):t},GR={name:"BaseTransition",props:aw,setup(e,{slots:t}){const n=Cr(),i=WR();return()=>{const r=t.default&&fw(t.default(),!0);if(!r||!r.length)return;const o=lw(r),s=Be(e),{mode:a}=s;if(i.isLeaving)return Zf(o);const c=Nm(o);if(!c)return Zf(o);let l=Gp(c,s,i,n,f=>l=f);c.type!==qt&&gs(c,l);let u=n.subTree&&Nm(n.subTree);if(u&&u.type!==qt&&!vr(c,u)&&cw(n).type!==qt){let f=Gp(u,s,i,n);if(gs(u,f),a==="out-in"&&c.type!==qt)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},Zf(o);a==="in-out"&&c.type!==qt?f.delayLeave=(p,h,d)=>{const g=uw(i,u);g[String(u.key)]=u,p[pr]=()=>{h(),p[pr]=void 0,delete l.delayedLeave,u=void 0},l.delayedLeave=()=>{d(),delete l.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return o}}};function lw(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==qt){t=n;break}}return t}const KR=GR;function uw(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Gp(e,t,n,i,r){const{appear:o,mode:s,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:p,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:E,onAfterAppear:x,onAppearCancelled:b}=t,y=String(e.key),R=uw(n,e),P=(O,L)=>{O&&Zn(O,i,9,L)},N=(O,L)=>{const F=L[1];P(O,L),ue(O)?O.every(B=>B.length<=1)&&F():O.length<=1&&F()},k={mode:s,persisted:a,beforeEnter(O){let L=c;if(!n.isMounted)if(o)L=m||c;else return;O[pr]&&O[pr](!0);const F=R[y];F&&vr(e,F)&&F.el[pr]&&F.el[pr](),P(L,[O])},enter(O){let L=l,F=u,B=f;if(!n.isMounted)if(o)L=E||l,F=x||u,B=b||f;else return;let V=!1;const oe=O[Qc]=Ne=>{V||(V=!0,Ne?P(B,[O]):P(F,[O]),k.delayedLeave&&k.delayedLeave(),O[Qc]=void 0)};L?N(L,[O,oe]):oe()},leave(O,L){const F=String(e.key);if(O[Qc]&&O[Qc](!0),n.isUnmounting)return L();P(p,[O]);let B=!1;const V=O[pr]=oe=>{B||(B=!0,L(),oe?P(g,[O]):P(d,[O]),O[pr]=void 0,R[F]===e&&delete R[F])};R[F]=e,h?N(h,[O,V]):V()},clone(O){const L=Gp(O,t,n,i,r);return r&&r(L),L}};return k}function Zf(e){if(Mu(e))return e=Ui(e),e.children=null,e}function Nm(e){if(!Mu(e))return sw(e.type)&&e.children?lw(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&_e(n.default))return n.default()}}function gs(e,t){e.shapeFlag&6&&e.component?(e.transition=t,gs(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function fw(e,t=!1,n){let i=[],r=0;for(let o=0;o<e.length;o++){let s=e[o];const a=n==null?s.key:String(n)+String(s.key!=null?s.key:o);s.type===fn?(s.patchFlag&128&&r++,i=i.concat(fw(s.children,t,a))):(t||s.type!==qt)&&i.push(a!=null?Ui(s,{key:a}):s)}if(r>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function bn(e,t){return _e(e)?Ot({name:e.name},t,{setup:e}):e}function pw(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ql(e,t,n,i,r=!1){if(ue(e)){e.forEach((d,g)=>Ql(d,t&&(ue(t)?t[g]:t),n,i,r));return}if(mo(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Ql(e,t,n,i.component.subTree);return}const o=i.shapeFlag&4?Lu(i.component):i.el,s=r?null:o,{i:a,r:c}=e,l=t&&t.r,u=a.refs===Ye?a.refs={}:a.refs,f=a.setupState,p=Be(f),h=f===Ye?()=>!1:d=>je(p,d);if(l!=null&&l!==c&&(Je(l)?(u[l]=null,h(l)&&(f[l]=null)):ft(l)&&(l.value=null)),_e(c))hc(c,a,12,[s,u]);else{const d=Je(c),g=ft(c);if(d||g){const m=()=>{if(e.f){const E=d?h(c)?f[c]:u[c]:c.value;r?ue(E)&&Zh(E,o):ue(E)?E.includes(o)||E.push(o):d?(u[c]=[o],h(c)&&(f[c]=u[c])):(c.value=[o],e.k&&(u[e.k]=c.value))}else d?(u[c]=s,h(c)&&(f[c]=s)):g&&(c.value=s,e.k&&(u[e.k]=s))};s?(m.id=-1,Mt(m,n)):m()}}}ku().requestIdleCallback;ku().cancelIdleCallback;const mo=e=>!!e.type.__asyncLoader,Mu=e=>e.type.__isKeepAlive,qR={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Cr(),i=n.ctx;if(!i.renderer)return()=>{const x=t.default&&t.default();return x&&x.length===1?x[0]:x};const r=new Map,o=new Set;let s=null;const a=n.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:f}}}=i,p=f("div");i.activate=(x,b,y,R,P)=>{const N=x.component;l(x,b,y,0,a),c(N.vnode,x,b,y,N,a,R,x.slotScopeIds,P),Mt(()=>{N.isDeactivated=!1,N.a&&hs(N.a);const k=x.props&&x.props.onVnodeMounted;k&&Rn(k,N.parent,x)},a)},i.deactivate=x=>{const b=x.component;nu(b.m),nu(b.a),l(x,p,null,1,a),Mt(()=>{b.da&&hs(b.da);const y=x.props&&x.props.onVnodeUnmounted;y&&Rn(y,b.parent,x),b.isDeactivated=!0},a)};function h(x){Qf(x),u(x,n,a,!0)}function d(x){r.forEach((b,y)=>{const R=Zp(b.type);R&&!x(R)&&g(y)})}function g(x){const b=r.get(x);b&&(!s||!vr(b,s))?h(b):s&&Qf(s),r.delete(x),o.delete(x)}$i(()=>[e.include,e.exclude],([x,b])=>{x&&d(y=>wa(x,y)),b&&d(y=>!wa(b,y))},{flush:"post",deep:!0});let m=null;const E=()=>{m!=null&&(iu(n.subTree.type)?Mt(()=>{r.set(m,el(n.subTree))},n.subTree.suspense):r.set(m,el(n.subTree)))};return dc(E),dw(E),dd(()=>{r.forEach(x=>{const{subTree:b,suspense:y}=n,R=el(b);if(x.type===R.type&&x.key===R.key){Qf(R);const P=R.component.da;P&&Mt(P,y);return}h(x)})}),()=>{if(m=null,!t.default)return s=null;const x=t.default(),b=x[0];if(x.length>1)return s=null,x;if(!Sr(b)||!(b.shapeFlag&4)&&!(b.shapeFlag&128))return s=null,b;let y=el(b);if(y.type===qt)return s=null,y;const R=y.type,P=Zp(mo(y)?y.type.__asyncResolved||{}:R),{include:N,exclude:k,max:O}=e;if(N&&(!P||!wa(N,P))||k&&P&&wa(k,P))return y.shapeFlag&=-257,s=y,b;const L=y.key==null?R:y.key,F=r.get(L);return y.el&&(y=Ui(y),b.shapeFlag&128&&(b.ssContent=y)),m=L,F?(y.el=F.el,y.component=F.component,y.transition&&gs(y,y.transition),y.shapeFlag|=512,o.delete(L),o.add(L)):(o.add(L),O&&o.size>parseInt(O,10)&&g(o.values().next().value)),y.shapeFlag|=256,s=y,iu(b.type)?b:y}}},iH=qR;function wa(e,t){return ue(e)?e.some(n=>wa(n,t)):Je(e)?e.split(",").includes(t):eR(e)?(e.lastIndex=0,e.test(t)):!1}function YR(e,t){hw(e,"a",t)}function JR(e,t){hw(e,"da",t)}function hw(e,t,n=At){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Iu(t,i,n),n){let r=n.parent;for(;r&&r.parent;)Mu(r.parent.vnode)&&XR(i,t,n,r),r=r.parent}}function XR(e,t,n,i){const r=Iu(t,e,i,!0);gw(()=>{Zh(i[t],r)},n)}function Qf(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function el(e){return e.shapeFlag&128?e.ssContent:e}function Iu(e,t,n=At,i=!1){if(n){const r=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{Ar();const a=gc(n),c=Zn(t,n,e,s);return a(),kr(),c});return i?r.unshift(o):r.push(o),o}}const Vi=e=>(t,n=At)=>{(!Ka||e==="sp")&&Iu(e,(...i)=>t(...i),n)},ZR=Vi("bm"),dc=Vi("m"),QR=Vi("bu"),dw=Vi("u"),dd=Vi("bum"),gw=Vi("um"),eT=Vi("sp"),tT=Vi("rtg"),nT=Vi("rtc");function iT(e,t=At){Iu("ec",e,t)}const gd="components",rT="directives";function rH(e,t){return md(gd,e,!0,t)||e}const mw=Symbol.for("v-ndc");function oT(e){return Je(e)?md(gd,e,!1)||e:e||mw}function oH(e){return md(rT,e)}function md(e,t,n=!0,i=!1){const r=St||At;if(r){const o=r.type;if(e===gd){const a=Zp(o,!1);if(a&&(a===t||a===Mn(t)||a===Au(Mn(t))))return o}const s=$m(r[e]||o[e],t)||$m(r.appContext[e],t);return!s&&i?o:s}}function $m(e,t){return e&&(e[t]||e[Mn(t)]||e[Au(Mn(t))])}function sH(e,t,n,i){let r;const o=n,s=ue(e);if(s||Je(e)){const a=s&&Er(e);let c=!1;a&&(c=!On(e),e=Ou(e)),r=new Array(e.length);for(let l=0,u=e.length;l<u;l++)r[l]=t(c?Kt(e[l]):e[l],l,void 0,o)}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,o)}else if(Ge(e))if(e[Symbol.iterator])r=Array.from(e,(a,c)=>t(a,c,void 0,o));else{const a=Object.keys(e);r=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];r[c]=t(e[u],u,c,o)}}else r=[];return r}function eu(e,t,n={},i,r){if(St.ce||St.parent&&mo(St.parent)&&St.parent.ce)return t!=="default"&&(n.name=t),Nt(),mr(fn,null,[Lt("slot",n,i&&i())],64);let o=e[t];o&&o._c&&(o._d=!1),Nt();const s=o&&vw(o(n)),a=n.key||s&&s.key,c=mr(fn,{key:(a&&!Xn(a)?a:`_${t}`)+(!s&&i?"_fb":"")},s||(i?i():[]),s&&e._===1?64:-2);return!r&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),o&&o._c&&(o._d=!0),c}function vw(e){return e.some(t=>Sr(t)?!(t.type===qt||t.type===fn&&!vw(t.children)):!0)?e:null}const Kp=e=>e?Bw(e)?Lu(e):Kp(e.parent):null,Aa=Ot(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Kp(e.parent),$root:e=>Kp(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>_w(e),$forceUpdate:e=>e.f||(e.f=()=>{hd(e.update)}),$nextTick:e=>e.n||(e.n=Ns.bind(e.proxy)),$watch:e=>TT.bind(e)}),ep=(e,t)=>e!==Ye&&!e.__isScriptSetup&&je(e,t),sT={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:o,accessCache:s,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const h=s[t];if(h!==void 0)switch(h){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return o[t]}else{if(ep(i,t))return s[t]=1,i[t];if(r!==Ye&&je(r,t))return s[t]=2,r[t];if((l=e.propsOptions[0])&&je(l,t))return s[t]=3,o[t];if(n!==Ye&&je(n,t))return s[t]=4,n[t];qp&&(s[t]=0)}}const u=Aa[t];let f,p;if(u)return t==="$attrs"&&Gt(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==Ye&&je(n,t))return s[t]=4,n[t];if(p=c.config.globalProperties,je(p,t))return p[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:o}=e;return ep(r,t)?(r[t]=n,!0):i!==Ye&&je(i,t)?(i[t]=n,!0):je(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:o}},s){let a;return!!n[s]||e!==Ye&&je(e,s)||ep(t,s)||(a=o[0])&&je(a,s)||je(i,s)||je(Aa,s)||je(r.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:je(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Lm(e){return ue(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let qp=!0;function aT(e){const t=_w(e),n=e.proxy,i=e.ctx;qp=!1,t.beforeCreate&&Bm(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:s,watch:a,provide:c,inject:l,created:u,beforeMount:f,mounted:p,beforeUpdate:h,updated:d,activated:g,deactivated:m,beforeDestroy:E,beforeUnmount:x,destroyed:b,unmounted:y,render:R,renderTracked:P,renderTriggered:N,errorCaptured:k,serverPrefetch:O,expose:L,inheritAttrs:F,components:B,directives:V,filters:oe}=t;if(l&&cT(l,i,null),s)for(const Q in s){const we=s[Q];_e(we)&&(i[Q]=we.bind(n))}if(r){const Q=r.call(n,n);Ge(Q)&&(e.data=pc(Q))}if(qp=!0,o)for(const Q in o){const we=o[Q],ot=_e(we)?we.bind(n,n):_e(we.get)?we.get.bind(n,n):Kn,$e=!_e(we)&&_e(we.set)?we.set.bind(n):Kn,Ue=De({get:ot,set:$e});Object.defineProperty(i,Q,{enumerable:!0,configurable:!0,get:()=>Ue.value,set:U=>Ue.value=U})}if(a)for(const Q in a)yw(a[Q],i,n,Q);if(c){const Q=_e(c)?c.call(n):c;Reflect.ownKeys(Q).forEach(we=>{ka(we,Q[we])})}u&&Bm(u,e,"c");function le(Q,we){ue(we)?we.forEach(ot=>Q(ot.bind(n))):we&&Q(we.bind(n))}if(le(ZR,f),le(dc,p),le(QR,h),le(dw,d),le(YR,g),le(JR,m),le(iT,k),le(nT,P),le(tT,N),le(dd,x),le(gw,y),le(eT,O),ue(L))if(L.length){const Q=e.exposed||(e.exposed={});L.forEach(we=>{Object.defineProperty(Q,we,{get:()=>n[we],set:ot=>n[we]=ot})})}else e.exposed||(e.exposed={});R&&e.render===Kn&&(e.render=R),F!=null&&(e.inheritAttrs=F),B&&(e.components=B),V&&(e.directives=V),O&&pw(e)}function cT(e,t,n=Kn){ue(e)&&(e=Yp(e));for(const i in e){const r=e[i];let o;Ge(r)?"default"in r?o=Ht(r.from||i,r.default,!0):o=Ht(r.from||i):o=Ht(r),ft(o)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):t[i]=o}}function Bm(e,t,n){Zn(ue(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function yw(e,t,n,i){let r=i.includes(".")?Dw(n,i):()=>n[i];if(Je(e)){const o=t[e];_e(o)&&$i(r,o)}else if(_e(e))$i(r,e.bind(n));else if(Ge(e))if(ue(e))e.forEach(o=>yw(o,t,n,i));else{const o=_e(e.handler)?e.handler.bind(n):t[e.handler];_e(o)&&$i(r,o,e)}}function _w(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let c;return a?c=a:!r.length&&!n&&!i?c=t:(c={},r.length&&r.forEach(l=>tu(c,l,s,!0)),tu(c,t,s)),Ge(t)&&o.set(t,c),c}function tu(e,t,n,i=!1){const{mixins:r,extends:o}=t;o&&tu(e,o,n,!0),r&&r.forEach(s=>tu(e,s,n,!0));for(const s in t)if(!(i&&s==="expose")){const a=lT[s]||n&&n[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const lT={data:jm,props:Fm,emits:Fm,methods:Ea,computed:Ea,beforeCreate:Xt,created:Xt,beforeMount:Xt,mounted:Xt,beforeUpdate:Xt,updated:Xt,beforeDestroy:Xt,beforeUnmount:Xt,destroyed:Xt,unmounted:Xt,activated:Xt,deactivated:Xt,errorCaptured:Xt,serverPrefetch:Xt,components:Ea,directives:Ea,watch:fT,provide:jm,inject:uT};function jm(e,t){return t?e?function(){return Ot(_e(e)?e.call(this,this):e,_e(t)?t.call(this,this):t)}:t:e}function uT(e,t){return Ea(Yp(e),Yp(t))}function Yp(e){if(ue(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Xt(e,t){return e?[...new Set([].concat(e,t))]:t}function Ea(e,t){return e?Ot(Object.create(null),e,t):t}function Fm(e,t){return e?ue(e)&&ue(t)?[...new Set([...e,...t])]:Ot(Object.create(null),Lm(e),Lm(t??{})):t}function fT(e,t){if(!e)return t;if(!t)return e;const n=Ot(Object.create(null),e);for(const i in t)n[i]=Xt(e[i],t[i]);return n}function bw(){return{app:null,config:{isNativeTag:ZC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pT=0;function hT(e,t){return function(i,r=null){_e(i)||(i=Ot({},i)),r!=null&&!Ge(r)&&(r=null);const o=bw(),s=new WeakSet,a=[];let c=!1;const l=o.app={_uid:pT++,_component:i,_props:r,_container:null,_context:o,_instance:null,version:GT,get config(){return o.config},set config(u){},use(u,...f){return s.has(u)||(u&&_e(u.install)?(s.add(u),u.install(l,...f)):_e(u)&&(s.add(u),u(l,...f))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,f){return f?(o.components[u]=f,l):o.components[u]},directive(u,f){return f?(o.directives[u]=f,l):o.directives[u]},mount(u,f,p){if(!c){const h=l._ceVNode||Lt(i,r);return h.appContext=o,p===!0?p="svg":p===!1&&(p=void 0),e(h,u,p),c=!0,l._container=u,u.__vue_app__=l,Lu(h.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Zn(a,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(u,f){return o.provides[u]=f,l},runWithContext(u){const f=vo;vo=l;try{return u()}finally{vo=f}}};return l}}let vo=null;function ka(e,t){if(At){let n=At.provides;const i=At.parent&&At.parent.provides;i===n&&(n=At.provides=Object.create(i)),n[e]=t}}function Ht(e,t,n=!1){const i=At||St;if(i||vo){const r=vo?vo._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&_e(t)?t.call(i&&i.proxy):t}}function dT(){return!!(At||St||vo)}const ww={},Ew=()=>Object.create(ww),xw=e=>Object.getPrototypeOf(e)===ww;function gT(e,t,n,i=!1){const r={},o=Ew();e.propsDefaults=Object.create(null),Sw(e,t,r,o);for(const s in e.propsOptions[0])s in r||(r[s]=void 0);n?e.props=i?r:cd(r):e.type.props?e.props=r:e.props=o,e.attrs=o}function mT(e,t,n,i){const{props:r,attrs:o,vnode:{patchFlag:s}}=e,a=Be(r),[c]=e.propsOptions;let l=!1;if((i||s>0)&&!(s&16)){if(s&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(Nu(e.emitsOptions,p))continue;const h=t[p];if(c)if(je(o,p))h!==o[p]&&(o[p]=h,l=!0);else{const d=Mn(p);r[d]=Jp(c,a,d,h,e,!1)}else h!==o[p]&&(o[p]=h,l=!0)}}}else{Sw(e,t,r,o)&&(l=!0);let u;for(const f in a)(!t||!je(t,f)&&((u=Ro(f))===f||!je(t,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=Jp(c,a,f,void 0,e,!0)):delete r[f]);if(o!==a)for(const f in o)(!t||!je(t,f))&&(delete o[f],l=!0)}l&&Oi(e.attrs,"set","")}function Sw(e,t,n,i){const[r,o]=e.propsOptions;let s=!1,a;if(t)for(let c in t){if(Ca(c))continue;const l=t[c];let u;r&&je(r,u=Mn(c))?!o||!o.includes(u)?n[u]=l:(a||(a={}))[u]=l:Nu(e.emitsOptions,c)||(!(c in i)||l!==i[c])&&(i[c]=l,s=!0)}if(o){const c=Be(n),l=a||Ye;for(let u=0;u<o.length;u++){const f=o[u];n[f]=Jp(r,c,f,l[f],e,!je(l,f))}}return s}function Jp(e,t,n,i,r,o){const s=e[n];if(s!=null){const a=je(s,"default");if(a&&i===void 0){const c=s.default;if(s.type!==Function&&!s.skipFactory&&_e(c)){const{propsDefaults:l}=r;if(n in l)i=l[n];else{const u=gc(r);i=l[n]=c.call(null,t),u()}}else i=c;r.ce&&r.ce._setProp(n,i)}s[0]&&(o&&!a?i=!1:s[1]&&(i===""||i===Ro(n))&&(i=!0))}return i}const vT=new WeakMap;function Cw(e,t,n=!1){const i=n?vT:t.propsCache,r=i.get(e);if(r)return r;const o=e.props,s={},a=[];let c=!1;if(!_e(e)){const u=f=>{c=!0;const[p,h]=Cw(f,t,!0);Ot(s,p),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!c)return Ge(e)&&i.set(e,fs),fs;if(ue(o))for(let u=0;u<o.length;u++){const f=Mn(o[u]);Hm(f)&&(s[f]=Ye)}else if(o)for(const u in o){const f=Mn(u);if(Hm(f)){const p=o[u],h=s[f]=ue(p)||_e(p)?{type:p}:Ot({},p),d=h.type;let g=!1,m=!0;if(ue(d))for(let E=0;E<d.length;++E){const x=d[E],b=_e(x)&&x.name;if(b==="Boolean"){g=!0;break}else b==="String"&&(m=!1)}else g=_e(d)&&d.name==="Boolean";h[0]=g,h[1]=m,(g||je(h,"default"))&&a.push(f)}}const l=[s,a];return Ge(e)&&i.set(e,l),l}function Hm(e){return e[0]!=="$"&&!Ca(e)}const Rw=e=>e[0]==="_"||e==="$stable",vd=e=>ue(e)?e.map(pi):[pi(e)],yT=(e,t,n)=>{if(t._n)return t;const i=Pa((...r)=>vd(t(...r)),n);return i._c=!1,i},Tw=(e,t,n)=>{const i=e._ctx;for(const r in e){if(Rw(r))continue;const o=e[r];if(_e(o))t[r]=yT(r,o,i);else if(o!=null){const s=vd(o);t[r]=()=>s}}},Pw=(e,t)=>{const n=vd(t);e.slots.default=()=>n},Aw=(e,t,n)=>{for(const i in t)(n||i!=="_")&&(e[i]=t[i])},_T=(e,t,n)=>{const i=e.slots=Ew();if(e.vnode.shapeFlag&32){const r=t._;r?(Aw(i,t,n),n&&O0(i,"_",r,!0)):Tw(t,i)}else t&&Pw(e,t)},bT=(e,t,n)=>{const{vnode:i,slots:r}=e;let o=!0,s=Ye;if(i.shapeFlag&32){const a=t._;a?n&&a===1?o=!1:Aw(r,t,n):(o=!t.$stable,Tw(t,r)),s=t}else t&&(Pw(e,t),s={default:1});if(o)for(const a in r)!Rw(a)&&s[a]==null&&delete r[a]},Mt=IT;function wT(e){return ET(e)}function ET(e,t){const n=ku();n.__VUE__=!0;const{insert:i,remove:r,patchProp:o,createElement:s,createText:a,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:p,setScopeId:h=Kn,insertStaticContent:d}=e,g=(C,T,D,j=null,z=null,H=null,X=void 0,Z=null,W=!!T.dynamicChildren)=>{if(C===T)return;C&&!vr(C,T)&&(j=S(C),U(C,z,H,!0),C=null),T.patchFlag===-2&&(W=!1,T.dynamicChildren=null);const{type:q,ref:fe,shapeFlag:ee}=T;switch(q){case $u:m(C,T,D,j);break;case qt:E(C,T,D,j);break;case np:C==null&&x(T,D,j,X);break;case fn:B(C,T,D,j,z,H,X,Z,W);break;default:ee&1?R(C,T,D,j,z,H,X,Z,W):ee&6?V(C,T,D,j,z,H,X,Z,W):(ee&64||ee&128)&&q.process(C,T,D,j,z,H,X,Z,W,A)}fe!=null&&z&&Ql(fe,C&&C.ref,H,T||C,!T)},m=(C,T,D,j)=>{if(C==null)i(T.el=a(T.children),D,j);else{const z=T.el=C.el;T.children!==C.children&&l(z,T.children)}},E=(C,T,D,j)=>{C==null?i(T.el=c(T.children||""),D,j):T.el=C.el},x=(C,T,D,j)=>{[C.el,C.anchor]=d(C.children,T,D,j,C.el,C.anchor)},b=({el:C,anchor:T},D,j)=>{let z;for(;C&&C!==T;)z=p(C),i(C,D,j),C=z;i(T,D,j)},y=({el:C,anchor:T})=>{let D;for(;C&&C!==T;)D=p(C),r(C),C=D;r(T)},R=(C,T,D,j,z,H,X,Z,W)=>{T.type==="svg"?X="svg":T.type==="math"&&(X="mathml"),C==null?P(T,D,j,z,H,X,Z,W):O(C,T,z,H,X,Z,W)},P=(C,T,D,j,z,H,X,Z)=>{let W,q;const{props:fe,shapeFlag:ee,transition:Y,dirs:te}=C;if(W=C.el=s(C.type,H,fe&&fe.is,fe),ee&8?u(W,C.children):ee&16&&k(C.children,W,null,j,z,tp(C,H),X,Z),te&&Jr(C,null,j,"created"),N(W,C,C.scopeId,X,j),fe){for(const Xe in fe)Xe!=="value"&&!Ca(Xe)&&o(W,Xe,null,fe[Xe],H,j);"value"in fe&&o(W,"value",null,fe.value,H),(q=fe.onVnodeBeforeMount)&&Rn(q,j,C)}te&&Jr(C,null,j,"beforeMount");const Le=xT(z,Y);Le&&Y.beforeEnter(W),i(W,T,D),((q=fe&&fe.onVnodeMounted)||Le||te)&&Mt(()=>{q&&Rn(q,j,C),Le&&Y.enter(W),te&&Jr(C,null,j,"mounted")},z)},N=(C,T,D,j,z)=>{if(D&&h(C,D),j)for(let H=0;H<j.length;H++)h(C,j[H]);if(z){let H=z.subTree;if(T===H||iu(H.type)&&(H.ssContent===T||H.ssFallback===T)){const X=z.vnode;N(C,X,X.scopeId,X.slotScopeIds,z.parent)}}},k=(C,T,D,j,z,H,X,Z,W=0)=>{for(let q=W;q<C.length;q++){const fe=C[q]=Z?hr(C[q]):pi(C[q]);g(null,fe,T,D,j,z,H,X,Z)}},O=(C,T,D,j,z,H,X)=>{const Z=T.el=C.el;let{patchFlag:W,dynamicChildren:q,dirs:fe}=T;W|=C.patchFlag&16;const ee=C.props||Ye,Y=T.props||Ye;let te;if(D&&Xr(D,!1),(te=Y.onVnodeBeforeUpdate)&&Rn(te,D,T,C),fe&&Jr(T,C,D,"beforeUpdate"),D&&Xr(D,!0),(ee.innerHTML&&Y.innerHTML==null||ee.textContent&&Y.textContent==null)&&u(Z,""),q?L(C.dynamicChildren,q,Z,D,j,tp(T,z),H):X||we(C,T,Z,null,D,j,tp(T,z),H,!1),W>0){if(W&16)F(Z,ee,Y,D,z);else if(W&2&&ee.class!==Y.class&&o(Z,"class",null,Y.class,z),W&4&&o(Z,"style",ee.style,Y.style,z),W&8){const Le=T.dynamicProps;for(let Xe=0;Xe<Le.length;Xe++){const We=Le[Xe],vn=ee[We],an=Y[We];(an!==vn||We==="value")&&o(Z,We,vn,an,z,D)}}W&1&&C.children!==T.children&&u(Z,T.children)}else!X&&q==null&&F(Z,ee,Y,D,z);((te=Y.onVnodeUpdated)||fe)&&Mt(()=>{te&&Rn(te,D,T,C),fe&&Jr(T,C,D,"updated")},j)},L=(C,T,D,j,z,H,X)=>{for(let Z=0;Z<T.length;Z++){const W=C[Z],q=T[Z],fe=W.el&&(W.type===fn||!vr(W,q)||W.shapeFlag&70)?f(W.el):D;g(W,q,fe,null,j,z,H,X,!0)}},F=(C,T,D,j,z)=>{if(T!==D){if(T!==Ye)for(const H in T)!Ca(H)&&!(H in D)&&o(C,H,T[H],null,z,j);for(const H in D){if(Ca(H))continue;const X=D[H],Z=T[H];X!==Z&&H!=="value"&&o(C,H,Z,X,z,j)}"value"in D&&o(C,"value",T.value,D.value,z)}},B=(C,T,D,j,z,H,X,Z,W)=>{const q=T.el=C?C.el:a(""),fe=T.anchor=C?C.anchor:a("");let{patchFlag:ee,dynamicChildren:Y,slotScopeIds:te}=T;te&&(Z=Z?Z.concat(te):te),C==null?(i(q,D,j),i(fe,D,j),k(T.children||[],D,fe,z,H,X,Z,W)):ee>0&&ee&64&&Y&&C.dynamicChildren?(L(C.dynamicChildren,Y,D,z,H,X,Z),(T.key!=null||z&&T===z.subTree)&&kw(C,T,!0)):we(C,T,D,fe,z,H,X,Z,W)},V=(C,T,D,j,z,H,X,Z,W)=>{T.slotScopeIds=Z,C==null?T.shapeFlag&512?z.ctx.activate(T,D,j,X,W):oe(T,D,j,z,H,X,W):Ne(C,T,W)},oe=(C,T,D,j,z,H,X)=>{const Z=C.component=FT(C,j,z);if(Mu(C)&&(Z.ctx.renderer=A),HT(Z,!1,X),Z.asyncDep){if(z&&z.registerDep(Z,le,X),!C.el){const W=Z.subTree=Lt(qt);E(null,W,T,D)}}else le(Z,C,T,D,z,H,X)},Ne=(C,T,D)=>{const j=T.component=C.component;if(DT(C,T,D))if(j.asyncDep&&!j.asyncResolved){Q(j,T,D);return}else j.next=T,j.update();else T.el=C.el,j.vnode=T},le=(C,T,D,j,z,H,X)=>{const Z=()=>{if(C.isMounted){let{next:ee,bu:Y,u:te,parent:Le,vnode:Xe}=C;{const si=Ow(C);if(si){ee&&(ee.el=Xe.el,Q(C,ee,X)),si.asyncDep.then(()=>{C.isUnmounted||Z()});return}}let We=ee,vn;Xr(C,!1),ee?(ee.el=Xe.el,Q(C,ee,X)):ee=Xe,Y&&hs(Y),(vn=ee.props&&ee.props.onVnodeBeforeUpdate)&&Rn(vn,Le,ee,Xe),Xr(C,!0);const an=zm(C),oi=C.subTree;C.subTree=an,g(oi,an,f(oi.el),S(oi),C,z,H),ee.el=an.el,We===null&&MT(C,an.el),te&&Mt(te,z),(vn=ee.props&&ee.props.onVnodeUpdated)&&Mt(()=>Rn(vn,Le,ee,Xe),z)}else{let ee;const{el:Y,props:te}=T,{bm:Le,m:Xe,parent:We,root:vn,type:an}=C,oi=mo(T);Xr(C,!1),Le&&hs(Le),!oi&&(ee=te&&te.onVnodeBeforeMount)&&Rn(ee,We,T),Xr(C,!0);{vn.ce&&vn.ce._injectChildStyle(an);const si=C.subTree=zm(C);g(null,si,D,j,C,z,H),T.el=si.el}if(Xe&&Mt(Xe,z),!oi&&(ee=te&&te.onVnodeMounted)){const si=T;Mt(()=>Rn(ee,We,si),z)}(T.shapeFlag&256||We&&mo(We.vnode)&&We.vnode.shapeFlag&256)&&C.a&&Mt(C.a,z),C.isMounted=!0,T=D=j=null}};C.scope.on();const W=C.effect=new B0(Z);C.scope.off();const q=C.update=W.run.bind(W),fe=C.job=W.runIfDirty.bind(W);fe.i=C,fe.id=C.uid,W.scheduler=()=>hd(fe),Xr(C,!0),q()},Q=(C,T,D)=>{T.component=C;const j=C.vnode.props;C.vnode=T,C.next=null,mT(C,T.props,j,D),bT(C,T.children,D),Ar(),Im(C),kr()},we=(C,T,D,j,z,H,X,Z,W=!1)=>{const q=C&&C.children,fe=C?C.shapeFlag:0,ee=T.children,{patchFlag:Y,shapeFlag:te}=T;if(Y>0){if(Y&128){$e(q,ee,D,j,z,H,X,Z,W);return}else if(Y&256){ot(q,ee,D,j,z,H,X,Z,W);return}}te&8?(fe&16&&Ke(q,z,H),ee!==q&&u(D,ee)):fe&16?te&16?$e(q,ee,D,j,z,H,X,Z,W):Ke(q,z,H,!0):(fe&8&&u(D,""),te&16&&k(ee,D,j,z,H,X,Z,W))},ot=(C,T,D,j,z,H,X,Z,W)=>{C=C||fs,T=T||fs;const q=C.length,fe=T.length,ee=Math.min(q,fe);let Y;for(Y=0;Y<ee;Y++){const te=T[Y]=W?hr(T[Y]):pi(T[Y]);g(C[Y],te,D,null,z,H,X,Z,W)}q>fe?Ke(C,z,H,!0,!1,ee):k(T,D,j,z,H,X,Z,W,ee)},$e=(C,T,D,j,z,H,X,Z,W)=>{let q=0;const fe=T.length;let ee=C.length-1,Y=fe-1;for(;q<=ee&&q<=Y;){const te=C[q],Le=T[q]=W?hr(T[q]):pi(T[q]);if(vr(te,Le))g(te,Le,D,null,z,H,X,Z,W);else break;q++}for(;q<=ee&&q<=Y;){const te=C[ee],Le=T[Y]=W?hr(T[Y]):pi(T[Y]);if(vr(te,Le))g(te,Le,D,null,z,H,X,Z,W);else break;ee--,Y--}if(q>ee){if(q<=Y){const te=Y+1,Le=te<fe?T[te].el:j;for(;q<=Y;)g(null,T[q]=W?hr(T[q]):pi(T[q]),D,Le,z,H,X,Z,W),q++}}else if(q>Y)for(;q<=ee;)U(C[q],z,H,!0),q++;else{const te=q,Le=q,Xe=new Map;for(q=Le;q<=Y;q++){const yn=T[q]=W?hr(T[q]):pi(T[q]);yn.key!=null&&Xe.set(yn.key,q)}let We,vn=0;const an=Y-Le+1;let oi=!1,si=0;const ta=new Array(an);for(q=0;q<an;q++)ta[q]=0;for(q=te;q<=ee;q++){const yn=C[q];if(vn>=an){U(yn,z,H,!0);continue}let ai;if(yn.key!=null)ai=Xe.get(yn.key);else for(We=Le;We<=Y;We++)if(ta[We-Le]===0&&vr(yn,T[We])){ai=We;break}ai===void 0?U(yn,z,H,!0):(ta[ai-Le]=q+1,ai>=si?si=ai:oi=!0,g(yn,T[ai],D,null,z,H,X,Z,W),vn++)}const Pm=oi?ST(ta):fs;for(We=Pm.length-1,q=an-1;q>=0;q--){const yn=Le+q,ai=T[yn],Am=yn+1<fe?T[yn+1].el:j;ta[q]===0?g(null,ai,D,Am,z,H,X,Z,W):oi&&(We<0||q!==Pm[We]?Ue(ai,D,Am,2):We--)}}},Ue=(C,T,D,j,z=null)=>{const{el:H,type:X,transition:Z,children:W,shapeFlag:q}=C;if(q&6){Ue(C.component.subTree,T,D,j);return}if(q&128){C.suspense.move(T,D,j);return}if(q&64){X.move(C,T,D,A);return}if(X===fn){i(H,T,D);for(let ee=0;ee<W.length;ee++)Ue(W[ee],T,D,j);i(C.anchor,T,D);return}if(X===np){b(C,T,D);return}if(j!==2&&q&1&&Z)if(j===0)Z.beforeEnter(H),i(H,T,D),Mt(()=>Z.enter(H),z);else{const{leave:ee,delayLeave:Y,afterLeave:te}=Z,Le=()=>i(H,T,D),Xe=()=>{ee(H,()=>{Le(),te&&te()})};Y?Y(H,Le,Xe):Xe()}else i(H,T,D)},U=(C,T,D,j=!1,z=!1)=>{const{type:H,props:X,ref:Z,children:W,dynamicChildren:q,shapeFlag:fe,patchFlag:ee,dirs:Y,cacheIndex:te}=C;if(ee===-2&&(z=!1),Z!=null&&Ql(Z,null,D,C,!0),te!=null&&(T.renderCache[te]=void 0),fe&256){T.ctx.deactivate(C);return}const Le=fe&1&&Y,Xe=!mo(C);let We;if(Xe&&(We=X&&X.onVnodeBeforeUnmount)&&Rn(We,T,C),fe&6)Ee(C.component,D,j);else{if(fe&128){C.suspense.unmount(D,j);return}Le&&Jr(C,null,T,"beforeUnmount"),fe&64?C.type.remove(C,T,D,A,j):q&&!q.hasOnce&&(H!==fn||ee>0&&ee&64)?Ke(q,T,D,!1,!0):(H===fn&&ee&384||!z&&fe&16)&&Ke(W,T,D),j&&G(C)}(Xe&&(We=X&&X.onVnodeUnmounted)||Le)&&Mt(()=>{We&&Rn(We,T,C),Le&&Jr(C,null,T,"unmounted")},D)},G=C=>{const{type:T,el:D,anchor:j,transition:z}=C;if(T===fn){se(D,j);return}if(T===np){y(C);return}const H=()=>{r(D),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(C.shapeFlag&1&&z&&!z.persisted){const{leave:X,delayLeave:Z}=z,W=()=>X(D,H);Z?Z(C.el,H,W):W()}else H()},se=(C,T)=>{let D;for(;C!==T;)D=p(C),r(C),C=D;r(T)},Ee=(C,T,D)=>{const{bum:j,scope:z,job:H,subTree:X,um:Z,m:W,a:q}=C;nu(W),nu(q),j&&hs(j),z.stop(),H&&(H.flags|=8,U(X,C,T,D)),Z&&Mt(Z,T),Mt(()=>{C.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},Ke=(C,T,D,j=!1,z=!1,H=0)=>{for(let X=H;X<C.length;X++)U(C[X],T,D,j,z)},S=C=>{if(C.shapeFlag&6)return S(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const T=p(C.anchor||C.el),D=T&&T[VR];return D?p(D):T};let _=!1;const v=(C,T,D)=>{C==null?T._vnode&&U(T._vnode,null,null,!0):g(T._vnode||null,C,T,null,null,null,D),T._vnode=C,_||(_=!0,Im(),nw(),_=!1)},A={p:g,um:U,m:Ue,r:G,mt:oe,mc:k,pc:we,pbc:L,n:S,o:e};return{render:v,hydrate:void 0,createApp:hT(v)}}function tp({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Xr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function xT(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function kw(e,t,n=!1){const i=e.children,r=t.children;if(ue(i)&&ue(r))for(let o=0;o<i.length;o++){const s=i[o];let a=r[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[o]=hr(r[o]),a.el=s.el),!n&&a.patchFlag!==-2&&kw(s,a)),a.type===$u&&(a.el=s.el)}}function ST(e){const t=e.slice(),n=[0];let i,r,o,s,a;const c=e.length;for(i=0;i<c;i++){const l=e[i];if(l!==0){if(r=n[n.length-1],e[r]<l){t[i]=r,n.push(i);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,e[n[a]]<l?o=a+1:s=a;l<e[n[o]]&&(o>0&&(t[i]=n[o-1]),n[o]=i)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=t[s];return n}function Ow(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ow(t)}function nu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const CT=Symbol.for("v-scx"),RT=()=>Ht(CT);function aH(e,t){return yd(e,null,t)}function $i(e,t,n){return yd(e,t,n)}function yd(e,t,n=Ye){const{immediate:i,deep:r,flush:o,once:s}=n,a=Ot({},n),c=t&&i||!t&&o!=="post";let l;if(Ka){if(o==="sync"){const h=RT();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=Kn,h.resume=Kn,h.pause=Kn,h}}const u=At;a.call=(h,d,g)=>Zn(h,u,d,g);let f=!1;o==="post"?a.scheduler=h=>{Mt(h,u&&u.suspense)}:o!=="sync"&&(f=!0,a.scheduler=(h,d)=>{d?h():hd(h)}),a.augmentJob=h=>{t&&(h.flags|=4),f&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const p=FR(e,t,a);return Ka&&(l?l.push(p):c&&p()),p}function TT(e,t,n){const i=this.proxy,r=Je(e)?e.includes(".")?Dw(i,e):()=>i[e]:e.bind(i,i);let o;_e(t)?o=t:(o=t.handler,n=t);const s=gc(this),a=yd(r,o.bind(i),n);return s(),a}function Dw(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const PT=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Mn(t)}Modifiers`]||e[`${Ro(t)}Modifiers`];function AT(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Ye;let r=n;const o=t.startsWith("update:"),s=o&&PT(i,t.slice(7));s&&(s.trim&&(r=n.map(u=>Je(u)?u.trim():u)),s.number&&(r=n.map(ql)));let a,c=i[a=Kf(t)]||i[a=Kf(Mn(t))];!c&&o&&(c=i[a=Kf(Ro(t))]),c&&Zn(c,e,6,r);const l=i[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Zn(l,e,6,r)}}function Mw(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const o=e.emits;let s={},a=!1;if(!_e(e)){const c=l=>{const u=Mw(l,t,!0);u&&(a=!0,Ot(s,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!o&&!a?(Ge(e)&&i.set(e,null),null):(ue(o)?o.forEach(c=>s[c]=null):Ot(s,o),Ge(e)&&i.set(e,s),s)}function Nu(e,t){return!e||!Tu(t)?!1:(t=t.slice(2).replace(/Once$/,""),je(e,t[0].toLowerCase()+t.slice(1))||je(e,Ro(t))||je(e,t))}function zm(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[o],slots:s,attrs:a,emit:c,render:l,renderCache:u,props:f,data:p,setupState:h,ctx:d,inheritAttrs:g}=e,m=Zl(e);let E,x;try{if(n.shapeFlag&4){const y=r||i,R=y;E=pi(l.call(R,y,u,f,h,p,d)),x=a}else{const y=t;E=pi(y.length>1?y(f,{attrs:a,slots:s,emit:c}):y(f,null)),x=t.props?a:kT(a)}}catch(y){Oa.length=0,Du(y,e,1),E=Lt(qt)}let b=E;if(x&&g!==!1){const y=Object.keys(x),{shapeFlag:R}=b;y.length&&R&7&&(o&&y.some(Xh)&&(x=OT(x,o)),b=Ui(b,x,!1,!0))}return n.dirs&&(b=Ui(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&gs(b,n.transition),E=b,Zl(m),E}const kT=e=>{let t;for(const n in e)(n==="class"||n==="style"||Tu(n))&&((t||(t={}))[n]=e[n]);return t},OT=(e,t)=>{const n={};for(const i in e)(!Xh(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function DT(e,t,n){const{props:i,children:r,component:o}=e,{props:s,children:a,patchFlag:c}=t,l=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return i?Um(i,s,l):!!s;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(s[p]!==i[p]&&!Nu(l,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===s?!1:i?s?Um(i,s,l):!0:!!s;return!1}function Um(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(t[o]!==e[o]&&!Nu(n,o))return!0}return!1}function MT({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const iu=e=>e.__isSuspense;function IT(e,t){t&&t.pendingBranch?ue(e)?t.effects.push(...e):t.effects.push(e):UR(e)}const fn=Symbol.for("v-fgt"),$u=Symbol.for("v-txt"),qt=Symbol.for("v-cmt"),np=Symbol.for("v-stc"),Oa=[];let _n=null;function Nt(e=!1){Oa.push(_n=e?null:[])}function NT(){Oa.pop(),_n=Oa[Oa.length-1]||null}let Ga=1;function Vm(e,t=!1){Ga+=e,e<0&&_n&&t&&(_n.hasOnce=!0)}function Iw(e){return e.dynamicChildren=Ga>0?_n||fs:null,NT(),Ga>0&&_n&&_n.push(e),e}function zi(e,t,n,i,r,o){return Iw(gi(e,t,n,i,r,o,!0))}function mr(e,t,n,i,r){return Iw(Lt(e,t,n,i,r,!0))}function Sr(e){return e?e.__v_isVNode===!0:!1}function vr(e,t){return e.type===t.type&&e.key===t.key}const Nw=({key:e})=>e??null,kl=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Je(e)||ft(e)||_e(e)?{i:St,r:e,k:t,f:!!n}:e:null);function gi(e,t=null,n=null,i=0,r=null,o=e===fn?0:1,s=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Nw(t),ref:t&&kl(t),scopeId:rw,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:St};return a?(_d(c,n),o&128&&e.normalize(c)):n&&(c.shapeFlag|=Je(n)?8:16),Ga>0&&!s&&_n&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&_n.push(c),c}const Lt=$T;function $T(e,t=null,n=null,i=0,r=null,o=!1){if((!e||e===mw)&&(e=qt),Sr(e)){const a=Ui(e,t,!0);return n&&_d(a,n),Ga>0&&!o&&_n&&(a.shapeFlag&6?_n[_n.indexOf(e)]=a:_n.push(a)),a.patchFlag=-2,a}if(WT(e)&&(e=e.__vccOpts),t){t=LT(t);let{class:a,style:c}=t;a&&!Je(a)&&(t.class=Vn(a)),Ge(c)&&(fd(c)&&!ue(c)&&(c=Ot({},c)),t.style=uc(c))}const s=Je(e)?1:iu(e)?128:sw(e)?64:Ge(e)?4:_e(e)?2:0;return gi(e,t,n,i,r,s,o,!0)}function LT(e){return e?fd(e)||xw(e)?Ot({},e):e:null}function Ui(e,t,n=!1,i=!1){const{props:r,ref:o,patchFlag:s,children:a,transition:c}=e,l=t?Lw(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Nw(l),ref:t&&t.ref?n&&o?ue(o)?o.concat(kl(t)):[o,kl(t)]:kl(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==fn?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ui(e.ssContent),ssFallback:e.ssFallback&&Ui(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&i&&gs(u,c.clone(u)),u}function $w(e=" ",t=0){return Lt($u,null,e,t)}function tl(e="",t=!1){return t?(Nt(),mr(qt,null,e)):Lt(qt,null,e)}function pi(e){return e==null||typeof e=="boolean"?Lt(qt):ue(e)?Lt(fn,null,e.slice()):Sr(e)?hr(e):Lt($u,null,String(e))}function hr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ui(e)}function _d(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(ue(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),_d(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!xw(t)?t._ctx=St:r===3&&St&&(St.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _e(t)?(t={default:t,_ctx:St},n=32):(t=String(t),i&64?(n=16,t=[$w(t)]):n=8);e.children=t,e.shapeFlag|=n}function Lw(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Vn([t.class,i.class]));else if(r==="style")t.style=uc([t.style,i.style]);else if(Tu(r)){const o=t[r],s=i[r];s&&o!==s&&!(ue(o)&&o.includes(s))&&(t[r]=o?[].concat(o,s):s)}else r!==""&&(t[r]=i[r])}return t}function Rn(e,t,n,i=null){Zn(e,t,7,[n,i])}const BT=bw();let jT=0;function FT(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||BT,o={uid:jT++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new N0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cw(i,r),emitsOptions:Mw(i,r),emit:null,emitted:null,propsDefaults:Ye,inheritAttrs:i.inheritAttrs,ctx:Ye,data:Ye,props:Ye,attrs:Ye,slots:Ye,refs:Ye,setupState:Ye,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=AT.bind(null,o),e.ce&&e.ce(o),o}let At=null;const Cr=()=>At||St;let ru,Xp;{const e=ku(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),o=>{r.length>1?r.forEach(s=>s(o)):r[0](o)}};ru=t("__VUE_INSTANCE_SETTERS__",n=>At=n),Xp=t("__VUE_SSR_SETTERS__",n=>Ka=n)}const gc=e=>{const t=At;return ru(e),e.scope.on(),()=>{e.scope.off(),ru(t)}},Wm=()=>{At&&At.scope.off(),ru(null)};function Bw(e){return e.vnode.shapeFlag&4}let Ka=!1;function HT(e,t=!1,n=!1){t&&Xp(t);const{props:i,children:r}=e.vnode,o=Bw(e);gT(e,i,o,t),_T(e,r,n);const s=o?zT(e,t):void 0;return t&&Xp(!1),s}function zT(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,sT);const{setup:i}=n;if(i){Ar();const r=e.setupContext=i.length>1?VT(e):null,o=gc(e),s=hc(i,e,0,[e.props,r]),a=P0(s);if(kr(),o(),(a||e.sp)&&!mo(e)&&pw(e),a){if(s.then(Wm,Wm),t)return s.then(c=>{Gm(e,c)}).catch(c=>{Du(c,e,0)});e.asyncDep=s}else Gm(e,s)}else jw(e)}function Gm(e,t,n){_e(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ge(t)&&(e.setupState=Q0(t)),jw(e)}function jw(e,t,n){const i=e.type;e.render||(e.render=i.render||Kn);{const r=gc(e);Ar();try{aT(e)}finally{kr(),r()}}}const UT={get(e,t){return Gt(e,"get",""),e[t]}};function VT(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,UT),slots:e.slots,emit:e.emit,expose:t}}function Lu(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Q0(pd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Aa)return Aa[n](e)},has(t,n){return n in t||n in Aa}})):e.proxy}function Zp(e,t=!0){return _e(e)?e.displayName||e.name:e.name||t&&e.__name}function WT(e){return _e(e)&&"__vccOpts"in e}const De=(e,t)=>BR(e,t,Ka);function bd(e,t,n){const i=arguments.length;return i===2?Ge(t)&&!ue(t)?Sr(t)?Lt(e,null,[t]):Lt(e,t):Lt(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Sr(n)&&(n=[n]),Lt(e,t,n))}const GT="3.5.13",KT=Kn;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qp;const Km=typeof window<"u"&&window.trustedTypes;if(Km)try{Qp=Km.createPolicy("vue",{createHTML:e=>e})}catch{}const Fw=Qp?e=>Qp.createHTML(e):e=>e,qT="http://www.w3.org/2000/svg",YT="http://www.w3.org/1998/Math/MathML",Ai=typeof document<"u"?document:null,qm=Ai&&Ai.createElement("template"),JT={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?Ai.createElementNS(qT,e):t==="mathml"?Ai.createElementNS(YT,e):n?Ai.createElement(e,{is:n}):Ai.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>Ai.createTextNode(e),createComment:e=>Ai.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ai.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,o){const s=n?n.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===o||!(r=r.nextSibling)););else{qm.innerHTML=Fw(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const a=qm.content;if(i==="svg"||i==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},er="transition",ia="animation",qa=Symbol("_vtc"),Hw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},XT=Ot({},aw,Hw),ZT=e=>(e.displayName="Transition",e.props=XT,e),zw=ZT((e,{slots:t})=>bd(KR,QT(e),t)),Zr=(e,t=[])=>{ue(e)?e.forEach(n=>n(...t)):e&&e(...t)},Ym=e=>e?ue(e)?e.some(t=>t.length>1):e.length>1:!1;function QT(e){const t={};for(const B in e)B in Hw||(t[B]=e[B]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=o,appearActiveClass:l=s,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,d=eP(r),g=d&&d[0],m=d&&d[1],{onBeforeEnter:E,onEnter:x,onEnterCancelled:b,onLeave:y,onLeaveCancelled:R,onBeforeAppear:P=E,onAppear:N=x,onAppearCancelled:k=b}=t,O=(B,V,oe,Ne)=>{B._enterCancelled=Ne,Qr(B,V?u:a),Qr(B,V?l:s),oe&&oe()},L=(B,V)=>{B._isLeaving=!1,Qr(B,f),Qr(B,h),Qr(B,p),V&&V()},F=B=>(V,oe)=>{const Ne=B?N:x,le=()=>O(V,B,oe);Zr(Ne,[V,le]),Jm(()=>{Qr(V,B?c:o),Ci(V,B?u:a),Ym(Ne)||Xm(V,i,g,le)})};return Ot(t,{onBeforeEnter(B){Zr(E,[B]),Ci(B,o),Ci(B,s)},onBeforeAppear(B){Zr(P,[B]),Ci(B,c),Ci(B,l)},onEnter:F(!1),onAppear:F(!0),onLeave(B,V){B._isLeaving=!0;const oe=()=>L(B,V);Ci(B,f),B._enterCancelled?(Ci(B,p),ev()):(ev(),Ci(B,p)),Jm(()=>{B._isLeaving&&(Qr(B,f),Ci(B,h),Ym(y)||Xm(B,i,m,oe))}),Zr(y,[B,oe])},onEnterCancelled(B){O(B,!1,void 0,!0),Zr(b,[B])},onAppearCancelled(B){O(B,!0,void 0,!0),Zr(k,[B])},onLeaveCancelled(B){L(B),Zr(R,[B])}})}function eP(e){if(e==null)return null;if(Ge(e))return[ip(e.enter),ip(e.leave)];{const t=ip(e);return[t,t]}}function ip(e){return rR(e)}function Ci(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[qa]||(e[qa]=new Set)).add(t)}function Qr(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[qa];n&&(n.delete(t),n.size||(e[qa]=void 0))}function Jm(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let tP=0;function Xm(e,t,n,i){const r=e._endId=++tP,o=()=>{r===e._endId&&i()};if(n!=null)return setTimeout(o,n);const{type:s,timeout:a,propCount:c}=nP(e,t);if(!s)return i();const l=s+"end";let u=0;const f=()=>{e.removeEventListener(l,p),o()},p=h=>{h.target===e&&++u>=c&&f()};setTimeout(()=>{u<c&&f()},a+1),e.addEventListener(l,p)}function nP(e,t){const n=window.getComputedStyle(e),i=d=>(n[d]||"").split(", "),r=i(`${er}Delay`),o=i(`${er}Duration`),s=Zm(r,o),a=i(`${ia}Delay`),c=i(`${ia}Duration`),l=Zm(a,c);let u=null,f=0,p=0;t===er?s>0&&(u=er,f=s,p=o.length):t===ia?l>0&&(u=ia,f=l,p=c.length):(f=Math.max(s,l),u=f>0?s>l?er:ia:null,p=u?u===er?o.length:c.length:0);const h=u===er&&/\b(transform|all)(,|$)/.test(i(`${er}Property`).toString());return{type:u,timeout:f,propCount:p,hasTransform:h}}function Zm(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Qm(n)+Qm(e[i])))}function Qm(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ev(){return document.body.offsetHeight}function iP(e,t,n){const i=e[qa];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ou=Symbol("_vod"),Uw=Symbol("_vsh"),Vw={beforeMount(e,{value:t},{transition:n}){e[ou]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ra(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),ra(e,!0),i.enter(e)):i.leave(e,()=>{ra(e,!1)}):ra(e,t))},beforeUnmount(e,{value:t}){ra(e,t)}};function ra(e,t){e.style.display=t?e[ou]:"none",e[Uw]=!t}const rP=Symbol(""),oP=/(^|;)\s*display\s*:/;function sP(e,t,n){const i=e.style,r=Je(n);let o=!1;if(n&&!r){if(t)if(Je(t))for(const s of t.split(";")){const a=s.slice(0,s.indexOf(":")).trim();n[a]==null&&Ol(i,a,"")}else for(const s in t)n[s]==null&&Ol(i,s,"");for(const s in n)s==="display"&&(o=!0),Ol(i,s,n[s])}else if(r){if(t!==n){const s=i[rP];s&&(n+=";"+s),i.cssText=n,o=oP.test(n)}}else t&&e.removeAttribute("style");ou in e&&(e[ou]=o?i.display:"",e[Uw]&&(i.display="none"))}const tv=/\s*!important$/;function Ol(e,t,n){if(ue(n))n.forEach(i=>Ol(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=aP(e,t);tv.test(n)?e.setProperty(Ro(i),n.replace(tv,""),"important"):e[i]=n}}const nv=["Webkit","Moz","ms"],rp={};function aP(e,t){const n=rp[t];if(n)return n;let i=Mn(t);if(i!=="filter"&&i in e)return rp[t]=i;i=Au(i);for(let r=0;r<nv.length;r++){const o=nv[r]+i;if(o in e)return rp[t]=o}return t}const iv="http://www.w3.org/1999/xlink";function rv(e,t,n,i,r,o=uR(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(iv,t.slice(6,t.length)):e.setAttributeNS(iv,t,n):n==null||o&&!D0(n)?e.removeAttribute(t):e.setAttribute(t,o?"":Xn(n)?String(n):n)}function ov(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Fw(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let s=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=D0(n):n==null&&a==="string"?(n="",s=!0):a==="number"&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(r||t)}function yr(e,t,n,i){e.addEventListener(t,n,i)}function cP(e,t,n,i){e.removeEventListener(t,n,i)}const sv=Symbol("_vei");function lP(e,t,n,i,r=null){const o=e[sv]||(e[sv]={}),s=o[t];if(i&&s)s.value=i;else{const[a,c]=uP(t);if(i){const l=o[t]=hP(i,r);yr(e,a,l,c)}else s&&(cP(e,a,s,c),o[t]=void 0)}}const av=/(?:Once|Passive|Capture)$/;function uP(e){let t;if(av.test(e)){t={};let i;for(;i=e.match(av);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ro(e.slice(2)),t]}let op=0;const fP=Promise.resolve(),pP=()=>op||(fP.then(()=>op=0),op=Date.now());function hP(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Zn(dP(i,n.value),t,5,[i])};return n.value=e,n.attached=pP(),n}function dP(e,t){if(ue(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const cv=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,gP=(e,t,n,i,r,o)=>{const s=r==="svg";t==="class"?iP(e,i,s):t==="style"?sP(e,n,i):Tu(t)?Xh(t)||lP(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):mP(e,t,i,s))?(ov(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&rv(e,t,i,s,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Je(i))?ov(e,Mn(t),i,o,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),rv(e,t,i,s))};function mP(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&cv(t)&&_e(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return cv(t)&&Je(n)?!1:t in e}const ms=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ue(t)?n=>hs(t,n):t};function vP(e){e.target.composing=!0}function lv(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Li=Symbol("_assign"),cH={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[Li]=ms(r);const o=i||r.props&&r.props.type==="number";yr(e,t?"change":"input",s=>{if(s.target.composing)return;let a=e.value;n&&(a=a.trim()),o&&(a=ql(a)),e[Li](a)}),n&&yr(e,"change",()=>{e.value=e.value.trim()}),t||(yr(e,"compositionstart",vP),yr(e,"compositionend",lv),yr(e,"change",lv))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:r,number:o}},s){if(e[Li]=ms(s),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?ql(e.value):e.value,c=t??"";a!==c&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||r&&e.value.trim()===c)||(e.value=c))}},lH={deep:!0,created(e,t,n){e[Li]=ms(n),yr(e,"change",()=>{const i=e._modelValue,r=Ya(e),o=e.checked,s=e[Li];if(ue(i)){const a=ed(i,r),c=a!==-1;if(o&&!c)s(i.concat(r));else if(!o&&c){const l=[...i];l.splice(a,1),s(l)}}else if(Ms(i)){const a=new Set(i);o?a.add(r):a.delete(r),s(a)}else s(Ww(e,o))})},mounted:uv,beforeUpdate(e,t,n){e[Li]=ms(n),uv(e,t,n)}};function uv(e,{value:t,oldValue:n},i){e._modelValue=t;let r;if(ue(t))r=ed(t,i.props.value)>-1;else if(Ms(t))r=t.has(i.props.value);else{if(t===n)return;r=fc(t,Ww(e,!0))}e.checked!==r&&(e.checked=r)}const uH={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=Ms(t);yr(e,"change",()=>{const o=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>n?ql(Ya(s)):Ya(s));e[Li](e.multiple?r?new Set(o):o:o[0]),e._assigning=!0,Ns(()=>{e._assigning=!1})}),e[Li]=ms(i)},mounted(e,{value:t}){fv(e,t)},beforeUpdate(e,t,n){e[Li]=ms(n)},updated(e,{value:t}){e._assigning||fv(e,t)}};function fv(e,t){const n=e.multiple,i=ue(t);if(!(n&&!i&&!Ms(t))){for(let r=0,o=e.options.length;r<o;r++){const s=e.options[r],a=Ya(s);if(n)if(i){const c=typeof a;c==="string"||c==="number"?s.selected=t.some(l=>String(l)===String(a)):s.selected=ed(t,a)>-1}else s.selected=t.has(a);else if(fc(Ya(s),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ya(e){return"_value"in e?e._value:e.value}function Ww(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const yP=["ctrl","shift","alt","meta"],_P={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>yP.some(n=>e[`${n}Key`]&&!t.includes(n))},bP=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(r,...o)=>{for(let s=0;s<t.length;s++){const a=_P[t[s]];if(a&&a(r,t))return}return e(r,...o)})},wP=Ot({patchProp:gP},JT);let pv;function Gw(){return pv||(pv=wT(wP))}const hv=(...e)=>{Gw().render(...e)},fH=(...e)=>{const t=Gw().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=xP(i);if(!r)return;const o=t._component;!_e(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const s=n(r,!1,EP(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t};function EP(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function xP(e){return Je(e)?document.querySelector(e):e}const SP="modulepreload",CP=function(e){return"/autoDeploy/"+e},dv={},mc=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){let s=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=s(n.map(l=>{if(l=CP(l),l in dv)return;dv[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":SP,u||(p.as="script"),p.crossOrigin="",p.href=l,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((h,d)=>{p.addEventListener("load",h),p.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return r.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const as=typeof document<"u";function Kw(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function RP(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Kw(e.default)}const Ve=Object.assign;function sp(e,t){const n={};for(const i in t){const r=t[i];n[i]=Qn(r)?r.map(e):e(r)}return n}const Da=()=>{},Qn=Array.isArray,qw=/#/g,TP=/&/g,PP=/\//g,AP=/=/g,kP=/\?/g,Yw=/\+/g,OP=/%5B/g,DP=/%5D/g,Jw=/%5E/g,MP=/%60/g,Xw=/%7B/g,IP=/%7C/g,Zw=/%7D/g,NP=/%20/g;function wd(e){return encodeURI(""+e).replace(IP,"|").replace(OP,"[").replace(DP,"]")}function $P(e){return wd(e).replace(Xw,"{").replace(Zw,"}").replace(Jw,"^")}function eh(e){return wd(e).replace(Yw,"%2B").replace(NP,"+").replace(qw,"%23").replace(TP,"%26").replace(MP,"`").replace(Xw,"{").replace(Zw,"}").replace(Jw,"^")}function LP(e){return eh(e).replace(AP,"%3D")}function BP(e){return wd(e).replace(qw,"%23").replace(kP,"%3F")}function jP(e){return e==null?"":BP(e).replace(PP,"%2F")}function Ja(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const FP=/\/$/,HP=e=>e.replace(FP,"");function ap(e,t,n="/"){let i,r={},o="",s="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(i=t.slice(0,c),o=t.slice(c+1,a>-1?a:t.length),r=e(o)),a>-1&&(i=i||t.slice(0,a),s=t.slice(a,t.length)),i=WP(i??t,n),{fullPath:i+(o&&"?")+o+s,path:i,query:r,hash:Ja(s)}}function zP(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function gv(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function UP(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&vs(t.matched[i],n.matched[r])&&Qw(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function vs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Qw(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!VP(e[n],t[n]))return!1;return!0}function VP(e,t){return Qn(e)?mv(e,t):Qn(t)?mv(t,e):e===t}function mv(e,t){return Qn(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function WP(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let o=n.length-1,s,a;for(s=0;s<i.length;s++)if(a=i[s],a!==".")if(a==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+i.slice(s).join("/")}const tr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Xa;(function(e){e.pop="pop",e.push="push"})(Xa||(Xa={}));var Ma;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ma||(Ma={}));function GP(e){if(!e)if(as){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),HP(e)}const KP=/^[^#]+#/;function qP(e,t){return e.replace(KP,"#")+t}function YP(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Bu=()=>({left:window.scrollX,top:window.scrollY});function JP(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=YP(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function vv(e,t){return(history.state?history.state.position-t:-1)+e}const th=new Map;function XP(e,t){th.set(e,t)}function ZP(e){const t=th.get(e);return th.delete(e),t}let QP=()=>location.protocol+"//"+location.host;function eE(e,t){const{pathname:n,search:i,hash:r}=t,o=e.indexOf("#");if(o>-1){let a=r.includes(e.slice(o))?e.slice(o).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),gv(c,"")}return gv(n,e)+i+r}function eA(e,t,n,i){let r=[],o=[],s=null;const a=({state:p})=>{const h=eE(e,location),d=n.value,g=t.value;let m=0;if(p){if(n.value=h,t.value=p,s&&s===d){s=null;return}m=g?p.position-g.position:0}else i(h);r.forEach(E=>{E(n.value,d,{delta:m,type:Xa.pop,direction:m?m>0?Ma.forward:Ma.back:Ma.unknown})})};function c(){s=n.value}function l(p){r.push(p);const h=()=>{const d=r.indexOf(p);d>-1&&r.splice(d,1)};return o.push(h),h}function u(){const{history:p}=window;p.state&&p.replaceState(Ve({},p.state,{scroll:Bu()}),"")}function f(){for(const p of o)p();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function yv(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?Bu():null}}function tA(e){const{history:t,location:n}=window,i={value:eE(e,n)},r={value:t.state};r.value||o(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(c,l,u){const f=e.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:QP()+e+c;try{t[u?"replaceState":"pushState"](l,"",p),r.value=l}catch(h){console.error(h),n[u?"replace":"assign"](p)}}function s(c,l){const u=Ve({},t.state,yv(r.value.back,c,r.value.forward,!0),l,{position:r.value.position});o(c,u,!0),i.value=c}function a(c,l){const u=Ve({},r.value,t.state,{forward:c,scroll:Bu()});o(u.current,u,!0);const f=Ve({},yv(i.value,c,null),{position:u.position+1},l);o(c,f,!1),i.value=c}return{location:i,state:r,push:a,replace:s}}function nA(e){e=GP(e);const t=tA(e),n=eA(e,t.state,t.location,t.replace);function i(o,s=!0){s||n.pauseListeners(),history.go(o)}const r=Ve({location:"",base:e,go:i,createHref:qP.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function pH(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),nA(e)}function iA(e){return typeof e=="string"||e&&typeof e=="object"}function tE(e){return typeof e=="string"||typeof e=="symbol"}const nE=Symbol("");var _v;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(_v||(_v={}));function ys(e,t){return Ve(new Error,{type:e,[nE]:!0},t)}function Ri(e,t){return e instanceof Error&&nE in e&&(t==null||!!(e.type&t))}const bv="[^/]+?",rA={sensitive:!1,strict:!1,start:!0,end:!0},oA=/[.+*?^${}()[\]/\\]/g;function sA(e,t){const n=Ve({},rA,t),i=[];let r=n.start?"^":"";const o=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(r+="/");for(let f=0;f<l.length;f++){const p=l[f];let h=40+(n.sensitive?.25:0);if(p.type===0)f||(r+="/"),r+=p.value.replace(oA,"\\$&"),h+=40;else if(p.type===1){const{value:d,repeatable:g,optional:m,regexp:E}=p;o.push({name:d,repeatable:g,optional:m});const x=E||bv;if(x!==bv){h+=10;try{new RegExp(`(${x})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${d}" (${x}): `+y.message)}}let b=g?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;f||(b=m&&l.length<2?`(?:/${b})`:"/"+b),m&&(b+="?"),r+=b,h+=20,m&&(h+=-8),g&&(h+=-20),x===".*"&&(h+=-50)}u.push(h)}i.push(u)}if(n.strict&&n.end){const l=i.length-1;i[l][i[l].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const s=new RegExp(r,n.sensitive?"":"i");function a(l){const u=l.match(s),f={};if(!u)return null;for(let p=1;p<u.length;p++){const h=u[p]||"",d=o[p-1];f[d.name]=h&&d.repeatable?h.split("/"):h}return f}function c(l){let u="",f=!1;for(const p of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const h of p)if(h.type===0)u+=h.value;else if(h.type===1){const{value:d,repeatable:g,optional:m}=h,E=d in l?l[d]:"";if(Qn(E)&&!g)throw new Error(`Provided param "${d}" is an array but it is not repeatable (* or + modifiers)`);const x=Qn(E)?E.join("/"):E;if(!x)if(m)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${d}"`);u+=x}}return u||"/"}return{re:s,score:i,keys:o,parse:a,stringify:c}}function aA(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function iE(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const o=aA(i[n],r[n]);if(o)return o;n++}if(Math.abs(r.length-i.length)===1){if(wv(i))return 1;if(wv(r))return-1}return r.length-i.length}function wv(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const cA={type:0,value:""},lA=/[a-zA-Z0-9_]/;function uA(e){if(!e)return[[]];if(e==="/")return[[cA]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=0,i=n;const r=[];let o;function s(){o&&r.push(o),o=[]}let a=0,c,l="",u="";function f(){l&&(n===0?o.push({type:0,value:l}):n===1||n===2||n===3?(o.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function p(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:c==="/"?(l&&f(),s()):c===":"?(f(),n=1):p();break;case 4:p(),n=i;break;case 1:c==="("?n=2:lA.test(c)?p():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),f(),s(),r}function fA(e,t,n){const i=sA(uA(e.path),n),r=Ve(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function pA(e,t){const n=[],i=new Map;t=Cv({strict:!1,end:!0,sensitive:!1},t);function r(f){return i.get(f)}function o(f,p,h){const d=!h,g=xv(f);g.aliasOf=h&&h.record;const m=Cv(t,f),E=[g];if("alias"in f){const y=typeof f.alias=="string"?[f.alias]:f.alias;for(const R of y)E.push(xv(Ve({},g,{components:h?h.record.components:g.components,path:R,aliasOf:h?h.record:g})))}let x,b;for(const y of E){const{path:R}=y;if(p&&R[0]!=="/"){const P=p.record.path,N=P[P.length-1]==="/"?"":"/";y.path=p.record.path+(R&&N+R)}if(x=fA(y,p,m),h?h.alias.push(x):(b=b||x,b!==x&&b.alias.push(x),d&&f.name&&!Sv(x)&&s(f.name)),rE(x)&&c(x),g.children){const P=g.children;for(let N=0;N<P.length;N++)o(P[N],x,h&&h.children[N])}h=h||x}return b?()=>{s(b)}:Da}function s(f){if(tE(f)){const p=i.get(f);p&&(i.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(s),p.alias.forEach(s))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&i.delete(f.record.name),f.children.forEach(s),f.alias.forEach(s))}}function a(){return n}function c(f){const p=gA(f,n);n.splice(p,0,f),f.record.name&&!Sv(f)&&i.set(f.record.name,f)}function l(f,p){let h,d={},g,m;if("name"in f&&f.name){if(h=i.get(f.name),!h)throw ys(1,{location:f});m=h.record.name,d=Ve(Ev(p.params,h.keys.filter(b=>!b.optional).concat(h.parent?h.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),f.params&&Ev(f.params,h.keys.map(b=>b.name))),g=h.stringify(d)}else if(f.path!=null)g=f.path,h=n.find(b=>b.re.test(g)),h&&(d=h.parse(g),m=h.record.name);else{if(h=p.name?i.get(p.name):n.find(b=>b.re.test(p.path)),!h)throw ys(1,{location:f,currentLocation:p});m=h.record.name,d=Ve({},p.params,f.params),g=h.stringify(d)}const E=[];let x=h;for(;x;)E.unshift(x.record),x=x.parent;return{name:m,path:g,params:d,matched:E,meta:dA(E)}}e.forEach(f=>o(f));function u(){n.length=0,i.clear()}return{addRoute:o,resolve:l,removeRoute:s,clearRoutes:u,getRoutes:a,getRecordMatcher:r}}function Ev(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function xv(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:hA(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function hA(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function Sv(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function dA(e){return e.reduce((t,n)=>Ve(t,n.meta),{})}function Cv(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function gA(e,t){let n=0,i=t.length;for(;n!==i;){const o=n+i>>1;iE(e,t[o])<0?i=o:n=o+1}const r=mA(e);return r&&(i=t.lastIndexOf(r,i-1)),i}function mA(e){let t=e;for(;t=t.parent;)if(rE(t)&&iE(e,t)===0)return t}function rE({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function vA(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const o=i[r].replace(Yw," "),s=o.indexOf("="),a=Ja(s<0?o:o.slice(0,s)),c=s<0?null:Ja(o.slice(s+1));if(a in t){let l=t[a];Qn(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function Rv(e){let t="";for(let n in e){const i=e[n];if(n=LP(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Qn(i)?i.map(o=>o&&eh(o)):[i&&eh(i)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function yA(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Qn(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const _A=Symbol(""),Tv=Symbol(""),ju=Symbol(""),oE=Symbol(""),nh=Symbol("");function oa(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function dr(e,t,n,i,r,o=s=>s()){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((a,c)=>{const l=p=>{p===!1?c(ys(4,{from:n,to:t})):p instanceof Error?c(p):iA(p)?c(ys(2,{from:t,to:p})):(s&&i.enterCallbacks[r]===s&&typeof p=="function"&&s.push(p),a())},u=o(()=>e.call(i&&i.instances[r],t,n,l));let f=Promise.resolve(u);e.length<3&&(f=f.then(l)),f.catch(p=>c(p))})}function cp(e,t,n,i,r=o=>o()){const o=[];for(const s of e)for(const a in s.components){let c=s.components[a];if(!(t!=="beforeRouteEnter"&&!s.instances[a]))if(Kw(c)){const u=(c.__vccOpts||c)[t];u&&o.push(dr(u,n,i,s,a,r))}else{let l=c();o.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${s.path}"`);const f=RP(u)?u.default:u;s.mods[a]=u,s.components[a]=f;const h=(f.__vccOpts||f)[t];return h&&dr(h,n,i,s,a,r)()}))}}return o}function Pv(e){const t=Ht(ju),n=Ht(oE),i=De(()=>{const c=be(e.to);return t.resolve(c)}),r=De(()=>{const{matched:c}=i.value,{length:l}=c,u=c[l-1],f=n.matched;if(!u||!f.length)return-1;const p=f.findIndex(vs.bind(null,u));if(p>-1)return p;const h=Av(c[l-2]);return l>1&&Av(u)===h&&f[f.length-1].path!==h?f.findIndex(vs.bind(null,c[l-2])):p}),o=De(()=>r.value>-1&&SA(n.params,i.value.params)),s=De(()=>r.value>-1&&r.value===n.matched.length-1&&Qw(n.params,i.value.params));function a(c={}){if(xA(c)){const l=t[be(e.replace)?"replace":"push"](be(e.to)).catch(Da);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:i,href:De(()=>i.value.href),isActive:o,isExactActive:s,navigate:a}}function bA(e){return e.length===1?e[0]:e}const wA=bn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Pv,setup(e,{slots:t}){const n=pc(Pv(e)),{options:i}=Ht(ju),r=De(()=>({[kv(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[kv(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&bA(t.default(n));return e.custom?o:bd("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},o)}}}),EA=wA;function xA(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function SA(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!Qn(r)||r.length!==i.length||i.some((o,s)=>o!==r[s]))return!1}return!0}function Av(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const kv=(e,t,n)=>e??t??n,CA=bn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=Ht(nh),r=De(()=>e.route||i.value),o=Ht(Tv,0),s=De(()=>{let l=be(o);const{matched:u}=r.value;let f;for(;(f=u[l])&&!f.components;)l++;return l}),a=De(()=>r.value.matched[s.value]);ka(Tv,De(()=>s.value+1)),ka(_A,a),ka(nh,r);const c=nn();return $i(()=>[c.value,a.value,e.name],([l,u,f],[p,h,d])=>{u&&(u.instances[f]=l,h&&h!==u&&l&&l===p&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),l&&u&&(!h||!vs(u,h)||!p)&&(u.enterCallbacks[f]||[]).forEach(g=>g(l))},{flush:"post"}),()=>{const l=r.value,u=e.name,f=a.value,p=f&&f.components[u];if(!p)return Ov(n.default,{Component:p,route:l});const h=f.props[u],d=h?h===!0?l.params:typeof h=="function"?h(l):h:null,m=bd(p,Ve({},d,t,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return Ov(n.default,{Component:m,route:l})||m}}});function Ov(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const RA=CA;function hH(e){const t=pA(e.routes,e),n=e.parseQuery||vA,i=e.stringifyQuery||Rv,r=e.history,o=oa(),s=oa(),a=oa(),c=OR(tr);let l=tr;as&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=sp.bind(null,S=>""+S),f=sp.bind(null,jP),p=sp.bind(null,Ja);function h(S,_){let v,A;return tE(S)?(v=t.getRecordMatcher(S),A=_):A=S,t.addRoute(A,v)}function d(S){const _=t.getRecordMatcher(S);_&&t.removeRoute(_)}function g(){return t.getRoutes().map(S=>S.record)}function m(S){return!!t.getRecordMatcher(S)}function E(S,_){if(_=Ve({},_||c.value),typeof S=="string"){const D=ap(n,S,_.path),j=t.resolve({path:D.path},_),z=r.createHref(D.fullPath);return Ve(D,j,{params:p(j.params),hash:Ja(D.hash),redirectedFrom:void 0,href:z})}let v;if(S.path!=null)v=Ve({},S,{path:ap(n,S.path,_.path).path});else{const D=Ve({},S.params);for(const j in D)D[j]==null&&delete D[j];v=Ve({},S,{params:f(D)}),_.params=f(_.params)}const A=t.resolve(v,_),I=S.hash||"";A.params=u(p(A.params));const C=zP(i,Ve({},S,{hash:$P(I),path:A.path})),T=r.createHref(C);return Ve({fullPath:C,hash:I,query:i===Rv?yA(S.query):S.query||{}},A,{redirectedFrom:void 0,href:T})}function x(S){return typeof S=="string"?ap(n,S,c.value.path):Ve({},S)}function b(S,_){if(l!==S)return ys(8,{from:_,to:S})}function y(S){return N(S)}function R(S){return y(Ve(x(S),{replace:!0}))}function P(S){const _=S.matched[S.matched.length-1];if(_&&_.redirect){const{redirect:v}=_;let A=typeof v=="function"?v(S):v;return typeof A=="string"&&(A=A.includes("?")||A.includes("#")?A=x(A):{path:A},A.params={}),Ve({query:S.query,hash:S.hash,params:A.path!=null?{}:S.params},A)}}function N(S,_){const v=l=E(S),A=c.value,I=S.state,C=S.force,T=S.replace===!0,D=P(v);if(D)return N(Ve(x(D),{state:typeof D=="object"?Ve({},I,D.state):I,force:C,replace:T}),_||v);const j=v;j.redirectedFrom=_;let z;return!C&&UP(i,A,v)&&(z=ys(16,{to:j,from:A}),Ue(A,A,!0,!1)),(z?Promise.resolve(z):L(j,A)).catch(H=>Ri(H)?Ri(H,2)?H:$e(H):we(H,j,A)).then(H=>{if(H){if(Ri(H,2))return N(Ve({replace:T},x(H.to),{state:typeof H.to=="object"?Ve({},I,H.to.state):I,force:C}),_||j)}else H=B(j,A,!0,T,I);return F(j,A,H),H})}function k(S,_){const v=b(S,_);return v?Promise.reject(v):Promise.resolve()}function O(S){const _=se.values().next().value;return _&&typeof _.runWithContext=="function"?_.runWithContext(S):S()}function L(S,_){let v;const[A,I,C]=TA(S,_);v=cp(A.reverse(),"beforeRouteLeave",S,_);for(const D of A)D.leaveGuards.forEach(j=>{v.push(dr(j,S,_))});const T=k.bind(null,S,_);return v.push(T),Ke(v).then(()=>{v=[];for(const D of o.list())v.push(dr(D,S,_));return v.push(T),Ke(v)}).then(()=>{v=cp(I,"beforeRouteUpdate",S,_);for(const D of I)D.updateGuards.forEach(j=>{v.push(dr(j,S,_))});return v.push(T),Ke(v)}).then(()=>{v=[];for(const D of C)if(D.beforeEnter)if(Qn(D.beforeEnter))for(const j of D.beforeEnter)v.push(dr(j,S,_));else v.push(dr(D.beforeEnter,S,_));return v.push(T),Ke(v)}).then(()=>(S.matched.forEach(D=>D.enterCallbacks={}),v=cp(C,"beforeRouteEnter",S,_,O),v.push(T),Ke(v))).then(()=>{v=[];for(const D of s.list())v.push(dr(D,S,_));return v.push(T),Ke(v)}).catch(D=>Ri(D,8)?D:Promise.reject(D))}function F(S,_,v){a.list().forEach(A=>O(()=>A(S,_,v)))}function B(S,_,v,A,I){const C=b(S,_);if(C)return C;const T=_===tr,D=as?history.state:{};v&&(A||T?r.replace(S.fullPath,Ve({scroll:T&&D&&D.scroll},I)):r.push(S.fullPath,I)),c.value=S,Ue(S,_,v,T),$e()}let V;function oe(){V||(V=r.listen((S,_,v)=>{if(!Ee.listening)return;const A=E(S),I=P(A);if(I){N(Ve(I,{replace:!0,force:!0}),A).catch(Da);return}l=A;const C=c.value;as&&XP(vv(C.fullPath,v.delta),Bu()),L(A,C).catch(T=>Ri(T,12)?T:Ri(T,2)?(N(Ve(x(T.to),{force:!0}),A).then(D=>{Ri(D,20)&&!v.delta&&v.type===Xa.pop&&r.go(-1,!1)}).catch(Da),Promise.reject()):(v.delta&&r.go(-v.delta,!1),we(T,A,C))).then(T=>{T=T||B(A,C,!1),T&&(v.delta&&!Ri(T,8)?r.go(-v.delta,!1):v.type===Xa.pop&&Ri(T,20)&&r.go(-1,!1)),F(A,C,T)}).catch(Da)}))}let Ne=oa(),le=oa(),Q;function we(S,_,v){$e(S);const A=le.list();return A.length?A.forEach(I=>I(S,_,v)):console.error(S),Promise.reject(S)}function ot(){return Q&&c.value!==tr?Promise.resolve():new Promise((S,_)=>{Ne.add([S,_])})}function $e(S){return Q||(Q=!S,oe(),Ne.list().forEach(([_,v])=>S?v(S):_()),Ne.reset()),S}function Ue(S,_,v,A){const{scrollBehavior:I}=e;if(!as||!I)return Promise.resolve();const C=!v&&ZP(vv(S.fullPath,0))||(A||!v)&&history.state&&history.state.scroll||null;return Ns().then(()=>I(S,_,C)).then(T=>T&&JP(T)).catch(T=>we(T,S,_))}const U=S=>r.go(S);let G;const se=new Set,Ee={currentRoute:c,listening:!0,addRoute:h,removeRoute:d,clearRoutes:t.clearRoutes,hasRoute:m,getRoutes:g,resolve:E,options:e,push:y,replace:R,go:U,back:()=>U(-1),forward:()=>U(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:le.add,isReady:ot,install(S){const _=this;S.component("RouterLink",EA),S.component("RouterView",RA),S.config.globalProperties.$router=_,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>be(c)}),as&&!G&&c.value===tr&&(G=!0,y(r.location).catch(I=>{}));const v={};for(const I in tr)Object.defineProperty(v,I,{get:()=>c.value[I],enumerable:!0});S.provide(ju,_),S.provide(oE,cd(v)),S.provide(nh,c);const A=S.unmount;se.add(S),S.unmount=function(){se.delete(S),se.size<1&&(l=tr,V&&V(),V=null,c.value=tr,G=!1,Q=!1),A()}}};function Ke(S){return S.reduce((_,v)=>_.then(()=>O(v)),Promise.resolve())}return Ee}function TA(e,t){const n=[],i=[],r=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const a=t.matched[s];a&&(e.matched.find(l=>vs(l,a))?i.push(a):n.push(a));const c=e.matched[s];c&&(t.matched.find(l=>vs(l,c))||r.push(c))}return[n,i,r]}function dH(){return Ht(ju)}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let sE;const Fu=e=>sE=e,aE=Symbol();function ih(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ia;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ia||(Ia={}));function gH(){const e=$0(!0),t=e.run(()=>nn({}));let n=[],i=[];const r=pd({install(o){Fu(r),r._a=o,o.provide(aE,r),o.config.globalProperties.$pinia=r,i.forEach(s=>n.push(s)),i=[]},use(o){return this._a?n.push(o):i.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}const cE=()=>{};function Dv(e,t,n,i=cE){e.push(t);const r=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),i())};return!n&&nd()&&L0(r),r}function Ho(e,...t){e.slice().forEach(n=>{n(...t)})}const PA=e=>e(),Mv=Symbol(),lp=Symbol();function rh(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,i)=>e.set(i,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],r=e[n];ih(r)&&ih(i)&&e.hasOwnProperty(n)&&!ft(i)&&!Er(i)?e[n]=rh(r,i):e[n]=i}return e}const AA=Symbol();function kA(e){return!ih(e)||!Object.prototype.hasOwnProperty.call(e,AA)}const{assign:lr}=Object;function OA(e){return!!(ft(e)&&e.effect)}function DA(e,t,n,i){const{state:r,actions:o,getters:s}=t,a=n.state.value[e];let c;function l(){a||(n.state.value[e]=r?r():{});const u=IR(n.state.value[e]);return lr(u,o,Object.keys(s||{}).reduce((f,p)=>(f[p]=pd(De(()=>{Fu(n);const h=n._s.get(e);return s[p].call(h,h)})),f),{}))}return c=lE(e,l,t,n,i,!0),c}function lE(e,t,n={},i,r,o){let s;const a=lr({actions:{}},n),c={deep:!0};let l,u,f=[],p=[],h;const d=i.state.value[e];!o&&!d&&(i.state.value[e]={}),nn({});let g;function m(k){let O;l=u=!1,typeof k=="function"?(k(i.state.value[e]),O={type:Ia.patchFunction,storeId:e,events:h}):(rh(i.state.value[e],k),O={type:Ia.patchObject,payload:k,storeId:e,events:h});const L=g=Symbol();Ns().then(()=>{g===L&&(l=!0)}),u=!0,Ho(f,O,i.state.value[e])}const E=o?function(){const{state:O}=n,L=O?O():{};this.$patch(F=>{lr(F,L)})}:cE;function x(){s.stop(),f=[],p=[],i._s.delete(e)}const b=(k,O="")=>{if(Mv in k)return k[lp]=O,k;const L=function(){Fu(i);const F=Array.from(arguments),B=[],V=[];function oe(Q){B.push(Q)}function Ne(Q){V.push(Q)}Ho(p,{args:F,name:L[lp],store:R,after:oe,onError:Ne});let le;try{le=k.apply(this&&this.$id===e?this:R,F)}catch(Q){throw Ho(V,Q),Q}return le instanceof Promise?le.then(Q=>(Ho(B,Q),Q)).catch(Q=>(Ho(V,Q),Promise.reject(Q))):(Ho(B,le),le)};return L[Mv]=!0,L[lp]=O,L},y={_p:i,$id:e,$onAction:Dv.bind(null,p),$patch:m,$reset:E,$subscribe(k,O={}){const L=Dv(f,k,O.detached,()=>F()),F=s.run(()=>$i(()=>i.state.value[e],B=>{(O.flush==="sync"?u:l)&&k({storeId:e,type:Ia.direct,events:h},B)},lr({},c,O)));return L},$dispose:x},R=pc(y);i._s.set(e,R);const N=(i._a&&i._a.runWithContext||PA)(()=>i._e.run(()=>(s=$0()).run(()=>t({action:b}))));for(const k in N){const O=N[k];if(ft(O)&&!OA(O)||Er(O))o||(d&&kA(O)&&(ft(O)?O.value=d[k]:rh(O,d[k])),i.state.value[e][k]=O);else if(typeof O=="function"){const L=b(O,k);N[k]=L,a.actions[k]=O}}return lr(R,N),lr(Be(R),N),Object.defineProperty(R,"$state",{get:()=>i.state.value[e],set:k=>{m(O=>{lr(O,k)})}}),i._p.forEach(k=>{lr(R,s.run(()=>k({store:R,app:i._a,pinia:i,options:a})))}),d&&o&&n.hydrate&&n.hydrate(R.$state,d),l=!0,u=!0,R}/*! #__NO_SIDE_EFFECTS__ */function mH(e,t,n){let i;const r=typeof t=="function";i=r?n:t;function o(s,a){const c=dT();return s=s||(c?Ht(aE,null):null),s&&Fu(s),s=sE,s._s.has(e)||(r?lE(e,t,i,s):DA(e,i,s)),s._s.get(e)}return o.$id=e,o}const uE=Symbol(),Dl="el",MA="is-",eo=(e,t,n,i,r)=>{let o=`${e}-${t}`;return n&&(o+=`-${n}`),i&&(o+=`__${i}`),r&&(o+=`--${r}`),o},fE=Symbol("namespaceContextKey"),IA=e=>{const t=e||(Cr()?Ht(fE,nn(Dl)):nn(Dl));return De(()=>be(t)||Dl)},Ed=(e,t)=>{const n=IA(t);return{namespace:n,b:(g="")=>eo(n.value,e,g,"",""),e:g=>g?eo(n.value,e,"",g,""):"",m:g=>g?eo(n.value,e,"","",g):"",be:(g,m)=>g&&m?eo(n.value,e,g,m,""):"",em:(g,m)=>g&&m?eo(n.value,e,"",g,m):"",bm:(g,m)=>g&&m?eo(n.value,e,g,"",m):"",bem:(g,m,E)=>g&&m&&E?eo(n.value,e,g,m,E):"",is:(g,...m)=>{const E=m.length>=1?m[0]:!0;return g&&E?`${MA}${g}`:""},cssVar:g=>{const m={};for(const E in g)g[E]&&(m[`--${n.value}-${E}`]=g[E]);return m},cssVarName:g=>`--${n.value}-${g}`,cssVarBlock:g=>{const m={};for(const E in g)g[E]&&(m[`--${n.value}-${e}-${E}`]=g[E]);return m},cssVarBlockName:g=>`--${n.value}-${e}-${g}`}};var NA=typeof global=="object"&&global&&global.Object===Object&&global,$A=typeof self=="object"&&self&&self.Object===Object&&self,xd=NA||$A||Function("return this")(),_s=xd.Symbol,pE=Object.prototype,LA=pE.hasOwnProperty,BA=pE.toString,sa=_s?_s.toStringTag:void 0;function jA(e){var t=LA.call(e,sa),n=e[sa];try{e[sa]=void 0;var i=!0}catch{}var r=BA.call(e);return i&&(t?e[sa]=n:delete e[sa]),r}var FA=Object.prototype,HA=FA.toString;function zA(e){return HA.call(e)}var UA="[object Null]",VA="[object Undefined]",Iv=_s?_s.toStringTag:void 0;function hE(e){return e==null?e===void 0?VA:UA:Iv&&Iv in Object(e)?jA(e):zA(e)}function WA(e){return e!=null&&typeof e=="object"}var GA="[object Symbol]";function Sd(e){return typeof e=="symbol"||WA(e)&&hE(e)==GA}function KA(e,t){for(var n=-1,i=e==null?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}var Cd=Array.isArray,Nv=_s?_s.prototype:void 0,$v=Nv?Nv.toString:void 0;function dE(e){if(typeof e=="string")return e;if(Cd(e))return KA(e,dE)+"";if(Sd(e))return $v?$v.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function gE(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var qA="[object AsyncFunction]",YA="[object Function]",JA="[object GeneratorFunction]",XA="[object Proxy]";function ZA(e){if(!gE(e))return!1;var t=hE(e);return t==YA||t==JA||t==qA||t==XA}var up=xd["__core-js_shared__"],Lv=function(){var e=/[^.]+$/.exec(up&&up.keys&&up.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function QA(e){return!!Lv&&Lv in e}var ek=Function.prototype,tk=ek.toString;function nk(e){if(e!=null){try{return tk.call(e)}catch{}try{return e+""}catch{}}return""}var ik=/[\\^$.*+?()[\]{}|]/g,rk=/^\[object .+?Constructor\]$/,ok=Function.prototype,sk=Object.prototype,ak=ok.toString,ck=sk.hasOwnProperty,lk=RegExp("^"+ak.call(ck).replace(ik,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function uk(e){if(!gE(e)||QA(e))return!1;var t=ZA(e)?lk:rk;return t.test(nk(e))}function fk(e,t){return e==null?void 0:e[t]}function mE(e,t){var n=fk(e,t);return uk(n)?n:void 0}function pk(e,t){return e===t||e!==e&&t!==t}var hk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dk=/^\w*$/;function gk(e,t){if(Cd(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Sd(e)?!0:dk.test(e)||!hk.test(e)||t!=null&&e in Object(t)}var Za=mE(Object,"create");function mk(){this.__data__=Za?Za(null):{},this.size=0}function vk(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var yk="__lodash_hash_undefined__",_k=Object.prototype,bk=_k.hasOwnProperty;function wk(e){var t=this.__data__;if(Za){var n=t[e];return n===yk?void 0:n}return bk.call(t,e)?t[e]:void 0}var Ek=Object.prototype,xk=Ek.hasOwnProperty;function Sk(e){var t=this.__data__;return Za?t[e]!==void 0:xk.call(t,e)}var Ck="__lodash_hash_undefined__";function Rk(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Za&&t===void 0?Ck:t,this}function bo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}bo.prototype.clear=mk;bo.prototype.delete=vk;bo.prototype.get=wk;bo.prototype.has=Sk;bo.prototype.set=Rk;function Tk(){this.__data__=[],this.size=0}function Hu(e,t){for(var n=e.length;n--;)if(pk(e[n][0],t))return n;return-1}var Pk=Array.prototype,Ak=Pk.splice;function kk(e){var t=this.__data__,n=Hu(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():Ak.call(t,n,1),--this.size,!0}function Ok(e){var t=this.__data__,n=Hu(t,e);return n<0?void 0:t[n][1]}function Dk(e){return Hu(this.__data__,e)>-1}function Mk(e,t){var n=this.__data__,i=Hu(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function $s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}$s.prototype.clear=Tk;$s.prototype.delete=kk;$s.prototype.get=Ok;$s.prototype.has=Dk;$s.prototype.set=Mk;var Ik=mE(xd,"Map");function Nk(){this.size=0,this.__data__={hash:new bo,map:new(Ik||$s),string:new bo}}function $k(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function zu(e,t){var n=e.__data__;return $k(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Lk(e){var t=zu(this,e).delete(e);return this.size-=t?1:0,t}function Bk(e){return zu(this,e).get(e)}function jk(e){return zu(this,e).has(e)}function Fk(e,t){var n=zu(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function To(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}To.prototype.clear=Nk;To.prototype.delete=Lk;To.prototype.get=Bk;To.prototype.has=jk;To.prototype.set=Fk;var Hk="Expected a function";function Rd(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Hk);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Rd.Cache||To),n}Rd.Cache=To;var zk=500;function Uk(e){var t=Rd(e,function(i){return n.size===zk&&n.clear(),i}),n=t.cache;return t}var Vk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wk=/\\(\\)?/g,Gk=Uk(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Vk,function(n,i,r,o){t.push(r?o.replace(Wk,"$1"):i||n)}),t});function Kk(e){return e==null?"":dE(e)}function qk(e,t){return Cd(e)?e:gk(e,t)?[e]:Gk(Kk(e))}function Yk(e){if(typeof e=="string"||Sd(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Jk(e,t){t=qk(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[Yk(t[n++])];return n&&n==i?e:void 0}function Xk(e,t,n){var i=e==null?void 0:Jk(e,t);return i===void 0?n:i}function Zk(e){for(var t=-1,n=e==null?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i}const Qk=e=>e===void 0,fp=e=>typeof e=="boolean",wo=e=>typeof e=="number",eO=e=>typeof Element>"u"?!1:e instanceof Element,tO=e=>Je(e)?!Number.isNaN(Number(e)):!1;var Bv;const Ls=typeof window<"u",nO=e=>typeof e=="string",iO=()=>{};Ls&&((Bv=window==null?void 0:window.navigator)!=null&&Bv.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Td(e){return typeof e=="function"?e():be(e)}function rO(e){return e}function Pd(e){return nd()?(L0(e),!0):!1}function oO(e,t=!0){Cr()?dc(e):t?e():Ns(e)}function sO(e,t,n={}){const{immediate:i=!0}=n,r=nn(!1);let o=null;function s(){o&&(clearTimeout(o),o=null)}function a(){r.value=!1,s()}function c(...l){s(),r.value=!0,o=setTimeout(()=>{r.value=!1,o=null,e(...l)},Td(t))}return i&&(r.value=!0,Ls&&c()),Pd(a),{isPending:ld(r),start:c,stop:a}}function vE(e){var t;const n=Td(e);return(t=n==null?void 0:n.$el)!=null?t:n}const yE=Ls?window:void 0;function aO(...e){let t,n,i,r;if(nO(e[0])||Array.isArray(e[0])?([n,i,r]=e,t=yE):[t,n,i,r]=e,!t)return iO;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const o=[],s=()=>{o.forEach(u=>u()),o.length=0},a=(u,f,p,h)=>(u.addEventListener(f,p,h),()=>u.removeEventListener(f,p,h)),c=$i(()=>[vE(t),Td(r)],([u,f])=>{s(),u&&o.push(...n.flatMap(p=>i.map(h=>a(u,p,h,f))))},{immediate:!0,flush:"post"}),l=()=>{c(),s()};return Pd(l),l}function cO(e,t=!1){const n=nn(),i=()=>n.value=!!e();return i(),oO(i,t),n}const jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fv="__vueuse_ssr_handlers__";jv[Fv]=jv[Fv]||{};var Hv=Object.getOwnPropertySymbols,lO=Object.prototype.hasOwnProperty,uO=Object.prototype.propertyIsEnumerable,fO=(e,t)=>{var n={};for(var i in e)lO.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&Hv)for(var i of Hv(e))t.indexOf(i)<0&&uO.call(e,i)&&(n[i]=e[i]);return n};function pO(e,t,n={}){const i=n,{window:r=yE}=i,o=fO(i,["window"]);let s;const a=cO(()=>r&&"ResizeObserver"in r),c=()=>{s&&(s.disconnect(),s=void 0)},l=$i(()=>vE(e),f=>{c(),a.value&&r&&f&&(s=new ResizeObserver(t),s.observe(f,o))},{immediate:!0,flush:"post"}),u=()=>{c(),l()};return Pd(u),{isSupported:a,stop:u}}var zv;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(zv||(zv={}));var hO=Object.defineProperty,Uv=Object.getOwnPropertySymbols,dO=Object.prototype.hasOwnProperty,gO=Object.prototype.propertyIsEnumerable,Vv=(e,t,n)=>t in e?hO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mO=(e,t)=>{for(var n in t||(t={}))dO.call(t,n)&&Vv(e,n,t[n]);if(Uv)for(var n of Uv(t))gO.call(t,n)&&Vv(e,n,t[n]);return e};const vO={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};mO({linear:rO},vO);const Wv={current:0},Gv=nn(0),_E=2e3,Kv=Symbol("elZIndexContextKey"),bE=Symbol("zIndexContextKey"),yO=e=>{const t=Cr()?Ht(Kv,Wv):Wv,n=e||(Cr()?Ht(bE,void 0):void 0),i=De(()=>{const s=be(n);return wo(s)?s:_E}),r=De(()=>i.value+Gv.value),o=()=>(t.current++,Gv.value=t.current,r.value);return!Ls&&Ht(Kv),{initialZIndex:i,currentZIndex:r,nextZIndex:o}};var _O={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const bO=e=>(t,n)=>wO(t,n,be(e)),wO=(e,t,n)=>Xk(n,e,e).replace(/\{(\w+)\}/g,(i,r)=>{var o;return`${(o=t==null?void 0:t[r])!=null?o:`{${r}}`}`}),EO=e=>{const t=De(()=>be(e).name),n=ft(e)?e:nn(e);return{lang:t,locale:n,t:bO(e)}},wE=Symbol("localeContextKey"),xO=e=>{const t=e||Ht(wE,nn());return EO(De(()=>t.value||_O))},EE="__epPropKey",Wn=e=>e,SO=e=>Ge(e)&&!!e[EE],xE=(e,t)=>{if(!Ge(e)||SO(e))return e;const{values:n,required:i,default:r,type:o,validator:s}=e,c={type:o,required:!!i,validator:n||s?l=>{let u=!1,f=[];if(n&&(f=Array.from(n),je(e,"default")&&f.push(r),u||(u=f.includes(l))),s&&(u||(u=s(l))),!u&&f.length>0){const p=[...new Set(f)].map(h=>JSON.stringify(h)).join(", ");KT(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${p}], got value ${JSON.stringify(l)}.`)}return u}:void 0,[EE]:!0};return je(e,"default")&&(c.default=r),c},vc=e=>Zk(Object.entries(e).map(([t,n])=>[t,xE(n,t)])),CO=["","default","small","large"],RO=xE({type:String,values:CO,required:!1}),TO=Symbol("size"),PO=Symbol("emptyValuesContextKey"),AO=vc({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:e=>_e(e)?!e():!e}}),qv=e=>Object.keys(e),su=nn();function SE(e,t=void 0){return Cr()?Ht(uE,su):su}function kO(e,t){const n=SE(),i=Ed(e,De(()=>{var a;return((a=n.value)==null?void 0:a.namespace)||Dl})),r=xO(De(()=>{var a;return(a=n.value)==null?void 0:a.locale})),o=yO(De(()=>{var a;return((a=n.value)==null?void 0:a.zIndex)||_E})),s=De(()=>{var a;return be(t)||((a=n.value)==null?void 0:a.size)||""});return OO(De(()=>be(n)||{})),{ns:i,locale:r,zIndex:o,size:s}}const OO=(e,t,n=!1)=>{var i;const r=!!Cr(),o=r?SE():void 0,s=(i=void 0)!=null?i:r?ka:void 0;if(!s)return;const a=De(()=>{const c=be(e);return o!=null&&o.value?DO(o.value,c):c});return s(uE,a),s(wE,De(()=>a.value.locale)),s(fE,De(()=>a.value.namespace)),s(bE,De(()=>a.value.zIndex)),s(TO,{size:De(()=>a.value.size||"")}),s(PO,De(()=>({emptyValues:a.value.emptyValues,valueOnClear:a.value.valueOnClear}))),(n||!su.value)&&(su.value=a.value),a},DO=(e,t)=>{const n=[...new Set([...qv(e),...qv(t)])],i={};for(const r of n)i[r]=t[r]!==void 0?t[r]:e[r];return i};var Ad=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n};function oh(e,t="px"){if(!e)return"";if(wo(e)||tO(e))return`${e}${t}`;if(Je(e))return e}const CE=(e,t)=>(e.install=n=>{for(const i of[e,...Object.values({})])n.component(i.name,i)},e),MO=(e,t)=>(e.install=n=>{e._context=n._context,n.config.globalProperties[t]=e},e),IO=vc({size:{type:Wn([Number,String])},color:{type:String}}),NO=bn({name:"ElIcon",inheritAttrs:!1}),$O=bn({...NO,props:IO,setup(e){const t=e,n=Ed("icon"),i=De(()=>{const{size:r,color:o}=t;return!r&&!o?{}:{fontSize:Qk(r)?void 0:oh(r),"--color":o}});return(r,o)=>(Nt(),zi("i",Lw({class:be(n).b(),style:be(i)},r.$attrs),[eu(r.$slots,"default")],16))}});var LO=Ad($O,[["__file","icon.vue"]]);const Yv=CE(LO);/*! Element Plus Icons Vue v2.3.1 */var BO=bn({name:"CircleCloseFilled",__name:"circle-close-filled",setup(e){return(t,n)=>(Nt(),zi("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[gi("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),jO=BO,FO=bn({name:"Close",__name:"close",setup(e){return(t,n)=>(Nt(),zi("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[gi("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),HO=FO,zO=bn({name:"InfoFilled",__name:"info-filled",setup(e){return(t,n)=>(Nt(),zi("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[gi("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),Jv=zO,UO=bn({name:"SuccessFilled",__name:"success-filled",setup(e){return(t,n)=>(Nt(),zi("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[gi("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),VO=UO,WO=bn({name:"WarningFilled",__name:"warning-filled",setup(e){return(t,n)=>(Nt(),zi("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[gi("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),GO=WO;const KO=Wn([String,Object,Function]),qO={Close:HO},Xv={primary:Jv,success:VO,warning:GO,error:jO,info:Jv},YO=e=>e,JO={esc:"Escape"},XO=vc({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:Wn([String,Object,Array])},offset:{type:Wn(Array),default:[0,0]},badgeClass:{type:String}}),ZO=bn({name:"ElBadge"}),QO=bn({...ZO,props:XO,setup(e,{expose:t}){const n=e,i=Ed("badge"),r=De(()=>n.isDot?"":wo(n.value)&&wo(n.max)?n.max<n.value?`${n.max}+`:`${n.value}`:`${n.value}`),o=De(()=>{var s,a,c,l,u;return[{backgroundColor:n.color,marginRight:oh(-((a=(s=n.offset)==null?void 0:s[0])!=null?a:0)),marginTop:oh((l=(c=n.offset)==null?void 0:c[1])!=null?l:0)},(u=n.badgeStyle)!=null?u:{}]});return t({content:r}),(s,a)=>(Nt(),zi("div",{class:Vn(be(i).b())},[eu(s.$slots,"default"),Lt(zw,{name:`${be(i).namespace.value}-zoom-in-center`,persisted:""},{default:Pa(()=>[ow(gi("sup",{class:Vn([be(i).e("content"),be(i).em("content",s.type),be(i).is("fixed",!!s.$slots.default),be(i).is("dot",s.isDot),be(i).is("hide-zero",!s.showZero&&n.value===0),s.badgeClass]),style:uc(be(o))},[eu(s.$slots,"content",{value:be(r)},()=>[$w(td(be(r)),1)])],6),[[Vw,!s.hidden&&(be(r)||s.isDot||s.$slots.content)]])]),_:3},8,["name"])],2))}});var eD=Ad(QO,[["__file","badge.vue"]]);const tD=CE(eD);function nD(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function iD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}vc({a11y:{type:Boolean,default:!0},locale:{type:Wn(Object)},size:RO,button:{type:Wn(Object)},link:{type:Wn(Object)},experimentalFeatures:{type:Wn(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Wn(Object)},zIndex:Number,namespace:{type:String,default:"el"},...AO});const Tn={},RE=["primary","success","info","warning","error"],Zt=YO({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Ls?document.body:void 0}),rD=vc({customClass:{type:String,default:Zt.customClass},dangerouslyUseHTMLString:{type:Boolean,default:Zt.dangerouslyUseHTMLString},duration:{type:Number,default:Zt.duration},icon:{type:KO,default:Zt.icon},id:{type:String,default:Zt.id},message:{type:Wn([String,Object,Function]),default:Zt.message},onClose:{type:Wn(Function),default:Zt.onClose},showClose:{type:Boolean,default:Zt.showClose},type:{type:String,values:RE,default:Zt.type},plain:{type:Boolean,default:Zt.plain},offset:{type:Number,default:Zt.offset},zIndex:{type:Number,default:Zt.zIndex},grouping:{type:Boolean,default:Zt.grouping},repeatNum:{type:Number,default:Zt.repeatNum}}),oD={destroy:()=>!0},Gn=cd([]),sD=e=>{const t=Gn.findIndex(r=>r.id===e),n=Gn[t];let i;return t>0&&(i=Gn[t-1]),{current:n,prev:i}},aD=e=>{const{prev:t}=sD(e);return t?t.vm.exposed.bottom.value:0},cD=(e,t)=>Gn.findIndex(i=>i.id===e)>0?16:t,lD=bn({name:"ElMessage"}),uD=bn({...lD,props:rD,emits:oD,setup(e,{expose:t,emit:n}){const i=e,{Close:r}=qO,o=nn(!1),{ns:s,zIndex:a}=kO("message"),{currentZIndex:c,nextZIndex:l}=a,u=nn(),f=nn(!1),p=nn(0);let h;const d=De(()=>i.type?i.type==="error"?"danger":i.type:"info"),g=De(()=>{const O=i.type;return{[s.bm("icon",O)]:O&&Xv[O]}}),m=De(()=>i.icon||Xv[i.type]||""),E=De(()=>aD(i.id)),x=De(()=>cD(i.id,i.offset)+E.value),b=De(()=>p.value+x.value),y=De(()=>({top:`${x.value}px`,zIndex:c.value}));function R(){i.duration!==0&&({stop:h}=sO(()=>{N()},i.duration))}function P(){h==null||h()}function N(){f.value=!1,Ns(()=>{var O;o.value||((O=i.onClose)==null||O.call(i),n("destroy"))})}function k({code:O}){O===JO.esc&&N()}return dc(()=>{R(),l(),f.value=!0}),$i(()=>i.repeatNum,()=>{P(),R()}),aO(document,"keydown",k),pO(u,()=>{p.value=u.value.getBoundingClientRect().height}),t({visible:f,bottom:b,close:N}),(O,L)=>(Nt(),mr(zw,{name:be(s).b("fade"),onBeforeEnter:F=>o.value=!0,onBeforeLeave:O.onClose,onAfterLeave:F=>O.$emit("destroy"),persisted:""},{default:Pa(()=>[ow(gi("div",{id:O.id,ref_key:"messageRef",ref:u,class:Vn([be(s).b(),{[be(s).m(O.type)]:O.type},be(s).is("closable",O.showClose),be(s).is("plain",O.plain),O.customClass]),style:uc(be(y)),role:"alert",onMouseenter:P,onMouseleave:R},[O.repeatNum>1?(Nt(),mr(be(tD),{key:0,value:O.repeatNum,type:be(d),class:Vn(be(s).e("badge"))},null,8,["value","type","class"])):tl("v-if",!0),be(m)?(Nt(),mr(be(Yv),{key:1,class:Vn([be(s).e("icon"),be(g)])},{default:Pa(()=>[(Nt(),mr(oT(be(m))))]),_:1},8,["class"])):tl("v-if",!0),eu(O.$slots,"default",{},()=>[O.dangerouslyUseHTMLString?(Nt(),zi(fn,{key:1},[tl(" Caution here, message could've been compromised, never use user's input as message "),gi("p",{class:Vn(be(s).e("content")),innerHTML:O.message},null,10,["innerHTML"])],2112)):(Nt(),zi("p",{key:0,class:Vn(be(s).e("content"))},td(O.message),3))]),O.showClose?(Nt(),mr(be(Yv),{key:2,class:Vn(be(s).e("closeBtn")),onClick:bP(N,["stop"])},{default:Pa(()=>[Lt(be(r))]),_:1},8,["class","onClick"])):tl("v-if",!0)],46,["id"]),[[Vw,f.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var fD=Ad(uD,[["__file","message.vue"]]);let pD=1;const TE=e=>{const t=!e||Je(e)||Sr(e)||_e(e)?{message:e}:e,n={...Zt,...t};if(!n.appendTo)n.appendTo=document.body;else if(Je(n.appendTo)){let i=document.querySelector(n.appendTo);eO(i)||(i=document.body),n.appendTo=i}return fp(Tn.grouping)&&!n.grouping&&(n.grouping=Tn.grouping),wo(Tn.duration)&&n.duration===3e3&&(n.duration=Tn.duration),wo(Tn.offset)&&n.offset===16&&(n.offset=Tn.offset),fp(Tn.showClose)&&!n.showClose&&(n.showClose=Tn.showClose),fp(Tn.plain)&&!n.plain&&(n.plain=Tn.plain),n},hD=e=>{const t=Gn.indexOf(e);if(t===-1)return;Gn.splice(t,1);const{handler:n}=e;n.close()},dD=({appendTo:e,...t},n)=>{const i=`message_${pD++}`,r=t.onClose,o=document.createElement("div"),s={...t,id:i,onClose:()=>{r==null||r(),hD(u)},onDestroy:()=>{hv(null,o)}},a=Lt(fD,s,_e(s.message)||Sr(s.message)?{default:_e(s.message)?s.message:()=>s.message}:null);a.appContext=n||bs._context,hv(a,o),e.appendChild(o.firstElementChild);const c=a.component,u={id:i,vnode:a,vm:c,handler:{close:()=>{c.exposed.close()}},props:a.component.props};return u},bs=(e={},t)=>{if(!Ls)return{close:()=>{}};const n=TE(e);if(n.grouping&&Gn.length){const r=Gn.find(({vnode:o})=>{var s;return((s=o.props)==null?void 0:s.message)===n.message});if(r)return r.props.repeatNum+=1,r.props.type=n.type,r.handler}if(wo(Tn.max)&&Gn.length>=Tn.max)return{close:()=>{}};const i=dD(n,t);return Gn.push(i),i.handler};RE.forEach(e=>{bs[e]=(t={},n)=>{const i=TE(t);return bs({...i,type:e},n)}});function gD(e){const t=[...Gn];for(const n of t)(!e||e===n.props.type)&&n.handler.close()}bs.closeAll=gD;bs._context=null;const vH=MO(bs,"$message"),mD=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>mc(async()=>{const{default:i}=await Promise.resolve().then(()=>Bs);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)};class kd extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class vD extends kd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Zv extends kd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Qv extends kd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var sh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(sh||(sh={}));var yD=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(f){s(f)}}function c(u){try{l(i.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})};class _D{constructor(t,{headers:n={},customFetch:i,region:r=sh.Any}={}){this.url=t,this.headers=n,this.region=r,this.fetch=mD(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var i;return yD(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:s}=n;let a={},{region:c}=n;c||(c=this.region);const l=new URL(`${this.url}/${t}`);c&&c!=="any"&&(a["x-region"]=c,l.searchParams.set("forceFunctionRegion",c));let u;s&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=s):typeof s=="string"?(a["Content-Type"]="text/plain",u=s):typeof FormData<"u"&&s instanceof FormData?u=s:(a["Content-Type"]="application/json",u=JSON.stringify(s)));const f=yield this.fetch(l.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:u}).catch(g=>{throw new vD(g)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new Zv(f);if(!f.ok)throw new Qv(f);let h=((i=f.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),d;return h==="application/json"?d=yield f.json():h==="application/octet-stream"?d=yield f.blob():h==="text/event-stream"?d=f:h==="multipart/form-data"?d=yield f.formData():d=yield f.text(),{data:d,error:null,response:f}}catch(r){return{data:null,error:r,response:r instanceof Qv||r instanceof Zv?r.context:void 0}}})}}var Tt={},zo={},Uo={},Vo={},Wo={},Go={},bD=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ws=bD();const wD=ws.fetch,PE=ws.fetch.bind(ws),AE=ws.Headers,ED=ws.Request,xD=ws.Response,Bs=Object.freeze(Object.defineProperty({__proto__:null,Headers:AE,Request:ED,Response:xD,default:PE,fetch:wD},Symbol.toStringTag,{value:"Module"})),SD=iD(Bs);var nl={},ey;function kE(){if(ey)return nl;ey=1,Object.defineProperty(nl,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return nl.default=e,nl}var ty;function OE(){if(ty)return Go;ty=1;var e=Go&&Go.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Go,"__esModule",{value:!0});const t=e(SD),n=e(kE());class i{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,s){return this.headers=Object.assign({},this.headers),this.headers[o]=s,this}then(o,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let c=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,f,p;let h=null,d=null,g=null,m=l.status,E=l.statusText;if(l.ok){if(this.method!=="HEAD"){const R=await l.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=R:d=JSON.parse(R))}const b=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),y=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");b&&y&&y.length>1&&(g=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(h={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,g=null,m=406,E="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await l.text();try{h=JSON.parse(b),Array.isArray(h)&&l.status===404&&(d=[],h=null,m=200,E="OK")}catch{l.status===404&&b===""?(m=204,E="No Content"):h={message:b}}if(h&&this.isMaybeSingle&&(!((p=h==null?void 0:h.details)===null||p===void 0)&&p.includes("0 rows"))&&(h=null,m=200,E="OK"),h&&this.shouldThrowOnError)throw new n.default(h)}return{error:h,data:d,count:g,status:m,statusText:E}});return this.shouldThrowOnError||(c=c.catch(l=>{var u,f,p;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(f=l==null?void 0:l.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(p=l==null?void 0:l.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,s)}returns(){return this}overrideTypes(){return this}}return Go.default=i,Go}var ny;function DE(){if(ny)return Wo;ny=1;var e=Wo&&Wo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Wo,"__esModule",{value:!0});const t=e(OE());class n extends t.default{select(r){let o=!1;const s=(r??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:o=!0,nullsFirst:s,foreignTable:a,referencedTable:c=a}={}){const l=c?`${c}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${r}.${o?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:o,referencedTable:s=o}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${r}`),this}range(r,o,{foreignTable:s,referencedTable:a=s}={}){const c=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${r}`),this.url.searchParams.set(l,`${o-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:o=!1,settings:s=!1,buffers:a=!1,wal:c=!1,format:l="text"}={}){var u;const f=[r?"analyze":null,o?"verbose":null,s?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${p}"; options=${f};`,l==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Wo.default=n,Wo}var iy;function Od(){if(iy)return Vo;iy=1;var e=Vo&&Vo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Vo,"__esModule",{value:!0});const t=e(DE());class n extends t.default{eq(r,o){return this.url.searchParams.append(r,`eq.${o}`),this}neq(r,o){return this.url.searchParams.append(r,`neq.${o}`),this}gt(r,o){return this.url.searchParams.append(r,`gt.${o}`),this}gte(r,o){return this.url.searchParams.append(r,`gte.${o}`),this}lt(r,o){return this.url.searchParams.append(r,`lt.${o}`),this}lte(r,o){return this.url.searchParams.append(r,`lte.${o}`),this}like(r,o){return this.url.searchParams.append(r,`like.${o}`),this}likeAllOf(r,o){return this.url.searchParams.append(r,`like(all).{${o.join(",")}}`),this}likeAnyOf(r,o){return this.url.searchParams.append(r,`like(any).{${o.join(",")}}`),this}ilike(r,o){return this.url.searchParams.append(r,`ilike.${o}`),this}ilikeAllOf(r,o){return this.url.searchParams.append(r,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(r,o){return this.url.searchParams.append(r,`ilike(any).{${o.join(",")}}`),this}is(r,o){return this.url.searchParams.append(r,`is.${o}`),this}in(r,o){const s=Array.from(new Set(o)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(r,`in.(${s})`),this}contains(r,o){return typeof o=="string"?this.url.searchParams.append(r,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(r,`cs.{${o.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(o)}`),this}containedBy(r,o){return typeof o=="string"?this.url.searchParams.append(r,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(r,`cd.{${o.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(o)}`),this}rangeGt(r,o){return this.url.searchParams.append(r,`sr.${o}`),this}rangeGte(r,o){return this.url.searchParams.append(r,`nxl.${o}`),this}rangeLt(r,o){return this.url.searchParams.append(r,`sl.${o}`),this}rangeLte(r,o){return this.url.searchParams.append(r,`nxr.${o}`),this}rangeAdjacent(r,o){return this.url.searchParams.append(r,`adj.${o}`),this}overlaps(r,o){return typeof o=="string"?this.url.searchParams.append(r,`ov.${o}`):this.url.searchParams.append(r,`ov.{${o.join(",")}}`),this}textSearch(r,o,{config:s,type:a}={}){let c="";a==="plain"?c="pl":a==="phrase"?c="ph":a==="websearch"&&(c="w");const l=s===void 0?"":`(${s})`;return this.url.searchParams.append(r,`${c}fts${l}.${o}`),this}match(r){return Object.entries(r).forEach(([o,s])=>{this.url.searchParams.append(o,`eq.${s}`)}),this}not(r,o,s){return this.url.searchParams.append(r,`not.${o}.${s}`),this}or(r,{foreignTable:o,referencedTable:s=o}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${r})`),this}filter(r,o,s){return this.url.searchParams.append(r,`${o}.${s}`),this}}return Vo.default=n,Vo}var ry;function ME(){if(ry)return Uo;ry=1;var e=Uo&&Uo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Uo,"__esModule",{value:!0});const t=e(Od());class n{constructor(r,{headers:o={},schema:s,fetch:a}){this.url=r,this.headers=o,this.schema=s,this.fetch=a}select(r,{head:o=!1,count:s}={}){const a=o?"HEAD":"GET";let c=!1;const l=(r??"*").split("").map(u=>/\s/.test(u)&&!c?"":(u==='"'&&(c=!c),u)).join("");return this.url.searchParams.set("select",l),s&&(this.headers.Prefer=`count=${s}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:o,defaultToNull:s=!0}={}){const a="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),s||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(r)){const l=r.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(l.length>0){const u=[...new Set(l)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:o,ignoreDuplicates:s=!1,count:a,defaultToNull:c=!0}={}){const l="POST",u=[`resolution=${s?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),c||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(r)){const f=r.reduce((p,h)=>p.concat(Object.keys(h)),[]);if(f.length>0){const p=[...new Set(f)].map(h=>`"${h}"`);this.url.searchParams.set("columns",p.join(","))}}return new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:o}={}){const s="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),o&&a.push(`count=${o}`),this.headers.Prefer=a.join(","),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const o="DELETE",s=[];return r&&s.push(`count=${r}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Uo.default=n,Uo}var aa={},ca={},oy;function CD(){return oy||(oy=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.version=void 0,ca.version="0.0.0-automated"),ca}var sy;function RD(){if(sy)return aa;sy=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.DEFAULT_HEADERS=void 0;const e=CD();return aa.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},aa}var ay;function TD(){if(ay)return zo;ay=1;var e=zo&&zo.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(zo,"__esModule",{value:!0});const t=e(ME()),n=e(Od()),i=RD();class r{constructor(s,{headers:a={},schema:c,fetch:l}={}){this.url=s,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),a),this.schemaName=c,this.fetch=l}from(s){const a=new URL(`${this.url}/${s}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:c=!1,get:l=!1,count:u}={}){let f;const p=new URL(`${this.url}/rpc/${s}`);let h;c||l?(f=c?"HEAD":"GET",Object.entries(a).filter(([g,m])=>m!==void 0).map(([g,m])=>[g,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([g,m])=>{p.searchParams.append(g,m)})):(f="POST",h=a);const d=Object.assign({},this.headers);return u&&(d.Prefer=`count=${u}`),new n.default({method:f,url:p,headers:d,schema:this.schemaName,body:h,fetch:this.fetch,allowEmpty:!1})}}return zo.default=r,zo}var cy;function PD(){if(cy)return Tt;cy=1;var e=Tt&&Tt.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.PostgrestError=Tt.PostgrestBuilder=Tt.PostgrestTransformBuilder=Tt.PostgrestFilterBuilder=Tt.PostgrestQueryBuilder=Tt.PostgrestClient=void 0;const t=e(TD());Tt.PostgrestClient=t.default;const n=e(ME());Tt.PostgrestQueryBuilder=n.default;const i=e(Od());Tt.PostgrestFilterBuilder=i.default;const r=e(DE());Tt.PostgrestTransformBuilder=r.default;const o=e(OE());Tt.PostgrestBuilder=o.default;const s=e(kE());return Tt.PostgrestError=s.default,Tt.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:o.default,PostgrestError:s.default},Tt}var AD=PD();const kD=nD(AD),{PostgrestClient:OD,PostgrestQueryBuilder:yH,PostgrestFilterBuilder:_H,PostgrestTransformBuilder:bH,PostgrestBuilder:wH,PostgrestError:EH}=kD;function DD(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const MD=DD(),ID="2.11.15",ND=`realtime-js/${ID}`,$D="1.0.0",IE=1e4,LD=1e3;var Na;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Na||(Na={}));var Wt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Wt||(Wt={}));var Un;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Un||(Un={}));var ah;(function(e){e.websocket="websocket"})(ah||(ah={}));var uo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(uo||(uo={}));class BD{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,n,i)}_decodeBroadcast(t,n,i){const r=n.getUint8(1),o=n.getUint8(2);let s=this.HEADER_LENGTH+2;const a=i.decode(t.slice(s,s+r));s=s+r;const c=i.decode(t.slice(s,s+o));s=s+o;const l=JSON.parse(i.decode(t.slice(s,t.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class NE{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ze||(Ze={}));const ly=(e,t,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((o,s)=>(o[s]=jD(s,e,t,r),o),{})},jD=(e,t,n,i)=>{const r=t.find(a=>a.name===e),o=r==null?void 0:r.type,s=n[e];return o&&!i.includes(o)?$E(o,s):ch(s)},$E=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return UD(t,n)}switch(e){case Ze.bool:return FD(t);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return HD(t);case Ze.json:case Ze.jsonb:return zD(t);case Ze.timestamp:return VD(t);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return ch(t);default:return ch(t)}},ch=e=>e,FD=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},HD=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},zD=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},UD=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let o;const s=e.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>$E(t,a))}return e},VD=e=>typeof e=="string"?e.replace(" ","T"):e,LE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class pp{constructor(t,n,i={},r=IE){this.channel=t,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var uy;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(uy||(uy={}));class $a{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$a.syncState(this.state,r,o,s),this.pendingDiffs.forEach(c=>{this.state=$a.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},r=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=$a.syncDiff(this.state,r,o,s),a())}),this.onJoin((r,o,s)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:s})}),this.onLeave((r,o,s)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,r){const o=this.cloneDeep(t),s=this.transformState(n),a={},c={};return this.map(o,(l,u)=>{s[l]||(c[l]=u)}),this.map(s,(l,u)=>{const f=o[l];if(f){const p=u.map(m=>m.presence_ref),h=f.map(m=>m.presence_ref),d=u.filter(m=>h.indexOf(m.presence_ref)<0),g=f.filter(m=>p.indexOf(m.presence_ref)<0);d.length>0&&(a[l]=d),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(o,{joins:a,leaves:c},i,r)}static syncDiff(t,n,i,r){const{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(o,(a,c)=>{var l;const u=(l=t[a])!==null&&l!==void 0?l:[];if(t[a]=this.cloneDeep(c),u.length>0){const f=t[a].map(h=>h.presence_ref),p=u.filter(h=>f.indexOf(h.presence_ref)<0);t[a].unshift(...p)}i(a,u,c)}),this.map(s,(a,c)=>{let l=t[a];if(!l)return;const u=c.map(f=>f.presence_ref);l=l.filter(f=>u.indexOf(f.presence_ref)<0),t[a]=l,r(a,l,c),l.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const r=t[i];return"metas"in r?n[i]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=r,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fy;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(fy||(fy={}));var py;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(py||(py={}));var ki;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ki||(ki={}));class Dd{constructor(t,n={config:{}},i){this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new pp(this,Un.join,this.params,this.timeout),this.rejoinTimer=new NE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Un.reply,{},(r,o)=>{this._trigger(this._replyEventName(o),r)}),this.presence=new $a(this),this.broadcastEndpointURL=LE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Wt.closed){const{config:{broadcast:o,presence:s,private:a}}=this.params;this._onError(u=>t==null?void 0:t(ki.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(ki.CLOSED));const c={},l={broadcast:o,presence:s,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(u=>u.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){t==null||t(ki.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,h=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,d=[];for(let g=0;g<h;g++){const m=p[g],{filter:{event:E,schema:x,table:b,filter:y}}=m,R=u&&u[g];if(R&&R.event===E&&R.schema===x&&R.table===b&&R.filter===y)d.push(Object.assign(Object.assign({},m),{id:R.id}));else{this.unsubscribe(),this.state=Wt.errored,t==null||t(ki.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=d,t&&t(ki.SUBSCRIBED);return}}).receive("error",u=>{this.state=Wt.errored,t==null||t(ki.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ki.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this._on(t,n,i)}async send(t,n={}){var i,r;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=l.body)===null||r===void 0?void 0:r.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,c;const l=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Wt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Un.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new pp(this,Un.leave,{},t),i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,i){const r=new AbortController,o=setTimeout(()=>r.abort(),i),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(o),s}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new pp(this,t,n,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var r,o;const s=t.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Un;if(i&&[a,c,l,u].indexOf(s)>=0&&i!==this._joinRef())return;let p=this._onMessage(s,n,i);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(h=>{var d,g,m;return((d=h.filter)===null||d===void 0?void 0:d.event)==="*"||((m=(g=h.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===s}).map(h=>h.callback(p,i)):(o=this.bindings[s])===null||o===void 0||o.filter(h=>{var d,g,m,E,x,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const y=h.id,R=(d=h.filter)===null||d===void 0?void 0:d.event;return y&&((g=n.ids)===null||g===void 0?void 0:g.includes(y))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((m=n.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const y=(x=(E=h==null?void 0:h.filter)===null||E===void 0?void 0:E.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return y==="*"||y===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof p=="object"&&"ids"in p){const d=p.data,{schema:g,table:m,commit_timestamp:E,type:x,errors:b}=d;p=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:E,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(d))}h.callback(p,i)})}_isClosed(){return this.state===Wt.closed}_isJoined(){return this.state===Wt.joined}_isJoining(){return this.state===Wt.joining}_isLeaving(){return this.state===Wt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const r=t.toLocaleLowerCase(),o={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&Dd.isEqual(r.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Un.close,{},t)}_onError(t){this._on(Un.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=ly(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=ly(t.columns,t.old_record)),n}}const hy=()=>{},WD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class GD{constructor(t,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=IE,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hy,this.ref=0,this.logger=hy,this.conn=null,this.sendBuffer=[],this.serializer=new BD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...a)=>mc(async()=>{const{default:c}=await Promise.resolve().then(()=>Bs);return{default:c}},void 0).then(({default:c})=>c(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${t}/${ah.websocket}`,this.httpEndpoint=LE(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const r=(i=n==null?void 0:n.params)===null||i===void 0?void 0:i.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,s)=>s(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new NE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=MD),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$D}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Na.connecting:return uo.Connecting;case Na.open:return uo.Open;case Na.closing:return uo.Closing;default:return uo.Closed}}isConnected(){return this.connectionState()===uo.Open}channel(t,n={config:{}}){const i=`realtime:${t}`,r=this.getChannels().find(o=>o.topic===i);if(r)return r;{const o=new Dd(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:i,payload:r,ref:o}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${i} (${o})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const r={access_token:n,version:ND};n&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push(Un.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(LD,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:i,event:r,payload:o,ref:s}=n;i==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${i} ${r} ${s&&"("+s+")"||""}`,o),Array.from(this.channels).filter(a=>a._isMember(i)).forEach(a=>a._trigger(r,o,s)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Un.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${t}${i}${r}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([WD],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class Md extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Pt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class KD extends Md{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class lh extends Md{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var qD=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(f){s(f)}}function c(u){try{l(i.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})};const BE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>mc(async()=>{const{default:i}=await Promise.resolve().then(()=>Bs);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},YD=()=>qD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield mc(()=>Promise.resolve().then(()=>Bs),void 0)).Response:Response}),uh=e=>{if(Array.isArray(e))return e.map(n=>uh(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[r]=uh(i)}),t};var Po=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(f){s(f)}}function c(u){try{l(i.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})};const hp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),JD=(e,t,n)=>Po(void 0,void 0,void 0,function*(){const i=yield YD();e instanceof i&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{t(new KD(hp(r),e.status||500))}).catch(r=>{t(new lh(hp(r),r))}):t(new lh(hp(e),e))}),XD=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i&&(r.body=JSON.stringify(i)),Object.assign(Object.assign({},r),n))};function yc(e,t,n,i,r,o){return Po(this,void 0,void 0,function*(){return new Promise((s,a)=>{e(n,XD(t,i,r,o)).then(c=>{if(!c.ok)throw c;return i!=null&&i.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>JD(c,a,i))})})}function au(e,t,n,i){return Po(this,void 0,void 0,function*(){return yc(e,"GET",t,n,i)})}function gr(e,t,n,i,r){return Po(this,void 0,void 0,function*(){return yc(e,"POST",t,i,r,n)})}function ZD(e,t,n,i,r){return Po(this,void 0,void 0,function*(){return yc(e,"PUT",t,i,r,n)})}function QD(e,t,n,i){return Po(this,void 0,void 0,function*(){return yc(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function jE(e,t,n,i,r){return Po(this,void 0,void 0,function*(){return yc(e,"DELETE",t,i,r,n)})}var cn=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(f){s(f)}}function c(u){try{l(i.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})};const eM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tM{constructor(t,n={},i,r){this.url=t,this.headers=n,this.bucketId=i,this.fetch=BE(r)}uploadOrUpdate(t,n,i,r){return cn(this,void 0,void 0,function*(){try{let o;const s=Object.assign(Object.assign({},dy),r);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=i,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:o,headers:a},s!=null&&s.duplex?{duplex:s.duplex}:{})),p=yield f.json();return f.ok?{data:{path:l,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(o){if(Pt(o))return{data:null,error:o};throw o}})}upload(t,n,i){return cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,r){return cn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:dy.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.append("cacheControl",l.cacheControl)):(c=i,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),p=yield f.json();return f.ok?{data:{path:o,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(Pt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return cn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const o=yield gr(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new Md("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(i){if(Pt(i))return{data:null,error:i};throw i}})}update(t,n,i){return cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return cn(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}copy(t,n,i){return cn(this,void 0,void 0,function*(){try{return{data:{path:(yield gr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}createSignedUrl(t,n,i){return cn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),o=yield gr(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}createSignedUrls(t,n,i){return cn(this,void 0,void 0,function*(){try{const r=yield gr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}download(t,n){return cn(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield au(this.fetch,`${this.url}/${r}/${a}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Pt(a))return{data:null,error:a};throw a}})}info(t){return cn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield au(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:uh(i),error:null}}catch(i){if(Pt(i))return{data:null,error:i};throw i}})}exists(t){return cn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield QD(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Pt(i)&&i instanceof lh){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),r=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&r.push(o);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&r.push(c);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${l}`)}}}remove(t){return cn(this,void 0,void 0,function*(){try{return{data:yield jE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Pt(n))return{data:null,error:n};throw n}})}list(t,n,i){return cn(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},eM),n),{prefix:t||""});return{data:yield gr(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const nM="2.7.1",iM={"X-Client-Info":`storage-js/${nM}`};var Ko=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(f){s(f)}}function c(u){try{l(i.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})};class rM{constructor(t,n={},i){this.url=t,this.headers=Object.assign(Object.assign({},iM),n),this.fetch=BE(i)}listBuckets(){return Ko(this,void 0,void 0,function*(){try{return{data:yield au(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Pt(t))return{data:null,error:t};throw t}})}getBucket(t){return Ko(this,void 0,void 0,function*(){try{return{data:yield au(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Pt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Ko(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Pt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Ko(this,void 0,void 0,function*(){try{return{data:yield ZD(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Pt(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Ko(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Pt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ko(this,void 0,void 0,function*(){try{return{data:yield jE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Pt(n))return{data:null,error:n};throw n}})}}class oM extends rM{constructor(t,n={},i){super(t,n,i)}from(t){return new tM(this.url,this.headers,t,this.fetch)}}const sM="2.51.0";let xa="";typeof Deno<"u"?xa="deno":typeof document<"u"?xa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xa="react-native":xa="node";const aM={"X-Client-Info":`supabase-js-${xa}/${sM}`},cM={headers:aM},lM={schema:"public"},uM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fM={};var pM=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(f){s(f)}}function c(u){try{l(i.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})};const hM=e=>{let t;return e?t=e:typeof fetch>"u"?t=PE:t=fetch,(...n)=>t(...n)},dM=()=>typeof Headers>"u"?AE:Headers,gM=(e,t,n)=>{const i=hM(n),r=dM();return(o,s)=>pM(void 0,void 0,void 0,function*(){var a;const c=(a=yield t())!==null&&a!==void 0?a:e;let l=new r(s==null?void 0:s.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),i(o,Object.assign(Object.assign({},s),{headers:l}))})};var mM=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(f){s(f)}}function c(u){try{l(i.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})};function vM(e){return e.endsWith("/")?e:e+"/"}function yM(e,t){var n,i;const{db:r,auth:o,realtime:s,global:a}=e,{db:c,auth:l,realtime:u,global:f}=t,p={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},l),o),realtime:Object.assign(Object.assign({},u),s),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(i=a==null?void 0:a.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>mM(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const FE="2.71.0",cs=30*1e3,fh=3,dp=fh*cs,_M="http://localhost:9999",bM="supabase.auth.token",wM={"X-Client-Info":`gotrue-js/${FE}`},ph="X-Supabase-Api-Version",HE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},EM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xM=10*60*1e3;class Id extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class SM extends Id{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function CM(e){return Re(e)&&e.name==="AuthApiError"}class zE extends Id{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Or extends Id{constructor(t,n,i,r){super(t,i,r),this.name=n,this.status=i}}class ur extends Or{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function RM(e){return Re(e)&&e.name==="AuthSessionMissingError"}class il extends Or{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class rl extends Or{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ol extends Or{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function TM(e){return Re(e)&&e.name==="AuthImplicitGrantRedirectError"}class gy extends Or{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hh extends Or{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function gp(e){return Re(e)&&e.name==="AuthRetryableFetchError"}class my extends Or{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class dh extends Or{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const cu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vy=` 	
\r=`.split(""),PM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<vy.length;t+=1)e[vy[t].charCodeAt(0)]=-2;for(let t=0;t<cu.length;t+=1)e[cu[t].charCodeAt(0)]=t;return e})();function yy(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(cu[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(cu[i]),t.queuedBits-=6}}function UE(e,t,n){const i=PM[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function _y(e){const t=[],n=s=>{t.push(String.fromCodePoint(s))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=s=>{OM(s,i,n)};for(let s=0;s<e.length;s+=1)UE(e.charCodeAt(s),r,o);return t.join("")}function AM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function kM(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}AM(i,t)}}function OM(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if((e>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function DM(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)UE(e.charCodeAt(r),n,i);return new Uint8Array(t)}function MM(e){const t=[];return kM(e,n=>t.push(n)),new Uint8Array(t)}function IM(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};return e.forEach(r=>yy(r,n,i)),yy(null,n,i),t.join("")}function NM(e){return Math.round(Date.now()/1e3)+e}function $M(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const zn=()=>typeof window<"u"&&typeof document<"u",to={tested:!1,writable:!1},VE=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(to.tested)return to.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),to.tested=!0,to.writable=!0}catch{to.tested=!0,to.writable=!1}return to.writable};function LM(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,o)=>{t[o]=r})}catch{}return n.searchParams.forEach((i,r)=>{t[r]=i}),t}const WE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>mc(async()=>{const{default:i}=await Promise.resolve().then(()=>Bs);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},BM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ls=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},no=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},nr=async(e,t)=>{await e.removeItem(t)};class Uu{constructor(){this.promise=new Uu.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Uu.promiseConstructor=Promise;function mp(e){const t=e.split(".");if(t.length!==3)throw new dh("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!EM.test(t[i]))throw new dh("JWT not in base64url format");return{header:JSON.parse(_y(t[0])),payload:JSON.parse(_y(t[1])),signature:DM(t[2]),raw:{header:t[0],payload:t[1]}}}async function jM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function FM(e,t){return new Promise((i,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const s=await e(o);if(!t(o,null,s)){i(s);return}}catch(s){if(!t(o,s)){r(s);return}}})()})}function HM(e){return("0"+e.toString(16)).substr(-2)}function zM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let o=0;o<56;o++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,HM).join("")}async function UM(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}async function VM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await UM(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qo(e,t,n=!1){const i=zM();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await ls(e,`${t}-code-verifier`,r);const o=await VM(i);return[o,i===o?"plain":"s256"]}const WM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function GM(e){const t=e.headers.get(ph);if(!t||!t.match(WM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function KM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function qM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const YM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yo(e){if(!YM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vp(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var JM=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const ao=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XM=[502,503,504];async function by(e){var t;if(!BM(e))throw new hh(ao(e),0);if(XM.includes(e.status))throw new hh(ao(e),e.status);let n;try{n=await e.json()}catch(o){throw new zE(ao(o),o)}let i;const r=GM(e);if(r&&r.getTime()>=HE["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new my(ao(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new ur}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new my(ao(n),e.status,n.weak_password.reasons);throw new SM(ao(n),e.status||500,i)}const ZM=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function Ie(e,t,n,i){var r;const o=Object.assign({},i==null?void 0:i.headers);o[ph]||(o[ph]=HE["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const s=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(s.redirect_to=i.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await QM(e,t,n+a,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(c):{data:Object.assign({},c),error:null}}async function QM(e,t,n,i,r,o){const s=ZM(t,i,r,o);let a;try{a=await e(n,Object.assign({},s))}catch(c){throw console.error(c),new hh(ao(c),0)}if(a.ok||await by(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(c){await by(c)}}function Ti(e){var t;let n=null;iI(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=NM(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function wy(e){const t=Ti(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function _r(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function eI(e){return{data:e,error:null}}function tI(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:o}=e,s=JM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function nI(e){return e}function iI(e){return e.access_token&&e.refresh_token&&e.expires_in}const yp=["global","local","others"];var rI=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class oI{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=WE(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=yp[0]){if(yp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yp.join(", ")}`);try{return await Ie(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Re(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await Ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_r})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=rI(t,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await Ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:tI,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ie(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_r})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,r,o,s,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await Ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:nI});if(u.error)throw u.error;const f=await u.json(),p=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(d=>{const g=parseInt(d.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(d.split(";")[1].split("=")[1]);l[`${m}Page`]=g}),l.total=parseInt(p)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(Re(l))return{data:{users:[]},error:l};throw l}}async getUserById(t){Yo(t);try{return await Ie(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_r})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Yo(t);try{return await Ie(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:_r})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){Yo(t);try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:_r})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Yo(t.userId);try{const{data:n,error:i}=await Ie(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Yo(t.userId),Yo(t.id);try{return{data:await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function Ey(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function sI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Jo={debug:!!(globalThis&&VE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class GE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class aI extends GE{}async function cI(e,t,n){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new aI(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}sI();const lI={url:_M,storageKey:bM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xy(e,t,n){return await n()}const Xo={};class Qa{constructor(t){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qa.nextInstanceID,Qa.nextInstanceID+=1,this.instanceID>0&&zn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},lI),t);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new oI({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=WE(r.fetch),this.lock=r.lock||xy,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:zn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=cI:this.lock=xy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:VE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ey(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Ey(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Xo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Xo[this.storageKey]=Object.assign(Object.assign({},Xo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Xo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Xo[this.storageKey]=Object.assign(Object.assign({},Xo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${FE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=LM(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),zn()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),TM(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:s,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?{error:n}:{error:new zE("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,r;try{const o=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ti}),{data:s,error:a}=o;if(a||!s)return{data:{user:null,session:null},error:a};const c=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(o){if(Re(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var n,i,r;try{let o;if("email"in t){const{email:u,password:f,options:p}=t;let h=null,d=null;this.flowType==="pkce"&&([h,d]=await qo(this.storage,this.storageKey)),o=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:d},xform:Ti})}else if("phone"in t){const{phone:u,password:f,options:p}=t;o=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(i=p==null?void 0:p.data)!==null&&i!==void 0?i:{},channel:(r=p==null?void 0:p.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Ti})}else throw new rl("You must provide either an email or phone number and a password");const{data:s,error:a}=o;if(a||!s)return{data:{user:null,session:null},error:a};const c=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(o){if(Re(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:s,options:a}=t;n=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:wy})}else if("phone"in t){const{phone:o,password:s,options:a}=t;n=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:wy})}else throw new rl("You must provide either an email or phone number and a password");const{data:i,error:r}=n;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new il}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,i,r,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,i,r,o,s,a,c,l,u,f,p,h;let d,g;if("message"in t)d=t.message,g=t.signature;else{const{chain:m,wallet:E,statement:x,options:b}=t;let y;if(zn())if(typeof E=="object")y=E;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))y=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=E}const R=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in y&&y.signIn){const P=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),x?{statement:x}:null));let N;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")N=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)N=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)d=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in y)||typeof y.signMessage!="function"||!("publicKey"in y)||typeof y!="object"||!y.publicKey||!("toBase58"in y.publicKey)||typeof y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");d=[`${R.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(r=(i=b==null?void 0:b.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const P=await y.signMessage(new TextEncoder().encode(d),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=P}}try{const{data:m,error:E}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:d,signature:IM(g)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Ti});if(E)throw E;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new il}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:E})}catch(m){if(Re(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(t){const n=await no(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n??"").split("/");try{const{data:o,error:s}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Ti});if(await nr(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new il}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:r??null}),error:s})}catch(o){if(Re(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:n,provider:i,token:r,access_token:o,nonce:s}=t,a=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ti}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new il}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,i,r,o,s;try{if("email"in t){const{email:a,options:c}=t;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await qo(this.storage,this.storageKey));const{error:f}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:a,options:c}=t,{data:l,error:u}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new rl("You must provide either an email or phone number.")}catch(a){if(Re(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,i;try{let r,o;"options"in t&&(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:s,error:a}=await Ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:Ti});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,l=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(r){if(Re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(t){var n,i,r;try{let o=null,s=null;return this.flowType==="pkce"&&([o,s]=await qo(this.storage,this.storageKey)),await Ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:s}),headers:this.headers,xform:eI})}catch(o){if(Re(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new ur;const{error:r}=await Ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:r,options:o}=t,{error:s}=await Ie(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in t){const{phone:i,type:r,options:o}=t,{data:s,error:a}=await Ie(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:a}}throw new rl("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await no(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<dp:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const s=await no(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=vp()}if(this.storage.isServer&&t.user){let s=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,l,u)=>(!s&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:t},error:null}}const{session:r,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_r}):await this._useSession(async n=>{var i,r,o;const{data:s,error:a}=n;if(a)throw a;return!(!((i=s.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ur}:await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0,xform:_r})})}catch(n){if(Re(n))return RM(n)&&(await this._removeSession(),await nr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:r,error:o}=i;if(o)throw o;if(!r.session)throw new ur;const s=r.session;let a=null,c=null;this.flowType==="pkce"&&t.email!=null&&([a,c]=await qo(this.storage,this.storageKey));const{data:l,error:u}=await Ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:c}),jwt:s.access_token,xform:_r});if(u)throw u;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(i){if(Re(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ur;const n=Date.now()/1e3;let i=n,r=!0,o=null;const{payload:s}=mp(t.access_token);if(s.exp&&(i=s.exp,r=i<=n),r){const{session:a,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Re(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:s,error:a}=n;if(a)throw a;t=(i=s.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new ur;const{session:r,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!zn())throw new ol("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ol(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new gy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ol("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new gy("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:o,refresh_token:s,expires_in:a,expires_at:c,token_type:l}=t;if(!o||!a||!s||!l)throw new ol("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(a);let p=u+f;c&&(p=parseInt(c));const h=p-u;h*1e3<=cs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const d=p-f;u-d>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",d,p,u):u-d<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",d,p,u);const{data:g,error:m}=await this._getUser(o);if(m)throw m;const E={provider_token:i,provider_refresh_token:r,access_token:o,expires_in:f,expires_at:p,refresh_token:s,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:t.type},error:null}}catch(i){if(Re(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await no(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o)return{error:o};const s=(i=r.session)===null||i===void 0?void 0:i.access_token;if(s){const{error:a}=await this.admin.signOut(s,t);if(a&&!(CM(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await nr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=$M(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,r;try{const{data:{session:o},error:s}=n;if(s)throw s;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await qo(this.storage,this.storageKey,!0));try{return await Ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Re(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:i,error:r}=await this._useSession(async o=>{var s,a,c,l,u;const{data:f,error:p}=o;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ie(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return zn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Re(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,r;const{data:o,error:s}=n;if(s)throw s;return await Ie(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await FM(async r=>(r>0&&await jM(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await Ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ti})),(r,o)=>{const s=200*Math.pow(2,r);return o&&gp(o)&&Date.now()+s-i<cs})}catch(i){if(this._debug(n,"error",i),Re(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),zn()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await no(this.storage,this.storageKey);if(r&&this.userStorage){let s=await no(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:r.user},await ls(this.userStorage,this.storageKey+"-user",s)),r.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:vp()}else if(r&&!r.user&&!r.user){const s=await no(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(r.user=s.user,await nr(this.storage,this.storageKey+"-user"),await ls(this.storage,this.storageKey,r)):r.user=vp()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const o=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<dp;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${dp}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),gp(s)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:a}=await this._getUser(r.access_token);!a&&(s!=null&&s.user)?(r.user=s.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(i,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Uu;const{data:o,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!o.session)throw new ur;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(r,"error",o),Re(o)){const s={session:null,error:o};return gp(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,n,i=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],s=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(c){o.push(c)}});if(await Promise.all(s),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await ls(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const o=structuredClone(r);await ls(this.storage,this.storageKey,o)}else{const r=structuredClone(n);await ls(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await nr(this.storage,this.storageKey),await nr(this.storage,this.storageKey+"-code-verifier"),await nr(this.storage,this.storageKey+"-user"),this.userStorage&&await nr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&zn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),cs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-t)/cs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${cs}ms, refresh threshold is ${fh} ticks`),r<=fh&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof GE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,s]=await qo(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(s)}`});r.push(a.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);r.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;return o?{data:null,error:o}:await Ie(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,r;const{data:o,error:s}=n;if(s)return{data:null,error:s};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:l}=await Ie(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(t.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o)return{data:null,error:o};const{data:s,error:a}=await Ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;return o?{data:null,error:o}:await Ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(t==null?void 0:t.factors)||[],r=i.filter(s=>s.factor_type==="totp"&&s.status==="verified"),o=i.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:i,totp:r,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,i;const{data:{session:r},error:o}=t;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=mp(r.access_token);let a=null;s.aal&&(a=s.aal);let c=a;((i=(n=r.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");const u=s.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(a=>a.kid===t);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(a=>a.kid===t),i&&this.jwks_cached_at+xM>r)return i;const{data:o,error:s}=await Ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=r,i=o.keys.find(a=>a.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:h,error:d}=await this.getSession();if(d||!h.session)return{data:null,error:d};i=h.session.access_token}const{header:r,payload:o,signature:s,raw:{header:a,payload:c}}=mp(i);n!=null&&n.allowExpired||KM(o.exp);const l=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!l){const{error:h}=await this.getUser(i);if(h)throw h;return{data:{claims:o,header:r,signature:s},error:null}}const u=qM(r.alg),f=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,s,MM(`${a}.${c}`)))throw new dh("Invalid JWT signature");return{data:{claims:o,header:r,signature:s},error:null}}catch(i){if(Re(i))return{data:null,error:i};throw i}}}Qa.nextInstanceID=0;const uI=Qa;class fI extends uI{constructor(t){super(t)}}var pI=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(f){s(f)}}function c(u){try{l(i.throw(u))}catch(f){s(f)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(e,t||[])).next())})};class hI{constructor(t,n,i){var r,o,s;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=vM(t),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:lM,realtime:fM,auth:Object.assign(Object.assign({},uM),{storageKey:l}),global:cM},f=yM(i??{},u);this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=gM(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new OD(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new _D(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new oM(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},i={}){return this.rest.rpc(t,n,i)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return pI(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:r,storageKey:o,flowType:s,lock:a,debug:c},l,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fI({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),l),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:r,flowType:s,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new GD(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,n,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const xH=(e,t,n)=>new hI(e,t,n);let SH=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function re(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function dI(e,t){return t={exports:{}},e(t,t.exports),t.exports}var gI=dI(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,n/o))/Math.log(i)*o;for(var s=r-Math.floor(r),a="",o=0;o<Math.floor(r);o++){var c=Math.floor(Math.random()*i).toString(i);a=c+a}if(s){var l=Math.pow(i,s),c=Math.floor(Math.random()*l).toString(i);a=c+a}var u=parseInt(a,i);return u!==1/0&&u>=Math.pow(2,n)?t(n,i):a};t.rack=function(n,i,r){var o=function(a){var c=0;do{if(c++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var l=t(n,i)}while(Object.hasOwnProperty.call(s,l));return s[l]=a,l},s=o.hats={};return o.get=function(a){return o.hats[a]},o.set=function(a,c){return o.hats[a]=c,o},o.bits=n||128,o.base=i||16,o}});function mi(e){if(!(this instanceof mi))return new mi(e);e=e||[128,36,1],this._seed=e.length?gI.rack(e[0],e[1],e[2]):e}mi.prototype.next=function(e){return this._seed(e||!0)};mi.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};mi.prototype.claim=function(e,t){this._seed.set(e,t||!0)};mi.prototype.assigned=function(e){return this._seed.get(e)||!1};mi.prototype.unclaim=function(e){delete this._seed.hats[e]};mi.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};function Nd(e){return Array.prototype.concat.apply([],e)}const _c=Object.prototype.toString,mI=Object.prototype.hasOwnProperty;function Eo(e){return e===void 0}function xt(e){return e!==void 0}function ec(e){return e==null}function de(e){return _c.call(e)==="[object Array]"}function Ct(e){return _c.call(e)==="[object Object]"}function pe(e){return _c.call(e)==="[object Number]"}function bt(e){const t=_c.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function hn(e){return _c.call(e)==="[object String]"}function vI(e){if(!de(e))throw new Error("must supply array")}function rn(e,t){return!ec(e)&&mI.call(e,t)}function Me(e,t){const n=Wu(t);let i;return M(e,function(r,o){if(n(r,o))return i=r,!1}),i}function KE(e,t){const n=Wu(t);let i=de(e)?-1:void 0;return M(e,function(r,o){if(n(r,o))return i=o,!1}),i}function Se(e,t){const n=Wu(t);let i=[];return M(e,function(r,o){n(r,o)&&i.push(r)}),i}function M(e,t){let n,i;if(Eo(e))return;const r=de(e)?EI:wI;for(let o in e)if(rn(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function yI(e,t){if(Eo(e))return[];vI(e);const n=Wu(t);return e.filter(function(i,r){return!n(i,r)})}function dn(e,t,n){return M(e,function(i,r){n=t(n,i,r)}),n}function Ao(e,t){return!!dn(e,function(n,i,r){return n&&t(i,r)},!0)}function Dr(e,t){return!!Me(e,t)}function zt(e,t){let n=[];return M(e,function(i,r){n.push(t(i,r))}),n}function lu(e){return e&&Object.keys(e)||[]}function _I(e){return lu(e).length}function Vu(e){return zt(e,t=>t)}function js(e,t,n={}){return t=$d(t),M(e,function(i){let r=t(i)||"_",o=n[r];o||(o=n[r]=[]),o.push(i)}),n}function qE(e,...t){e=$d(e);let n={};return M(t,r=>js(r,e,n)),zt(n,function(r,o){return r[0]})}const bI=qE;function vi(e,t){t=$d(t);let n=[];return M(e,function(i,r){let o=t(i,r),s={d:o,v:i};for(var a=0;a<n.length;a++){let{d:c}=n[a];if(o<c){n.splice(a,0,s);return}}n.push(s)}),zt(n,i=>i.v)}function Yn(e){return function(t){return Ao(e,function(n,i){return t[i]===n})}}function $d(e){return bt(e)?e:t=>t[e]}function Wu(e){return bt(e)?e:t=>t===e}function wI(e){return e}function EI(e){return Number(e)}function YE(e,t){let n,i,r,o;function s(f){let p=Date.now(),h=f?0:o+t-p;if(h>0)return a(h);e.apply(r,i),c()}function a(f){n=setTimeout(s,f)}function c(){n&&clearTimeout(n),n=o=i=r=void 0}function l(){n&&s(!0),c()}function u(...f){o=Date.now(),i=f,r=this,n||a(t)}return u.flush=l,u.cancel=c,u}function on(e,t){return e.bind(t)}function $(e,...t){return Object.assign(e,...t)}function xI(e,t,n){let i=e;return M(t,function(r,o){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let s=t[o+1],a=i[r];xt(s)&&ec(a)&&(a=i[r]=isNaN(+s)?{}:[]),Eo(s)?Eo(n)?delete i[r]:i[r]=n:i=a}),e}function ei(e,t){let n={},i=Object(e);return M(t,function(r){r in i&&(n[r]=e[r])}),n}function _i(e,t){let n={},i=Object(e);return M(i,function(r,o){t.indexOf(o)===-1&&(n[o]=r)}),n}function SI(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const CI=Object.prototype.toString,RI=Object.prototype.hasOwnProperty;function TI(e){return e===void 0}function PI(e){return CI.call(e)==="[object Array]"}function AI(e,t){return RI.call(e,t)}function Sy(e,t){let n,i;if(TI(e))return;const r=PI(e)?OI:kI;for(let o in e)if(AI(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function kI(e){return e}function OI(e){return Number(e)}function $t(e,...t){const n=e.style;return Sy(t,function(i){i&&Sy(i,function(r,o){n[o]=r})}),e}function Bt(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const DI=Object.prototype.toString;function st(e){return new Rr(e)}function Rr(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Rr.prototype.add=function(e){return this.list.add(e),this};Rr.prototype.remove=function(e){return DI.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Rr.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Rr.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Rr.prototype.array=function(){return Array.from(this.list)};Rr.prototype.has=Rr.prototype.contains=function(e){return this.list.contains(e)};function Gu(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Fs(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var uu={},fu,gh,Ld;function JE(){fu=window.addEventListener?"addEventListener":"attachEvent",gh=window.removeEventListener?"removeEventListener":"detachEvent",Ld=fu!=="addEventListener"?"on":""}var MI=uu.bind=function(e,t,n,i){return fu||JE(),e[fu](Ld+t,n,i||!1),n},II=uu.unbind=function(e,t,n,i){return gh||JE(),e[gh](Ld+t,n,i||!1),n},ye=SI({__proto__:null,bind:MI,unbind:II,default:uu},[uu]),XE=["focus","blur"];function NI(e,t,n,i,r){return XE.indexOf(n)!==-1&&(r=!0),ye.bind(e,n,function(o){var s=o.target||o.srcElement;o.delegateTarget=Fs(s,t,!0),o.delegateTarget&&i.call(e,o)},r)}function $I(e,t,n,i){return XE.indexOf(t)!==-1&&(i=!0),ye.unbind(e,t,n,i)}var pn={bind:NI,unbind:$I},LI=BI,ZE=!1,sl;typeof document<"u"&&(sl=document.createElement("div"),sl.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',ZE=!sl.getElementsByTagName("link").length,sl=void 0);var mt={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:ZE?[1,"X<div>","</div>"]:[0,"",""]};mt.td=mt.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];mt.option=mt.optgroup=[1,'<select multiple="multiple">',"</select>"];mt.thead=mt.tbody=mt.colgroup=mt.caption=mt.tfoot=[1,"<table>","</table>"];mt.polyline=mt.ellipse=mt.polygon=mt.circle=mt.text=mt.line=mt.path=mt.rect=mt.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function BI(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var c=t.createElement("html");return c.innerHTML=e,c.removeChild(c.lastChild)}var r=Object.prototype.hasOwnProperty.call(mt,i)?mt[i]:mt._default,o=r[0],s=r[1],a=r[2],c=t.createElement("div");for(c.innerHTML=s+e+a;o--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(var l=t.createDocumentFragment();c.firstChild;)l.appendChild(c.removeChild(c.firstChild));return l}var qe=LI;function QE(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function Fe(e,t){return t=t||document,t.querySelector(e)}function mh(e,t){return t=t||document,t.querySelectorAll(e)}function yi(e){e.parentNode&&e.parentNode.removeChild(e)}function jI(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function FI(e,t){return t.appendChild(jI(e,t))}function me(e,t){return FI(t,e),e}var vh=2,ex={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":vh,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":vh,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function HI(e,t){return ex[t]?e.style[t]:e.getAttributeNS(null,t)}function tx(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=ex[i];r?(r===vh&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function zI(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)tx(e,r,t[r])}function ie(e,t,n){if(typeof t=="string")if(n!==void 0)tx(e,t,n);else return HI(e,t);else zI(e,t);return e}const UI=Object.prototype.toString;function Ae(e){return new Tr(e)}function Tr(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Tr.prototype.add=function(e){return this.list.add(e),this};Tr.prototype.remove=function(e){return UI.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Tr.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Tr.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Tr.prototype.array=function(){return Array.from(this.list)};Tr.prototype.has=Tr.prototype.contains=function(e){return this.list.contains(e)};function Ku(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function nx(e){return e.cloneNode(!0)}var Bd={svg:"http://www.w3.org/2000/svg"},Cy='<svg xmlns="'+Bd.svg+'"';function VI(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Bd.svg)===-1&&(e=Cy+e.substring(4)):(e=Cy+">"+e+"</svg>",t=!0);var n=WI(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function WI(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function ae(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=VI(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Bd.svg,e),t&&ie(n,t),n}var _p=null;function ix(){return _p===null&&(_p=ae("svg")),_p}function Ry(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function GI(e,t,n,i,r,o){var s=ix().createSVGMatrix();switch(arguments.length){case 0:return s;case 1:return Ry(s,e);case 6:return Ry(s,{a:e,b:t,c:n,d:i,e:r,f:o})}}function La(e){return ix().createSVGTransform()}var Ty=/([&<>]{1})/g,KI=/([&<>\n\r"]{1})/g,qI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function bp(e,t){function n(i,r){return qI[r]||r}return e.replace(t,n)}function rx(e,t){var n,i,r,o,s;switch(e.nodeType){case 3:t.push(bp(e.textContent,Ty));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',bp(o.value,KI),'"');if(e.hasChildNodes()){for(t.push(">"),s=e.childNodes,n=0,i=s.length;n<i;++n)rx(s.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",bp(e.nodeValue,Ty),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function YI(e){for(var t=e.firstChild,n=[];t;)rx(t,n),t=t.nextSibling;return n.join("")}function Py(e,t){return YI(e)}function vt(e){var t=e.parentNode;return t&&t.removeChild(e),e}function JI(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function XI(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(JI(e,i))}function tc(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),XI(n,t)),n.consolidate()}const ZI=/^class[ {]/;function QI(e){return ZI.test(e.toString())}function jd(e){return Array.isArray(e)}function wp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ml(...e){e.length===1&&jd(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const e2=/constructor\s*[^(]*\(\s*([^)]*)\)/m,t2=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,n2=/\/\*([^*]*)\*\//m;function i2(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(QI(e)?e2:t2);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(n2);return(r&&r[1]||i).trim()})||[]}function ox(e,t){const n=t||{get:function(b,y){if(i.push(b),y===!1)return null;throw a(`No provider for "${b}"!`)}},i=[],r=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),s=o.injector=this,a=function(b){const y=i.join(" -> ");return i.length=0,new Error(y?`${b} (Resolving: ${y})`:b)};function c(b,y){if(!r[b]&&b.includes(".")){const R=b.split(".");let P=c(R.shift());for(;R.length;)P=P[R.shift()];return P}if(wp(o,b))return o[b];if(wp(r,b)){if(i.indexOf(b)!==-1)throw i.push(b),a("Cannot resolve circular dependency!");return i.push(b),o[b]=r[b][0](r[b][1]),i.pop(),o[b]}return n.get(b,y)}function l(b,y){if(typeof y>"u"&&(y={}),typeof b!="function")if(jd(b))b=Ml(b.slice());else throw a(`Cannot invoke "${b}". Expected a function!`);const P=(b.$inject||i2(b)).map(N=>wp(y,N)?y[N]:c(N));return{fn:b,dependencies:P}}function u(b){const{fn:y,dependencies:R}=l(b),P=Function.prototype.bind.call(y,null,...R);return new P}function f(b,y,R){const{fn:P,dependencies:N}=l(b,R);return P.apply(y,N)}function p(b){return Ml(y=>b.get(y))}function h(b,y){if(y&&y.length){const R=Object.create(null),P=Object.create(null),N=[],k=[],O=[];let L,F,B,V;for(let oe in r)L=r[oe],y.indexOf(oe)!==-1&&(L[2]==="private"?(F=N.indexOf(L[3]),F===-1?(B=L[3].createChild([],y),V=p(B),N.push(L[3]),k.push(B),O.push(V),R[oe]=[V,oe,"private",B]):R[oe]=[O[F],oe,"private",k[F]]):R[oe]=[L[2],L[1]],P[oe]=!0),(L[2]==="factory"||L[2]==="type")&&L[1].$scope&&y.forEach(Ne=>{L[1].$scope.indexOf(Ne)!==-1&&(R[oe]=[L[2],L[1]],P[Ne]=!0)});y.forEach(oe=>{if(!P[oe])throw new Error('No provider for "'+oe+'". Cannot use provider from the parent!')}),b.unshift(R)}return new ox(b,s)}const d={factory:f,type:u,value:function(b){return b}};function g(b,y){const R=b.__init__||[];return function(){R.forEach(P=>{typeof P=="string"?y.get(P):y.invoke(P)})}}function m(b){const y=b.__exports__;if(y){const R=b.__modules__,P=Object.keys(b).reduce((F,B)=>(B!=="__exports__"&&B!=="__modules__"&&B!=="__init__"&&B!=="__depends__"&&(F[B]=b[B]),F),Object.create(null)),N=(R||[]).concat(P),k=h(N),O=Ml(function(F){return k.get(F)});y.forEach(function(F){r[F]=[O,F,"private",k]});const L=(b.__init__||[]).slice();return L.unshift(function(){k.init()}),b=Object.assign({},b,{__init__:L}),g(b,k)}return Object.keys(b).forEach(function(R){if(R==="__init__"||R==="__depends__")return;const P=b[R];if(P[2]==="private"){r[R]=P;return}const N=P[0],k=P[1];r[R]=[d[N],r2(N,k),N]}),g(b,s)}function E(b,y){return b.indexOf(y)!==-1||(b=(y.__depends__||[]).reduce(E,b),b.indexOf(y)!==-1)?b:b.concat(y)}function x(b){const y=b.reduce(E,[]).map(m);let R=!1;return function(){R||(R=!0,y.forEach(P=>P()))}}this.get=c,this.invoke=f,this.instantiate=u,this.createChild=h,this.init=x(e)}function r2(e,t){return e!=="value"&&jd(t)&&(t=Ml(t.slice())),t}var o2=1e3;function Wi(e,t){var n=this;t=t||o2,e.on(["render.shape","render.connection"],t,function(i,r){var o=i.type,s=r.element,a=r.gfx,c=r.attrs;if(n.canRender(s))return o==="render.shape"?n.drawShape(a,s,c):n.drawConnection(a,s,c)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}Wi.prototype.canRender=function(e){};Wi.prototype.drawShape=function(e,t){};Wi.prototype.drawConnection=function(e,t){};Wi.prototype.getShapePath=function(e){};Wi.prototype.getConnectionPath=function(e){};function ko(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function s2(e){return["M",e.x,e.y]}function Ep(e){return["L",e.x,e.y]}function a2(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function c2(e,t){const n=e.length,i=[s2(e[0])];for(let r=1;r<n;r++){const o=e[r-1],s=e[r],a=e[r+1];if(!a||!t){i.push(Ep(s));continue}const c=Math.min(t,yh(s.x-o.x,s.y-o.y),yh(a.x-s.x,a.y-s.y));if(!c){i.push(Ep(s));continue}const l=al(s,o,c),u=al(s,o,c*.5),f=al(s,a,c),p=al(s,a,c*.5);i.push(Ep(l)),i.push(a2(u,p,f))}return i}function al(e,t,n){const i=t.x-e.x,r=t.y-e.y,o=yh(i,r),s=n/o;return{x:e.x+i*s,y:e.y+r*s}}function yh(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function qu(e,t,n){pe(t)&&(n=t,t=null),t||(t={});const i=ae("path",t);return pe(n)&&(i.dataset.cornerRadius=String(n)),sx(i,e)}function sx(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return ie(e,{d:ko(c2(t,n))}),e}function Yu(e){return Se(e,function(t){return!Me(e,function(n){return n!==t&&ax(t,n)})})}function ax(e,t){if(t){if(e===t)return t;if(e.parent)return ax(e.parent,t)}}function Ay(e,t,n){var i=!n||e.indexOf(t)===-1;return i&&e.push(t),i}function Oo(e,t,n){n=n||0,de(e)||(e=[e]),M(e,function(i,r){var o=t(i,r,n);de(o)&&o.length&&Oo(o,t,n+1)})}function l2(e,t,n){var i=[],r=[];return Oo(e,function(o,s,a){Ay(i,o,t);var c=o.children;if(c&&Ay(r,c,t))return c}),i}function bc(e,t){return l2(e,!t)}function u2(e,t,n){Eo(t)&&(t=!0),Ct(t)&&(n=t,t=!0),n=n||{};var i=la(n.allShapes),r=la(n.allConnections),o=la(n.enclosedElements),s=la(n.enclosedConnections),a=la(n.topLevel,t&&js(e,function(u){return u.id}));function c(u){a[u.source.id]&&a[u.target.id]&&(a[u.id]=[u]),i[u.source.id]&&i[u.target.id]&&(s[u.id]=o[u.id]=u),r[u.id]=u}function l(u){if(o[u.id]=u,u.waypoints)s[u.id]=r[u.id]=u;else return i[u.id]=u,M(u.incoming,c),M(u.outgoing,c),u.children}return Oo(e,l),{allShapes:i,allConnections:r,topLevel:a,enclosedConnections:s,enclosedElements:o}}function yt(e,t){t=!!t,de(e)||(e=[e]);var n,i,r,o;return M(e,function(s){var a=s;s.waypoints&&!t&&(a=yt(s.waypoints,!0));var c=a.x,l=a.y,u=a.height||0,f=a.width||0;(c<n||n===void 0)&&(n=c),(l<i||i===void 0)&&(i=l),(c+f>r||r===void 0)&&(r=c+f),(l+u>o||o===void 0)&&(o=l+u)}),{x:n,y:i,height:o-i,width:r-n}}function cx(e,t){var n={};return M(e,function(i){var r=i;r.waypoints&&(r=yt(r)),!pe(t.y)&&r.x>t.x&&(n[i.id]=i),!pe(t.x)&&r.y>t.y&&(n[i.id]=i),r.x>t.x&&r.y>t.y&&(pe(t.width)&&pe(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y||!pe(t.width)||!pe(t.height))&&(n[i.id]=i)}),n}function lx(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function ux(e){return!!(e&&e.isFrame)}function la(e,t){return $({},e||{},t||{})}var f2=1;function Mr(e,t){Wi.call(this,e,f2),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}re(Mr,Wi);Mr.prototype.canRender=function(){return!0};Mr.prototype.drawShape=function(t,n,i){var r=ae("rect");return ie(r,{x:0,y:0,width:n.width||0,height:n.height||0}),ux(n)?ie(r,$({},this.FRAME_STYLE,i||{})):ie(r,$({},this.SHAPE_STYLE,i||{})),me(t,r),r};Mr.prototype.drawConnection=function(t,n,i){var r=qu(n.waypoints,$({},this.CONNECTION_STYLE,i||{}));return me(t,r),r};Mr.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,o=t.height,s=[["M",n,i],["l",r,0],["l",0,o],["l",-r,0],["z"]];return ko(s)};Mr.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,o=[];for(i=0;r=n[i];i++)r=r.original||r,o.push([i===0?"M":"L",r.x,r.y]);return ko(o)};Mr.$inject=["eventBus","styles"];function p2(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var o=this.style(i,r);return $(o,{class:n})},this.style=function(n,i){!de(n)&&!i&&(i=n,n=[]);var r=dn(n,function(o,s){return $(o,e[s]||{})},{});return i?$(r,i):r},this.computeStyle=function(n,i,r){return de(i)||(r=i,i=[]),t.style(i||[],$({},r,n||{}))}}const h2={__init__:["defaultRenderer"],defaultRenderer:["type",Mr],styles:["type",p2]};function pt(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function _t(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Fd(e,t){return!e||!t?-1:e.indexOf(t)}function wc(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Hd(e,t,n,i){if(typeof i>"u"&&(i=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=wc(e,t);return Math.abs(r/o)<=i}var d2=2;function Ii(e,t){var n=Array.from(arguments).flat();const i={x:"v",y:"h"};for(const[r,o]of Object.entries(i))if(g2(r,n))return o;return!1}function g2(e,t){const n=t[0];return Ao(t,function(i){return Math.abs(n[e]-i[e])<=d2})}function ky(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function _h(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var m2=/,?([a-z]),?/gi,Oy=parseFloat,ct=Math,ir=ct.PI,ui=ct.min,fi=ct.max,Dy=ct.pow,br=ct.abs,v2=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,y2=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,pu=Array.isArray||function(e){return e instanceof Array};function zd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ba(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)zd(e,n)&&(t[n]=Ba(e[n]));return t}function _2(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function b2(e){function t(){var n=Array.prototype.slice.call(arguments,0),i=n.join("␀"),r=t.cache=t.cache||{},o=t.count=t.count||[];return zd(r,i)?(_2(o,i),r[i]):(o.length>=1e3&&delete r[o.shift()],o.push(i),r[i]=e(...arguments),r[i])}return t}function w2(e){if(!e)return null;var t=Es(e);if(t.arr)return Ba(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return pu(e)&&pu(e[0])&&(i=Ba(e)),i.length||String(e).replace(v2,function(r,o,s){var a=[],c=o.toLowerCase();for(s.replace(y2,function(l,u){u&&a.push(+u)}),c=="m"&&a.length>2&&(i.push([o,...a.splice(0,2)]),c="l",o=o=="m"?"l":"L");a.length>=n[c]&&(i.push([o,...a.splice(0,n[c])]),!!n[c]););}),i.toString=Es.toString,t.arr=Ba(i),i}function Es(e){var t=Es.ps=Es.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)zd(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function bh(e,t,n,i){return arguments.length===1&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,height:i,x2:e+n,y2:t+i}}function fx(){return this.join(",").replace(m2,"$1")}function hu(e){var t=Ba(e);return t.toString=fx,t}function My(e,t,n,i,r,o,s,a,c){var l=1-c,u=Dy(l,3),f=Dy(l,2),p=c*c,h=p*c,d=u*e+f*3*c*n+l*3*c*c*r+h*s,g=u*t+f*3*c*i+l*3*c*c*o+h*a;return{x:du(d),y:du(g)}}function Iy(e){var t=R2(...e);return bh(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function rr(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function E2(e,t){return e=bh(e),t=bh(t),rr(t,e.x,e.y)||rr(t,e.x2,e.y)||rr(t,e.x,e.y2)||rr(t,e.x2,e.y2)||rr(e,t.x,t.y)||rr(e,t.x2,t.y)||rr(e,t.x,t.y2)||rr(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function Ny(e,t,n,i,r){var o=-3*t+9*n-9*i+3*r,s=e*o+6*t-12*n+6*i;return e*s-3*t+3*n}function $y(e,t,n,i,r,o,s,a,c){c==null&&(c=1),c=c>1?1:c<0?0:c;for(var l=c/2,u=12,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,d=0;d<u;d++){var g=l*f[d]+l,m=Ny(g,e,n,r,s),E=Ny(g,t,i,o,a),x=m*m+E*E;h+=p[d]*ct.sqrt(x)}return l*h}function x2(e,t,n,i,r,o,s,a){if(!(fi(e,n)<ui(r,s)||ui(e,n)>fi(r,s)||fi(t,i)<ui(o,a)||ui(t,i)>fi(o,a))){var c=(e*i-t*n)*(r-s)-(e-n)*(r*a-o*s),l=(e*i-t*n)*(o-a)-(t-i)*(r*a-o*s),u=(e-n)*(o-a)-(t-i)*(r-s);if(u){var f=du(c/u),p=du(l/u),h=+f.toFixed(2),d=+p.toFixed(2);if(!(h<+ui(e,n).toFixed(2)||h>+fi(e,n).toFixed(2)||h<+ui(r,s).toFixed(2)||h>+fi(r,s).toFixed(2)||d<+ui(t,i).toFixed(2)||d>+fi(t,i).toFixed(2)||d<+ui(o,a).toFixed(2)||d>+fi(o,a).toFixed(2)))return{x:f,y:p}}}}function du(e){return Math.round(e*1e11)/1e11}function S2(e,t,n){var i=Iy(e),r=Iy(t);if(!E2(i,r))return[];for(var o=$y(...e),s=$y(...t),a=Ly(e)?1:~~(o/5)||1,c=Ly(t)?1:~~(s/5)||1,l=[],u=[],f={},p=[],h=0;h<a+1;h++){var d=My(...e,h/a);l.push({x:d.x,y:d.y,t:h/a})}for(h=0;h<c+1;h++)d=My(...t,h/c),u.push({x:d.x,y:d.y,t:h/c});for(h=0;h<a;h++)for(var g=0;g<c;g++){var m=l[h],E=l[h+1],x=u[g],b=u[g+1],y=br(E.x-m.x)<.01?"y":"x",R=br(b.x-x.x)<.01?"y":"x",P=x2(m.x,m.y,E.x,E.y,x.x,x.y,b.x,b.y),N;if(P){if(N=P.x.toFixed(9)+"#"+P.y.toFixed(9),f[N])continue;f[N]=!0;var k=m.t+br((P[y]-m[y])/(E[y]-m[y]))*(E.t-m.t),O=x.t+br((P[R]-x[R])/(b[R]-x[R]))*(b.t-x.t);k>=0&&k<=1&&O>=0&&O<=1&&p.push({x:P.x,y:P.y,t1:k,t2:O})}}return p}function px(e,t,n){e=jy(e),t=jy(t);for(var i,r,o,s,a,c,l,u,f,p,h=n?0:[],d=0,g=e.length;d<g;d++){var m=e[d];if(m[0]=="M")i=a=m[1],r=c=m[2];else{m[0]=="C"?(f=[i,r,...m.slice(1)],i=f[6],r=f[7]):(f=[i,r,i,r,a,c,a,c],i=a,r=c);for(var E=0,x=t.length;E<x;E++){var b=t[E];if(b[0]=="M")o=l=b[1],s=u=b[2];else{b[0]=="C"?(p=[o,s,...b.slice(1)],o=p[6],s=p[7]):(p=[o,s,o,s,l,u,l,u],o=l,s=u);var y=S2(f,p);{for(var R=0,P=y.length;R<P;R++)y[R].segment1=d,y[R].segment2=E,y[R].bez1=f,y[R].bez2=p;h=h.concat(y)}}}}}return h}function C2(e){var t=Es(e);if(t.abs)return hu(t.abs);if((!pu(e)||!pu(e&&e[0]))&&(e=w2(e)),!e||!e.length)return[["M",0,0]];var n=[],i=0,r=0,o=0,s=0,a=0,c;e[0][0]=="M"&&(i=+e[0][1],r=+e[0][2],o=i,s=r,a++,n[0]=["M",i,r]);for(var l,u,f=a,p=e.length;f<p;f++){if(n.push(l=[]),u=e[f],c=u[0],c!=c.toUpperCase())switch(l[0]=c.toUpperCase(),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+u[6]+i,l[7]=+u[7]+r;break;case"V":l[1]=+u[1]+r;break;case"H":l[1]=+u[1]+i;break;case"M":o=+u[1]+i,s=+u[2]+r;default:for(var h=1,d=u.length;h<d;h++)l[h]=+u[h]+(h%2?i:r)}else for(var g=0,m=u.length;g<m;g++)l[g]=u[g];switch(c=c.toUpperCase(),l[0]){case"Z":i=+o,r=+s;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":o=l[l.length-2],s=l[l.length-1];default:i=l[l.length-2],r=l[l.length-1]}}return n.toString=fx,t.abs=hu(n),n}function Ly(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function cl(e,t,n,i){return[e,t,n,i,n,i]}function By(e,t,n,i,r,o){var s=.3333333333333333,a=2/3;return[s*e+a*n,s*t+a*i,s*r+a*n,s*o+a*i,r,o]}function hx(e,t,n,i,r,o,s,a,c,l){var u=ir*120/180,f=ir/180*(+r||0),p=[],h,d=b2(function(S,_,v){var A=S*ct.cos(v)-_*ct.sin(v),I=S*ct.sin(v)+_*ct.cos(v);return{x:A,y:I}});if(l)N=l[0],k=l[1],R=l[2],P=l[3];else{h=d(e,t,-f),e=h.x,t=h.y,h=d(a,c,-f),a=h.x,c=h.y;var g=(e-a)/2,m=(t-c)/2,E=g*g/(n*n)+m*m/(i*i);E>1&&(E=ct.sqrt(E),n=E*n,i=E*i);var x=n*n,b=i*i,y=(o==s?-1:1)*ct.sqrt(br((x*b-x*m*m-b*g*g)/(x*m*m+b*g*g))),R=y*n*m/i+(e+a)/2,P=y*-i*g/n+(t+c)/2,N=ct.asin(((t-P)/i).toFixed(9)),k=ct.asin(((c-P)/i).toFixed(9));N=e<R?ir-N:N,k=a<R?ir-k:k,N<0&&(N=ir*2+N),k<0&&(k=ir*2+k),s&&N>k&&(N=N-ir*2),!s&&k>N&&(k=k-ir*2)}var O=k-N;if(br(O)>u){var L=k,F=a,B=c;k=N+u*(s&&k>N?1:-1),a=R+n*ct.cos(k),c=P+i*ct.sin(k),p=hx(a,c,n,i,r,0,s,F,B,[k,L,R,P])}O=k-N;var V=ct.cos(N),oe=ct.sin(N),Ne=ct.cos(k),le=ct.sin(k),Q=ct.tan(O/4),we=4/3*n*Q,ot=4/3*i*Q,$e=[e,t],Ue=[e+we*oe,t-ot*V],U=[a+we*le,c-ot*Ne],G=[a,c];if(Ue[0]=2*$e[0]-Ue[0],Ue[1]=2*$e[1]-Ue[1],l)return[Ue,U,G].concat(p);p=[Ue,U,G].concat(p).join().split(",");for(var se=[],Ee=0,Ke=p.length;Ee<Ke;Ee++)se[Ee]=Ee%2?d(p[Ee-1],p[Ee],f).y:d(p[Ee],p[Ee+1],f).x;return se}function R2(e,t,n,i,r,o,s,a){for(var c=[],l=[[],[]],u,f,p,h,d,g,m,E,x=0;x<2;++x){if(x==0?(f=6*e-12*n+6*r,u=-3*e+9*n-9*r+3*s,p=3*n-3*e):(f=6*t-12*i+6*o,u=-3*t+9*i-9*o+3*a,p=3*i-3*t),br(u)<1e-12){if(br(f)<1e-12)continue;h=-p/f,0<h&&h<1&&c.push(h);continue}m=f*f-4*p*u,E=ct.sqrt(m),!(m<0)&&(d=(-f+E)/(2*u),0<d&&d<1&&c.push(d),g=(-f-E)/(2*u),0<g&&g<1&&c.push(g))}for(var b=c.length,y=b,R;b--;)h=c[b],R=1-h,l[0][b]=R*R*R*e+3*R*R*h*n+3*R*h*h*r+h*h*h*s,l[1][b]=R*R*R*t+3*R*R*h*i+3*R*h*h*o+h*h*h*a;return l[0][y]=e,l[1][y]=t,l[0][y+1]=s,l[1][y+1]=a,l[0].length=l[1].length=y+2,{x0:ui(...l[0]),y0:ui(...l[1]),x1:fi(...l[0]),y1:fi(...l[1])}}function jy(e){var t=Es(e);if(t.curve)return hu(t.curve);for(var n=C2(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(h,d,g){var m,E;if(!h)return["C",d.x,d.y,d.x,d.y,d.x,d.y];switch(!(h[0]in{T:1,Q:1})&&(d.qx=d.qy=null),h[0]){case"M":d.X=h[1],d.Y=h[2];break;case"A":h=["C",...hx(d.x,d.y,...h.slice(1))];break;case"S":g=="C"||g=="S"?(m=d.x*2-d.bx,E=d.y*2-d.by):(m=d.x,E=d.y),h=["C",m,E,...h.slice(1)];break;case"T":g=="Q"||g=="T"?(d.qx=d.x*2-d.qx,d.qy=d.y*2-d.qy):(d.qx=d.x,d.qy=d.y),h=["C",...By(d.x,d.y,d.qx,d.qy,h[1],h[2])];break;case"Q":d.qx=h[1],d.qy=h[2],h=["C",...By(d.x,d.y,h[1],h[2],h[3],h[4])];break;case"L":h=["C",...cl(d.x,d.y,h[1],h[2])];break;case"H":h=["C",...cl(d.x,d.y,h[1],d.y)];break;case"V":h=["C",...cl(d.x,d.y,d.x,h[1])];break;case"Z":h=["C",...cl(d.x,d.y,d.X,d.Y)];break}return h},o=function(h,d){if(h[d].length>7){h[d].shift();for(var g=h[d];g.length;)s[d]="A",h.splice(d++,0,["C",...g.splice(0,6)]);h.splice(d,1),u=n.length}},s=[],a="",c="",l=0,u=n.length;l<u;l++){n[l]&&(a=n[l][0]),a!="C"&&(s[l]=a,l&&(c=s[l-1])),n[l]=r(n[l],i,c),s[l]!="A"&&a=="C"&&(s[l]="C"),o(n,l);var f=n[l],p=f.length;i.x=f[p-2],i.y=f[p-1],i.bx=Oy(f[p-4])||i.x,i.by=Oy(f[p-3])||i.y}return t.curve=hu(n),n}function He(e){return Ct(e)&&rn(e,"waypoints")}function Oe(e){return Ct(e)&&rn(e,"labelTarget")}function dx(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Bi(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function ce(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Ju(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function T2(e){return Bi({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function P2(e){for(var t=e.waypoints,n=t.reduce(function(l,u,f){var p=t[f-1];if(p){var h=l[l.length-1],d=h&&h.endLength||0,g=O2(p,u);l.push({start:p,end:u,startLength:d,endLength:d+g,length:g})}return l},[]),i=n.reduce(function(l,u){return l+u.length},0),r=i/2,o=0,s=n[o];s.endLength<r;)s=n[++o];var a=(r-s.startLength)/s.length,c={x:s.start.x+(s.end.x-s.start.x)*a,y:s.start.y+(s.end.y-s.start.y)*a};return c}function he(e){return He(e)?P2(e):T2(e)}function Ut(e,t,n){n=n||0,Ct(n)||(n={x:n,y:n});var i=ce(e),r=ce(t),o=i.bottom+n.y<=r.top,s=i.left-n.x>=r.right,a=i.top-n.y>=r.bottom,c=i.right+n.x<=r.left,l=o?"top":a?"bottom":null,u=c?"left":s?"right":null;return u&&l?l+"-"+u:u||l||"intersect"}function wh(e,t,n){var i=A2(e,t);return i.length===1||i.length===2&&wc(i[0],i[1])<1?Bi(i[0]):i.length>1?(i=vi(i,function(r){var o=Math.floor(r.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,r.segment2+"#"+o}),Bi(i[n?0:i.length-1])):null}function A2(e,t){return px(e,t)}function k2(e){e=e.slice();for(var t=0,n,i,r;e[t];)n=e[t],i=e[t-1],r=e[t+1],wc(n,r)===0||Hd(i,r,n)?e.splice(t,1):t++;return e}function O2(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Il(e,t){return Math.round(e*t)/t}function Fy(e){return pe(e)?e+"px":e}function D2(e){for(;e.parent;)e=e.parent;return e}function M2(e){e=$({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),$t(n,{position:"relative",overflow:"hidden",width:Fy(e.width),height:Fy(e.height)}),t.appendChild(n),n}function gx(e,t,n){const i=ae("g");Ae(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const I2="base",mx=0,N2=1,$2={shape:["x","y","width","height"],connection:["waypoints"]};function ge(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._focused=!1,this._init(e||{})}ge.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];ge.prototype._init=function(e){const t=this._eventBus,n=this._container=M2(e),i=this._svg=ae("svg");ie(i,{width:"100%",height:"100%"}),Bt(i,"tabindex",0),e.autoFocus&&t.on("element.hover",()=>{this.restoreFocus()}),t.on("element.mousedown",500,o=>{this.focus()}),i.addEventListener("focusin",()=>{this._setFocused(!0)}),i.addEventListener("focusout",()=>{this._setFocused(!1)}),me(n,i);const r=this._viewport=gx(i,"viewport");e.deferUpdate&&(this._viewboxChanged=YE(on(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};ge.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};ge.prototype._setFocused=function(e){e!=this._focused&&(this._focused=e,this._eventBus.fire("canvas.focus.changed",{focused:e}))};ge.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=lx(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};ge.prototype.focus=function(){this._svg.focus({preventScroll:!0}),this._setFocused(!0)};ge.prototype.restoreFocus=function(){document.activeElement===document.body&&this.focus()};ge.prototype.isFocused=function(){return this._focused};ge.prototype.getDefaultLayer=function(){return this.getLayer(I2,mx)};ge.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};ge.prototype._getChildIndex=function(e){return dn(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};ge.prototype._createLayer=function(e,t){typeof t>"u"&&(t=N2);const n=this._getChildIndex(t);return{group:gx(this._viewport,"layer-"+e,n),index:t,visible:!0}};ge.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const o=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[o]||null),t.visible=!0,i};ge.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(vt(n),t.visible=!1),n};ge.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],vt(t.group))};ge.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};ge.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(D2(e))||{}).rootElement:void 0};ge.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};ge.prototype._findPlaneForRoot=function(e){return Me(this._planes,function(t){return t.rootElement===e})};ge.prototype.getContainer=function(){return this._container};ge.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,i=this._elementRegistry._elements[e.id],i&&(M([i.gfx,i.secondaryGfx],function(r){r&&(n?(e.markers.add(t),Ae(r).add(t)):(e.markers.delete(t),Ae(r).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};ge.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};ge.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};ge.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};ge.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};ge.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};ge.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,mx);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};ge.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};ge.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};ge.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};ge.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};ge.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};ge.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=$2[e];if(!Ao(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};ge.prototype._setParent=function(e,t,n){_t(t.children,e,n),e.parent=t};ge.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const s=o.create(e,t,i);return this._elementRegistry.add(t,s),o.update(e,t,s),r.fire(e+".added",{element:t,gfx:s}),t};ge.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};ge.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};ge.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),pt(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};ge.prototype.removeShape=function(e){return this._removeElement(e,"shape")};ge.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};ge.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};ge.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};ge.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};ge.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let i,r,o,s,a,c,l;if(e)this._changeViewbox(function(){a=Math.min(n.width/e.width,n.height/e.height);const u=this._svg.createSVGMatrix().scale(a).translate(-e.x,-e.y);tc(t,u)});else return o=this._rootElement?this.getActiveLayer():null,i=o&&o.getBBox()||{},s=tc(t),r=s?s.matrix:GI(),a=Il(r.a,1e3),c=Il(-r.e||0,1e3),l=Il(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/a:0,y:l?l/a:0,width:n.width/a,height:n.height/a,scale:a,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};ge.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=$({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),vx(t,n)}),{x:n.e,y:n.f}};ge.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=yt(e),o=ce(r),s=this.viewbox(),a=this.zoom();let c,l;s.y+=t.top/a,s.x+=t.left/a,s.width-=(t.right+t.left)/a,s.height-=(t.bottom+t.top)/a;const u=ce(s);if(!(r.width<s.width&&r.height<s.height))c=r.x-s.x,l=r.y-s.y;else{const p=Math.max(0,o.right-u.right),h=Math.min(0,o.left-u.left),d=Math.max(0,o.bottom-u.bottom),g=Math.min(0,o.top-u.top);c=p||h,l=d||g}this.scroll({dx:-c*a,dy:-l*a})};ge.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Il(i.a,1e3)};function vx(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}ge.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,o;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?o={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),o={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(o),this.viewbox(!1).scale};ge.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),o=n.createSVGPoint();let s,a,c,l,u;c=i.getCTM();const f=c.a;return t?(s=$(o,t),a=s.matrixTransform(c.inverse()),l=r.translate(a.x,a.y).scale(1/f*e).translate(-a.x,-a.y),u=c.multiply(l)):u=r.scale(e),vx(this._viewport,u),u};ge.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};ge.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,s=n.height*t.scale;return{x:i,y:r,width:o,height:s}};ge.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var xs="data-element-id";function wn(e){this._elements={},this._eventBus=e}wn.$inject=["eventBus"];wn.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),ie(t,xs,i),n&&ie(n,xs,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};wn.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(ie(i.gfx,xs,""),i.secondaryGfx&&ie(i.secondaryGfx,xs,""),delete t[n])};wn.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};wn.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&ie(t,xs,i),t};wn.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&ie(e,xs);var n=this._elements[t];return n&&n.element};wn.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};wn.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],o=t[r],s=o.element,a=o.gfx;if(e(s,a))return s}};wn.prototype.getAll=function(){return this.filter(function(e){return e})};wn.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,o=i.gfx;return e(r,o)})};wn.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};wn.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function L2(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var s=this.indexOf(o);return s!==-1&&(this.splice(s,1),t.unset(o,r,i)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,s){var a=this.indexOf(o);if(typeof s>"u"){if(a!==-1)return;s=this.length}a!==-1&&this.splice(a,1),this.splice(s,0,o),a===-1&&t.set(o,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function B2(e){return e.__refs_collection===!0}function j2(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function yx(e,t,n){var i=L2(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function F2(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(o){if(o!==r){var s=r;r=null,s&&e.unset(s,i,n),r=o,e.set(r,i,n)}}})}function In(e,t){if(!(this instanceof In))return new In(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}In.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?yx(this,t,e):F2(this,t,e)};In.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return B2(n)||yx(this,t,e),n};In.prototype.ensureBound=function(e,t){j2(e,t)||this.bind(e,t)};In.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};In.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Ud=new In({name:"children",enumerable:!0,collection:!0},{name:"parent"}),_x=new In({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Hy=new In({name:"attachers",collection:!0},{name:"host"}),bx=new In({name:"outgoing",collection:!0},{name:"source"}),wx=new In({name:"incoming",collection:!0},{name:"target"});function Hs(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Ud.bind(this,"parent"),_x.bind(this,"labels"),bx.bind(this,"outgoing"),wx.bind(this,"incoming")}function Ec(){Hs.call(this),Ud.bind(this,"children"),Hy.bind(this,"host"),Hy.bind(this,"attachers")}re(Ec,Hs);function Ex(){Hs.call(this),Ud.bind(this,"children")}re(Ex,Ec);function xx(){Ec.call(this),_x.bind(this,"labelTarget")}re(xx,Ec);function Sx(){Hs.call(this),bx.bind(this,"source"),wx.bind(this,"target")}re(Sx,Hs);var H2={connection:Sx,shape:Ec,label:xx,root:Ex};function z2(e,t){var n=H2[e];if(!n)throw new Error("unknown type: <"+e+">");return $(new n,t)}function U2(e){return e instanceof Hs}function Gi(){this._uid=12}Gi.prototype.createRoot=function(e){return this.create("root",e)};Gi.prototype.createLabel=function(e){return this.create("label",e)};Gi.prototype.createShape=function(e){return this.create("shape",e)};Gi.prototype.createConnection=function(e){return this.create("connection",e)};Gi.prototype.create=function(e,t){return t=$({},t||{}),t.id||(t.id=e+"_"+this._uid++),z2(e,t)};var gu="__fn",Cx=1e3,V2=Array.prototype.slice;function gn(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}gn.prototype.on=function(e,t,n,i){if(e=de(e)?e:[e],bt(t)&&(i=n,n=t,t=Cx),!pe(t))throw new Error("priority must be a number");var r=n;i&&(r=on(n,i),r[gu]=n[gu]||n);var o=this;e.forEach(function(s){o._addListener(s,{priority:t,callback:r,next:null})})};gn.prototype.once=function(e,t,n,i){var r=this;if(bt(t)&&(i=n,n=t,t=Cx),!pe(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var s=n.apply(i,arguments);return r.off(e,o),s}o[gu]=n,this.on(e,t,o)};gn.prototype.off=function(e,t){e=de(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};gn.prototype.createEvent=function(e){var t=new xc;return t.init(e),t};gn.prototype.fire=function(e,t){var n,i,r,o;if(o=V2.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof xc?n=t:n=this.createEvent(t),o[0]=n;var s=n.type;e!==s&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==s&&(n.type=s)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};gn.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};gn.prototype._destroy=function(){this._listeners={}};gn.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};gn.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=W2(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};gn.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};gn.prototype._getListeners=function(e){return this._listeners[e]};gn.prototype._setListeners=function(e,t){this._listeners[e]=t};gn.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,o;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,o=n.callback,(o===t||o[gu]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function xc(){}xc.prototype.stopPropagation=function(){this.cancelBubble=!0};xc.prototype.preventDefault=function(){this.defaultPrevented=!0};xc.prototype.init=function(e){$(this,e||{})};function W2(e,t){return e.apply(null,t)}function yo(e){return e.childNodes[0]}function G2(e){return e.parentNode.childNodes[1]}function Nl(e,t,n,i,r){var o=La();o.setTranslate(t,n);var s=La();s.setRotate(i||0,0,0);var a=La();a.setScale(1,1),tc(e,[o,s,a])}function kt(e,t,n){var i=La();i.setTranslate(t,n),tc(e,i)}function Rx(e,t){var n=La();n.setRotate(t,0,0),tc(e,n)}function En(e,t){this._eventBus=e,this._elementRegistry=t}En.$inject=["eventBus","elementRegistry"];En.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=G2(t),n||(n=ae("g"),Ae(n).add("djs-children"),me(t.parentNode,n))):n=t,n};En.prototype._clear=function(e){var t=yo(e);return Gu(t),t};En.prototype._createContainer=function(e,t,n,i){var r=ae("g");Ae(r).add("djs-group"),typeof n<"u"?Tx(r,t,t.childNodes[n]):me(t,r);var o=ae("g");Ae(o).add("djs-element"),Ae(o).add("djs-"+e),i&&Ae(o).add("djs-frame"),me(r,o);var s=ae("g");return Ae(s).add("djs-visual"),me(o,s),o};En.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,ux(t))};En.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=dn(e,function(r,o){return o.parent&&(r[o.parent.id]=o.parent),r},{}),M(i,function(r){var o=r.children;if(o){var s=t._getChildrenContainer(r);M(o.slice().reverse(),function(a){var c=n.getGraphics(a);Tx(c.parentNode,s)})}})};En.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})};En.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};En.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})};En.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};En.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),kt(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?ie(n,"display","none"):ie(n,"display","block")}};En.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);vt(t.parentNode)};function Tx(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const K2={__depends__:[h2],__init__:["canvas"],canvas:["type",ge],elementRegistry:["type",wn],elementFactory:["type",Gi],eventBus:["type",gn],graphicsFactory:["type",En]};function q2(e){var t=new ox(e);return t.init(),t}function Y2(e){e=e||{};var t={config:["value",e]},n=[t,K2].concat(e.modules||[]);return q2(n)}function Ir(e,t){this._injector=t||Y2(e),this.get("eventBus").fire("diagram.init")}Ir.prototype.get=function(e,t){return this._injector.get(e,t)};Ir.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};Ir.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Ir.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Vd(){}Vd.prototype.get=function(e){return this.$model.properties.get(this,e)};Vd.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function Px(e,t){this.model=e,this.properties=t}Px.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Vd.prototype);M(e.properties,function(s){!s.isMany&&s.default!==void 0&&(i[s.name]=s.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(s){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),M(s,on(function(a,c){this.set(c,a)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var J2={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Ax={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Wd(e,t){var n=Ax[e];return n?n(t):t}function Eh(e){return!!J2[e]}function kx(e){return!!Ax[e]}function jt(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function xn(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}xn.prototype.build=function(){return ei(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};xn.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};xn.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,s=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var a=r.indexOf(e);if(a===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(a,1),this.addProperty(t,n?void 0:a,s),o[i.name]=o[i.localName]=t};xn.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=jt(r[0],i),s=jt(r[1],o.prefix).name,a=this.propertiesByName[s];if(a)this.replaceProperty(a,e,n);else throw new Error("refined property <"+s+"> not found");delete e.redefines};xn.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};xn.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};xn.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};xn.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};xn.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};xn.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};xn.prototype.hasProperty=function(e){return this.propertiesByName[e]};xn.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(M(e.properties,on(function(o){o=$({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var s=o.replaces,a=o.redefines;s||a?this.redefineProperty(o,s||a,s):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),i.push(e),n[r]=e)};function Nr(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,M(e,on(this.registerPackage,this))}Nr.prototype.getPackage=function(e){return this.packageMap[e]};Nr.prototype.getPackages=function(){return this.packages};Nr.prototype.registerPackage=function(e){e=$({},e);var t=this.packageMap;zy(t,e,"prefix"),zy(t,e,"uri"),M(e.types,on(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};Nr.prototype.registerType=function(e,t){e=$({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:$(e.meta||{})});var n=jt(e.name,t.prefix),i=n.name,r={};M(e.properties,on(function(o){var s=jt(o.name,n.prefix),a=s.name;Eh(o.type)||(o.type=jt(o.type,s.prefix).name),$(o,{ns:s,name:a}),r[a]=o},this)),$(e,{ns:n,name:i,propertiesByName:r}),M(e.extends,on(function(o){var s=jt(o,n.prefix),a=this.typeMap[s.name];a.traits=a.traits||[],a.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};Nr.prototype.mapTypes=function(e,t,n){var i=Eh(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function o(c,l){var u=jt(c,Eh(c)?"":e.prefix);r.mapTypes(u,t,l)}function s(c){return o(c,!0)}function a(c){return o(c,!1)}if(!i)throw new Error("unknown type <"+e.name+">");M(i.superClass,n?s:a),t(i,!n),M(i.traits,s)};Nr.prototype.getEffectiveDescriptor=function(e){var t=jt(e),n=new xn(t);this.mapTypes(t,function(r,o){n.addTrait(r,o)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};Nr.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function zy(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function Do(e){this.model=e}Do.prototype.set=function(e,t,n){if(!hn(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;X2(n)?i?delete e[r]:delete e.$attrs[xh(t)]:i?r in e?e[r]=n:Ox(e,i,n):e.$attrs[xh(t)]=n};Do.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[xh(t)];var i=n.name;return!e[i]&&n.isMany&&Ox(e,n,[]),e[i]};Do.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=$({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};Do.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Do.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Do.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw o;typeof console<"u"&&console.warn(o)}return null};function X2(e){return typeof e>"u"}function Ox(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function xh(e){return e.replace(/^:/,"")}function Nn(e,t={}){this.properties=new Do(this),this.factory=new Px(this,this.properties),this.registry=new Nr(e,this.properties),this.typeCache={},this.config=t}Nn.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};Nn.prototype.getType=function(e){var t=this.typeCache,n=hn(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};Nn.prototype.createAny=function(e,t,n){var i=jt(e),r={$type:e,$instanceOf:function(s){return s===this.$type},get:function(s){return this[s]},set:function(s,a){xI(this,[s],a)}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),M(n,function(s,a){Ct(s)&&s.value!==void 0?r[s.name]=s.value:r[a]=s}),r};Nn.prototype.getPackage=function(e){return this.registry.getPackage(e)};Nn.prototype.getPackages=function(){return this.registry.getPackages()};Nn.prototype.getElementDescriptor=function(e){return e.$descriptor};Nn.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};Nn.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Nn.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Uy=String.fromCharCode,Z2=Object.prototype.hasOwnProperty,Q2=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,ja={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(ja).forEach(function(e){ja[e.toUpperCase()]=ja[e]});function eN(e,t,n,i){return i?Z2.call(ja,i)?ja[i]:"&"+i+";":Uy(t||parseInt(n,16))}function io(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(Q2,eN):e}var Vy="non-whitespace outside of root node";function Zo(e){return new Error(e)}function Wy(e){return"missing namespace for prefix <"+e+">"}function ll(e){return{get:e,enumerable:!0}}function tN(e){var t={},n;for(n in e)t[n]=e[n];return t}function Sh(e){return e+"$uri"}function nN(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[Sh(i)]=n;return t}function Gy(){return{line:0,column:0}}function iN(e){throw e}function Dx(e){if(!this)return new Dx(e);var t=e&&e.proxy,n,i,r,o,s=iN,a,c,l,u,f=Gy,p=!1,h=!1,d=null,g=!1,m;function E(y){y instanceof Error||(y=Zo(y)),d=y,s(y,f)}function x(y){a&&(y instanceof Error||(y=Zo(y)),a(y,f))}this.on=function(y,R){if(typeof R!="function")throw Zo("required args <name, cb>");switch(y){case"openTag":i=R;break;case"text":n=R;break;case"closeTag":r=R;break;case"error":s=R;break;case"warn":a=R;break;case"cdata":o=R;break;case"attention":u=R;break;case"question":l=R;break;case"comment":c=R;break;default:throw Zo("unsupported event: "+y)}return this},this.ns=function(y){if(typeof y>"u"&&(y={}),typeof y!="object")throw Zo("required args <nsMap={}>");var R={},P;for(P in y)R[P]=y[P];return h=!0,m=R,this},this.parse=function(y){if(typeof y!="string")throw Zo("required args <xml=string>");return d=null,b(y),f=Gy,g=!1,d},this.stop=function(){g=!0};function b(y){var R=h?[]:null,P=h?nN(m):null,N,k=[],O=0,L=!1,F=!1,B=0,V=0,oe,Ne,le,Q,we,ot,$e,Ue,U,G="",se=0,Ee;function Ke(){if(Ee!==null)return Ee;var _,v,A,I=h&&P.xmlns,C=h&&p?[]:null,T=se,D=G,j=D.length,z,H,X,Z,W,q={},fe={},ee,Y,te;e:for(;T<j;T++)if(ee=!1,Y=D.charCodeAt(T),!(Y===32||Y<14&&Y>8)){for((Y<65||Y>122||Y>90&&Y<97)&&Y!==95&&Y!==58&&(x("illegal first char attribute name"),ee=!0),te=T+1;te<j;te++)if(Y=D.charCodeAt(te),!(Y>96&&Y<123||Y>64&&Y<91||Y>47&&Y<59||Y===46||Y===45||Y===95)){if(Y===32||Y<14&&Y>8){x("missing attribute value"),T=te;continue e}if(Y===61)break;x("illegal attribute name char"),ee=!0}if(W=D.substring(T,te),W==="xmlns:xmlns"&&(x("illegal declaration of xmlns"),ee=!0),Y=D.charCodeAt(te+1),Y===34)te=D.indexOf('"',T=te+2),te===-1&&(te=D.indexOf("'",T),te!==-1&&(x("attribute value quote missmatch"),ee=!0));else if(Y===39)te=D.indexOf("'",T=te+2),te===-1&&(te=D.indexOf('"',T),te!==-1&&(x("attribute value quote missmatch"),ee=!0));else for(x("missing attribute value quotes"),ee=!0,te=te+1;te<j&&(Y=D.charCodeAt(te+1),!(Y===32||Y<14&&Y>8));te++);for(te===-1&&(x("missing closing quotes"),te=j,ee=!0),ee||(X=D.substring(T,te)),T=te;te+1<j&&(Y=D.charCodeAt(te+1),!(Y===32||Y<14&&Y>8));te++)T===te&&(x("illegal character after attribute end"),ee=!0);if(T=te+1,ee)continue e;if(W in fe){x("attribute <"+W+"> already defined");continue}if(fe[W]=!0,!h){q[W]=X;continue}if(p){if(H=W==="xmlns"?"xmlns":W.charCodeAt(0)===120&&W.substr(0,6)==="xmlns:"?W.substr(6):null,H!==null){if(_=io(X),v=Sh(H),Z=m[_],!Z){if(H==="xmlns"||v in P&&P[v]!==_)do Z="ns"+O++;while(typeof P[Z]<"u");else Z=H;m[_]=Z}P[H]!==Z&&(z||(P=tN(P),z=!0),P[H]=Z,H==="xmlns"&&(P[Sh(Z)]=_,I=Z),P[v]=_),q[W]=X;continue}C.push(W,X);continue}if(Y=W.indexOf(":"),Y===-1){q[W]=X;continue}if(!(A=P[W.substring(0,Y)])){x(Wy(W.substring(0,Y)));continue}W=I===A?W.substr(Y+1):A+W.substr(Y),q[W]=X}if(p)for(T=0,j=C.length;T<j;T++){if(W=C[T++],X=C[T],Y=W.indexOf(":"),Y!==-1){if(!(A=P[W.substring(0,Y)])){x(Wy(W.substring(0,Y)));continue}W=I===A?W.substr(Y+1):A+W.substr(Y)}q[W]=X}return Ee=q}function S(){for(var _=/(\r\n|\r|\n)/g,v=0,A=0,I=0,C=V,T,D;B>=I&&(T=_.exec(y),!(!T||(C=T[0].length+T.index,C>B)));)v+=1,I=C;return B==-1?(A=C,D=y.substring(V)):V===0?D=y.substring(V,B):(A=B-I,D=V==-1?y.substring(B):y.substring(B,V+1)),{data:D,line:v,column:A}}for(f=S,t&&(U=Object.create({},{name:ll(function(){return $e}),originalName:ll(function(){return Ue}),attrs:ll(Ke),ns:ll(function(){return P})}));V!==-1;){if(y.charCodeAt(V)===60?B=V:B=y.indexOf("<",V),B===-1){if(k.length)return E("unexpected end of file");if(V===0)return E("missing start tag");V<y.length&&y.substring(V).trim()&&x(Vy);return}if(V!==B){if(k.length){if(n&&(n(y.substring(V,B),io,f),g))return}else if(y.substring(V,B).trim()&&(x(Vy),g))return}if(Q=y.charCodeAt(B+1),Q===33){if(le=y.charCodeAt(B+2),le===91&&y.substr(B+3,6)==="CDATA["){if(V=y.indexOf("]]>",B),V===-1)return E("unclosed cdata");if(o&&(o(y.substring(B+9,V),f),g))return;V+=3;continue}if(le===45&&y.charCodeAt(B+3)===45){if(V=y.indexOf("-->",B),V===-1)return E("unclosed comment");if(c&&(c(y.substring(B+4,V),io,f),g))return;V+=3;continue}}if(Q===63){if(V=y.indexOf("?>",B),V===-1)return E("unclosed question");if(l&&(l(y.substring(B,V+2),f),g))return;V+=2;continue}for(oe=B+1;;oe++){if(we=y.charCodeAt(oe),isNaN(we))return V=-1,E("unclosed tag");if(we===34)le=y.indexOf('"',oe+1),oe=le!==-1?le:oe;else if(we===39)le=y.indexOf("'",oe+1),oe=le!==-1?le:oe;else if(we===62){V=oe;break}}if(Q===33){if(u&&(u(y.substring(B,V+1),io,f),g))return;V+=1;continue}if(Ee={},Q===47){if(L=!1,F=!0,!k.length)return E("missing open tag");if(oe=$e=k.pop(),le=B+2+oe.length,y.substring(B+2,le)!==oe)return E("closing tag mismatch");for(;le<V;le++)if(Q=y.charCodeAt(le),!(Q===32||Q>8&&Q<14))return E("close tag")}else{if(y.charCodeAt(V-1)===47?(oe=$e=y.substring(B+1,V-1),L=!0,F=!0):(oe=$e=y.substring(B+1,V),L=!0,F=!1),!(Q>96&&Q<123||Q>64&&Q<91||Q===95||Q===58))return E("illegal first char nodeName");for(le=1,Ne=oe.length;le<Ne;le++)if(Q=oe.charCodeAt(le),!(Q>96&&Q<123||Q>64&&Q<91||Q>47&&Q<59||Q===45||Q===95||Q==46)){if(Q===32||Q<14&&Q>8){$e=oe.substring(0,le),Ee=null;break}return E("invalid nodeName")}F||k.push($e)}if(h){if(N=P,L&&(F||R.push(N),Ee===null&&(p=oe.indexOf("xmlns",le)!==-1)&&(se=le,G=oe,Ke(),p=!1)),Ue=$e,Q=$e.indexOf(":"),Q!==-1){if(ot=P[$e.substring(0,Q)],!ot)return E("missing namespace on <"+Ue+">");$e=$e.substr(Q+1)}else ot=P.xmlns;ot&&($e=ot+":"+$e)}if(L&&(se=le,G=oe,i&&(t?i(U,io,F,f):i($e,Ke,io,F,f),g)))return;if(F){if(r&&(r(t?U:$e,io,L,f),g))return;h&&(L?P=N:P=R.pop())}V+=1}}}function Mx(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var Ch={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},Ix="property";function Nx(e){return e.xml&&e.xml.serialize}function rN(e){const t=Nx(e);return t!==Ix&&(t||null)}function oN(e){return e.charAt(0).toUpperCase()+e.slice(1)}function $x(e,t){return Mx(t)?e.prefix+":"+oN(e.localName):e.name}function sN(e,t){var n=e.name,i=e.localName,r=t&&t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function aN(e,t,n){const i=jt(e,t.xmlns),r=`${t[i.prefix]||i.prefix}:${i.localName}`,o=jt(r);var s=n.getPackage(o.prefix);return sN(o,s)}function Pr(e){return new Error(e)}function ji(e){return e.$descriptor}function cN(e){$(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw Pr("expected element");var n=this.elementsById,i=ji(t),r=i.idProperty,o;if(r&&(o=t.get(r.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw Pr("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Sc(){}Sc.prototype.handleEnd=function(){};Sc.prototype.handleText=function(){};Sc.prototype.handleNode=function(){};function Gd(){}Gd.prototype=Object.create(Sc.prototype);Gd.prototype.handleNode=function(){return this};function zs(){}zs.prototype=Object.create(Sc.prototype);zs.prototype.handleText=function(e){this.body=(this.body||"")+e};function Cc(e,t){this.property=e,this.context=t}Cc.prototype=Object.create(zs.prototype);Cc.prototype.handleNode=function(e){if(this.element)throw Pr("expected no sub nodes");return this.element=this.createReference(e),this};Cc.prototype.handleEnd=function(){this.element.id=this.body};Cc.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Kd(e,t){this.element=t,this.propertyDesc=e}Kd.prototype=Object.create(zs.prototype);Kd.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Wd(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function Xu(){}Xu.prototype=Object.create(zs.prototype);Xu.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function Yt(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}Yt.prototype=Object.create(Xu.prototype);Yt.prototype.addReference=function(e){this.context.addReference(e)};Yt.prototype.handleText=function(e){var t=this.element,n=ji(t),i=n.bodyProperty;if(!i)throw Pr("unexpected body text <"+e+">");zs.prototype.handleText.call(this,e)};Yt.prototype.handleEnd=function(){var e=this.body,t=this.element,n=ji(t),i=n.bodyProperty;i&&e!==void 0&&(e=Wd(i.type,e),t.set(i.name,e))};Yt.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=ji(n),r=this.context,o=new n({}),s=this.model,a;return M(t,function(c,l){var u=i.propertiesByName[l],f;u&&u.isReference?u.isMany?(f=c.split(" "),M(f,function(p){r.addReference({element:o,property:u.ns.name,id:p})})):r.addReference({element:o,property:u.ns.name,id:c}):(u?c=Wd(u.type,c):l==="xmlns"?l=":"+l:(a=jt(l,i.ns.prefix),s.getPackage(a.prefix)&&r.addWarning({message:"unknown attribute <"+l+">",element:o,property:l,value:c})),o.set(l,c))}),o};Yt.prototype.getPropertyForNode=function(e){var t=e.name,n=jt(t),i=this.type,r=this.model,o=ji(i),s=n.name,a=o.propertiesByName[s];if(a&&!a.isAttr){const l=rN(a);if(l){const u=e.attributes[l];if(u){const f=aN(u,e.ns,r),p=r.getType(f);return $({},a,{effectiveType:ji(p).name})}}return a}var c=r.getPackage(n.prefix);if(c){const l=$x(n,c),u=r.getType(l);if(a=Me(o.properties,function(f){return!f.isVirtual&&!f.isReference&&!f.isAttribute&&u.hasType(f.type)}),a)return $({},a,{effectiveType:ji(u).name})}else if(a=Me(o.properties,function(l){return!l.isReference&&!l.isAttribute&&l.type==="Element"}),a)return a;throw Pr("unrecognized element <"+n.name+">")};Yt.prototype.toString=function(){return"ElementDescriptor["+ji(this.type).name+"]"};Yt.prototype.valueHandler=function(e,t){return new Kd(e,t)};Yt.prototype.referenceHandler=function(e){return new Cc(e,this.context)};Yt.prototype.handler=function(e){return e==="Element"?new Ss(this.model,e,this.context):new Yt(this.model,e,this.context)};Yt.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,kx(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var o=r.element;return o!==void 0&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?($(o,{element:i}),this.context.addReference(o)):o.$parent=i),r};function qd(e,t,n){Yt.call(this,e,t,n)}qd.prototype=Object.create(Yt.prototype);qd.prototype.createElement=function(e){var t=e.name,n=jt(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),s=o&&$x(n,o)||t;if(!r.hasType(s))throw Pr("unexpected element <"+e.originalName+">");return Yt.prototype.createElement.call(this,e)};function Ss(e,t,n){this.model=e,this.context=n}Ss.prototype=Object.create(Xu.prototype);Ss.prototype.createElement=function(e){var t=e.name,n=jt(t),i=n.prefix,r=e.ns[i+"$uri"],o=e.attributes;return this.model.createAny(t,r,o)};Ss.prototype.handleChild=function(e){var t=new Ss(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};Ss.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Yd(e){e instanceof Nn&&(e={model:e}),$(this,{lax:!1},e)}Yd.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof Yt?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,o=this.lax,s=new cN($({},t,{rootHandler:i})),a=new Dx({proxy:!0}),c=lN();i.context=s,c.push(i);function l(R,P,N){var k=P(),O=k.line,L=k.column,F=k.data;F.charAt(0)==="<"&&F.indexOf(" ")!==-1&&(F=F.slice(0,F.indexOf(" "))+">");var B="unparsable content "+(F?F+" ":"")+`detected
	line: `+O+`
	column: `+L+`
	nested error: `+R.message;if(N)return s.addWarning({message:B,error:R}),!0;throw Pr(B)}function u(R,P){return l(R,P,!0)}function f(){var R=s.elementsById,P=s.references,N,k;for(N=0;k=P[N];N++){var O=k.element,L=R[k.id],F=ji(O).propertiesByName[k.property];if(L||s.addWarning({message:"unresolved reference <"+k.id+">",element:k.element,property:k.property,value:k.id}),F.isMany){var B=O.get(F.name),V=B.indexOf(k);V===-1&&(V=B.length),L?B[V]=L:B.splice(V,1)}else O.set(F.name,L)}}function p(){c.pop().handleEnd()}var h=/^<\?xml /i,d=/ encoding="([^"]+)"/i,g=/^utf-8$/i;function m(R){if(h.test(R)){var P=d.exec(R),N=P&&P[1];!N||g.test(N)||s.addWarning({message:"unsupported document encoding <"+N+">, falling back to UTF-8"})}}function E(R,P){var N=c.peek();try{c.push(N.handleNode(R))}catch(k){l(k,P,o)&&c.push(new Gd)}}function x(R,P){try{c.peek().handleText(R)}catch(N){u(N,P)}}function b(R,P){R.trim()&&x(R,P)}var y=r.getPackages().reduce(function(R,P){return R[P.uri]=P.prefix,R},Object.entries(Ch).reduce(function(R,[P,N]){return R[N]=P,R},r.config&&r.config.nsMap||{}));return a.ns(y).on("openTag",function(R,P,N,k){var O=R.attrs||{},L=Object.keys(O).reduce(function(B,V){var oe=P(O[V]);return B[V]=oe,B},{}),F={name:R.name,originalName:R.originalName,attributes:L,ns:R.ns};E(F,k)}).on("question",m).on("closeTag",p).on("cdata",x).on("text",function(R,P,N){b(P(R),N)}).on("error",l).on("warn",u),new Promise(function(R,P){var N;try{a.parse(e),f()}catch(B){N=B}var k=i.element;!N&&!k&&(N=Pr("failed to parse document as <"+i.type.$descriptor.name+">"));var O=s.warnings,L=s.references,F=s.elementsById;return N?(N.warnings=O,P(N)):R({rootElement:k,elementsById:F,references:L,warnings:O})})};Yd.prototype.handler=function(e){return new qd(this.model,e)};function lN(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var uN=`<?xml version="1.0" encoding="UTF-8"?>
`,fN=/<|>|'|"|&|\n\r|\n/g,Lx=/<|>|&/g;function bi(e){this.prefixMap={},this.uriMap={},this.used={},this.wellknown=[],this.custom=[],this.parent=e,this.defaultPrefixMap=e&&e.defaultPrefixMap||{}}bi.prototype.mapDefaultPrefixes=function(e){this.defaultPrefixMap=e};bi.prototype.defaultUriByPrefix=function(e){return this.defaultPrefixMap[e]};bi.prototype.byUri=function(e){return this.uriMap[e]||this.parent&&this.parent.byUri(e)};bi.prototype.add=function(e,t){this.uriMap[e.uri]=e,t?this.wellknown.push(e):this.custom.push(e),this.mapPrefix(e.prefix,e.uri)};bi.prototype.uriByPrefix=function(e){return this.prefixMap[e||"xmlns"]||this.parent&&this.parent.uriByPrefix(e)};bi.prototype.mapPrefix=function(e,t){this.prefixMap[e||"xmlns"]=t};bi.prototype.getNSKey=function(e){return e.prefix!==void 0?e.uri+"|"+e.prefix:e.uri};bi.prototype.logUsed=function(e){var t=e.uri,n=this.getNSKey(e);this.used[n]=this.byUri(t),this.parent&&this.parent.logUsed(e)};bi.prototype.getUsed=function(e){var t=[].concat(this.wellknown,this.custom);return t.filter(n=>{var i=this.getNSKey(n);return this.used[i]})};function pN(e){return e.charAt(0).toLowerCase()+e.slice(1)}function hN(e,t){return Mx(t)?pN(e):e}function Bx(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function jx(e){return hn(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function dN(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function gN(e,t){return t.isGeneric?$({localName:t.ns.localName},e):$({localName:hN(t.ns.localName,t.$pkg)},e)}function mN(e,t){return $({localName:t.ns.localName},e)}function vN(e){var t=e.$descriptor;return Se(t.properties,function(n){var i=n.name;if(n.isVirtual||!rn(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var yN={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},_N={"<":"lt",">":"gt","&":"amp"};function Fx(e,t,n){return e=hn(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function bN(e){return Fx(e,fN,yN)}function wN(e){return Fx(e,Lx,_N)}function EN(e){return Se(e,function(t){return t.isAttr})}function xN(e){return Se(e,function(t){return!t.isAttr})}function Jd(e){this.tagName=e}Jd.prototype.build=function(e){return this.element=e,this};Jd.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function xo(){}xo.prototype.serializeValue=xo.prototype.serializeTo=function(e){e.append(this.escape?wN(this.value):this.value)};xo.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Lx)!==-1&&(this.escape=!0),this};function Xd(e){this.tagName=e}Bx(Xd,xo);Xd.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function et(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}et.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,o=t.isGeneric;return o?i=this.parseGenericNsAttributes(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o?this.parseGenericContainments(e):(r=vN(e),this.parseAttributes(EN(r)),this.parseContainments(xN(r))),this.parseGenericAttributes(e,i),this};et.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return gN(t,e)};et.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return mN(t,e)};et.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};et.prototype.nsAttributeName=function(e){var t;if(hn(e)?t=jt(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:$({localName:t.localName},n)};et.prototype.parseGenericNsAttributes=function(e){return Object.entries(e).filter(([t,n])=>!t.startsWith("$")&&this.parseNsAttribute(e,t,n)).map(([t,n])=>({name:t,value:n}))};et.prototype.parseGenericContainments=function(e){var t=e.$body;t&&this.body.push(new xo().build({type:"String"},t));var n=e.$children;n&&M(n,i=>{this.body.push(new et(this).build(i))})};et.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=jt(t),o;if(r.prefix==="xmlns"&&(o={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(o,!0,!0);else{var s=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(s)}};et.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,i=[];return M(n,function(r,o){var s=t.parseNsAttribute(e,o,r);s&&i.push(s)}),i};et.prototype.parseGenericAttributes=function(e,t){var n=this;M(t,function(i){try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){typeof console<"u"&&console.warn(`missing namespace information for <${i.name}=${i.value}> on`,e,r)}})};et.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;M(e,function(r){var o=i.get(r.name),s=r.isReference,a=r.isMany;if(a||(o=[o]),r.isBody)n.push(new xo().build(r,o[0]));else if(kx(r.type))M(o,function(l){n.push(new Xd(t.addTagName(t.nsPropertyTagName(r))).build(r,l))});else if(s)M(o,function(l){n.push(new Jd(t.addTagName(t.nsPropertyTagName(r))).build(l))});else{var c=Nx(r);M(o,function(l){var u;c?c===Ix?u=new et(t,r):u=new Zu(t,r,c):u=new et(t),n.push(u.build(l))})}})};et.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new bi(i):t=i),t};et.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix,s=i.byUri(r);return(!s||n)&&i.add(e,t),i.mapPrefix(o,r),e};et.prototype.logNamespaceUsed=function(e,t){var n=this.getNamespaces(t),i=e.prefix,r=e.uri,o,s,a;if(!i&&!r)return{localName:e.localName};if(a=n.defaultUriByPrefix(i),r=r||a||n.uriByPrefix(i),!r)throw new Error("no namespace uri given for prefix <"+i+">");if(e=n.byUri(r),!e&&!i&&(e=this.logNamespace({uri:r},a===r,!0)),!e){for(o=i,s=1;n.uriByPrefix(o);)o=i+"_"+s++;e=this.logNamespace({prefix:o,uri:r},a===r)}return i&&n.mapPrefix(i,r),e};et.prototype.parseAttributes=function(e){var t=this,n=this.element;M(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var o=[];M(r,function(s){o.push(s.id)}),r=o.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};et.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),jx(e)};et.prototype.addAttribute=function(e,t){var n=this.attrs;hn(t)&&(t=bN(t));var i=KE(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};et.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=dN(n).concat(t)),M(t,function(i){e.append(" ").append(jx(i.name)).append('="').append(i.value).append('"')})};et.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==xo;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),M(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function Zu(e,t,n){et.call(this,e,t),this.serialization=n}Bx(Zu,et);Zu.prototype.parseNsAttributes=function(e){var t=et.prototype.parseNsAttributes.call(this,e).filter(s=>s.name!==this.serialization),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(this.serialization),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t};Zu.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function SN(){this.value="",this.write=function(e){this.value+=e}}function CN(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function RN(e){e=$({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new SN,o=new CN(r,e.format);e.preamble&&o.append(uN);var s=new et,a=n.$model;if(s.getNamespaces().mapDefaultPrefixes(TN(a)),s.build(n).serializeTo(o),!i)return r.value}return{toXML:t}}function TN(e){const t=e.config&&e.config.nsMap||{},n={};for(const i in Ch)n[i]=Ch[i];for(const i in t){const r=t[i];n[r]=i}for(const i of e.getPackages())n[i.prefix]=i.uri;return n}function Qu(e,t){Nn.call(this,e,t)}Qu.prototype=Object.create(Nn.prototype);Qu.prototype.fromXML=function(e,t,n){hn(t)||(n=t,t="bpmn:Definitions");var i=new Yd($({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};Qu.prototype.toXML=function(e,t){var n=new RN(t);return new Promise(function(i,r){try{var o=n.toXML(e);return i({xml:o})}catch(s){return r(s)}})};var PN="BPMN20",AN="http://www.omg.org/spec/BPMN/20100524/MODEL",kN="bpmn",ON=[],DN=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],MN=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],IN={tagAlias:"lowerCase",typePrefix:"t"},NN={name:PN,uri:AN,prefix:kN,associations:ON,types:DN,enumerations:MN,xml:IN},$N="BPMNDI",LN="http://www.omg.org/spec/BPMN/20100524/DI",BN="bpmndi",jN=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],FN=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],HN=[],zN={name:$N,uri:LN,prefix:BN,types:jN,enumerations:FN,associations:HN},UN="DC",VN="http://www.omg.org/spec/DD/20100524/DC",WN="dc",GN=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],KN=[],qN={name:UN,uri:VN,prefix:WN,types:GN,associations:KN},YN="DI",JN="http://www.omg.org/spec/DD/20100524/DI",XN="di",ZN=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],QN=[],e$={tagAlias:"lowerCase"},t$={name:YN,uri:JN,prefix:XN,types:ZN,associations:QN,xml:e$},n$="bpmn.io colors for BPMN",i$="http://bpmn.io/schema/bpmn/biocolor/1.0",r$="bioc",o$=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],s$=[],a$=[],c$={name:n$,uri:i$,prefix:r$,types:o$,enumerations:s$,associations:a$},l$="BPMN in Color",u$="http://www.omg.org/spec/BPMN/non-normative/color/1.0",f$="color",p$=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],h$=[],d$=[],g$={name:l$,uri:u$,prefix:f$,types:p$,enumerations:h$,associations:d$};const m$={bpmn:NN,bpmndi:zN,dc:qN,di:t$,bioc:c$,color:g$};function v$(e,t){const n=$({},m$,e);return new Qu(n,t)}function It(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var y$="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function Hx(e){rn(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(y$)}})}function Qt(e,t){return e.$instanceOf(t)}function _$(e){return Me(e.rootElements,function(t){return Qt(t,"bpmn:Process")||Qt(t,"bpmn:Collaboration")})}function b$(e){var t={},n=[],i={};function r(U,G){return function(se){U(se,G)}}function o(U){t[U.id]=U}function s(U){return t[U.id]}function a(U,G){var se=U.gfx;if(se)throw new Error(`already rendered ${It(U)}`);return e.element(U,i[U.id],G)}function c(U,G){return e.root(U,i[U.id],G)}function l(U,G){try{var se=i[U.id]&&a(U,G);return o(U),se}catch(Ee){u(Ee.message,{element:U,error:Ee}),console.error(`failed to import ${It(U)}`,Ee)}}function u(U,G){e.error(U,G)}var f=this.registerDi=function(G){var se=G.bpmnElement;se?i[se.id]?u(`multiple DI elements defined for ${It(se)}`,{element:se}):(i[se.id]=G,Hx(se)):u(`no bpmnElement referenced in ${It(G)}`,{element:G})};function p(U){h(U.plane)}function h(U){f(U),M(U.planeElement,d)}function d(U){f(U)}this.handleDefinitions=function(G,se){var Ee=G.diagrams;if(se&&Ee.indexOf(se)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!se&&Ee&&Ee.length&&(se=Ee[0]),!se)throw new Error("no diagram to display");i={},p(se);var Ke=se.plane;if(!Ke)throw new Error(`no plane for ${It(se)}`);var S=Ke.bpmnElement;if(!S)if(S=_$(G),S)u(`correcting missing bpmnElement on ${It(Ke)} to ${It(S)}`),Ke.bpmnElement=S,f(Ke);else throw new Error("no process or collaboration to display");var _=c(S,Ke);if(Qt(S,"bpmn:Process")||Qt(S,"bpmn:SubProcess"))m(S,_);else if(Qt(S,"bpmn:Collaboration"))$e(S,_),E(G.rootElements,_);else throw new Error(`unsupported bpmnElement for ${It(Ke)}: ${It(S)}`);g(n)};var g=this.handleDeferred=function(){for(var G;n.length;)G=n.shift(),G()};function m(U,G){Q(U,G),O(U.ioSpecification,G),k(U.artifacts,G),o(U)}function E(U,G){var se=Se(U,function(Ee){return!s(Ee)&&Qt(Ee,"bpmn:Process")&&Ee.laneSets});se.forEach(r(m,G))}function x(U,G){l(U,G)}function b(U,G){M(U,r(x,G))}function y(U,G){l(U,G)}function R(U,G){l(U,G)}function P(U,G){l(U,G)}function N(U,G){l(U,G)}function k(U,G){M(U,function(se){Qt(se,"bpmn:Association")?n.push(function(){N(se,G)}):N(se,G)})}function O(U,G){U&&(M(U.dataInputs,r(R,G)),M(U.dataOutputs,r(P,G)))}var L=this.handleSubProcess=function(G,se){Q(G,se),k(G.artifacts,se)};function F(U,G){var se=l(U,G);Qt(U,"bpmn:SubProcess")&&L(U,se||G),Qt(U,"bpmn:Activity")&&O(U.ioSpecification,G),n.push(function(){M(U.dataInputAssociations,r(y,G)),M(U.dataOutputAssociations,r(y,G))})}function B(U,G){l(U,G)}function V(U,G){l(U,G)}function oe(U,G){n.push(function(){var se=l(U,G);U.childLaneSet&&Ne(U.childLaneSet,se||G),Ue(U)})}function Ne(U,G){M(U.lanes,r(oe,G))}function le(U,G){M(U,r(Ne,G))}function Q(U,G){we(U.flowElements,G),U.laneSets&&le(U.laneSets,G)}function we(U,G){M(U,function(se){Qt(se,"bpmn:SequenceFlow")?n.push(function(){B(se,G)}):Qt(se,"bpmn:BoundaryEvent")?n.unshift(function(){F(se,G)}):Qt(se,"bpmn:FlowNode")?F(se,G):Qt(se,"bpmn:DataObject")||(Qt(se,"bpmn:DataStoreReference")||Qt(se,"bpmn:DataObjectReference")?V(se,G):u(`unrecognized flowElement ${It(se)} in context ${It(G&&G.businessObject)}`,{element:se,context:G}))})}function ot(U,G){var se=l(U,G),Ee=U.processRef;Ee&&m(Ee,se||G)}function $e(U,G){M(U.participants,r(ot,G)),n.push(function(){b(U.messageFlows,G)}),k(U.artifacts,G)}function Ue(U){M(U.flowNodeRef,function(G){var se=G.get("lanes");se&&se.push(U)})}}function w(e,t){var n=J(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Ce(e,t){return Dr(t,function(n){return w(e,n)})}function J(e){return e&&e.businessObject||e}function ke(e){return e&&e.di}function w$(e,t,n){var i,r,o,s,a=[];function c(l,u){var f={root:function(g,m){return i.add(g,m)},element:function(g,m,E){return i.add(g,m,E)},error:function(g,m){a.push({message:g,context:m})}},p=new b$(f);u=u||l.diagrams&&l.diagrams[0];var h=E$(l,u);if(!h)throw new Error("no diagram to display");M(h,function(g){p.handleDefinitions(l,g)});var d=u.plane.bpmnElement.id;o.setRootElement(o.findRoot(d+"_plane")||o.findRoot(d))}return new Promise(function(l,u){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),o=e.get("canvas"),r.fire("import.render.start",{definitions:t}),c(t,n),r.fire("import.render.complete",{error:s,warnings:a}),l({warnings:a})}catch(f){return f.warnings=a,u(f)}})}function E$(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,i=n;!w(n,"bpmn:Process")&&!w(n,"bpmn:Collaboration")&&(i=x$(n));var r;w(i,"bpmn:Collaboration")?r=i:r=Me(e.rootElements,function(l){if(w(l,"bpmn:Collaboration"))return Me(l.participants,function(u){return u.processRef===i})});var o=[i];r&&(o=zt(r.participants,function(l){return l.processRef}),o.push(r));var s=zx(o),a=[t],c=[n];return M(e.diagrams,function(l){if(l.plane){var u=l.plane.bpmnElement;s.indexOf(u)!==-1&&c.indexOf(u)===-1&&(a.push(l),c.push(u))}}),a}}function zx(e){var t=[];return M(e,function(n){n&&(t.push(n),t=t.concat(zx(n.flowElements)))}),t}function x$(e){for(var t=e;t;){if(w(t,"bpmn:Process"))return t;t=t.$parent}}var S$='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',Ux=S$,Vx={verticalAlign:"middle"},Wx={color:"#404040"},C$={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},R$={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},T$={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},P$='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+Ux+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',hi;function A$(){hi=qe(P$),$t(hi,C$),$t(Fe("svg",hi),Vx),$t(Fe(".backdrop",hi),R$),$t(Fe(".notice",hi),T$),$t(Fe(".link",hi),Wx,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function k$(){hi||(A$(),pn.bind(hi,".backdrop","click",function(e){document.body.removeChild(hi)})),document.body.appendChild(hi)}function nt(e){e=$({},D$,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),this._init(this._container,this._moddle,e),I$(this._container)}re(nt,Ir);nt.prototype.importXML=async function(t,n){const i=this;function r(s){return i.get("eventBus").createEvent(s)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let s;try{s=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(p){throw this._emit("import.parse.complete",{error:p}),p}let a=s.rootElement;const c=s.references,l=s.warnings,u=s.elementsById;o=o.concat(l),a=this._emit("import.parse.complete",r({error:null,definitions:a,elementsById:u,references:c,warnings:o}))||a;const f=await this.importDefinitions(a,n);return o=o.concat(f.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(s){let a=s;throw o=o.concat(a.warnings||[]),$l(a,o),a=O$(a),this._emit("import.done",{error:a,warnings:a.warnings}),a}};nt.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};nt.prototype.open=async function(t){const n=this._definitions;let i=t;if(!n){const o=new Error("no XML imported");throw $l(o,[]),o}if(typeof t=="string"&&(i=M$(n,t),!i)){const o=new Error("BPMNDiagram <"+t+"> not found");throw $l(o,[]),o}try{this.clear()}catch(o){throw $l(o,[]),o}const{warnings:r}=await w$(this,n,i);return{warnings:r}};nt.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(s){i=s}const o=i?{error:i}:{xml:r};if(this._emit("saveXML.done",o),i)throw i;return o};nt.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),r=i.getActiveLayer(),o=Fe(":scope > defs",i._svg),s=Py(r),a=o?"<defs>"+Py(o)+"</defs>":"",c=r.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+c.width+'" height="'+c.height+'" viewBox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'" version="1.1">'+a+s+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};nt.prototype._setDefinitions=function(e){this._definitions=e};nt.prototype.getModules=function(){return this._modules};nt.prototype.clear=function(){this.getDefinitions()&&Ir.prototype.clear.call(this)};nt.prototype.destroy=function(){Ir.prototype.destroy.call(this),yi(this._container)};nt.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};nt.prototype.off=function(e,t){this.get("eventBus").off(e,t)};nt.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=Fe(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};nt.prototype.getDefinitions=function(){return this._definitions};nt.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};nt.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],s=[].concat(o,i,r),a=$(_i(n,["additionalModules"]),{canvas:$({},n.canvas,{container:e}),modules:s});Ir.call(this,a),n&&n.container&&this.attachTo(n.container)};nt.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};nt.prototype._createContainer=function(e){const t=qe('<div class="bjs-container"></div>');return $t(t,{width:Ky(e.width),height:Ky(e.height),position:e.position}),t};nt.prototype._createModdle=function(e){const t=$({},this._moddleExtensions,e.moddleExtensions);return new v$(t)};nt.prototype._modules=[];function $l(e,t){return e.warnings=t,e}function O$(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const D$={width:"100%",height:"100%",position:"relative"};function Ky(e){return e+(pe(e)?"px":"")}function M$(e,t){return t&&Me(e.diagrams,function(n){return n.id===t})||null}function I$(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+Ux+"</a>",i=qe(n);$t(Fe("svg",i),Vx),$t(i,Wx,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),ye.bind(i,"click",function(r){k$(),r.preventDefault()})}function Rc(e){nt.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}re(Rc,nt);Rc.prototype._createModdle=function(e){var t=nt.prototype._createModdle.call(this,e);return t.ids=new mi([32,36,1]),t};Rc.prototype._collectIds=function(e,t){var n=e.$model,i=n.ids,r;i.clear();for(r in t)i.claim(r,t[r])};function Te(e,t){return w(e,"bpmn:CallActivity")?!1:w(e,"bpmn:SubProcess")?(t=t||ke(e),t&&w(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):w(e,"bpmn:Participant")?!!J(e).processRef:!0}function wt(e){if(!(!w(e,"bpmn:Participant")&&!w(e,"bpmn:Lane"))){var t=ke(e).isHorizontal;return t===void 0?!0:t}}function N$(e){return e&&J(e).isInterrupting!==!1}function Ft(e){return e&&!!J(e).triggeredByEvent}function Us(e,t){var n=J(e).eventDefinitions;return Dr(n,function(i){return w(i,t)})}function $$(e){return Us(e,"bpmn:ErrorEventDefinition")}function L$(e){return Us(e,"bpmn:EscalationEventDefinition")}function B$(e){return Us(e,"bpmn:CompensateEventDefinition")}var nc={width:90,height:20},qy=15;function So(e){return w(e,"bpmn:Event")||w(e,"bpmn:Gateway")||w(e,"bpmn:DataStoreReference")||w(e,"bpmn:DataObjectReference")||w(e,"bpmn:DataInput")||w(e,"bpmn:DataOutput")||w(e,"bpmn:SequenceFlow")||w(e,"bpmn:MessageFlow")||w(e,"bpmn:Group")}function ef(e){return Oe(e.label)}function j$(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=F$(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),s=r.x,a=r.y;return Math.abs(o)<Math.PI/2?a-=qy:s+=qy,{x:s,y:a}}function F$(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function Zd(e){return e.waypoints?j$(e.waypoints):w(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+nc.height/2}:{x:e.x+e.width/2,y:e.y+e.height+nc.height/2}}function H$(e,t){var n,i,r,o=e.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(nc.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=Zd(t),i=nc),$({x:n.x-i.width/2,y:n.y-i.height/2},i)}function Gx(e){if(w(e,"bpmn:FlowElement")||w(e,"bpmn:Participant")||w(e,"bpmn:Lane")||w(e,"bpmn:SequenceFlow")||w(e,"bpmn:MessageFlow")||w(e,"bpmn:DataInput")||w(e,"bpmn:DataOutput"))return"name";if(w(e,"bpmn:TextAnnotation"))return"text";if(w(e,"bpmn:Group"))return"categoryValueRef"}function z$(e){var t=e.categoryValueRef;return t&&t.value||""}function ti(e){var t=e.businessObject,n=Gx(t);if(n)return n==="categoryValueRef"?z$(t):t[n]||""}function U$(e,t){var n=e.businessObject,i=Gx(n);if(i)if(i==="categoryValueRef"){if(!n[i])return e;n[i].value=t}else n[i]=t;return e}var Rh="hsl(225, 10%, 15%)",V$="white";function ci(e,t){return Dr(e.eventDefinitions,function(n){return n.$type===t})}function W$(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function G$(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function xe(e,t,n){var i=ke(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||V$}function ne(e,t,n){var i=ke(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||Rh}function ua(e,t,n,i){var r=ke(e),o=r.get("label");return i||o&&o.get("color:color")||t||ne(e,n)}function K$(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return ko(r)}function q$(e,t){var n=e.x,i=e.y,r=e.width,o=e.height,s=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-10,t],["l",t*2-r,0],["a",t,t,0,0,1,-10,-10],["l",0,t*2-o],["a",t,t,0,0,1,t,-10],["z"]];return ko(s)}function Y$(e){var t=e.width,n=e.height,i=e.x,r=e.y,o=t/2,s=n/2,a=[["M",i+o,r],["l",o,s],["l",-o,s],["l",-o,-s],["z"]];return ko(a)}function J$(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return ko(o)}function fa(e,t={}){return{width:Cn(e,t),height:un(e,t)}}function Cn(e,t={}){return rn(t,"width")?t.width:e.width}function un(e,t={}){return rn(t,"height")?t.height:e.height}var X$=new mi,Z$=10,ul=3,Q$=1.5,Ll=10,Qo=.95,eL=1,tL=.25;function Mo(e,t,n,i,r,o,s){Wi.call(this,t,s);var a=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,l=e&&e.defaultLabelColor;function u(S){return n.computeStyle(S,{strokeLinecap:"round",strokeLinejoin:"round",stroke:Rh,strokeWidth:2,fill:"white"})}function f(S){return n.computeStyle(S,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:Rh,strokeWidth:2})}function p(S,_){var{ref:v={x:0,y:0},scale:A=1,element:I,parentGfx:C=r._svg}=_,T=ae("marker",{id:S,viewBox:"0 0 20 20",refX:v.x,refY:v.y,markerWidth:20*A,markerHeight:20*A,orient:"auto"});me(T,I);var D=Fe(":scope > defs",C);D||(D=ae("defs"),me(C,D)),me(D,T)}function h(S,_,v,A){var I=X$.nextPrefixed("marker-");return d(S,I,_,v,A),"url(#"+I+")"}function d(S,_,v,A,I){if(v==="sequenceflow-end"){var C=ae("path",{d:"M 1 5 L 11 10 L 1 15 Z",...u({fill:I,stroke:I,strokeWidth:1})});p(_,{element:C,ref:{x:11,y:10},scale:.5,parentGfx:S})}if(v==="messageflow-start"){var T=ae("circle",{cx:6,cy:6,r:3.5,...u({fill:A,stroke:I,strokeWidth:1,strokeDasharray:[1e4,1]})});p(_,{element:T,ref:{x:6,y:6},parentGfx:S})}if(v==="messageflow-end"){var D=ae("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...u({fill:A,stroke:I,strokeWidth:1,strokeDasharray:[1e4,1]})});p(_,{element:D,ref:{x:8.5,y:5},parentGfx:S})}if(v==="association-start"){var j=ae("path",{d:"M 11 5 L 1 10 L 11 15",...f({fill:"none",stroke:I,strokeWidth:1.5,strokeDasharray:[1e4,1]})});p(_,{element:j,ref:{x:1,y:10},scale:.5,parentGfx:S})}if(v==="association-end"){var z=ae("path",{d:"M 1 5 L 11 10 L 1 15",...f({fill:"none",stroke:I,strokeWidth:1.5,strokeDasharray:[1e4,1]})});p(_,{element:z,ref:{x:11,y:10},scale:.5,parentGfx:S})}if(v==="conditional-flow-marker"){var H=ae("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...u({fill:A,stroke:I})});p(_,{element:H,ref:{x:-1,y:10},scale:.5,parentGfx:S})}if(v==="conditional-default-flow-marker"){var X=ae("path",{d:"M 6 4 L 10 16",...u({stroke:I,fill:"none"})});p(_,{element:X,ref:{x:0,y:10},scale:.5,parentGfx:S})}}function g(S,_,v,A,I={}){Ct(A)&&(I=A,A=0),A=A||0,I=u(I);var C=_/2,T=v/2,D=ae("circle",{cx:C,cy:T,r:Math.round((_+v)/4-A),...I});return me(S,D),D}function m(S,_,v,A,I,C){Ct(I)&&(C=I,I=0),I=I||0,C=u(C);var T=ae("rect",{x:I,y:I,width:_-I*2,height:v-I*2,rx:A,ry:A,...C});return me(S,T),T}function E(S,_,v,A){var I=_/2,C=v/2,T=[{x:I,y:0},{x:_,y:C},{x:I,y:v},{x:0,y:C}],D=T.map(function(z){return z.x+","+z.y}).join(" ");A=u(A);var j=ae("polygon",{...A,points:D});return me(S,j),j}function x(S,_,v,A){v=f(v);var I=qu(_,v,A);return me(S,I),I}function b(S,_,v){return x(S,_,v,5)}function y(S,_,v){v=f(v);var A=ae("path",{...v,d:_});return me(S,A),A}function R(S,_,v,A){return y(_,v,$({"data-marker":S},A))}function P(S){return Ke[S]}function N(S){return function(_,v,A){return P(S)(_,v,A)}}var k={"bpmn:MessageEventDefinition":function(S,_,v={},A){var I=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:v.width||_.width,containerHeight:v.height||_.height,position:{mx:.235,my:.315}}),C=A?ne(_,c,v.stroke):xe(_,a,v.fill),T=A?xe(_,a,v.fill):ne(_,c,v.stroke),D=y(S,I,{fill:C,stroke:T,strokeWidth:1});return D},"bpmn:TimerEventDefinition":function(S,_,v={}){var A=v.width||_.width,I=v.height||_.height,C=v.width?1:2,T=g(S,A,I,.2*I,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:C}),D=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:A,containerHeight:I,position:{mx:.5,my:.5}});y(S,D,{stroke:ne(_,c,v.stroke),strokeWidth:C});for(var j=0;j<12;j++){var z=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:A,containerHeight:I,position:{mx:.5,my:.5}}),H=A/2,X=I/2;y(S,z,{strokeWidth:1,stroke:ne(_,c,v.stroke),transform:"rotate("+j*30+","+X+","+H+")"})}return T},"bpmn:EscalationEventDefinition":function(S,_,v={},A){var I=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:v.width||_.width,containerHeight:v.height||_.height,position:{mx:.5,my:.2}}),C=A?ne(_,c,v.stroke):xe(_,a,v.fill);return y(S,I,{fill:C,stroke:ne(_,c,v.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(S,_,v={}){var A=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:v.width||_.width,containerHeight:v.height||_.height,position:{mx:.5,my:.222}});return y(S,A,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(S,_,v={},A){var I=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:.57,my:.263}}),C=A?ne(_,c,v.stroke):xe(_,a,v.fill);return y(S,I,{fill:C,stroke:ne(_,c,v.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(S,_,v={},A){var I=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:v.width||_.width,containerHeight:v.height||_.height,position:{mx:.2,my:.722}}),C=A?ne(_,c,v.stroke):xe(_,a,v.fill);return y(S,I,{fill:C,stroke:ne(_,c,v.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(S,_,v={},A){var I=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:.638,my:-.055}}),C=A?ne(_,c,v.stroke):"none",T=y(S,I,{fill:C,stroke:ne(_,c,v.stroke),strokeWidth:1});return Rx(T,45),T},"bpmn:CompensateEventDefinition":function(S,_,v={},A){var I=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:v.width||_.width,containerHeight:v.height||_.height,position:{mx:.22,my:.5}}),C=A?ne(_,c,v.stroke):xe(_,a,v.fill);return y(S,I,{fill:C,stroke:ne(_,c,v.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(S,_,v={},A){var I=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:v.width||_.width,containerHeight:v.height||_.height,position:{mx:.5,my:.2}}),C=A?ne(_,c,v.stroke):xe(_,a,v.fill);return y(S,I,{strokeWidth:1,fill:C,stroke:ne(_,c,v.stroke)})},"bpmn:MultipleEventDefinition":function(S,_,v={},A){var I=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:v.width||_.width,containerHeight:v.height||_.height,position:{mx:.211,my:.36}}),C=A?ne(_,c,v.stroke):xe(_,a,v.fill);return y(S,I,{fill:C,stroke:ne(_,c,v.stroke),strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(S,_,v={}){var A=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:v.width||_.width,containerHeight:v.height||_.height,position:{mx:.458,my:.194}});return y(S,A,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(S,_,v={}){var A=g(S,_.width,_.height,8,{fill:ne(_,c,v.stroke),stroke:ne(_,c,v.stroke),strokeWidth:4});return A}};function O(S,_,v={},A){var I=J(S),C=W$(I),T=A||S;return I.get("eventDefinitions")&&I.get("eventDefinitions").length>1?I.get("parallelMultiple")?k["bpmn:ParallelMultipleEventDefinition"](_,T,v,C):k["bpmn:MultipleEventDefinition"](_,T,v,C):ci(I,"bpmn:MessageEventDefinition")?k["bpmn:MessageEventDefinition"](_,T,v,C):ci(I,"bpmn:TimerEventDefinition")?k["bpmn:TimerEventDefinition"](_,T,v,C):ci(I,"bpmn:ConditionalEventDefinition")?k["bpmn:ConditionalEventDefinition"](_,T,v,C):ci(I,"bpmn:SignalEventDefinition")?k["bpmn:SignalEventDefinition"](_,T,v,C):ci(I,"bpmn:EscalationEventDefinition")?k["bpmn:EscalationEventDefinition"](_,T,v,C):ci(I,"bpmn:LinkEventDefinition")?k["bpmn:LinkEventDefinition"](_,T,v,C):ci(I,"bpmn:ErrorEventDefinition")?k["bpmn:ErrorEventDefinition"](_,T,v,C):ci(I,"bpmn:CancelEventDefinition")?k["bpmn:CancelEventDefinition"](_,T,v,C):ci(I,"bpmn:CompensateEventDefinition")?k["bpmn:CompensateEventDefinition"](_,T,v,C):ci(I,"bpmn:TerminateEventDefinition")?k["bpmn:TerminateEventDefinition"](_,T,v,C):null}var L={ParticipantMultiplicityMarker:function(S,_,v={}){var A=Cn(_,v),I=un(_,v),C=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:A,containerHeight:I,position:{mx:(A/2-6)/A,my:(I-15)/I}});R("participant-multiplicity",S,C,{strokeWidth:2,fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke)})},SubProcessMarker:function(S,_,v={}){var A=m(S,14,14,0,{strokeWidth:1,fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke)});kt(A,_.width/2-7.5,_.height-20);var I=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:_.width,containerHeight:_.height,position:{mx:(_.width/2-7.5)/_.width,my:(_.height-20)/_.height}});R("sub-process",S,I,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke)})},ParallelMarker:function(S,_,v){var A=Cn(_,v),I=un(_,v),C=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:A,containerHeight:I,position:{mx:(A/2+v.parallel)/A,my:(I-20)/I}});R("parallel",S,C,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke)})},SequentialMarker:function(S,_,v){var A=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:(_.width/2+v.seq)/_.width,my:(_.height-19)/_.height}});R("sequential",S,A,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke)})},CompensationMarker:function(S,_,v){var A=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:(_.width/2+v.compensation)/_.width,my:(_.height-13)/_.height}});R("compensation",S,A,{strokeWidth:1,fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke)})},LoopMarker:function(S,_,v){var A=Cn(_,v),I=un(_,v),C=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:A,containerHeight:I,position:{mx:(A/2+v.loop)/A,my:(I-7)/I}});R("loop",S,C,{strokeWidth:1.5,fill:"none",stroke:ne(_,c,v.stroke),strokeMiterlimit:.5})},AdhocMarker:function(S,_,v){var A=Cn(_,v),I=un(_,v),C=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:A,containerHeight:I,position:{mx:(A/2+v.adhoc)/A,my:(I-15)/I}});R("adhoc",S,C,{strokeWidth:1,fill:ne(_,c,v.stroke),stroke:ne(_,c,v.stroke)})}};function F(S,_,v,A){L[S](_,v,A)}function B(S,_,v=[],A={}){A={fill:A.fill,stroke:A.stroke,width:Cn(_,A),height:un(_,A)};var I=J(_),C=v.includes("SubProcessMarker");C?A={...A,seq:-21,parallel:-22,compensation:-25,loop:-18,adhoc:10}:A={...A,seq:-5,parallel:-6,compensation:-7,loop:0,adhoc:-8},I.get("isForCompensation")&&v.push("CompensationMarker"),w(I,"bpmn:AdHocSubProcess")&&(v.push("AdhocMarker"),C||$(A,{compensation:A.compensation-18}));var T=I.get("loopCharacteristics"),D=T&&T.get("isSequential");T&&($(A,{compensation:A.compensation-18}),v.includes("AdhocMarker")&&$(A,{seq:-23,loop:-18,parallel:-24}),D===void 0&&v.push("LoopMarker"),D===!1&&v.push("ParallelMarker"),D===!0&&v.push("SequentialMarker")),v.includes("CompensationMarker")&&v.length===1&&$(A,{compensation:-8}),M(v,function(j){F(j,S,_,A)})}function V(S,_,v={}){v=$({size:{width:100}},v);var A=o.createText(_||"",v);return Ae(A).add("djs-label"),me(S,A),A}function oe(S,_,v,A={}){var I=J(_),C=fa({x:_.x,y:_.y,width:_.width,height:_.height},A);return V(S,I.name,{align:v,box:C,padding:7,style:{fill:ua(_,l,c,A.stroke)}})}function Ne(S,_,v={}){var A={width:90,height:30,x:_.width/2+_.x,y:_.height/2+_.y};return V(S,ti(_),{box:A,fitBox:!0,style:$({},o.getExternalStyle(),{fill:ua(_,l,c,v.stroke)})})}function le(S,_,v,A={}){var I=wt(v),C=V(S,_,{box:{height:30,width:I?un(v,A):Cn(v,A)},align:"center-middle",style:{fill:ua(v,l,c,A.stroke)}});if(I){var T=-1*un(v,A);Nl(C,0,-T,270)}}function Q(S,_,v={}){var{width:A,height:I}=fa(_,v);return m(S,A,I,Ll,{...v,fill:xe(_,a,v.fill),fillOpacity:Qo,stroke:ne(_,c,v.stroke)})}function we(S,_,v={}){var A=J(_),I=xe(_,a,v.fill),C=ne(_,c,v.stroke);return(A.get("associationDirection")==="One"||A.get("associationDirection")==="Both")&&(v.markerEnd=h(S,"association-end",I,C)),A.get("associationDirection")==="Both"&&(v.markerStart=h(S,"association-start",I,C)),v=Pe(v,["markerStart","markerEnd"]),b(S,_.waypoints,{...v,stroke:C,strokeDasharray:"0, 5"})}function ot(S,_,v={}){var A=xe(_,a,v.fill),I=ne(_,c,v.stroke),C=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:.474,my:.296}}),T=y(S,C,{fill:A,fillOpacity:Qo,stroke:I}),D=J(_);if(G$(D)){var j=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:.33,my:(_.height-18)/_.height}});y(S,j,{strokeWidth:2,fill:A,stroke:I})}return T}function $e(S,_,v={}){return g(S,_.width,_.height,{fillOpacity:Qo,...v,fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke)})}function Ue(S,_,v={}){return E(S,_.width,_.height,{fill:xe(_,a,v.fill),fillOpacity:Qo,stroke:ne(_,c,v.stroke)})}function U(S,_,v={}){var A=m(S,Cn(_,v),un(_,v),0,{fill:xe(_,a,v.fill),fillOpacity:v.fillOpacity||Qo,stroke:ne(_,c,v.stroke),strokeWidth:1.5}),I=J(_);if(w(I,"bpmn:Lane")){var C=I.get("name");le(S,C,_,v)}return A}function G(S,_,v={}){var A=Q(S,_,v),I=Te(_);if(Ft(_)&&(ie(A,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),!I)){var C=J(_).flowElements||[],T=C.filter(D=>w(D,"bpmn:StartEvent"));T.length===1&&se(T[0],S,v,_)}return oe(S,_,I?"center-top":"center-middle",v),I?B(S,_,void 0,v):B(S,_,["SubProcessMarker"],v),A}function se(S,_,v,A){var I=22,C={fill:xe(A,a,v.fill),stroke:ne(A,c,v.stroke),width:I,height:I},T=J(S).isInterrupting,D=T?0:3,j=T?1:1.2,z=20,H=(I-z)/2,X="translate("+H+","+H+")";g(_,z,z,{fill:C.fill,stroke:C.stroke,strokeWidth:j,strokeDasharray:D,transform:X}),O(S,_,C,A)}function Ee(S,_,v={}){var A=Q(S,_,v);return oe(S,_,"center-middle",v),B(S,_,void 0,v),A}var Ke=this.handlers={"bpmn:AdHocSubProcess":function(S,_,v={}){return Te(_)?v=Pe(v,["fill","stroke","width","height"]):v=Pe(v,["fill","stroke"]),G(S,_,v)},"bpmn:Association":function(S,_,v={}){return v=Pe(v,["fill","stroke"]),we(S,_,v)},"bpmn:BoundaryEvent":function(S,_,v={}){var{renderIcon:A=!0}=v;v=Pe(v,["fill","stroke"]);var I=J(_),C=I.get("cancelActivity");v={strokeWidth:1.5,fill:xe(_,a,v.fill),fillOpacity:eL,stroke:ne(_,c,v.stroke)},C||(v.strokeDasharray="6");var T=$e(S,_,v);return g(S,_.width,_.height,ul,{...v,fill:"none"}),A&&O(_,S,v),T},"bpmn:BusinessRuleTask":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=Ee(S,_,v),I=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),C=y(S,I);ie(C,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:1});var T=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),D=y(S,T);return ie(D,{fill:ne(_,c,v.stroke),stroke:ne(_,c,v.stroke),strokeWidth:1}),A},"bpmn:CallActivity":function(S,_,v={}){return v=Pe(v,["fill","stroke"]),G(S,_,{strokeWidth:5,...v})},"bpmn:ComplexGateway":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=Ue(S,_,v),I=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:_.width,containerHeight:_.height,position:{mx:.46,my:.26}});return y(S,I,{fill:ne(_,c,v.stroke),stroke:ne(_,c,v.stroke),strokeWidth:1}),A},"bpmn:DataInput":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=i.getRawPath("DATA_ARROW"),I=ot(S,_,v);return y(S,A,{fill:"none",stroke:ne(_,c,v.stroke),strokeWidth:1}),I},"bpmn:DataInputAssociation":function(S,_,v={}){return v=Pe(v,["fill","stroke"]),we(S,_,{...v,markerEnd:h(S,"association-end",xe(_,a,v.fill),ne(_,c,v.stroke))})},"bpmn:DataObject":function(S,_,v={}){return v=Pe(v,["fill","stroke"]),ot(S,_,v)},"bpmn:DataObjectReference":N("bpmn:DataObject"),"bpmn:DataOutput":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=i.getRawPath("DATA_ARROW"),I=ot(S,_,v);return y(S,A,{strokeWidth:1,fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke)}),I},"bpmn:DataOutputAssociation":function(S,_,v={}){return v=Pe(v,["fill","stroke"]),we(S,_,{...v,markerEnd:h(S,"association-end",xe(_,a,v.fill),ne(_,c,v.stroke))})},"bpmn:DataStoreReference":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:_.width,containerHeight:_.height,position:{mx:0,my:.133}});return y(S,A,{fill:xe(_,a,v.fill),fillOpacity:Qo,stroke:ne(_,c,v.stroke),strokeWidth:2})},"bpmn:EndEvent":function(S,_,v={}){var{renderIcon:A=!0}=v;v=Pe(v,["fill","stroke"]);var I=$e(S,_,{...v,strokeWidth:4});return A&&O(_,S,v),I},"bpmn:EventBasedGateway":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=J(_),I=Ue(S,_,v);g(S,_.width,_.height,_.height*.2,{fill:xe(_,"none",v.fill),stroke:ne(_,c,v.stroke),strokeWidth:1});var C=A.get("eventGatewayType"),T=!!A.get("instantiate");function D(){var z=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:_.width,containerHeight:_.height,position:{mx:.36,my:.44}});y(S,z,{fill:"none",stroke:ne(_,c,v.stroke),strokeWidth:2})}if(C==="Parallel"){var j=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:_.width,containerHeight:_.height,position:{mx:.474,my:.296}});y(S,j,{fill:"none",stroke:ne(_,c,v.stroke),strokeWidth:1})}else C==="Exclusive"&&(T||g(S,_.width,_.height,_.height*.26,{fill:"none",stroke:ne(_,c,v.stroke),strokeWidth:1}),D());return I},"bpmn:ExclusiveGateway":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=Ue(S,_,v),I=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:_.width,containerHeight:_.height,position:{mx:.32,my:.3}}),C=ke(_);return C.get("isMarkerVisible")&&y(S,I,{fill:ne(_,c,v.stroke),stroke:ne(_,c,v.stroke),strokeWidth:1}),A},"bpmn:Gateway":function(S,_,v={}){return v=Pe(v,["fill","stroke"]),Ue(S,_,v)},"bpmn:Group":function(S,_,v={}){return v=Pe(v,["fill","stroke","width","height"]),m(S,_.width,_.height,Ll,{stroke:ne(_,c,v.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:Cn(_,v),height:un(_,v)})},"bpmn:InclusiveGateway":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=Ue(S,_,v);return g(S,_.width,_.height,_.height*.24,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:2.5}),A},"bpmn:IntermediateEvent":function(S,_,v={}){var{renderIcon:A=!0}=v;v=Pe(v,["fill","stroke"]);var I=$e(S,_,{...v,strokeWidth:1.5});return g(S,_.width,_.height,ul,{fill:"none",stroke:ne(_,c,v.stroke),strokeWidth:1.5}),A&&O(_,S,v),I},"bpmn:IntermediateCatchEvent":N("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":N("bpmn:IntermediateEvent"),"bpmn:Lane":function(S,_,v={}){return v=Pe(v,["fill","stroke","width","height"]),U(S,_,{...v,fillOpacity:tL})},"bpmn:ManualTask":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=Ee(S,_,v),I=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return y(S,I,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:.5}),A},"bpmn:MessageFlow":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=J(_),I=ke(_),C=xe(_,a,v.fill),T=ne(_,c,v.stroke),D=b(S,_.waypoints,{markerEnd:h(S,"messageflow-end",C,T),markerStart:h(S,"messageflow-start",C,T),stroke:T,strokeDasharray:"10, 11",strokeWidth:1.5});if(A.get("messageRef")){var j=D.getPointAtLength(D.getTotalLength()/2),z=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:j.x,y:j.y}}),H={strokeWidth:1};I.get("messageVisibleKind")==="initiating"?(H.fill=C,H.stroke=T):(H.fill=T,H.stroke=C);var X=y(S,z,H),Z=A.get("messageRef"),W=Z.get("name"),q=V(S,W,{align:"center-top",fitBox:!0,style:{fill:T}}),fe=X.getBBox(),ee=q.getBBox(),Y=j.x-ee.width/2,te=j.y+fe.height/2+Z$;Nl(q,Y,te,0)}return D},"bpmn:ParallelGateway":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=Ue(S,_,v),I=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:_.width,containerHeight:_.height,position:{mx:.46,my:.2}});return y(S,I,{fill:ne(_,c,v.stroke),stroke:ne(_,c,v.stroke),strokeWidth:1}),A},"bpmn:Participant":function(S,_,v={}){v=Pe(v,["fill","stroke","width","height"]);var A=U(S,_,v),I=Te(_),C=wt(_),T=J(_),D=T.get("name");if(I){var j=C?[{x:30,y:0},{x:30,y:un(_,v)}]:[{x:0,y:30},{x:Cn(_,v),y:30}];x(S,j,{stroke:ne(_,c,v.stroke),strokeWidth:Q$}),le(S,D,_,v)}else{var z=fa(_,v);C||(z.height=Cn(_,v),z.width=un(_,v));var H=V(S,D,{box:z,align:"center-middle",style:{fill:ua(_,l,c,v.stroke)}});if(!C){var X=-1*un(_,v);Nl(H,0,-X,270)}}return T.get("participantMultiplicity")&&F("ParticipantMultiplicityMarker",S,_,v),A},"bpmn:ReceiveTask":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=J(_),I=Ee(S,_,v),C;return A.get("instantiate")?(g(S,28,28,20*.22,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:1}),C=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):C=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),y(S,C,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:1}),I},"bpmn:ScriptTask":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=Ee(S,_,v),I=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return y(S,I,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:1}),A},"bpmn:SendTask":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=Ee(S,_,v),I=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return y(S,I,{fill:ne(_,c,v.stroke),stroke:xe(_,a,v.fill),strokeWidth:1}),A},"bpmn:SequenceFlow":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=xe(_,a,v.fill),I=ne(_,c,v.stroke),C=b(S,_.waypoints,{markerEnd:h(S,"sequenceflow-end",A,I),stroke:I}),T=J(_),{source:D}=_;if(D){var j=J(D);T.get("conditionExpression")&&w(j,"bpmn:Activity")&&ie(C,{markerStart:h(S,"conditional-flow-marker",A,I)}),j.get("default")&&(w(j,"bpmn:Gateway")||w(j,"bpmn:Activity"))&&j.get("default")===T&&ie(C,{markerStart:h(S,"conditional-default-flow-marker",A,I)})}return C},"bpmn:ServiceTask":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=Ee(S,_,v);g(S,10,10,{fill:xe(_,a,v.fill),stroke:"none",transform:"translate(6, 6)"});var I=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});y(S,I,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:1}),g(S,10,10,{fill:xe(_,a,v.fill),stroke:"none",transform:"translate(11, 10)"});var C=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return y(S,C,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:1}),A},"bpmn:StartEvent":function(S,_,v={}){var{renderIcon:A=!0}=v;v=Pe(v,["fill","stroke"]);var I=J(_);I.get("isInterrupting")||(v={...v,strokeDasharray:"6"});var C=$e(S,_,v);return A&&O(_,S,v),C},"bpmn:SubProcess":function(S,_,v={}){return Te(_)?v=Pe(v,["fill","stroke","width","height"]):v=Pe(v,["fill","stroke"]),G(S,_,v)},"bpmn:Task":function(S,_,v={}){return v=Pe(v,["fill","stroke"]),Ee(S,_,v)},"bpmn:TextAnnotation":function(S,_,v={}){v=Pe(v,["fill","stroke","width","height"]);var{width:A,height:I}=fa(_,v),C=m(S,A,I,0,0,{fill:"none",stroke:"none"}),T=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:A,containerHeight:I,position:{mx:0,my:0}});y(S,T,{stroke:ne(_,c,v.stroke)});var D=J(_),j=D.get("text")||"";return V(S,j,{align:"left-top",box:fa(_,v),padding:7,style:{fill:ua(_,l,c,v.stroke)}}),C},"bpmn:Transaction":function(S,_,v={}){Te(_)?v=Pe(v,["fill","stroke","width","height"]):v=Pe(v,["fill","stroke"]);var A=G(S,_,{strokeWidth:1.5,...v}),I=n.style(["no-fill","no-events"],{stroke:ne(_,c,v.stroke),strokeWidth:1.5}),C=Te(_);return C||(v={}),m(S,Cn(_,v),un(_,v),Ll-ul,ul,I),A},"bpmn:UserTask":function(S,_,v={}){v=Pe(v,["fill","stroke"]);var A=Ee(S,_,v),I=15,C=12,T=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:I,y:C}});y(S,T,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:.5});var D=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:I,y:C}});y(S,D,{fill:xe(_,a,v.fill),stroke:ne(_,c,v.stroke),strokeWidth:.5});var j=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:I,y:C}});return y(S,j,{fill:ne(_,c,v.stroke),stroke:ne(_,c,v.stroke),strokeWidth:.5}),A},label:function(S,_,v={}){return Ne(S,_,v)}};this._drawPath=y,this._renderer=P}re(Mo,Wi);Mo.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Mo.prototype.canRender=function(e){return w(e,"bpmn:BaseElement")};Mo.prototype.drawShape=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Mo.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Mo.prototype.getShapePath=function(e){return w(e,"bpmn:Event")?K$(e):w(e,"bpmn:Activity")?q$(e,Ll):w(e,"bpmn:Gateway")?Y$(e):J$(e)};function Pe(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var nL=0,iL={width:150,height:50};function rL(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function oL(e){return Ct(e)?$({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function sL(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch(o){return console.log(o),{width:0,height:0}}}function aL(e,t,n){for(var i=e.shift(),r=i,o;;){if(o=sL(r,n),o.width=r?o.width:0,r===" "||r===""||o.width<Math.round(t)||r.length<2)return cL(e,r,i,o);r=uL(r,o.width,t)}}function cL(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var Yy="­";function lL(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],o=0;if(n.length>1)for(;i=n.shift();)if(i.length+o<t)r.push(i),o+=i.length;else{(i==="-"||i===Yy)&&r.pop();break}var s=r[r.length-1];return s&&s===Yy&&(r[r.length-1]="-"),r.join("")}function uL(e,t,n){var i=Math.max(e.length*(n/t),1),r=lL(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function fL(){var e=document.getElementById("helper-svg");return e||(e=ae("svg"),ie(e,{id:"helper-svg"}),$t(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function tf(e){this._config=$({},{size:iL,padding:nL,style:{},align:"center-top"},e||{})}tf.prototype.createText=function(e,t){return this.layoutText(e,t).element};tf.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};tf.prototype.layoutText=function(e,t){var n=$({},this._config.size,t.box),i=$({},this._config.style,t.style),r=rL(t.align||this._config.align),o=oL(t.padding!==void 0?t.padding:this._config.padding),s=t.fitBox||!1,a=pL(i),c=e.split(/\u00AD?\r?\n/),l=[],u=n.width-o.left-o.right,f=ae("text");ie(f,{x:0,y:0}),ie(f,i);var p=fL();for(me(p,f);c.length;)l.push(aL(c,u,f));r.vertical==="middle"&&(o.top=o.bottom=0);var h=dn(l,function(x,b,y){return x+(a||b.height)},0)+o.top+o.bottom,d=dn(l,function(x,b,y){return b.width>x?b.width:x},0),g=o.top;r.vertical==="middle"&&(g+=(n.height-h)/2),g-=(a||l[0].height)/4;var m=ae("text");ie(m,i),M(l,function(x){var b;switch(g+=a||x.height,r.horizontal){case"left":b=o.left;break;case"right":b=(s?d:u)-o.right-x.width;break;default:b=Math.max(((s?d:u)-x.width)/2+o.left,0)}var y=ae("tspan");ie(y,{x:b,y:g}),y.textContent=x.text,me(m,y)}),vt(f);var E={width:d,height:h};return{dimensions:E,element:m}};function pL(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var hL=12,dL=1.2,gL=30;function Kx(e){var t=$({fontFamily:"Arial, sans-serif",fontSize:hL,fontWeight:"normal",lineHeight:dL},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=$({},t,{fontSize:n},e&&e.externalStyle||{}),r=new tf({style:t});this.getExternalLabelBounds=function(o,s){var a=r.getDimensions(s,{box:{width:90,height:30},style:i});return{x:Math.round(o.x+o.width/2-a.width/2),y:Math.round(o.y),width:Math.ceil(a.width),height:Math.ceil(a.height)}},this.getTextAnnotationBounds=function(o,s){var a=r.getDimensions(s,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(gL,Math.round(a.height))}},this.createText=function(o,s){return r.createText(o,s||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Kx.$inject=["config.textRenderer"];function mL(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,o;n.abspos?(r=n.abspos.x,o=n.abspos.y):(r=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var s={};if(n.position){for(var a=n.containerHeight/i.height*n.yScaleFactor,c=n.containerWidth/i.width*n.xScaleFactor,l=0;l<i.heightElements.length;l++)s["y"+l]=i.heightElements[l]*a;for(var u=0;u<i.widthElements.length;u++)s["x"+u]=i.widthElements[u]*c}var f=bL(i.d,{mx:r,my:o,e:s});return f}}var vL=/\{([^{}]+)\}/g,yL=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function _L(e,t,n){var i=n;return t.replace(yL,function(r,o,s,a,c){o=o||a,i&&(o in i&&(i=i[o]),typeof i=="function"&&c&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function bL(e,t){return String(e).replace(vL,function(n,i){return _L(n,i,t)})}const wL={__init__:["bpmnRenderer"],bpmnRenderer:["type",Mo],textRenderer:["type",Kx],pathMap:["type",mL]};function EL(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const nf={translate:["value",EL]};function Bl(e,t,n){return $({id:e.id,type:e.$type,businessObject:e,di:t},n)}function xL(e,t,n){var i=e.waypoint;return!i||i.length<2?[he(t),he(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function qx(e,t,n){return new Error(`element ${It(t)} referenced by ${It(e)}#${n} not yet drawn`)}function Ki(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=r}Ki.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];Ki.prototype.add=function(e,t,n){var i,r,o;if(w(t,"bpmndi:BPMNPlane")){var s=w(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(Bl(e,t,s)),this._canvas.addRootElement(i)}else if(w(t,"bpmndi:BPMNShape")){var a=!Te(e,t),c=CL(e);r=n&&(n.hidden||n.collapsed);var l=t.bounds;i=this._elementFactory.createShape(Bl(e,t,{collapsed:a,hidden:r,x:Math.round(l.x),y:Math.round(l.y),width:Math.round(l.width),height:Math.round(l.height),isFrame:c})),w(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),w(e,"bpmn:Lane")&&(o=0),w(e,"bpmn:DataStoreReference")&&(SL(n,he(l))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,o)}else if(w(t,"bpmndi:BPMNEdge")){var u=this._getSource(e),f=this._getTarget(e);r=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(Bl(e,t,{hidden:r,source:u,target:f,waypoints:xL(t,u,f)})),w(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,o)}else throw new Error(`unknown di ${It(t)} for element ${It(e)}`);return So(e)&&ti(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};Ki.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${It(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw qx(e,n,"attachedToRef");t.host=i,r||(i.attachers=r=[]),r.indexOf(t)===-1&&r.push(t)};Ki.prototype.addLabel=function(e,t,n){var i,r,o;return i=H$(t,n),r=ti(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),o=this._elementFactory.createLabel(Bl(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!ti(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(o,n.parent)};Ki.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?qx(e,i,t+"Ref"):new Error(`${It(e)}#${t} Ref not specified`)};Ki.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};Ki.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};Ki.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function SL(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function CL(e){return w(e,"bpmn:Group")}const RL={__depends__:[nf],bpmnImporter:["type",Ki]},TL={__depends__:[wL,RL]};function Tc(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Tc.prototype.next=function(){return this._prefix+ ++this._counter};var PL=new Tc("ov"),AL=500;function Rt(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=PL,this._overlayDefaults=$({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=kL(n.getContainer()),this._init()}Rt.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Rt.prototype.get=function(e){if(hn(e)&&(e={id:e}),hn(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?Se(t.overlays,Yn({type:e.type})):t.overlays.slice():[]}else return e.type?Se(this._overlays,Yn({type:e.type})):e.id?this._overlays[e.id]:null};Rt.prototype.add=function(e,t,n){if(Ct(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=$({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};Rt.prototype.remove=function(e){var t=this.get(e)||[];de(t)||(t=[t]);var n=this;M(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(yi(i.html),yi(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var o=r.overlays.indexOf(i);o!==-1&&r.overlays.splice(o,1)}})};Rt.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Rt.prototype.show=function(){rf(this._overlayRoot)};Rt.prototype.hide=function(){rf(this._overlayRoot,!1)};Rt.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Gu(this._overlayRoot)};Rt.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=yt(t);i=o.x,r=o.y}Yx(n,i,r),Bt(e.html,"data-container-id",t.id)};Rt.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,o=t.top;if(t.right!==void 0){var s;i.waypoints?s=yt(i).width:s=i.width,r=t.right*-1+s}if(t.bottom!==void 0){var a;i.waypoints?a=yt(i).height:a=i.height,o=t.bottom*-1+a}Yx(n,r||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Rt.prototype._createOverlayContainer=function(e){var t=qe('<div class="djs-overlays" />');$t(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};Rt.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";Jx(this._overlayRoot,n)};Rt.prototype._getOverlayContainer=function(e,t){var n=Me(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};Rt.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,o;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),hn(i)&&(i=qe(i)),o=this._getOverlayContainer(n),r=qe('<div class="djs-overlay" data-overlay-id="'+t+'">'),$t(r,{position:"absolute"}),r.appendChild(i),e.type&&st(r).add("djs-overlay-"+e.type);var s=this._canvas.findRoot(n),a=this._canvas.getRootElement();rf(r,s===a),e.htmlContainer=r,o.overlays.push(e),o.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Rt.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,o=n&&n.maxZoom,s=e.htmlContainer,a=this._canvas.getRootElement(),c=!0;(i!==a||n&&(xt(r)&&r>t.scale||xt(o)&&o<t.scale))&&(c=!1),rf(s,c),this._updateOverlayScale(e,t)};Rt.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,o=e.htmlContainer,s,a="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),xt(i)&&t.scale<i&&(s=(1/t.scale||1)*i),xt(r)&&t.scale>r&&(s=(1/t.scale||1)*r)),xt(s)&&(a="scale("+s+","+s+")"),Jx(o,a)};Rt.prototype._updateOverlaysVisibilty=function(e){var t=this;M(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};Rt.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,o=t.get({element:r});M(o,function(c){t.remove(c.id)});var s=t._getOverlayContainer(r);if(s){yi(s.html);var a=t._overlayContainers.indexOf(s);a!==-1&&t._overlayContainers.splice(a,1)}}),e.on("element.changed",AL,function(i){var r=i.element,o=t._getOverlayContainer(r,!0);o&&(M(o.overlays,function(s){t._updateOverlay(s)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&st(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function kL(e){var t=qe('<div class="djs-overlay-container" />');return $t(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function Yx(e,t,n){$t(e,{left:t+"px",top:n+"px"})}function rf(e,t){e.style.display=t===!1?"none":""}function Jx(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const of={__init__:["overlays"],overlays:["type",Rt]};function Xx(e,t,n,i){e.on("element.changed",function(r){var o=r.element;(o.parent||o===t.getRootElement())&&(r.gfx=n.getGraphics(o)),r.gfx&&e.fire(lx(o)+".changed",r)}),e.on("elements.changed",function(r){var o=r.elements;o.forEach(function(s){e.fire("element.changed",{element:s})}),i.updateContainments(o)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}Xx.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Qd={__init__:["changeSupport"],changeSupport:["type",Xx]};var OL=1e3;function K(e){this._eventBus=e}K.$inject=["eventBus"];function DL(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}K.prototype.on=function(e,t,n,i,r,o){if((bt(t)||pe(t))&&(o=r,r=i,i=n,n=t,t=null),bt(n)&&(o=r,r=i,i=n,n=OL),Ct(r)&&(o=r,r=!1),!bt(i))throw new Error("handlerFn must be a function");de(e)||(e=[e]);var s=this._eventBus;M(e,function(a){var c=["commandStack",a,t].filter(function(l){return l}).join(".");s.on(c,n,r?DL(i,o):i,o)})};K.prototype.canExecute=qi("canExecute");K.prototype.preExecute=qi("preExecute");K.prototype.preExecuted=qi("preExecuted");K.prototype.execute=qi("execute");K.prototype.executed=qi("executed");K.prototype.postExecute=qi("postExecute");K.prototype.postExecuted=qi("postExecuted");K.prototype.revert=qi("revert");K.prototype.reverted=qi("reverted");function qi(e){return function(n,i,r,o,s){(bt(n)||pe(n))&&(s=o,o=r,r=i,i=n,n=null),this.on(n,e,i,r,o,s)}}function eg(e,t){t.invoke(K,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}re(eg,K);eg.$inject=["canvas","injector"];const ML={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",eg]};function ic(e){return CSS.escape(e)}var IL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Zx(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return IL[t]})}var Qx="_plane";function Jy(e){var t=e.id;return NL(t)}function Mi(e){var t=e.id;return w(e,"bpmn:SubProcess")?eS(t):t}function ro(e){return eS(e)}function jl(e){var t=ke(e);return w(t,"bpmndi:BPMNPlane")}function eS(e){return e+Qx}function NL(e){return e.replace(new RegExp(Qx+"$"),"")}var $L="bjs-breadcrumbs-shown";function tS(e,t,n){var i=qe('<ul class="bjs-breadcrumbs"></ul>'),r=n.getContainer(),o=st(r);r.appendChild(i);var s=[];e.on("element.changed",function(c){var l=c.element,u=J(l),f=Me(s,function(p){return p===u});f&&a()});function a(c){c&&(s=LL(c));var l=s.flatMap(function(f){var p=n.findRoot(Mi(f))||n.findRoot(f.id);if(!p&&w(f,"bpmn:Process")){var h=t.find(function(m){var E=J(m);return E&&E.get("processRef")===f});p=h&&n.findRoot(h.id)}if(!p)return[];var d=Zx(f.name||f.id),g=qe('<li><span class="bjs-crumb"><a title="'+d+'">'+d+"</a></span></li>");return g.addEventListener("click",function(){n.setRootElement(p)}),g});i.innerHTML="";var u=l.length>1;o.toggle($L,u),l.forEach(function(f){i.appendChild(f)})}e.on("root.set",function(c){a(c.element)})}tS.$inject=["eventBus","elementRegistry","canvas"];function LL(e){for(var t=J(e),n=[],i=t;i;i=i.$parent)(w(i,"bpmn:SubProcess")||w(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function nS(e,t){var n=null,i=new BL;e.on("root.set",function(r){var o=r.element,s=t.viewbox(),a=i.get(o);if(i.set(n,{x:s.x,y:s.y,zoom:s.scale}),n=o,!(!w(o,"bpmn:SubProcess")&&!a)){a=a||{x:0,y:0,zoom:1};var c=(s.x-a.x)*s.scale,l=(s.y-a.y)*s.scale;(c!==0||l!==0)&&t.scroll({dx:c,dy:l}),a.zoom!==s.scale&&t.zoom(a.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}nS.$inject=["eventBus","canvas"];function BL(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var Xy={x:180,y:160};function Io(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n._handleImport(r.definitions)})}Io.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=e.diagrams.filter(i=>i.plane).flatMap(i=>t._createNewDiagrams(i.plane));n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};Io.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(o){var s=o.bpmnElement;if(s){var a=s.$parent;w(s,"bpmn:SubProcess")&&!o.isExpanded&&n.push(s),FL(s,e)&&i.push({diElement:o,parent:a})}});var r=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var s=t._createDiagram(o);t._processToDiagramMap[o.id]=s,r.push(s)}}),i.forEach(function(o){for(var s=o.diElement,a=o.parent;a&&n.indexOf(a)===-1;)a=a.$parent;if(a){var c=t._processToDiagramMap[a.id];t._moveToDiPlane(s,c.plane)}}),r};Io.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=jL(e),i={x:n.x-Xy.x,y:n.y-Xy.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(o){o.x=o.x-i.x,o.y=o.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};Io.prototype._moveToDiPlane=function(e,t){var n=iS(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};Io.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Io.$inject=["eventBus","moddle"];function iS(e){return w(e,"bpmndi:BPMNDiagram")?e:iS(e.$parent)}function jL(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=ce(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),Ju(t)}function FL(e,t){var n=e.$parent;return!(!w(n,"bpmn:SubProcess")||n===t.bpmnElement||Ce(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var fl=250,HL='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',zL="bjs-drilldown-empty";function $r(e,t,n,i,r){K.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=r;var o=this;this.executed("shape.toggleCollapse",fl,function(s){var a=s.shape;o._canDrillDown(a)?o._addOverlay(a):o._removeOverlay(a)},!0),this.reverted("shape.toggleCollapse",fl,function(s){var a=s.shape;o._canDrillDown(a)?o._addOverlay(a):o._removeOverlay(a)},!0),this.executed(["shape.create","shape.move","shape.delete"],fl,function(s){var a=s.oldParent,c=s.newParent||s.parent,l=s.shape;o._canDrillDown(l)&&o._addOverlay(l),o._updateDrilldownOverlay(a),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(l)},!0),this.reverted(["shape.create","shape.move","shape.delete"],fl,function(s){var a=s.oldParent,c=s.newParent||s.parent,l=s.shape;o._canDrillDown(l)&&o._addOverlay(l),o._updateDrilldownOverlay(a),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(l)},!0),t.on("import.render.complete",function(){n.filter(function(s){return o._canDrillDown(s)}).map(function(s){o._addOverlay(s)})})}re($r,K);$r.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};$r.prototype._canDrillDown=function(e){var t=this._canvas;return w(e,"bpmn:SubProcess")&&t.findRoot(Mi(e))};$r.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=J(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.get("flowElements")&&n.get("flowElements").length;st(i.html).toggle(zL,!r)}};$r.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=J(e),r=n.get({element:e,type:"drilldown"});r.length&&this._removeOverlay(e);var o=qe('<button type="button" class="bjs-drilldown">'+HL+"</button>"),s=i.get("name")||i.get("id"),a=this._translate("Open {element}",{element:s});o.setAttribute("title",a),o.addEventListener("click",function(){t.setRootElement(t.findRoot(Mi(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)};$r.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};$r.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const UL={__depends__:[of,Qd,ML],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",tS],drilldownCentering:["type",nS],drilldownOverlayBehavior:["type",$r],subprocessCompatibility:["type",Io]};function Zy(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function Vs(e){return e.originalEvent||e.srcEvent}function xp(e){Zy(e),Zy(Vs(e))}function Co(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function rS(){return/mac/i.test(navigator.platform)}function oS(e,t){return(Vs(e)||e).button===t}function Lr(e){return oS(e,0)}function VL(e){return oS(e,1)}function rc(e){var t=Vs(e)||e;return Lr(e)?rS()?t.metaKey:t.ctrlKey:!1}function mu(e){var t=Vs(e)||e;return Lr(e)&&t.shiftKey}function WL(e){return!0}function pl(e){return Lr(e)||VL(e)}var Qy=500;function sS(e,t,n){var i=this;function r(k,O,L){if(!a(k,O)){var F,B,V;L?B=t.getGraphics(L):(F=O.delegateTarget||O.target,F&&(B=F,L=t.get(B))),!(!B||!L)&&(V=e.fire(k,{element:L,gfx:B,originalEvent:O}),V===!1&&(O.stopPropagation(),O.preventDefault()))}}var o={};function s(k){return o[k]}function a(k,O){var L=l[k]||Lr;return!L(O)}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},l={"element.contextmenu":WL,"element.mousedown":pl,"element.mouseup":pl,"element.click":pl,"element.dblclick":pl};function u(k,O,L){var F=c[k];if(!F)throw new Error("unmapped DOM event name <"+k+">");return r(F,O,L)}var f="svg, .djs-element";function p(k,O,L,F){var B=o[L]=function(V){r(L,V)};F&&(l[L]=F),B.$delegate=pn.bind(k,f,O,B)}function h(k,O,L){var F=s(L);F&&pn.unbind(k,O,F.$delegate)}function d(k){M(c,function(O,L){p(k,L,O)})}function g(k){M(c,function(O,L){h(k,L,O)})}e.on("canvas.destroy",function(k){g(k.svg)}),e.on("canvas.init",function(k){d(k.svg)}),e.on(["shape.added","connection.added"],function(k){var O=k.element,L=k.gfx;e.fire("interactionEvents.createHit",{element:O,gfx:L})}),e.on(["shape.changed","connection.changed"],Qy,function(k){var O=k.element,L=k.gfx;e.fire("interactionEvents.updateHit",{element:O,gfx:L})}),e.on("interactionEvents.createHit",Qy,function(k){var O=k.element,L=k.gfx;i.createDefaultHit(O,L)}),e.on("interactionEvents.updateHit",function(k){var O=k.element,L=k.gfx;i.updateDefaultHit(O,L)});var m=R("djs-hit djs-hit-stroke"),E=R("djs-hit djs-hit-click-stroke"),x=R("djs-hit djs-hit-all"),b=R("djs-hit djs-hit-no-move"),y={all:x,"click-stroke":E,stroke:m,"no-move":b};function R(k,O){return O=$({stroke:"white",strokeWidth:15},O||{}),n.cls(k,["no-fill","no-border"],O)}function P(k,O){var L=y[O];if(!L)throw new Error("invalid hit type <"+O+">");return ie(k,L),k}function N(k,O){me(k,O)}this.removeHits=function(k){var O=mh(".djs-hit",k);M(O,vt)},this.createDefaultHit=function(k,O){var L=k.waypoints,F=k.isFrame,B;return L?this.createWaypointsHit(O,L):(B=F?"stroke":"all",this.createBoxHit(O,B,{width:k.width,height:k.height}))},this.createWaypointsHit=function(k,O){var L=qu(O);return P(L,"stroke"),N(k,L),L},this.createBoxHit=function(k,O,L){L=$({x:0,y:0},L);var F=ae("rect");return P(F,O),ie(F,L),N(k,F),F},this.updateDefaultHit=function(k,O){var L=Fe(".djs-hit",O);if(L)return k.waypoints?sx(L,k.waypoints):ie(L,{width:k.width,height:k.height}),L},this.fire=r,this.triggerMouseEvent=u,this.mouseHandler=s,this.registerEvent=p,this.unregisterEvent=h}sS.$inject=["eventBus","elementRegistry","styles"];const sf={__init__:["interactionEvents"],interactionEvents:["type",sS]};function Ws(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}Ws.$inject=["eventBus","canvas"];Ws.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};Ws.prototype.get=function(){return this._selectedElements};Ws.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Ws.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();de(e)||(e=e?[e]:[]);var r=this._canvas,o=r.getRootElement();e=e.filter(function(s){var a=r.findRoot(s);return o===a}),t?M(e,function(s){n.indexOf(s)===-1&&n.push(s)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var e_="hover",t_="selected";function aS(e,t){this._canvas=e;function n(r,o){e.addMarker(r,o)}function i(r,o){e.removeMarker(r,o)}t.on("element.hover",function(r){n(r.element,e_)}),t.on("element.out",function(r){i(r.element,e_)}),t.on("selection.changed",function(r){function o(l){i(l,t_)}function s(l){n(l,t_)}var a=r.oldSelection,c=r.newSelection;M(a,function(l){c.indexOf(l)===-1&&o(l)}),M(c,function(l){a.indexOf(l)===-1&&s(l)})})}aS.$inject=["canvas","eventBus"];function cS(e,t,n,i){e.on("create.end",500,function(r){var o=r.context,s=o.canExecute,a=o.elements,c=o.hints||{},l=c.autoSelect;if(s){if(l===!1)return;de(l)?t.select(l):t.select(a.filter(GL))}}),e.on("connect.end",500,function(r){var o=r.context,s=o.connection;s&&t.select(s)}),e.on("shape.move.end",500,function(r){var o=r.previousSelection||[],s=i.get(r.context.shape.id),a=Me(o,function(c){return s.id===c.id});a||t.select(s)}),e.on("element.click",function(r){if(Lr(r)){var o=r.element;o===n.getRootElement()&&(o=null);var s=t.isSelected(o),a=t.get().length>1,c=mu(r);if(s&&a)return c?t.deselect(o):t.select(o);s?t.deselect(o):t.select(o,c)}})}cS.$inject=["eventBus","selection","canvas","elementRegistry"];function GL(e){return!e.hidden}const ni={__init__:["selectionVisuals","selectionBehavior"],__depends__:[sf],selection:["type",Ws],selectionVisuals:["type",aS],selectionBehavior:["type",cS]};function Br(e){nt.call(this,e)}re(Br,nt);Br.prototype._modules=[TL,UL,of,ni,nf];Br.prototype._moddleExtensions={};var KL=["c","C"],qL=["v","V"],YL=["y","Y"],lS=["z","Z"];function JL(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Dn(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function Et(e,t){return e=de(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function tg(e){return e.shiftKey}function XL(e){return Dn(e)&&Et(KL,e)}function ZL(e){return Dn(e)&&Et(qL,e)}function QL(e){return Dn(e)&&!tg(e)&&Et(lS,e)}function eB(e){return Dn(e)&&(Et(YL,e)||Et(lS,e)&&tg(e))}var af="keyboard.keydown",tB="keyboard.keyup",nB=1e3,uS="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661";function Jt(e,t){var n=this;this._config=e=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),e.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(uS));var i=e&&e.bind!==!1;t.on("canvas.init",function(r){n._target=r.svg,i&&n.bind(),n._fire("init")})}Jt.$inject=["config.keyboard","eventBus"];Jt.prototype._keydownHandler=function(e){this._keyHandler(e,af)};Jt.prototype._keyupHandler=function(e){this._keyHandler(e,tB)};Jt.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||af,i),n&&e.preventDefault()}};Jt.prototype._isEventIgnored=function(e){return!1};Jt.prototype.bind=function(e){e&&console.error("unsupported argument <node>",new Error(uS)),this.unbind(),e=this._node=this._target,ye.bind(e,"keydown",this._keydownHandler),ye.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Jt.prototype.getBinding=function(){return this._node};Jt.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),ye.unbind(e,"keydown",this._keydownHandler),ye.unbind(e,"keyup",this._keyupHandler)),this._node=null};Jt.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Jt.prototype.addListener=function(e,t,n){bt(e)&&(n=t,t=e,e=nB),this._eventBus.on(n||af,e,t)};Jt.prototype.removeListener=function(e,t){this._eventBus.off(t||af,e)};Jt.prototype.hasModifier=JL;Jt.prototype.isCmd=Dn;Jt.prototype.isShift=tg;Jt.prototype.isKey=Et;var iB=500;function Gs(e,t){var n=this;e.on("editorActions.init",iB,function(i){var r=i.editorActions;n.registerBindings(t,r)})}Gs.$inject=["eventBus","keyboard"];Gs.prototype.registerBindings=function(e,t){function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("undo",function(i){var r=i.keyEvent;if(QL(r))return t.trigger("undo"),!0}),n("redo",function(i){var r=i.keyEvent;if(eB(r))return t.trigger("redo"),!0}),n("copy",function(i){var r=i.keyEvent;if(XL(r))return t.trigger("copy"),!0}),n("paste",function(i){var r=i.keyEvent;if(ZL(r))return t.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(Et(["+","Add","="],r)&&Dn(r))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(Et(["-","Subtract"],r)&&Dn(r))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(Et("0",r)&&Dn(r))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var r=i.keyEvent;if(Et(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};const ng={__init__:["keyboard","keyboardBindings"],keyboard:["type",Jt],keyboardBindings:["type",Gs]};var rB={moveSpeed:50,moveSpeedAccelerated:200};function fS(e,t,n){var i=this;this._config=$({},rB,e||{}),t.addListener(r);function r(o){var s=o.keyEvent,a=i._config;if(t.isCmd(s)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],s)){var c=t.isShift(s)?a.moveSpeedAccelerated:a.moveSpeed,l;switch(s.key){case"ArrowLeft":case"Left":l="left";break;case"ArrowUp":case"Up":l="up";break;case"ArrowRight":case"Right":l="right";break;case"ArrowDown":case"Down":l="down";break}return i.moveCanvas({speed:c,direction:l}),!0}}this.moveCanvas=function(o){var s=0,a=0,c=o.speed,l=c/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":s=l;break;case"up":a=l;break;case"right":s=-l;break;case"down":a=-l;break}n.scroll({dx:s,dy:a})}}fS.$inject=["config.keyboardMove","keyboard","canvas"];const pS={__depends__:[ng],__init__:["keyboardMove"],keyboardMove:["type",fS]};var oB=/^djs-cursor-.*$/;function cf(e){var t=st(document.body);t.removeMatching(oB),e&&t.add("djs-cursor-"+e)}function hS(){cf(null)}var sB=5e3;function dS(e,t){t=t||"element.click";function n(){return!1}return e.once(t,sB,n),function(){e.off(t,n)}}function Fa(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Jn(e,t){return{x:e.x-t.x,y:e.y-t.y}}var aB=15;function gS(e,t){var n;function i(a){return s(a.originalEvent)}e.on("canvas.focus.changed",function(a){a.focused?e.on("element.mousedown",500,i):e.off("element.mousedown",i)});function r(a){var c=n.start,l=n.button,u=Co(a),f=Jn(u,c);if(!n.dragging&&cB(f)>aB&&(n.dragging=!0,l===0&&dS(e),cf("grab")),n.dragging){var p=n.last||n.start;f=Jn(u,p),t.scroll({dx:f.x,dy:f.y}),n.last=u}a.preventDefault()}function o(a){ye.unbind(document,"mousemove",r),ye.unbind(document,"mouseup",o),n=null,hS()}function s(a){if(!Fs(a.target,".djs-draggable")){var c=a.button;if(!(c>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:c,start:Co(a)},ye.bind(document,"mousemove",r),ye.bind(document,"mouseup",o),!0}}this.isActive=function(){return!!n}}gS.$inject=["eventBus","canvas"];function cB(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const mS={__init__:["moveCanvas"],moveCanvas:["type",gS]};function Th(e){return Math.log(e)/Math.log(10)}function vS(e,t){var n=Th(e.min),i=Th(e.max),r=Math.abs(n)+Math.abs(i);return r/t}function lB(e,t){return Math.max(e.min,Math.min(e.max,t))}var uB=Math.sign||function(e){return e>=0?1:-1},ig={min:.2,max:4},yS=10,fB=.1,pB=.75;function wi(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=on(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||pB;var i=this;t.on("canvas.focus.changed",function(r){i._init(r.focused&&e.enabled!==!1)})}wi.$inject=["config.zoomScroll","eventBus","canvas"];wi.prototype.scroll=function(t){this._canvas.scroll(t)};wi.prototype.reset=function(){this._canvas.zoom("fit-viewport")};wi.prototype.zoom=function(t,n){var i=vS(ig,yS*2);this._totalDelta+=t,Math.abs(this._totalDelta)>fB&&(this._zoom(t,n,i),this._totalDelta=0)};wi.prototype._handleWheel=function(t){if(this._canvas.isFocused()){var n=this._container;t.preventDefault();var i=t.ctrlKey||rS()&&t.metaKey,r=t.shiftKey,o=-1*this._scale,s;if(i?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,i){var a=n.getBoundingClientRect(),c={x:t.clientX-a.left,y:t.clientY-a.top};s=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*uB(t.deltaY)*o,this.zoom(s,c)}else r?s={dx:o*t.deltaY,dy:0}:s={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(s)}};wi.prototype.stepZoom=function(t,n){var i=vS(ig,yS);this._zoom(t,n,i)};wi.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,o=Th(i.zoom()),s=Math.round(o/n)*n;s+=n*r;var a=Math.pow(10,s);i.zoom(lB(ig,a),t)};wi.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,r=this._enabled;return typeof t>"u"&&(t=!r),r!==t&&ye[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t};wi.prototype._init=function(e){this.toggle(e)};const _S={__init__:["zoomScroll"],zoomScroll:["type",wi]};function oc(e){Br.call(this,e)}re(oc,Br);oc.prototype._navigationModules=[pS,mS,_S];oc.prototype._modules=[].concat(Br.prototype._modules,oc.prototype._navigationModules);function Sp(e){return e&&e[e.length-1]}function n_(e){return e.y}function i_(e){return e.x}var hB={left:i_,center:i_,right:function(e){return e.x+e.width},top:n_,middle:n_,bottom:function(e){return e.y+e.height}};function Ks(e,t){this._modeling=e,this._rules=t}Ks.$inject=["modeling","rules"];Ks.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",i="width";return t.indexOf(e)!==-1&&(n="y",i="height"),{axis:n,dimension:i}};Ks.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Ks.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),i=n.axis,r=n.dimension,o={},s={},a=!1,c,l,u;function f(p,h){return Math.round((p[i]+h[i]+h[r])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][i];else if(this._isType(e,["right","bottom"]))u=Sp(t),o[e]=u[i]+u[r];else if(this._isType(e,["center","middle"])){if(M(t,function(p){var h=p[i]+Math.round(p[r]/2);s[h]?s[h].elements.push(p):s[h]={elements:[p],center:h}}),c=vi(s,function(p){return p.elements.length>1&&(a=!0),p.elements.length}),a)return o[e]=Sp(c).center,o;l=t[0],t=vi(t,function(p){return p[i]+p[r]}),u=Sp(t),o[e]=f(l,u)}return o};Ks.prototype.trigger=function(e,t){var n=this._modeling,i,r=Se(e,function(c){return!(c.waypoints||c.host||c.labelTarget)});if(i=this._rules.allowed("elements.align",{elements:r}),de(i)&&(r=i),!(r.length<2||!i)){var o=hB[t],s=vi(r,o),a=this._alignmentPosition(t,s);n.alignElements(s,a)}};const dB={__init__:["alignElements"],alignElements:["type",Ks]},gB=new Tc;function qs(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}qs.$inject=["eventBus"];qs.prototype.schedule=function(e,t=gB.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};qs.prototype._schedule=function(e,t){const n=mB();return{executionId:setTimeout(()=>{try{this._scheduled[t]=null;try{n.resolve(e())}catch(r){n.reject(r)}}catch(r){console.error("Scheduler#_schedule execution failed",r)}}),promise:n.promise}};qs.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};qs.prototype._cancel=function(e){clearTimeout(e.executionId)};function mB(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}const vB={scheduler:["type",qs]};var yB="djs-element-hidden",hl=".entry",_B=1e3,r_=8,bB=300;function dt(e,t,n,i){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=i,this._current=null,this._init()}dt.$inject=["canvas","elementRegistry","eventBus","scheduler"];dt.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,i=n.length?n.length===1?n[0]:n:null;i?e.open(i,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,i=e._current;if(i){var r=i.target,o=de(r)?r:[r],s=o.filter(function(c){return n.includes(c)});if(s.length){e.close();var a=o.filter(function(c){return e._elementRegistry.get(c.id)});a.length&&e._updateAndOpen(a.length>1?a:a[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,i=e._current,r=de(i.target)?i.target:[i.target];r.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};dt.prototype._createContainer=function(){var e=qe('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};dt.prototype.registerProvider=function(e,t){t||(t=e,e=_B),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};dt.prototype.getEntries=function(e){var t=this._getProviders(),n=de(e)?"getMultiElementContextPadEntries":"getContextPadEntries",i={};return M(t,function(r){if(bt(r[n])){var o=r[n](e);bt(o)?i=o(i):M(o,function(s,a){i[a]=s})}}),i};dt.prototype.trigger=function(e,t,n){var i=this,r,o,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();if(r=Bt(s,"data-action"),o=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){i._mouseout=i.triggerEntry(r,"hover",o,n)},bB);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(r,e,o,n)};dt.prototype.triggerEntry=function(e,t,n,i){if(this.isShown()){var r=this._current.target,o=this._current.entries,s=o[e];if(s){var a=s.action;if(this._eventBus.fire("contextPad.trigger",{entry:s,event:n})!==!1){if(bt(a)){if(t==="click")return a(n,r,i)}else if(a[t])return a[t](n,r,i);n.preventDefault()}}}};dt.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};dt.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};dt.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),i;M(t,function(r,o){var s=r.group||"default",a=qe(r.html||'<div class="entry" draggable="true"></div>'),c;Bt(a,"data-action",o),c=Fe("[data-group="+ic(s)+"]",n),c||(c=qe('<div class="group"></div>'),Bt(c,"data-group",s),n.appendChild(c)),c.appendChild(a),r.className&&wB(a,r.className),r.title&&Bt(a,"title",r.title),r.imageUrl&&(i=qe("<img>"),Bt(i,"src",r.imageUrl),i.style.width="100%",i.style.height="100%",a.appendChild(i))}),st(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};dt.prototype._createHtml=function(e){var t=this,n=qe('<div class="djs-context-pad"></div>');return pn.bind(n,hl,"click",function(i){t.trigger("click",i)}),pn.bind(n,hl,"dragstart",function(i){t.trigger("dragstart",i)}),pn.bind(n,hl,"mouseover",function(i){t.trigger("mouseover",i)}),pn.bind(n,hl,"mouseout",function(i){t.trigger("mouseout",i)}),ye.bind(n,"mousedown",function(i){i.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};dt.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&xB(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};dt.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};dt.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return de(e)!==de(n)?!1:de(e)?e.length===n.length&&Ao(e,function(i){return n.includes(i)}):n===e};dt.prototype.isShown=function(){return this.isOpen()&&st(this._current.html).has("open")};dt.prototype.show=function(){this.isOpen()&&(st(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};dt.prototype.hide=function(){this.isOpen()&&(st(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};dt.prototype._getPosition=function(e){if(!de(e)&&He(e)){var t=this._canvas.viewbox(),n=EB(e),i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale;return{left:i+r_*this._canvas.zoom(),top:r}}var o=this._canvas.getContainer(),s=o.getBoundingClientRect(),a=this._getTargetBounds(e);return{left:a.right-s.left+r_*this._canvas.zoom(),top:a.top-s.top}};dt.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(i){i in n&&(t.style[i]=n[i]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};dt.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,i=de(n)?n:[n],r=i.some(function(o){return t._canvas.hasMarker(o,yB)});r?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};dt.prototype._getTargetBounds=function(e){var t=this,n=de(e)?e:[e],i=n.map(function(r){return t._canvas.getGraphics(r)});return i.reduce(function(r,o){const s=o.getBoundingClientRect();return r.top=Math.min(r.top,s.top),r.right=Math.max(r.right,s.right),r.bottom=Math.max(r.bottom,s.bottom),r.left=Math.min(r.left,s.left),r.x=r.left,r.y=r.top,r.width=r.right-r.left,r.height=r.bottom-r.top,r},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function wB(e,t){var n=st(e);t=de(t)?t:t.split(/\s+/g),t.forEach(function(i){n.add(i)})}function EB(e){return e.waypoints[e.waypoints.length-1]}function xB(e,t){return e=de(e)?e:[e],t=de(t)?t:[t],e.length===t.length&&Ao(e,function(n){return t.includes(n)})}const bS={__depends__:[sf,vB,of],contextPad:["type",dt]};var lf,tt,wS,fo,o_,ES,xS,SS,rg,Ph,Ah,sc={},CS=[],SB=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,uf=Array.isArray;function Ni(e,t){for(var n in t)e[n]=t[n];return e}function og(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function RS(e,t,n){var i,r,o,s={};for(o in t)o=="key"?i=t[o]:o=="ref"?r=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?lf.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)s[o]===void 0&&(s[o]=e.defaultProps[o]);return Fl(e,s,i,r,null)}function Fl(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++wS,__i:-1,__u:0};return r==null&&tt.vnode!=null&&tt.vnode(o),o}function ff(e){return e.children}function Hl(e,t){this.props=e,this.context=t}function Cs(e,t){if(t==null)return e.__?Cs(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Cs(e):null}function TS(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return TS(e)}}function s_(e){(!e.__d&&(e.__d=!0)&&fo.push(e)&&!vu.__r++||o_!=tt.debounceRendering)&&((o_=tt.debounceRendering)||ES)(vu)}function vu(){for(var e,t,n,i,r,o,s,a=1;fo.length;)fo.length>a&&fo.sort(xS),e=fo.shift(),a=fo.length,e.__d&&(n=void 0,r=(i=(t=e).__v).__e,o=[],s=[],t.__P&&((n=Ni({},i)).__v=i.__v+1,tt.vnode&&tt.vnode(n),sg(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[r]:null,o,r??Cs(i),!!(32&i.__u),s),n.__v=i.__v,n.__.__k[n.__i]=n,kS(o,n,s),n.__e!=r&&TS(n)));vu.__r=0}function PS(e,t,n,i,r,o,s,a,c,l,u){var f,p,h,d,g,m,E=i&&i.__k||CS,x=t.length;for(c=CB(n,t,E,c,x),f=0;f<x;f++)(h=n.__k[f])!=null&&(p=h.__i==-1?sc:E[h.__i]||sc,h.__i=f,m=sg(e,h,p,r,o,s,a,c,l,u),d=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&ag(p.ref,null,h),u.push(h.ref,h.__c||d,h)),g==null&&d!=null&&(g=d),4&h.__u||p.__k===h.__k?c=AS(h,c,e):typeof h.type=="function"&&m!==void 0?c=m:d&&(c=d.nextSibling),h.__u&=-7);return n.__e=g,c}function CB(e,t,n,i,r){var o,s,a,c,l,u=n.length,f=u,p=0;for(e.__k=new Array(r),o=0;o<r;o++)(s=t[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(c=o+p,(s=e.__k[o]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?Fl(null,s,null,null,null):uf(s)?Fl(ff,{children:s},null,null,null):s.constructor==null&&s.__b>0?Fl(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,a=null,(l=s.__i=RB(s,n,c,f))!=-1&&(f--,(a=n[l])&&(a.__u|=2)),a==null||a.__v==null?(l==-1&&(r>u?p--:r<u&&p++),typeof s.type!="function"&&(s.__u|=4)):l!=c&&(l==c-1?p--:l==c+1?p++:(l>c?p--:p++,s.__u|=4))):e.__k[o]=null;if(f)for(o=0;o<u;o++)(a=n[o])!=null&&(2&a.__u)==0&&(a.__e==i&&(i=Cs(a)),DS(a,a));return i}function AS(e,t,n){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=AS(i[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Cs(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function RB(e,t,n,i){var r,o,s=e.key,a=e.type,c=t[n];if(c===null&&e.key==null||c&&s==c.key&&a==c.type&&(2&c.__u)==0)return n;if(i>(c!=null&&(2&c.__u)==0?1:0))for(r=n-1,o=n+1;r>=0||o<t.length;){if(r>=0){if((c=t[r])&&(2&c.__u)==0&&s==c.key&&a==c.type)return r;r--}if(o<t.length){if((c=t[o])&&(2&c.__u)==0&&s==c.key&&a==c.type)return o;o++}}return-1}function a_(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||SB.test(t)?n:n+"px"}function dl(e,t,n,i,r){var o,s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||a_(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||a_(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(SS,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=rg,e.addEventListener(t,o?Ah:Ph,o)):e.removeEventListener(t,o?Ah:Ph,o);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function c_(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=rg++;else if(t.t<n.u)return;return n(tt.event?tt.event(t):t)}}}function sg(e,t,n,i,r,o,s,a,c,l){var u,f,p,h,d,g,m,E,x,b,y,R,P,N,k,O,L,F=t.type;if(t.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),o=[a=t.__e=n.__e]),(u=tt.__b)&&u(t);e:if(typeof F=="function")try{if(E=t.props,x="prototype"in F&&F.prototype.render,b=(u=F.contextType)&&i[u.__c],y=u?b?b.props.value:u.__:i,n.__c?m=(f=t.__c=n.__c).__=f.__E:(x?t.__c=f=new F(E,y):(t.__c=f=new Hl(E,y),f.constructor=F,f.render=PB),b&&b.sub(f),f.props=E,f.state||(f.state={}),f.context=y,f.__n=i,p=f.__d=!0,f.__h=[],f._sb=[]),x&&f.__s==null&&(f.__s=f.state),x&&F.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Ni({},f.__s)),Ni(f.__s,F.getDerivedStateFromProps(E,f.__s))),h=f.props,d=f.state,f.__v=t,p)x&&F.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),x&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(x&&F.getDerivedStateFromProps==null&&E!==h&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(E,y),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(E,f.__s,y)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(f.props=E,f.state=f.__s,f.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(B){B&&(B.__=t)}),R=0;R<f._sb.length;R++)f.__h.push(f._sb[R]);f._sb=[],f.__h.length&&s.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(E,f.__s,y),x&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(h,d,g)})}if(f.context=y,f.props=E,f.__P=e,f.__e=!1,P=tt.__r,N=0,x){for(f.state=f.__s,f.__d=!1,P&&P(t),u=f.render(f.props,f.state,f.context),k=0;k<f._sb.length;k++)f.__h.push(f._sb[k]);f._sb=[]}else do f.__d=!1,P&&P(t),u=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++N<25);f.state=f.__s,f.getChildContext!=null&&(i=Ni(Ni({},i),f.getChildContext())),x&&!p&&f.getSnapshotBeforeUpdate!=null&&(g=f.getSnapshotBeforeUpdate(h,d)),O=u,u!=null&&u.type===ff&&u.key==null&&(O=OS(u.props.children)),a=PS(e,uf(O)?O:[O],t,n,i,r,o,s,a,c,l),f.base=t.__e,t.__u&=-161,f.__h.length&&s.push(f),m&&(f.__E=f.__=null)}catch(B){if(t.__v=null,c||o!=null)if(B.then){for(t.__u|=c?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,t.__e=a}else for(L=o.length;L--;)og(o[L]);else t.__e=n.__e,t.__k=n.__k;tt.__e(B,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):a=t.__e=TB(n.__e,t,n,i,r,o,s,c,l);return(u=tt.diffed)&&u(t),128&t.__u?void 0:a}function kS(e,t,n){for(var i=0;i<n.length;i++)ag(n[i],n[++i],n[++i]);tt.__c&&tt.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(o){o.call(r)})}catch(o){tt.__e(o,r.__v)}})}function OS(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:uf(e)?e.map(OS):Ni({},e)}function TB(e,t,n,i,r,o,s,a,c){var l,u,f,p,h,d,g,m=n.props,E=t.props,x=t.type;if(x=="svg"?r="http://www.w3.org/2000/svg":x=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(l=0;l<o.length;l++)if((h=o[l])&&"setAttribute"in h==!!x&&(x?h.localName==x:h.nodeType==3)){e=h,o[l]=null;break}}if(e==null){if(x==null)return document.createTextNode(E);e=document.createElementNS(r,x,E.is&&E),a&&(tt.__m&&tt.__m(t,o),a=!1),o=null}if(x==null)m===E||a&&e.data==E||(e.data=E);else{if(o=o&&lf.call(e.childNodes),m=n.props||sc,!a&&o!=null)for(m={},l=0;l<e.attributes.length;l++)m[(h=e.attributes[l]).name]=h.value;for(l in m)if(h=m[l],l!="children"){if(l=="dangerouslySetInnerHTML")f=h;else if(!(l in E)){if(l=="value"&&"defaultValue"in E||l=="checked"&&"defaultChecked"in E)continue;dl(e,l,null,h,r)}}for(l in E)h=E[l],l=="children"?p=h:l=="dangerouslySetInnerHTML"?u=h:l=="value"?d=h:l=="checked"?g=h:a&&typeof h!="function"||m[l]===h||dl(e,l,h,m[l],r);if(u)a||f&&(u.__html==f.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(f&&(e.innerHTML=""),PS(t.type=="template"?e.content:e,uf(p)?p:[p],t,n,i,x=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,s,o?o[0]:n.__k&&Cs(n,0),a,c),o!=null)for(l=o.length;l--;)og(o[l]);a||(l="value",x=="progress"&&d==null?e.removeAttribute("value"):d!=null&&(d!==e[l]||x=="progress"&&!d||x=="option"&&d!=m[l])&&dl(e,l,d,m[l],r),l="checked",g!=null&&g!=e[l]&&dl(e,l,g,m[l],r))}return e}function ag(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){tt.__e(r,n)}}function DS(e,t,n){var i,r;if(tt.unmount&&tt.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||ag(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){tt.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&DS(i[r],t,n||typeof e.type!="function");n||og(e.__e),e.__c=e.__=e.__e=void 0}function PB(e,t,n){return this.constructor(e,n)}function MS(e,t,n){var i,r,o,s;t==document&&(t=document.documentElement),tt.__&&tt.__(e,t),r=(i=!1)?null:t.__k,o=[],s=[],sg(t,e=t.__k=RS(ff,null,[e]),r||sc,sc,t.namespaceURI,r?null:t.firstChild?lf.call(t.childNodes):null,o,r?r.__e:t.firstChild,i,s),kS(o,e,s)}lf=CS.slice,tt={__e:function(e,t,n,i){for(var r,o,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(e)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),s=r.__d),s)return r.__E=r}catch(a){e=a}throw e}},wS=0,Hl.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ni({},this.state),typeof e=="function"&&(e=e(Ni({},n),this.props)),e&&Ni(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),s_(this))},Hl.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),s_(this))},Hl.prototype.render=ff,fo=[],ES=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,xS=function(e,t){return e.__v.__b-t.__v.__b},vu.__r=0,SS=/(PointerCapture)$|Capture$/i,rg=0,Ph=c_(!1),Ah=c_(!0);var IS=function(e,t,n,i){var r;t[0]=0;for(var o=1;o<t.length;o++){var s=t[o++],a=t[o]?(t[0]|=s?1:2,n[t[o++]]):t[++o];s===3?i[0]=a:s===4?i[1]=Object.assign(i[1]||{},a):s===5?(i[1]=i[1]||{})[t[++o]]=a:s===6?i[1][t[++o]]+=a+"":s?(r=e.apply(a,IS(e,a,n,["",null])),i.push(r),a[0]?t[0]|=2:(t[o-2]=0,t[o]=r)):i.push(a)}return i},l_=new Map;function AB(e){var t=l_.get(this);return t||(t=new Map,l_.set(this,t)),(t=IS(this,t.get(e)||(t.set(e,t=function(n){for(var i,r,o=1,s="",a="",c=[0],l=function(p){o===1&&(p||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?c.push(0,p,s):o===3&&(p||s)?(c.push(3,p,s),o=2):o===2&&s==="..."&&p?c.push(4,p,0):o===2&&s&&!p?c.push(5,0,!0,s):o>=5&&((s||!p&&o===5)&&(c.push(o,0,s,r),o=6),p&&(c.push(o,p,0,r),o=6)),s=""},u=0;u<n.length;u++){u&&(o===1&&l(),l(u));for(var f=0;f<n[u].length;f++)i=n[u][f],o===1?i==="<"?(l(),c=[c],o=3):s+=i:o===4?s==="--"&&i===">"?(o=1,s=""):s=i+s[0]:a?i===a?a="":s+=i:i==='"'||i==="'"?a=i:i===">"?(l(),o=1):o&&(i==="="?(o=5,r=s,s=""):i==="/"&&(o<5||n[u][f+1]===">")?(l(),o===3&&(c=c[0]),o=c,(c=c[0]).push(2,0,o),o=0):i===" "||i==="	"||i===`
`||i==="\r"?(l(),o=2):s+=i),o===3&&s==="!--"&&(o=4,c=c[0])}return l(),c}(e)),t),arguments,[])).length>1?t:t[0]}var at=AB.bind(RS),Rs,lt,Cp,u_,ac=0,NS=[],gt=tt,f_=gt.__b,p_=gt.__r,h_=gt.diffed,d_=gt.__c,g_=gt.unmount,m_=gt.__;function pf(e,t){gt.__h&&gt.__h(lt,e,ac||t),ac=0;var n=lt.__H||(lt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Rp(e){return ac=1,kB(LS,e)}function kB(e,t,n){var i=pf(Rs++,2);if(i.t=e,!i.__c&&(i.__=[LS(void 0,t),function(a){var c=i.__N?i.__N[0]:i.__[0],l=i.t(c,a);c!==l&&(i.__N=[l,i.__[1]],i.__c.setState({}))}],i.__c=lt,!lt.__f)){var r=function(a,c,l){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!o||o.call(this,a,c,l);var f=i.__c.props!==a;return u.forEach(function(p){if(p.__N){var h=p.__[0];p.__=p.__N,p.__N=void 0,h!==p.__[0]&&(f=!0)}}),o&&o.call(this,a,c,l)||f};lt.__f=!0;var o=lt.shouldComponentUpdate,s=lt.componentWillUpdate;lt.componentWillUpdate=function(a,c,l){if(this.__e){var u=o;o=void 0,r(a,c,l),o=u}s&&s.call(this,a,c,l)},lt.shouldComponentUpdate=r}return i.__N||i.__}function kh(e,t){var n=pf(Rs++,3);!gt.__s&&cg(n.__H,t)&&(n.__=e,n.u=t,lt.__H.__h.push(n))}function Oh(e,t){var n=pf(Rs++,4);!gt.__s&&cg(n.__H,t)&&(n.__=e,n.u=t,lt.__h.push(n))}function $S(e){return ac=5,Ts(function(){return{current:e}},[])}function Ts(e,t){var n=pf(Rs++,7);return cg(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function pa(e,t){return ac=8,Ts(function(){return e},t)}function OB(){for(var e;e=NS.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(zl),e.__H.__h.forEach(Dh),e.__H.__h=[]}catch(t){e.__H.__h=[],gt.__e(t,e.__v)}}gt.__b=function(e){lt=null,f_&&f_(e)},gt.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),m_&&m_(e,t)},gt.__r=function(e){p_&&p_(e),Rs=0;var t=(lt=e.__c).__H;t&&(Cp===lt?(t.__h=[],lt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(zl),t.__h.forEach(Dh),t.__h=[],Rs=0)),Cp=lt},gt.diffed=function(e){h_&&h_(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(NS.push(t)!==1&&u_===gt.requestAnimationFrame||((u_=gt.requestAnimationFrame)||DB)(OB)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Cp=lt=null},gt.__c=function(e,t){t.some(function(n){try{n.__h.forEach(zl),n.__h=n.__h.filter(function(i){return!i.__||Dh(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],gt.__e(i,n.__v)}}),d_&&d_(e,t)},gt.unmount=function(e){g_&&g_(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{zl(i)}catch(r){t=r}}),n.__H=void 0,t&&gt.__e(t,n.__v))};var v_=typeof requestAnimationFrame=="function";function DB(e){var t,n=function(){clearTimeout(i),v_&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);v_&&(t=requestAnimationFrame(n))}function zl(e){var t=lt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),lt=t}function Dh(e){var t=lt;e.__c=e.__(),lt=t}function cg(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function LS(e,t){return typeof t=="function"?t(e):t}function BS(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=BS(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function yu(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=BS(e))&&(i&&(i+=" "),i+=t);return i}function MB(e){const{headerEntries:t,onSelect:n,selectedEntry:i,setSelectedEntry:r,title:o}=e,s=Ts(()=>IB(t),[t]);return at`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${o}>${o}</h3>
      ${s.map(a=>at`
        <ul key=${a.id} class="djs-popup-header-group" data-header-group=${a.id}>

          ${a.entries.map(c=>at`
            <li key=${c.id}>
              <${c.action?"button":"span"}
                class=${NB(c,c===i)}
                onClick=${l=>c.action&&n(l,c)}
                title=${c.title||c.label}
                data-id=${c.id}
                onMouseEnter=${()=>c.action&&r(c)}
                onMouseLeave=${()=>c.action&&r(null)}
                onFocus=${()=>c.action&&r(c)}
                onBlur=${()=>c.action&&r(null)}
              >
                ${c.imageUrl&&at`<img class="djs-popup-entry-icon" src=${c.imageUrl} alt="" />`||c.imageHtml&&at`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:c.imageHtml}} />`}
                ${c.label?at`
                  <span class="djs-popup-label">${c.label}</span>
                `:null}
              </${c.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function IB(e){return e.reduce((t,n)=>{const i=n.group||"default",r=t.find(o=>o.id===i);return r?r.entries.push(n):t.push({id:i,entries:[n]}),t},[])}function NB(e,t){return yu("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function $B(e){const{entry:t,selected:n,onMouseEnter:i,onMouseLeave:r,onAction:o}=e;return at`
    <li
      class=${yu("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${i}
      onBlur=${r}
      onMouseEnter=${i}
      onMouseLeave=${r}
      onDragStart=${s=>o(s,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${yu("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&at`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&at`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?at`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&at`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&at`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${s=>s.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function LB(e){const{selectedEntry:t,setSelectedEntry:n,entries:i,...r}=e,o=$S(),s=Ts(()=>BB(i),[i]);return Oh(()=>{const a=o.current;if(!a)return;const c=a.querySelector(".selected");c&&jB(c)},[t]),at`
    <div class="djs-popup-results" ref=${o}>
      ${s.map(a=>at`
        ${a.name&&at`
          <div key=${a.id} class="entry-header" title=${a.name}>
            ${a.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${a.id}>
          ${a.entries.map(c=>at`
            <${$B}
              key=${c.id}
              entry=${c}
              selected=${c===t}
              onMouseEnter=${()=>n(c)}
              onMouseLeave=${()=>n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function BB(e){const t=[],n=o=>t.find(s=>o.id===s.id),i=o=>!!n(o),r=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{const s=o.group?r(o.group):{id:"default"};i(s)?n(s).entries.push(o):t.push({...s,entries:[o]})}),t}function jB(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function FB(e){const{onClose:t,onSelect:n,className:i,headerEntries:r,position:o,title:s,width:a,scale:c,search:l,emptyPlaceholder:u,searchFn:f,entries:p,onOpened:h,onClosed:d}=e,g=Ts(()=>xt(l)?p.length>5:!1,[l,p]),[m,E]=Rp(""),x=pa((B,V)=>{if(!g)return B;if(!V.trim())return B.filter(({rank:Ne=0})=>Ne>=0);const oe=B.filter(({searchable:Ne})=>Ne!==!1);return f(oe,V,{keys:["label","search","description"]}).map(({item:Ne})=>Ne)},[g]),[b,y]=Rp(x(p,m)),[R,P]=Rp(b[0]),N=pa(B=>{P(B[0]),y(B)},[R,y,P]);kh(()=>{N(x(p,m))},[m,p]);const k=pa(B=>{let oe=b.indexOf(R)+B;oe<0&&(oe=b.length-1),oe>=b.length&&(oe=0),P(b[oe])},[b,R,P]),O=pa(B=>{if(B.key==="Enter"&&R)return n(B,R);if(B.key==="ArrowUp")return k(-1),B.preventDefault();if(B.key==="ArrowDown")return k(1),B.preventDefault()},[n,R,k]),L=pa(B=>{QE(B.target,"input")&&E(()=>B.target.value)},[E]);kh(()=>(h(),()=>{d()}),[]);const F=Ts(()=>s||r.length>0,[s,r]);return at`
    <${y_}
      onClose=${t}
      onKeyup=${L}
      onKeydown=${O}
      className=${i}
      position=${o}
      width=${a}
      scale=${c}
    >
      ${F&&at`
        <${MB}
          headerEntries=${r}
          onSelect=${n}
          selectedEntry=${R}
          setSelectedEntry=${P}
          title=${s}
        />
      `}
      ${p.length>0&&at`
        <div class="djs-popup-body">

          ${g&&at`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${s}" />
          </div>
          `}

          <${LB}
            entries=${b}
            selectedEntry=${R}
            setSelectedEntry=${P}
            onAction=${n}
          />
        </div>
      `}
    ${u&&b.length===0&&at`
      <div class="djs-popup-no-results">${bt(u)?u(m):u}</div>
    `}
    </${y_}>
  `}function y_(e){const{onClose:t,onKeydown:n,onKeyup:i,className:r,children:o,position:s}=e,a=$S();return Oh(()=>{if(typeof s!="function")return;const c=a.current,l=s(c);c.style.left=`${l.x}px`,c.style.top=`${l.y}px`},[a.current,s]),Oh(()=>{const c=a.current;if(!c)return;(c.querySelector("input")||c).focus()},[]),kh(()=>{const c=u=>{if(u.key==="Escape")return u.preventDefault(),t()},l=u=>{if(!Fs(u.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",c),document.body.addEventListener("click",l),()=>{document.documentElement.removeEventListener("keydown",c),document.body.removeEventListener("click",l)}},[]),at`
    <div
      class=${yu("djs-popup",r)}
      style=${HB(e)}
      onKeydown=${n}
      onKeyup=${i}
      ref=${a}
      tabIndex="-1"
    >
      ${o}
    </div>
  `}function HB(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var zB="data-id",jS=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],UB=1e3;function it(e,t,n,i){this._eventBus=t,this._canvas=n,this._search=i,this._current=null;var r=xt(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:r},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",o=>{const s=this.isOpen()&&this._current.target;o.element===s&&this.refresh()})}it.$inject=["config.popupMenu","eventBus","canvas","search"];it.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:i,emptyPlaceholder:r,options:o}=this._current,s=Object.entries(n).map(([p,h])=>({id:p,...h})),a=Object.entries(i).map(([p,h])=>({id:p,...h})),c=e&&(p=>this._ensureVisible(p,e)),l=this._updateScale(this._current.container);MS(at`
      <${FB}
        onClose=${p=>this.close(p)}
        onSelect=${(p,h,d)=>this.trigger(p,h,d)}
        position=${c}
        className=${t}
        entries=${s}
        headerEntries=${a}
        emptyPlaceholder=${r}
        scale=${l}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        searchFn=${this._search}
        ...${{...o}}
      />
    `,this._current.container)};it.prototype.open=function(e,t,n,i){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:r,headerEntries:o,emptyPlaceholder:s}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:r,headerEntries:o,emptyPlaceholder:s,container:this._createContainer({provider:t}),options:i},this._emit("open"),this._bindAutoClose(),this._render()};it.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:i,emptyPlaceholder:r}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:i,emptyPlaceholder:r},this._emit("refresh"),this._render()};it.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const i=this._getEntries(e,n),r=this._getHeaderEntries(e,n),o=this._getEmptyPlaceholder(n);return{entries:i,headerEntries:r,emptyPlaceholder:o,empty:!(Object.keys(i).length||Object.keys(r).length)}};it.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._canvas.restoreFocus(),this._current=null)};it.prototype.reset=function(){const e=this._current.container;MS(null,e),yi(e)};it.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};it.prototype._onOpened=function(){this._emit("opened")};it.prototype._onClosed=function(){this._emit("closed")};it.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const i=qe(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(i),i};it.prototype._bindAutoClose=function(){this._eventBus.once(jS,this.close,this)};it.prototype._unbindAutoClose=function(){this._eventBus.off(jS,this.close,this)};it.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,i,r=e;return t!==!0&&(t===!1?(n=1,i=1):(n=t.min,i=t.max),xt(n)&&e<n&&(r=n),xt(i)&&e>i&&(r=i)),r};it.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect(),r={},o=t.x,s=t.y;return t.x+i.width>n.width&&(r.x=!0),t.y+i.height>n.height&&(r.y=!0),r.x&&r.y?(o=t.x-i.width,s=t.y-i.height):r.x?(o=t.x-i.width,s=t.y):r.y&&t.y<i.height?(o=t.x,s=10):r.y&&(o=t.x,s=t.y-i.height),t.y<n.top&&(s=t.y+i.height),{x:o,y:s}};it.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};it.prototype.registerProvider=function(e,t,n){n||(n=t,t=UB),this._eventBus.on("popupMenu.getProviders."+e,t,function(i){i.providers.push(n)})};it.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};it.prototype._getEntries=function(e,t){var n={};return M(t,function(i){if(!i.getPopupMenuEntries){M(i.getEntries(e),function(o){var s=o.id;if(!s)throw new Error("entry ID is missing");n[s]=_i(o,["id"])});return}var r=i.getPopupMenuEntries(e);bt(r)?n=r(n):M(r,function(o,s){n[s]=o})}),n};it.prototype._getHeaderEntries=function(e,t){var n={};return M(t,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;M(i.getHeaderEntries(e),function(o){var s=o.id;if(!s)throw new Error("entry ID is missing");n[s]=_i(o,["id"])});return}var r=i.getPopupMenuHeaderEntries(e);bt(r)?n=r(n):M(r,function(o,s){n[s]=o})}),n};it.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>bt(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};it.prototype.isOpen=function(){return!!this._current};it.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let r=Fs(e.delegateTarget||e.target,".entry",!0),o=Bt(r,zB);t={id:o,...this._getEntry(o)}}const i=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(bt(i)){if(n==="click")return i(e,t)}else if(i[n])return i[n](e,t)}};it.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};function VB(e,t,n){const{keys:i}=n;if(t=t.trim().toLowerCase(),!t)throw new Error("<pattern> must not be empty");const r=t.trim().toLowerCase().split(/\s+/);return e.flatMap(o=>{const s=WB(o,r,i);return s?{item:o,tokens:s}:[]}).sort(GB(i))}function WB(e,t,n){const{matchedWords:i,tokens:r}=n.reduce((o,s)=>{const a=e[s],{tokens:c,matchedWords:l}=de(a)?a.reduce((u,f)=>{const{tokens:p,matchedWords:h}=w_(f,t);return{tokens:[...u.tokens,p],matchedWords:{...u.matchedWords,...h}}},{matchedWords:{},tokens:[]}):w_(a,t);return{tokens:{...o.tokens,[s]:c},matchedWords:{...o.matchedWords,...l}}},{matchedWords:{},tokens:{}});return Object.keys(i).length!==t.length?null:r}function GB(e){return(t,n)=>{let i=0,r=1;for(const o of e){const s=KB(t.tokens[o],n.tokens[o]);if(s!==0){i+=s*r,r*=.9;continue}const a=qB(t.item[o],n.item[o]);if(a!==0){i+=a*r,r*=.9;continue}}return i}}function KB(e,t){return __(t)-__(e)}function __(e){return e.reduce((t,n)=>t+FS(n),0)}function FS(e){if(de(e))return Math.max(...e.map(FS));const t=Math.log(e.value.length);return e.match?(e.start?e.end?131.9:7.87:e.wordStart?2.19:1)*t:-.07*t}function b_(e=""){return de(e)?e.join(", "):e}function qB(e,t){return b_(e).localeCompare(b_(t))}function w_(e,t){if(!e)return{tokens:[],matchedWords:{}};const n=[],i={},r=t.map(YB),o=[`(?<all>${r.join("\\s+")})`,...r].join("|"),s=new RegExp(o,"ig");let a,c=0;for(;a=s.exec(e);){const[l]=a,u=a.index,f=a.index+l.length,p=u===0,h=f===e.length,d=!!a.groups.all,g=p||/\s/.test(e.charAt(u-1)),m=h||/\s/.test(e.charAt(f));a.index>c&&n.push({value:e.slice(c,a.index),index:c}),n.push({value:l,index:a.index,match:!0,wordStart:g,wordEnd:m,start:p,end:h,all:d});const E=d?t:[l];for(const x of E)i[x.toLowerCase()]=!0;c=a.index+l.length}return c<e.length&&n.push({value:e.slice(c),index:c}),{tokens:n,matchedWords:i}}function YB(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}const HS={search:["value",VB]},lg={__depends__:[HS],__init__:["popupMenu"],popupMenu:["type",it]};var zS={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},JB=900;function Ys(e,t,n,i){e.registerProvider(JB,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}Ys.$inject=["contextPad","popupMenu","translate","canvas"];Ys.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&$(t,this._getEntries(e)),t};Ys.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};Ys.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${zS.align}</div>`,action:{click:function(t,n){var i=e._getMenuPosition(n);$(i,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",i)}}}}};Ys.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,i=n.getBoundingClientRect(),r={x:i.left,y:i.bottom+t};return r};var XB=["left","center","right","top","middle","bottom"];function Pc(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}Pc.$inject=["popupMenu","alignElements","translate","rules"];Pc.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&$(t,this._getEntries(e)),t};Pc.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};Pc.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,i=this._popupMenu,r={};return M(XB,function(o){r["align-elements-"+o]={group:"align",title:n("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:zS[o],action:function(){t.trigger(e,o),i.close()}}}),r};function $n(e){K.call(this,e),this.init()}$n.$inject=["eventBus"];re($n,K);$n.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){i.canExecute(r,t,function(o,s,a){return n(o)},!0)})};$n.prototype.init=function(){};function hf(e){$n.call(this,e)}hf.$inject=["eventBus"];re(hf,$n);hf.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=Se(t,function(i){return!(i.waypoints||i.host||i.labelTarget)});return n=Yu(n),n.length<2?!1:n})};const ZB={__depends__:[dB,bS,lg],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",Ys],alignElementsMenuProvider:["type",Pc],bpmnAlignElements:["type",hf]};var QB=10,US=50,e5=250;function ug(e,t,n,i){for(var r;r=t5(e,n,t);)n=i(t,n,r);return n}function fg(e){return function(t,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(o){var s=e[o];if(s){var a=o==="x"?"width":"height",c=s.margin,l=s.minDistance;c<0?r[o]=Math.min(i[o]+c-t[a]/2,n[o]-l+c):r[o]=Math.max(i[o]+i[a]+c+t[a]/2,n[o]+l+c)}}),r}}function t5(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},r=i5(e);return Me(r,function(o){if(o===n)return!1;var s=Ut(o,i,QB);return s==="intersect"})}function n5(e,t){t||(t={});function n(d){return d.source===e?1:-1}var i=t.defaultDistance||US,r=t.direction||"e",o=t.filter,s=t.getWeight||n,a=t.maxDistance||e5,c=t.reference||"start";o||(o=s5);function l(d,g){return r==="n"?c==="start"?ce(d).top-ce(g).bottom:c==="center"?ce(d).top-he(g).y:ce(d).top-ce(g).top:r==="w"?c==="start"?ce(d).left-ce(g).right:c==="center"?ce(d).left-he(g).x:ce(d).left-ce(g).left:r==="s"?c==="start"?ce(g).top-ce(d).bottom:c==="center"?he(g).y-ce(d).bottom:ce(g).bottom-ce(d).bottom:c==="start"?ce(g).left-ce(d).right:c==="center"?he(g).x-ce(d).right:ce(g).right-ce(d).right}var u=e.incoming.filter(o).map(function(d){var g=s(d),m=g<0?l(d.source,e):l(e,d.source);return{id:d.source.id,distance:m,weight:g}}),f=e.outgoing.filter(o).map(function(d){var g=s(d),m=g>0?l(e,d.target):l(d.target,e);return{id:d.target.id,distance:m,weight:g}}),p=u.concat(f).reduce(function(d,g){return d[g.id+"__weight_"+g.weight]=g,d},{}),h=dn(p,function(d,g){var m=g.distance,E=g.weight;return m<0||m>a||(d[String(m)]||(d[String(m)]=0),d[String(m)]+=1*E,(!d.distance||d[d.distance]<d[String(m)])&&(d.distance=m)),d},{});return h.distance||i}function i5(e){var t=Tp(e);return e.host&&(t=t.concat(Tp(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,i){return n.concat(Tp(i))},[]))),t}function Tp(e){return o5(e).concat(r5(e))}function r5(e){return e.incoming.map(function(t){return t.source})}function o5(e){return e.outgoing.map(function(t){return t.target})}function s5(){return!0}var a5=100;function VS(e,t,n){e.on("autoPlace",a5,function(i){var r=i.shape,o=i.source;return c5(o,r)}),e.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,o){e.fire("autoPlace.start",{source:i,shape:r});var s=e.fire("autoPlace",{source:i,shape:r}),a=t.appendShape(i,r,s,i.parent,o);return e.fire("autoPlace.end",{source:i,shape:a}),a}}VS.$inject=["eventBus","modeling","canvas"];function c5(e,t,n){n||(n={});var i=n.defaultDistance||US,r=he(e),o=ce(e);return{x:o.right+i+t.width/2,y:r.y}}function WS(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}WS.$inject=["eventBus","selection"];const l5={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",VS],autoPlaceSelectionBehavior:["type",WS]};function Ps(e,t){for(hn(t)&&(t=[t]);e=e.parent;)if(Ce(e,t))return e;return null}function GS(e,t){var n=Ps(e,"bpmn:Process");if(n)return!0;var i=["bpmn:Participant","bpmn:Lane"];if(n=Ps(e,i),n)return wt(n);if(Ce(e,i))return wt(e);var r;for(r=J(e);r&&!w(r,"bpmn:Process");r=r.$parent);if(!t)return!0;var o=t.find(function(s){var a=J(s);return a&&a.get("processRef")===r});return o?wt(o):!0}function KS(e,t,n){var i=GS(e,n);if(w(t,"bpmn:TextAnnotation"))return f5(e,t,i);if(Ce(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return p5(e,t,i);if(w(t,"bpmn:FlowNode"))return u5(e,t,i)}function u5(e,t,n){var i=ce(e),r=he(e),o=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},s=n5(e,{filter:function(h){return w(h,"bpmn:SequenceFlow")},direction:o.directionHint}),a=30,c=o.minDistance,l=o.baseOrientation;w(e,"bpmn:BoundaryEvent")&&(l=Ut(e,e.host,-25),l.indexOf(o.boundaryOrientation)!==-1&&(a*=-1));var u=n?{x:i.right+s+t.width/2,y:r.y+E_(l,c,o)}:{x:r.x+E_(l,c,o),y:i.bottom+s+t.height/2},f={margin:a,minDistance:c},p=n?{y:f}:{x:f};return ug(e,t,u,fg(p))}function E_(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function f5(e,t,n){var i=ce(e),r=n?{x:i.right+t.width/2,y:i.top-50-t.height/2}:{x:i.right+50+t.width/2,y:i.bottom+t.height/2};He(e)&&(r=he(e),n?(r.x+=100,r.y-=50):(r.x+=100,r.y+=50));var o={margin:n?-30:30,minDistance:20},s=n?{y:o}:{x:o};return ug(e,t,r,fg(s))}function p5(e,t,n){var i=ce(e),r=n?{x:i.right-10+t.width/2,y:i.bottom+40+t.width/2}:{x:i.left-40-t.width/2,y:i.bottom-10+t.height/2},o={margin:30,minDistance:30},s=n?{x:o}:{y:o};return ug(e,t,r,fg(s))}function qS(e,t){e.on("autoPlace",function(n){var i=n.shape,r=n.source;return KS(r,i,t)})}qS.$inject=["eventBus","elementRegistry"];const pg={__depends__:[l5],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",qS]};function Yi(e,t,n,i){K.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(o){var s=o.context,a=s.hints||{},c=s.shape,l=s.parent||s.newParent;a.autoResize!==!1&&r._expand([c],l)}),this.postExecuted(["elements.move"],function(o){var s=o.context,a=Nd(Vu(s.closure.topLevel)),c=s.hints,l=c?c.autoResize:!0;if(l!==!1){var u=js(a,function(f){return f.parent.id});M(u,function(f,p){de(l)&&(f=f.filter(function(h){return Me(l,Yn({id:h.id}))})),r._expand(f,p)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var s=o.context,a=s.hints,c=s.shape;a&&a.autoResize===!1||c.collapsed||r._expand(c.children||[],c)}),this.postExecuted(["shape.resize"],function(o){var s=o.context,a=s.hints,c=s.shape,l=c.parent;a&&a.autoResize===!1||l&&r._expand([c],l)})}Yi.$inject=["eventBus","elementRegistry","modeling","rules"];re(Yi,K);Yi.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=ce(yt(e)),o=ce(t),s={};return r.top-o.top<i.top&&(s.top=r.top-n.top),r.left-o.left<i.left&&(s.left=r.left-n.left),o.right-r.right<i.right&&(s.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(s.bottom=r.bottom+n.bottom),Ju($({},o,s))};Yi.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var i=this._getOptimalBounds(e,t);if(h5(i,t)){var r=d5(ei(t,["x","y","width","height"]),i);this.resize(t,i,{autoResize:r});var o=t.parent;o&&this._expand([t],o)}}};Yi.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};Yi.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};Yi.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function h5(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function d5(e,t){var n="";return e=ce(e),t=ce(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function df(e){e.invoke(Yi,this)}df.$inject=["injector"];re(df,Yi);df.prototype.resize=function(e,t,n){w(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function Ac(e){$n.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}Ac.$inject=["eventBus"];re(Ac,$n);Ac.prototype.canResize=function(e,t){return!1};function gf(e,t){Ac.call(this,e),this._modeling=t}re(gf,Ac);gf.$inject=["eventBus","modeling"];gf.prototype.canResize=function(e,t){if(w(t.di,"bpmndi:BPMNPlane")||!w(t,"bpmn:Participant")&&!w(t,"bpmn:Lane")&&!w(t,"bpmn:SubProcess"))return!1;var n=!0;return M(e,function(i){if(w(i,"bpmn:Lane")||Oe(i)){n=!1;return}}),n};const g5={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",df],bpmnAutoResizeProvider:["type",gf]};var x_=1500;function YS(e,t,n){var i=this,r=n.get("dragging",!1);function o(s){if(!s.hover){var a=s.originalEvent,c=i._findTargetGfx(a),l=c&&e.get(c);c&&l&&(s.stopPropagation(),r.hover({element:l,gfx:c}),r.move(a))}}r&&t.on("drag.start",function(s){t.once("drag.move",x_,function(a){o(a)})}),function(){var s,a;t.on("element.hover",function(c){s=c.gfx,a=c.element}),t.on("element.hover",x_,function(c){a&&t.fire("element.out",{element:a,gfx:s})}),t.on("element.out",function(){s=null,a=null})}(),this._findTargetGfx=function(s){var a,c;if(s instanceof MouseEvent)return a=Co(s),c=document.elementFromPoint(a.x,a.y),m5(c)}}YS.$inject=["elementRegistry","eventBus","injector"];function m5(e){return Fs(e,"svg, .djs-element",!0)}const v5={__init__:["hoverFix"],hoverFix:["type",YS]};var es=Math.round,S_="djs-drag-active";function oo(e){e.preventDefault()}function y5(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function _5(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function JS(e,t,n,i){var r={threshold:5,trapClick:!0},o;function s(b){var y=t.viewbox(),R=t._container.getBoundingClientRect();return{x:y.x+(b.x-R.left)/y.scale,y:y.y+(b.y-R.top)/y.scale}}function a(b,y){y=y||o;var R=e.createEvent($({},y.payload,y.data,{isTouch:y.isTouch}));return e.fire("drag."+b,R)===!1?!1:e.fire(y.prefix+"."+b,R)}function c(b){var y=b.filter(function(R){return i.get(R.id)});y.length&&n.select(y)}function l(b,y){var R=o.payload,P=o.displacement,N=o.globalStart,k=Co(b),O=Jn(k,N),L=o.localStart,F=s(k),B=Jn(F,L);if(!o.active&&(y||_5(O)>o.threshold)){if($(R,{x:es(L.x+P.x),y:es(L.y+P.y),dx:0,dy:0},{originalEvent:b}),a("start")===!1)return m();o.active=!0,o.keepSelection||(R.previousSelection=n.get(),n.select(null)),o.cursor&&cf(o.cursor),t.addMarker(t.getRootElement(),S_)}xp(b),o.active&&($(R,{x:es(F.x+P.x),y:es(F.y+P.y),dx:es(B.x),dy:es(B.y)},{originalEvent:b}),a("move"))}function u(b){var y,R=!0;o.active&&(b&&(o.payload.originalEvent=b,xp(b)),R=a("end")),R===!1&&a("rejected"),y=E(R!==!0),a("ended",y)}function f(b){Et("Escape",b)&&(oo(b),m())}function p(b){var y;o.active&&(y=dS(e),setTimeout(y,400),oo(b)),u(b)}function h(b){l(b)}function d(b){var y=o.payload;y.hoverGfx=b.gfx,y.hover=b.element,a("hover")}function g(b){a("out");var y=o.payload;y.hoverGfx=null,y.hover=null}function m(b){var y;if(o){var R=o.active;R&&a("cancel"),y=E(b),R&&a("canceled",y)}}function E(b){var y,R;a("cleanup"),hS(),o.trapClick?R=p:R=u,ye.unbind(document,"mousemove",l),ye.unbind(document,"dragstart",oo),ye.unbind(document,"selectstart",oo),ye.unbind(document,"mousedown",R,!0),ye.unbind(document,"mouseup",R,!0),ye.unbind(document,"keyup",f),ye.unbind(document,"touchstart",h,!0),ye.unbind(document,"touchcancel",m,!0),ye.unbind(document,"touchmove",l,!0),ye.unbind(document,"touchend",u,!0),e.off("element.hover",d),e.off("element.out",g),t.removeMarker(t.getRootElement(),S_);var P=o.payload.previousSelection;return b!==!1&&P&&!n.get().length&&c(P),y=o,o=null,y}function x(b,y,R,P){o&&m(!1),typeof y=="string"&&(P=R,R=y,y=null),P=$({},r,P||{});var N=P.data||{},k,O,L,F,B;P.trapClick?F=p:F=u,b?(k=Vs(b)||b,O=Co(b),xp(b),k.type==="dragstart"&&oo(k)):(k=null,O={x:0,y:0}),L=s(O),y||(y=L),B=y5(k),o=$({prefix:R,data:N,payload:{},globalStart:O,displacement:Jn(y,L),localStart:L,isTouch:B},P),P.manual||(B?(ye.bind(document,"touchstart",h,!0),ye.bind(document,"touchcancel",m,!0),ye.bind(document,"touchmove",l,!0),ye.bind(document,"touchend",u,!0)):(ye.bind(document,"mousemove",l),ye.bind(document,"dragstart",oo),ye.bind(document,"selectstart",oo),ye.bind(document,"mousedown",F,!0),ye.bind(document,"mouseup",F,!0)),ye.bind(document,"keyup",f),e.on("element.hover",d),e.on("element.out",g)),a("init"),P.autoActivate&&l(b,!0)}e.on("diagram.destroy",m),this.init=x,this.move=l,this.hover=d,this.out=g,this.end=u,this.cancel=m,this.context=function(){return o},this.setOptions=function(b){$(r,b)}}JS.$inject=["eventBus","canvas","selection","elementRegistry"];const Ji={__depends__:[v5,ni],dragging:["type",JS]};function Js(e,t,n){this._canvas=n,this._opts=$({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(r){var o=i._toBorderPoint(r);i.startScroll(o)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}Js.$inject=["config.autoScroll","eventBus","canvas"];Js.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var s=0,a=0,c=0;c<4;c++)b5(o[c],n.scrollThresholdOut[c],n.scrollThresholdIn[c])&&(c===0?s=n.scrollStep:c==1?a=n.scrollStep:c==2?s=-n.scrollStep:c==3&&(a=-n.scrollStep));(s!==0||a!==0)&&(t.scroll({dx:s,dy:a}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))};function b5(e,t,n){return t<e&&e<n}Js.prototype.stopScroll=function(){clearTimeout(this._scrolling)};Js.prototype.setOptions=function(e){this._opts=$({},this._opts,e)};Js.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=Co(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const w5={__depends__:[Ji],__init__:["autoScroll"],autoScroll:["type",Js]};function hg(e){this._commandStack=e.get("commandStack",!1)}hg.$inject=["injector"];hg.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};const Ei={__init__:["rules"],rules:["type",hg]};var gl=Math.round,E5=Math.max;function x5(e,t){var n=e.x,i=e.y;return[["M",n,i],["m",0,-10],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function S5(e){var t=[];return e.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}var XS=10;function C5(e,t){var n,i;for(n=0;i=e[n];n++)if(wc(i,t)<=XS)return{point:e[n],bendpoint:!0,index:n};return null}function R5(e,t){var n=px(x5(t,XS),S5(e)),i=n[0],r=n[n.length-1],o;return i?i!==r?i.segment2!==r.segment2?(o=E5(i.segment2,r.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:gl(i.x+r.x)/2,y:gl(i.y+r.y)/2},index:i.segment2}:{point:{x:gl(i.x),y:gl(i.y)},index:i.segment2}:null}function Mh(e,t){return C5(e,t)||R5(e,t)}function ZS(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function C_(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function T5(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function P5(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],r=i[0].n*t[0]+i[1].n*t[1],o=i[0].lambda*t[0]+i[1].lambda*t[1];return-r/o}function dg(e,t){var n=t[0],i=t[1],r={x:i.x-n.x,y:i.y-n.y},o=P5([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+o*r.x,y:n.y+o*r.y}}function QS(e,t){var n=dg(e,t),i={x:n.x-e.x,y:n.y-e.y};return ZS(i)}function _u(e,t){return ZS({x:e.x-t.x,y:e.y-t.y})}var e1="djs-bendpoint",t1="djs-segment-dragger";function A5(e,t){var n=Co(t),i=e._container.getBoundingClientRect(),r;r={x:i.left,y:i.top};var o=e.viewbox();return{x:o.x+(n.x-r.x)/o.scale,y:o.y+(n.y-r.y)/o.scale}}function Ih(e,t,n){var i=A5(e,n),r=Mh(t,i);return r}function Nh(e,t){var n=ae("g");Ae(n).add(e1),me(e,n);var i=ae("circle");ie(i,{cx:0,cy:0,r:4}),Ae(i).add("djs-visual"),me(n,i);var r=ae("circle");return ie(r,{cx:0,cy:0,r:10}),Ae(r).add("djs-hit"),me(n,r),t&&Ae(n).add(t),n}function k5(e,t,n,i){var r=ae("g");me(e,r);var o=18,s=6,a=11,c=D5(t,n,i),l=s+a,u=ae("rect");ie(u,{x:-18/2,y:-6/2,width:o,height:s}),Ae(u).add("djs-visual"),me(r,u);var f=ae("rect");return ie(f,{x:-c/2,y:-17/2,width:c,height:l}),Ae(f).add("djs-hit"),me(r,f),Rx(r,i==="v"?90:0),r}function n1(e,t,n){var i=ae("g"),r=_h(t,n),o=Ii(t,n);return me(e,i),k5(i,t,n,o),Ae(i).add(t1),Ae(i).add(o==="h"?"horizontal":"vertical"),kt(i,r.x,r.y),i}function $h(e){return Math.abs(Math.round(e*2/3))}function O5(e,t){var n=M5(e,t);return dg(e,n)}function D5(e,t,n){var i=t.x-e.x,r=t.y-e.y;return $h(n==="h"?i:r)}function M5(e,t){for(var n=t.waypoints,i=1/0,r,o=0;o<n.length-1;o++){var s=n[o],a=n[o+1],c=QS(e,[s,a]);c<i&&(i=c,r=o)}return[n[r],n[r+1]]}function i1(e,t,n,i,r){function o(b,y,R){var P=b.index,N=b.point,k,O,L,F,B,V;return P<=0||b.bendpoint?!1:(k=y[P-1],O=y[P],L=_h(k,O),F=Ii(k,O),B=Math.abs(N.x-L.x),V=Math.abs(N.y-L.y),F&&B<=R&&V<=R)}function s(b,y){var R=b.waypoints,P,N,k,O;return y.index<=0||y.bendpoint||(P={start:R[y.index-1],end:R[y.index]},N=Ii(P.start,P.end),!N)?null:(N==="h"?k=P.end.x-P.start.x:k=P.end.y-P.start.y,O=$h(k)/2,O)}function a(b,y){var R=y.waypoints,P=Ih(t,R,b),N;if(P)return N=s(y,P),o(P,R,N)?r.start(b,y,P.index):i.start(b,y,P.index,!P.bendpoint),!0}function c(b,y,R){ye.bind(b,y,function(P){n.triggerMouseEvent(y,P,R),P.stopPropagation()})}function l(b,y){var R=t.getLayer("overlays"),P=Fe('.djs-bendpoints[data-element-id="'+ic(b.id)+'"]',R);return!P&&y&&(P=ae("g"),ie(P,{"data-element-id":b.id}),Ae(P).add("djs-bendpoints"),me(R,P),c(P,"mousedown",b),c(P,"click",b),c(P,"dblclick",b)),P}function u(b,y){return Fe('.djs-segment-dragger[data-segment-idx="'+b+'"]',y)}function f(b,y){y.waypoints.forEach(function(R,P){var N=Nh(b);me(b,N),kt(N,R.x,R.y)}),Nh(b,"floating")}function p(b,y){for(var R=y.waypoints,P,N,k,O=1;O<R.length;O++)P=R[O-1],N=R[O],Ii(P,N)&&(k=n1(b,P,N),ie(k,{"data-segment-idx":O}),c(k,"mousemove",y))}function h(b){M(mh("."+e1,b),function(y){vt(y)})}function d(b){M(mh("."+t1,b),function(y){vt(y)})}function g(b){var y=l(b);return y||(y=l(b,!0),f(y,b),p(y,b)),y}function m(b){var y=l(b);y&&(d(y),h(y),p(y,b),f(y,b))}function E(b,y){var R=Fe(".floating",b),P=y.point;R&&kt(R,P.x,P.y)}function x(b,y,R){var P=u(y.index,b),N=R[y.index-1],k=R[y.index],O=y.point,L=_h(N,k),F=Ii(N,k),B,V;P&&(B=I5(P),V={x:O.x-L.x,y:O.y-L.y},F==="v"&&(V={x:V.y,y:V.x}),kt(B,V.x,V.y))}e.on("connection.changed",function(b){m(b.element)}),e.on("connection.remove",function(b){var y=l(b.element);y&&vt(y)}),e.on("element.marker.update",function(b){var y=b.element,R;y.waypoints&&(R=g(y),b.add?Ae(R).add(b.marker):Ae(R).remove(b.marker))}),e.on("element.mousemove",function(b){var y=b.element,R=y.waypoints,P,N;if(R){if(P=l(y,!0),N=Ih(t,R,b.originalEvent),!N)return;E(P,N),N.bendpoint||x(P,N,R)}}),e.on("element.mousedown",function(b){if(Lr(b)){var y=b.originalEvent,R=b.element;if(R.waypoints)return a(y,R)}}),e.on("selection.changed",function(b){var y=b.newSelection,R=y[0];R&&R.waypoints&&g(R)}),e.on("element.hover",function(b){var y=b.element;y.waypoints&&(g(y),n.registerEvent(b.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(b){n.unregisterEvent(b.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(b){var y=b.element,R=b.newId;if(y.waypoints){var P=l(y);P&&ie(P,{"data-element-id":R})}}),this.addHandles=g,this.updateHandles=m,this.getBendpointsContainer=l,this.getSegmentDragger=u}i1.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function I5(e){return Fe(".djs-visual",e)}var R_=Math.round,co="reconnectStart",lo="reconnectEnd",ha="updateWaypoints";function gg(e,t,n,i,r,o){this._injector=e,this.start=function(s,a,c,l){var u=n.getGraphics(a),f=a.source,p=a.target,h=a.waypoints,d;!l&&c===0?d=co:!l&&c===h.length-1?d=lo:d=ha;var g=d===ha?"connection.updateWaypoints":"connection.reconnect",m=r.allowed(g,{connection:a,source:f,target:p});m===!1&&(m=r.allowed(g,{connection:a,source:p,target:f})),m!==!1&&i.init(s,"bendpoint.move",{data:{connection:a,connectionGfx:u,context:{allowed:m,bendpointIndex:c,connection:a,source:f,target:p,insert:l,type:d}}})},t.on("bendpoint.move.hover",function(s){var a=s.context,c=a.connection,l=c.source,u=c.target,f=s.hover,p=a.type;a.hover=f;var h;if(f){var d=p===ha?"connection.updateWaypoints":"connection.reconnect";if(h=a.allowed=r.allowed(d,{connection:c,source:p===co?f:l,target:p===lo?f:u}),h){a.source=p===co?f:l,a.target=p===lo?f:u;return}h===!1&&(h=a.allowed=r.allowed(d,{connection:c,source:p===lo?f:u,target:p===co?f:l})),h&&(a.source=p===lo?f:u,a.target=p===co?f:l)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(s){var a=s.context,c=a.type;a.hover=null,a.source=null,a.target=null,c!==ha&&(a.allowed=!1)}),t.on("bendpoint.move.end",function(s){var a=s.context,c=a.allowed,l=a.bendpointIndex,u=a.connection,f=a.insert,p=u.waypoints.slice(),h=a.source,d=a.target,g=a.type,m=a.hints||{},E={x:R_(s.x),y:R_(s.y)};if(!c)return!1;g===ha?(f?p.splice(l,0,E):p[l]=E,m.bendpointMove={insert:f,bendpointIndex:l},p=this.cropWaypoints(u,p),o.updateWaypoints(u,k2(p),m)):(g===co?(m.docking="source",bu(a)&&(m.docking="target",m.newWaypoints=p.reverse())):g===lo&&(m.docking="target",bu(a)&&(m.docking="source",m.newWaypoints=p.reverse())),o.reconnect(u,h,d,E,m))},this)}gg.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];gg.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function bu(e){var t=e.hover,n=e.source,i=e.target,r=e.type;if(r===co)return t&&i&&t===i&&n!==i;if(r===lo)return t&&n&&t===n&&n!==i}var N5="reconnectStart",$5="reconnectEnd",T_="updateWaypoints",da="connect-ok",ml="connect-not-ok",P_="connect-hover",A_="djs-updating",k_="djs-dragging",O_=1100;function r1(e,t,n,i){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var s=o.context,a=s.bendpointIndex,c=s.connection,l=s.insert,u=c.waypoints,f=u.slice();s.waypoints=u,l&&f.splice(a,0,{x:o.x,y:o.y}),c.waypoints=f;var p=s.draggerGfx=Nh(i.getLayer("overlays"));Ae(p).add("djs-dragging"),i.addMarker(c,k_),i.addMarker(c,A_)}),n.on("bendpoint.move.hover",function(o){var s=o.context,a=s.allowed,c=s.hover,l=s.type;if(c){if(i.addMarker(c,P_),l===T_)return;a?(i.removeMarker(c,ml),i.addMarker(c,da)):a===!1&&(i.removeMarker(c,da),i.addMarker(c,ml))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],O_,function(o){var s=o.context,a=s.hover,c=s.target;a&&(i.removeMarker(a,P_),i.removeMarker(a,c?da:ml))}),n.on("bendpoint.move.move",function(o){var s=o.context,a=s.allowed,c=s.bendpointIndex,l=s.draggerGfx,u=s.hover,f=s.type,p=s.connection,h=p.source,d=p.target,g=p.waypoints.slice(),m={x:o.x,y:o.y},E=s.hints||{},x={};r&&(E.connectionStart&&(x.connectionStart=E.connectionStart),E.connectionEnd&&(x.connectionEnd=E.connectionEnd),f===N5?bu(s)?(x.connectionEnd=x.connectionEnd||m,x.source=d,x.target=u||h,g=g.reverse()):(x.connectionStart=x.connectionStart||m,x.source=u||h,x.target=d):f===$5?bu(s)?(x.connectionStart=x.connectionStart||m,x.source=u||d,x.target=h,g=g.reverse()):(x.connectionEnd=x.connectionEnd||m,x.source=h,x.target=u||d):(x.noCropping=!0,x.noLayout=!0,g[c]=m),f===T_&&(g=e.cropWaypoints(p,g)),x.waypoints=g,r.drawPreview(s,a,x)),kt(l,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],O_,function(o){var s=o.context,a=s.connection,c=s.draggerGfx,l=s.hover,u=s.target,f=s.waypoints;a.waypoints=f,vt(c),i.removeMarker(a,A_),i.removeMarker(a,k_),l&&(i.removeMarker(l,da),i.removeMarker(l,u?da:ml)),r&&r.cleanUp(s)})}r1.$inject=["bendpointMove","injector","eventBus","canvas"];var D_="connect-hover",M_="djs-updating";function I_(e,t,n){return mg(e,t,e[t]+n)}function mg(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function L5(e,t,n,i){var r=Math.max(t[i],n[i]),o=Math.min(t[i],n[i]),s=20,a=Math.min(Math.max(o+s,e[i]),r-s);return mg(t,i,a)}function o1(e){return e==="x"?"y":"x"}function N_(e,t,n){var i,r;return e.original?e.original:(i=he(t),r=o1(n),mg(e,r,i[r]))}function s1(e,t,n,i,r,o){var s=e.get("connectionDocking",!1);this.start=function(f,p,h){var d,g=n.getGraphics(p),m=h-1,E=h,x=p.waypoints,b=x[m],y=x[E],R=Ih(n,x,f),P,N,k;P=Ii(b,y),P&&(N=P==="v"?"x":"y",m===0&&(b=N_(b,p.source,N)),E===x.length-1&&(y=N_(y,p.target,N)),R?k=R.point:k={x:(b.x+y.x)/2,y:(b.y+y.y)/2},d={connection:p,segmentStartIndex:m,segmentEndIndex:E,segmentStart:b,segmentEnd:y,axis:N,dragPosition:k},i.init(f,k,"connectionSegment.move",{cursor:N==="x"?"resize-ew":"resize-ns",data:{connection:p,connectionGfx:g,context:d}}))};function a(f,p){if(!s)return p;var h=f.waypoints,d;return f.waypoints=p,d=s.getCroppedWaypoints(f),f.waypoints=h,d}function c(f){r.update("connection",f.connection,f.connectionGfx)}function l(f,p,h){var d=f.newWaypoints,g=f.segmentStartIndex+p,m=d[g],E=f.segmentEndIndex+p,x=d[E],b=o1(f.axis),y=L5(h,m,x,b);kt(f.draggerGfx,y.x,y.y)}function u(f,p){var h=0,d=f.filter(function(g,m){return Hd(f[m-1],f[m+1],g)?(h=m<=p?h-1:h,!1):!0});return{waypoints:d,segmentOffset:h}}t.on("connectionSegment.move.start",function(f){var p=f.context,h=f.connection,d=n.getLayer("overlays");p.originalWaypoints=h.waypoints.slice(),p.draggerGfx=n1(d,p.segmentStart,p.segmentEnd),Ae(p.draggerGfx).add("djs-dragging"),n.addMarker(h,M_)}),t.on("connectionSegment.move.move",function(f){var p=f.context,h=p.connection,d=p.segmentStartIndex,g=p.segmentEndIndex,m=p.segmentStart,E=p.segmentEnd,x=p.axis,b=p.originalWaypoints.slice(),y=I_(m,x,f["d"+x]),R=I_(E,x,f["d"+x]),P=b.length,N=0;b[d]=y,b[g]=R;var k,O;d<2&&(k=Ut(h.source,y),d===1?k==="intersect"&&(b.shift(),b[0]=y,N--):k!=="intersect"&&(b.unshift(m),N++)),g>P-3&&(O=Ut(h.target,R),g===P-2?O==="intersect"&&(b.pop(),b[b.length-1]=R):O!=="intersect"&&b.push(E)),p.newWaypoints=h.waypoints=a(h,b),l(p,N,f),p.newSegmentStartIndex=d+N,c(f)}),t.on("connectionSegment.move.hover",function(f){f.context.hover=f.hover,n.addMarker(f.hover,D_)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(f){var p=f.context.hover;p&&n.removeMarker(p,D_)}),t.on("connectionSegment.move.cleanup",function(f){var p=f.context,h=p.connection;p.draggerGfx&&vt(p.draggerGfx),n.removeMarker(h,M_)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(f){var p=f.context,h=p.connection;h.waypoints=p.originalWaypoints,c(f)}),t.on("connectionSegment.move.end",function(f){var p=f.context,h=p.connection,d=p.newWaypoints,g=p.newSegmentStartIndex;d=d.map(function(R){return{original:R.original,x:Math.round(R.x),y:Math.round(R.y)}});var m=u(d,g),E=m.waypoints,x=a(h,E),b=m.segmentOffset,y={segmentMove:{segmentStartIndex:p.segmentStartIndex,newSegmentStartIndex:g+b}};o.updateWaypoints(h,x,y)})}s1.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var B5=Math.abs,$_=Math.round;function j5(e,t,n){n=n===void 0?10:n;var i,r;for(i=0;i<t.length;i++)if(r=t[i],B5(r-e)<=n)return r}function a1(e){return{x:e.x,y:e.y}}function c1(e){return{x:e.x+e.width,y:e.y+e.height}}function kn(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:$_(e.x+e.width/2),y:$_(e.y+e.height/2)}}function As(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function ut(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}function l1(e){return e.children||[]}var F5=Math.abs,L_=Math.round,Pp=10;function u1(e){function t(o,s){if(de(o)){for(var a=o.length;a--;)if(F5(o[a]-s)<=Pp)return o[a]}else{o=+o;var c=s%o;if(c<Pp)return s-c;if(c>o-Pp)return s-c+o}return s}function n(o,s){if(o.waypoints)return O5(s,o);if(o.width)return{x:L_(o.width/2+o.x),y:L_(o.height/2+o.y)}}function i(o){var s=o.context,a=s.snapPoints,c=s.connection,l=c.waypoints,u=s.segmentStart,f=s.segmentStartIndex,p=s.segmentEnd,h=s.segmentEndIndex,d=s.axis;if(a)return a;var g=[l[f-1],u,p,l[h+1]];return f<2&&g.unshift(n(c.source,o)),h>l.length-3&&g.unshift(n(c.target,o)),s.snapPoints=a={horizontal:[],vertical:[]},M(g,function(m){m&&(m=m.original||m,d==="y"&&a.horizontal.push(m.y),d==="x"&&a.vertical.push(m.x))}),a}e.on("connectionSegment.move.move",1500,function(o){var s=i(o),a=o.x,c=o.y,l,u;if(s){l=t(s.vertical,a),u=t(s.horizontal,c);var f=a-l,p=c-u;$(o,{dx:o.dx-f,dy:o.dy-p,x:l,y:u}),(f||s.vertical.indexOf(a)!==-1)&&ut(o,"x",l),(p||s.horizontal.indexOf(c)!==-1)&&ut(o,"y",u)}});function r(o){var s=o.snapPoints,a=o.connection.waypoints,c=o.bendpointIndex;if(s)return s;var l=[a[c-1],a[c+1]];return o.snapPoints=s={horizontal:[],vertical:[]},M(l,function(u){u&&(u=u.original||u,s.horizontal.push(u.y),s.vertical.push(u.x))}),s}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var s=o.context,a=s.hover,c=a&&n(a,o);!He(a)||!c||!c.x||!c.y||(ut(o,"x",c.x),ut(o,"y",c.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var s=o.context,a=r(s),c=s.hover,l=c&&n(c,o),u=o.x,f=o.y,p,h;if(a){p=t(l?a.vertical.concat([l.x]):a.vertical,u),h=t(l?a.horizontal.concat([l.y]):a.horizontal,f);var d=u-p,g=f-h;$(o,{dx:o.dx-d,dy:o.dy-g,x:o.x-d,y:o.y-g}),(d||a.vertical.indexOf(u)!==-1)&&ut(o,"x",p),(g||a.horizontal.indexOf(f)!==-1)&&ut(o,"y",h)}})}u1.$inject=["eventBus"];const H5={__depends__:[Ji,Ei],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",i1],bendpointMove:["type",gg],bendpointMovePreview:["type",r1],connectionSegmentMove:["type",s1],bendpointSnapping:["type",u1]};function f1(e,t,n,i){function r(s,a){return i.allowed("connection.create",{source:s,target:a})}function o(s,a){return r(a,s)}e.on("connect.hover",function(s){var a=s.context,c=a.start,l=s.hover,u;if(a.hover=l,u=a.canExecute=r(c,l),!ec(u)){if(u!==!1){a.source=c,a.target=l;return}u=a.canExecute=o(c,l),!ec(u)&&u!==!1&&(a.source=l,a.target=c)}}),e.on(["connect.out","connect.cleanup"],function(s){var a=s.context;a.hover=null,a.source=null,a.target=null,a.canExecute=!1}),e.on("connect.end",function(s){var a=s.context,c=a.canExecute,l=a.connectionStart,u={x:s.x,y:s.y},f=a.source,p=a.target;if(!c)return!1;var h=null,d={connectionStart:Lh(a)?u:l,connectionEnd:Lh(a)?l:u};Ct(c)&&(h=c),a.connection=n.connect(f,p,h,d)}),this.start=function(s,a,c,l){Ct(c)||(l=c,c=he(a)),t.init(s,"connect",{autoActivate:l,data:{shape:a,context:{start:a,connectionStart:c}}})}}f1.$inject=["eventBus","dragging","modeling","rules"];function Lh(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var z5=1100,U5=900,B_="connect-ok",j_="connect-not-ok";function p1(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(r){var o=r.context,s=o.canExecute,a=o.hover,c=o.source,l=o.start,u=o.startPosition,f=o.target,p=o.connectionStart||u,h=o.connectionEnd||{x:r.x,y:r.y},d=p,g=h;Lh(o)&&(d=h,g=p),i.drawPreview(o,s,{source:c||l,target:f||a,connectionStart:d,connectionEnd:g})}),t.on("connect.hover",U5,function(r){var o=r.context,s=r.hover,a=o.canExecute;a!==null&&n.addMarker(s,a?B_:j_)}),t.on(["connect.out","connect.cleanup"],z5,function(r){var o=r.hover;o&&(n.removeMarker(o,B_),n.removeMarker(o,j_))}),i&&t.on("connect.cleanup",function(r){i.cleanUp(r.context)})}p1.$inject=["injector","eventBus","canvas"];const vg={__depends__:[ni,Ei,Ji],__init__:["connectPreview"],connect:["type",f1],connectPreview:["type",p1]};var V5="djs-dragger";function Xi(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Xi.$inject=["injector","canvas","graphicsFactory","elementFactory"];Xi.prototype.drawPreview=function(e,t,n){n=n||{};var i=e.connectionPreviewGfx,r=e.getConnection,o=n.source,s=n.target,a=n.waypoints,c=n.connectionStart,l=n.connectionEnd,u=n.noLayout,f=n.noCropping,p=n.noNoop,h,d=this;if(i||(i=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Ku(i),r||(r=e.getConnection=W5(function(g,m,E){return d.getConnection(g,m,E)})),t&&(h=r(t,o,s)),!h){!p&&this.drawNoopPreview(i,n);return}h.waypoints=a||[],this._layouter&&!u&&(h.waypoints=this._layouter.layoutConnection(h,{source:o,target:s,connectionStart:c,connectionEnd:l,waypoints:n.waypoints||h.waypoints})),(!h.waypoints||!h.waypoints.length)&&(h.waypoints=[o?he(o):c,s?he(s):l]),this._connectionDocking&&(o||s)&&!f&&(h.waypoints=this._connectionDocking.getCroppedWaypoints(h,o,s)),this._graphicsFactory.drawConnection(i,h,{stroke:"var(--element-dragger-color)"})};Xi.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,r=t.connectionStart||he(n),o=t.connectionEnd||he(i),s=this.cropWaypoints(r,o,n,i),a=this.createNoopConnection(s[0],s[1]);me(e,a)};Xi.prototype.cropWaypoints=function(e,t,n,i){var r=this._graphicsFactory,o=n&&r.getShapePath(n),s=i&&r.getShapePath(i),a=r.getConnectionPath({waypoints:[e,t]});return e=n&&wh(o,a,!0)||e,t=i&&wh(s,a,!1)||t,[e,t]};Xi.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&vt(e.connectionPreviewGfx)};Xi.prototype.getConnection=function(e){var t=G5(e);return this._elementFactory.createConnection(t)};Xi.prototype.createConnectionPreviewGfx=function(){var e=ae("g");return ie(e,{pointerEvents:"none"}),Ae(e).add(V5),me(this._canvas.getActiveLayer(),e),e};Xi.prototype.createNoopConnection=function(e,t){return qu([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function W5(e){var t={};return function(n){var i=JSON.stringify(n),r=t[i];return r||(r=t[i]=e.apply(null,arguments)),r}}function G5(e){return Ct(e)?e:{}}const K5={__init__:["connectionPreview"],connectionPreview:["type",Xi]},q5=new Tc("ps");var Y5=["marker-start","marker-mid","marker-end"],J5=["circle","ellipse","line","path","polygon","polyline","path","rect"];function jr(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i}jr.$inject=["elementRegistry","eventBus","canvas","styles"];jr.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};jr.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};jr.prototype.addDragger=function(e,t,n,i="djs-dragger"){n=n||this.getGfx(e);var r=nx(n),o=n.getBoundingClientRect();return this._cloneMarkers(yo(r),i),ie(r,this._styles.cls(i,[],{x:o.top,y:o.left})),me(t,r),ie(r,"data-preview-support-element-id",e.id),r};jr.prototype.addFrame=function(e,t){var n=ae("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return me(t,n),ie(n,"data-preview-support-element-id",e.id),n};jr.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var i=this;e.childNodes&&e.childNodes.forEach(r=>{i._cloneMarkers(r,t,n)}),ej(e)&&Y5.forEach(function(r){if(ie(e,r)){var o=X5(e,r,i._canvas.getContainer());o&&i._cloneMarker(n,e,o,r,t)}})};jr.prototype._cloneMarker=function(e,t,n,i,r="djs-dragger"){var o=[n.id,r,q5.next()].join("-"),s=Fe("marker#"+n.id,e);e=e||this._canvas._svg;var a=s||nx(n);a.id=o,Ae(a).add(r);var c=Fe(":scope > defs",e);c||(c=ae("defs"),me(e,c)),me(c,a);var l=Q5(a.id);ie(t,i,l)};function X5(e,t,n){var i=Z5(ie(e,t));return Fe("marker#"+i,n||document)}function Z5(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function Q5(e){return"url(#"+e+")"}function ej(e){return J5.indexOf(e.nodeName)!==-1}const Xs={__init__:["previewSupport"],previewSupport:["type",jr]},vl="complex-preview";class h1{constructor(t,n,i){this._canvas=t,this._graphicsFactory=n,this._previewSupport=i,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:i=[],removed:r=[],resized:o=[]}=t,s=this._canvas.getLayer(vl);n.filter(a=>!tj(a)).forEach(a=>{let c;He(a)?(c=this._graphicsFactory._createContainer("connection",ae("g")),this._graphicsFactory.drawConnection(yo(c),a)):(c=this._graphicsFactory._createContainer("shape",ae("g")),this._graphicsFactory.drawShape(yo(c),a),kt(c,a.x,a.y)),this._previewSupport.addDragger(a,s,c)}),i.forEach(({element:a,delta:c})=>{this._previewSupport.addDragger(a,s,void 0,"djs-dragging"),this._canvas.addMarker(a,"djs-element-hidden"),this._markers.push([a,"djs-element-hidden"]);const l=this._previewSupport.addDragger(a,s);He(a)?kt(l,c.x,c.y):kt(l,a.x+c.x,a.y+c.y)}),r.forEach(a=>{this._previewSupport.addDragger(a,s,void 0,"djs-dragging"),this._canvas.addMarker(a,"djs-element-hidden"),this._markers.push([a,"djs-element-hidden"])}),o.forEach(({shape:a,bounds:c})=>{this._canvas.addMarker(a,"djs-hidden"),this._markers.push([a,"djs-hidden"]),this._previewSupport.addDragger(a,s,void 0,"djs-dragging");const l=this._graphicsFactory._createContainer("shape",ae("g"));this._graphicsFactory.drawShape(yo(l),a,{width:c.width,height:c.height}),kt(l,c.x,c.y),this._previewSupport.addDragger(a,s,l)})}cleanUp(){Ku(this._canvas.getLayer(vl)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(vl)}hide(){this._canvas.hideLayer(vl)}}h1.$inject=["canvas","graphicsFactory","previewSupport"];function tj(e){return e.hidden}const nj={__depends__:[Xs],__init__:["complexPreview"],complexPreview:["type",h1]};var yg=["top","bottom","left","right"],yl=10;function _g(e,t){K.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(r){var o=r.context,s=o.connection,a=s.source,c=s.target,l=o.hints||{};l.createElementsBehavior!==!1&&(n(a),n(c))}),this.postExecuted(["label.create"],function(r){var o=r.context,s=o.shape,a=o.hints||{};a.createElementsBehavior!==!1&&n(s.labelTarget)}),this.postExecuted(["elements.create"],function(r){var o=r.context,s=o.elements,a=o.hints||{};a.createElementsBehavior!==!1&&s.forEach(function(c){n(c)})});function n(r){if(ef(r)&&!He(r)){var o=oj(r);o&&i(r,o)}}function i(r,o){var s=he(r),a=r.label,c=he(a);if(a.parent){var l=ce(r),u;switch(o){case"top":u={x:s.x,y:l.top-yl-a.height/2};break;case"left":u={x:l.left-yl-a.width/2,y:s.y};break;case"bottom":u={x:s.x,y:l.bottom+yl+a.height/2};break;case"right":u={x:l.right+yl+a.width/2,y:s.y};break}var f=Jn(u,c);t.moveShape(a,f)}}}re(_g,K);_g.$inject=["eventBus","modeling"];function ij(e){var t=e.host,n=he(e),i=Ut(n,t),r;i.indexOf("-")>=0?r=i.split("-"):r=[i];var o=yg.filter(function(s){return r.indexOf(s)===-1});return o}function rj(e){var t=he(e),n=[].concat(e.incoming.map(function(i){return i.waypoints[i.waypoints.length-2]}),e.outgoing.map(function(i){return i.waypoints[1]})).map(function(i){return d1(t,i)});return n}function oj(e){var t=he(e.label),n=he(e),i=d1(n,t);if(sj(i)){var r=rj(e);if(e.host){var o=ij(e);r=r.concat(o)}var s=yg.filter(function(a){return r.indexOf(a)===-1});if(s.indexOf(i)===-1)return s[0]}}function d1(e,t){return Ut(t,e,5)}function sj(e){return yg.indexOf(e)!==-1}function bg(e){K.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,i=t.shape;t.position||(w(i,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-i.height/2}:t.position={x:n.x+n.width+80+i.width/2,y:n.y+n.height/2})},!0)}re(bg,K);bg.$inject=["eventBus"];function wg(e,t){e.invoke(K,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape,o=Se(r.incoming.concat(r.outgoing),function(s){return w(s,"bpmn:Association")});M(o,function(s){t.moveConnection(s,{x:0,y:0},i)})},!0)}re(wg,K);wg.$inject=["injector","modeling"];var F_=500;function mf(e,t){t.invoke(K,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",F_,function(i){var r=i.elements;r=r.filter(function(o){var s=o.host;return H_(o,s)}),r.length===1&&r.map(function(o){return r.indexOf(o)}).forEach(function(o){var s=r[o];i.elements[o]=n._replaceShape(r[o],s)})},!0),this.preExecute("elements.move",F_,function(i){var r=i.shapes,o=i.newHost;if(r.length===1){var s=r[0];H_(s,o)&&(i.shapes=[n._replaceShape(s,o)])}},!0)}mf.$inject=["bpmnReplace","injector"];re(mf,K);mf.prototype._replaceShape=function(e,t){var n=aj(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function aj(e){var t=J(e),n=t.eventDefinitions;return n&&n[0]}function H_(e,t){return!Oe(e)&&Ce(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function Eg(e,t){K.call(this,e);function n(i){return Se(i.attachers,function(r){return w(r,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(i){var r=i.context.source,o=i.context.target,s=n(o);w(r,"bpmn:EventBasedGateway")&&w(o,"bpmn:ReceiveTask")&&s.length>0&&t.removeElements(s)}),this.postExecute("connection.reconnect",function(i){var r=i.context.oldSource,o=i.context.newSource;w(r,"bpmn:Gateway")&&w(o,"bpmn:EventBasedGateway")&&M(o.outgoing,function(s){var a=s.target,c=n(a);w(a,"bpmn:ReceiveTask")&&c.length>0&&t.removeElements(c)})})}Eg.$inject=["eventBus","modeling"];re(Eg,K);function xg(e,t,n){K.call(this,e),this.preExecute("shape.replace",a,!0),this.postExecuted("shape.replace",c,!0),this.preExecute("connection.create",r,!0),this.postExecuted("connection.delete",i,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",s,!0);function i(m){const E=m.source,x=m.target;ts(E)&&ga(x)&&u(x)}function r(m){const E=m.connection,x=m.source,b=m.target;ts(x)&&_l(b)&&(l(b),p(x,[E]))}function o(m){const E=m.newTarget,x=m.oldSource,b=m.oldTarget;if(b!==E){const y=x;ga(b)&&u(b),ts(y)&&_l(E)&&l(E)}}function s(m){const{element:E}=m;ga(E)?(f(E),h(E)):_l(E)&&d(E)}function a(m){const{newData:E,oldShape:x}=m;if(ts(m.oldShape)&&E.eventDefinitionType!=="bpmn:CompensateEventDefinition"||E.type!=="bpmn:BoundaryEvent"){const b=x.outgoing.find(({target:y})=>ga(y));b&&b.target&&(m._connectionTarget=b.target)}else if(!ts(m.oldShape)&&E.eventDefinitionType==="bpmn:CompensateEventDefinition"&&E.type==="bpmn:BoundaryEvent"){const b=x.outgoing.find(({target:y})=>_l(y));b&&b.target&&(m._connectionTarget=b.target),g(x)}}function c(m){const{_connectionTarget:E,newShape:x}=m;E&&t.connect(x,E)}function l(m){t.updateProperties(m,{isForCompensation:!0})}function u(m){t.updateProperties(m,{isForCompensation:void 0})}function f(m){for(const E of m.incoming)n.canConnect(E.source,m)||t.removeConnection(E);for(const E of m.outgoing)n.canConnect(m,E.target)||t.removeConnection(E)}function p(m,E){m.outgoing.filter(y=>w(y,"bpmn:Association")).filter(y=>ga(y.target)&&!E.includes(y)).forEach(y=>t.removeConnection(y))}function h(m){const E=m.attachers.slice();E.length&&t.removeElements(E)}function d(m){const E=m.incoming.filter(x=>ts(x.source));t.removeElements(E)}function g(m){const E=m.outgoing.filter(x=>w(x,"bpmn:SequenceFlow"));t.removeElements(E)}}re(xg,K);xg.$inject=["eventBus","modeling","bpmnRules"];function ga(e){const t=J(e);return t&&t.get("isForCompensation")}function ts(e){return e&&w(e,"bpmn:BoundaryEvent")&&Us(e,"bpmn:CompensateEventDefinition")}function _l(e){return e&&w(e,"bpmn:Activity")&&!Ft(e)}function Sg(e){e.invoke(K,this),this.preExecute("shape.create",1500,function(t){var n=t.context,i=n.parent,r=n.shape;w(i,"bpmn:Lane")&&!w(r,"bpmn:Lane")&&(n.parent=Ps(i,"bpmn:Participant"))})}Sg.$inject=["injector"];re(Sg,K);function Cg(e,t){K.call(this,e),this.preExecute("shape.create",function(n){var i=n.context,r=i.shape;if(w(r,"bpmn:DataObjectReference")&&r.type!=="label"){var o=t.create("bpmn:DataObject");r.businessObject.dataObjectRef=o}})}Cg.$inject=["eventBus","bpmnFactory"];re(Cg,K);var Bh=20,jh=20,g1=30,bl=2e3;function Rg(e,t,n){K.call(this,t),t.on(["create.start","shape.move.start"],bl,function(r){var o=r.context,s=o.shape,a=e.getRootElement();if(!(!w(s,"bpmn:Participant")||!w(a,"bpmn:Process")||!a.children.length)){var c=a.children.filter(function(f){return!w(f,"bpmn:Group")&&!Oe(f)&&!He(f)});if(c.length){var l=yt(c),u=cj(s,l);$(s,u),o.createConstraints=lj(s,l)}}}),t.on("create.start",bl,function(r){var o=r.context,s=o.shape,a=e.getRootElement(),c=e.getGraphics(a);function l(u){u.element=a,u.gfx=c}w(s,"bpmn:Participant")&&w(a,"bpmn:Process")&&(t.on("element.hover",bl,l),t.once("create.cleanup",function(){t.off("element.hover",l)}))});function i(){var r=e.getRootElement();return w(r,"bpmn:Collaboration")?r:n.makeCollaboration()}this.preExecute("elements.create",bl,function(r){var o=r.elements,s=r.parent,a=uj(o),c;a&&w(s,"bpmn:Process")&&(r.parent=i(),c=r.hints=r.hints||{},c.participant=a,c.process=s,c.processRef=J(a).get("processRef"))},!0),this.preExecute("shape.create",function(r){var o=r.parent,s=r.shape;w(s,"bpmn:Participant")&&w(o,"bpmn:Process")&&(r.parent=i(),r.process=o,r.processRef=J(s).get("processRef"))},!0),this.execute("shape.create",function(r){var o=r.hints||{},s=r.process||o.process,a=r.shape,c=o.participant;s&&(!c||a===c)&&J(a).set("processRef",J(s))},!0),this.revert("shape.create",function(r){var o=r.hints||{},s=r.process||o.process,a=r.processRef||o.processRef,c=r.shape,l=o.participant;s&&(!l||c===l)&&J(c).set("processRef",a)},!0),this.postExecute("shape.create",function(r){var o=r.hints||{},s=r.process||r.hints.process,a=r.shape,c=o.participant;if(s){var l=s.children.slice();c?a===c&&n.moveElements(l,{x:0,y:0},c):n.moveElements(l,{x:0,y:0},a)}},!0)}Rg.$inject=["canvas","eventBus","modeling"];re(Rg,K);function cj(e,t){t={width:t.width+Bh*2+g1,height:t.height+jh*2};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function lj(e,t){return t=ce(t),{bottom:t.top+e.height/2-jh,left:t.right-e.width/2+Bh,top:t.bottom-e.height/2+jh,right:t.left+e.width/2-Bh-g1}}function uj(e){return Me(e,function(t){return w(t,"bpmn:Participant")})}var z_="__targetRef_placeholder";function Tg(e,t){K.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],U_(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],U_(o));function n(s,a,c){var l=s.get("dataInputAssociations");return Me(l,function(u){return u!==c&&u.targetRef===a})}function i(s,a){var c=s.get("properties"),l=Me(c,function(u){return u.name===z_});return!l&&a&&(l=t.create("bpmn:Property",{name:z_}),_t(c,l)),l}function r(s,a){var c=i(s);c&&(n(s,c,a)||pt(s.get("properties"),c))}function o(s){var a=s.context,c=a.connection,l=c.businessObject,u=c.target,f=u&&u.businessObject,p=a.newTarget,h=p&&p.businessObject,d=a.oldTarget||a.target,g=d&&d.businessObject,m=c.businessObject,E;g&&g!==f&&r(g,l),h&&h!==f&&r(h,l),f?(E=i(f,!0),m.targetRef=E):m.targetRef=null}}Tg.$inject=["eventBus","bpmnFactory"];re(Tg,K);function U_(e){return function(t){var n=t.context,i=n.connection;if(w(i,"bpmn:DataInputAssociation"))return e(t)}}function vf(e){this._bpmnUpdater=e}vf.$inject=["bpmnUpdater"];vf.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.newSemanticParent,r=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};vf.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.oldSemanticParent,r=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};function Pg(e,t,n,i){K.call(this,i),t.registerHandler("dataStore.updateContainment",vf);function r(){return n.filter(function(a){return w(a,"bpmn:Participant")&&J(a).processRef})[0]}function o(a){return a.children.filter(function(c){return w(c,"bpmn:DataStoreReference")&&!c.labelTarget})}function s(a,c){var l=a.businessObject||a;if(c=c||r(),c){var u=c.businessObject||c;t.execute("dataStore.updateContainment",{dataStoreBo:l,dataStoreDi:ke(a),newSemanticParent:u.processRef||u,newDiParent:ke(c)})}}this.preExecute("shape.create",function(a){var c=a.context,l=c.shape;w(l,"bpmn:DataStoreReference")&&l.type!=="label"&&(c.hints||(c.hints={}),c.hints.autoResize=!1)}),this.preExecute("elements.move",function(a){var c=a.context,l=c.shapes,u=l.filter(function(f){return w(f,"bpmn:DataStoreReference")});u.length&&(c.hints||(c.hints={}),c.hints.autoResize=l.filter(function(f){return!w(f,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(a){var c=a.context,l=c.shape,u=l.parent;w(l,"bpmn:DataStoreReference")&&l.type!=="label"&&w(u,"bpmn:Collaboration")&&s(l)}),this.postExecute("shape.move",function(a){var c=a.context,l=c.shape,u=c.oldParent,f=l.parent;if(!w(u,"bpmn:Collaboration")&&w(l,"bpmn:DataStoreReference")&&l.type!=="label"&&w(f,"bpmn:Collaboration")){var p=w(u,"bpmn:Participant")?u:pj(u,"bpmn:Participant");s(l,p)}}),this.postExecute("shape.delete",function(a){var c=a.context,l=c.shape,u=e.getRootElement();Ce(l,["bpmn:Participant","bpmn:SubProcess"])&&w(u,"bpmn:Collaboration")&&o(u).filter(function(f){return fj(f,l)}).forEach(function(f){s(f)})}),this.postExecute("canvas.updateRoot",function(a){var c=a.context,l=c.oldRoot,u=c.newRoot,f=o(l);f.forEach(function(p){w(u,"bpmn:Process")&&s(p,u)})})}Pg.$inject=["canvas","commandStack","elementRegistry","eventBus"];re(Pg,K);function fj(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function pj(e,t){for(;e.parent;){if(w(e.parent,t))return e.parent;e=e.parent}}var wu=Math.max,Eu=Math.min,hj=20;function m1(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function dj(e,t,n){var i=n.x,r=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+r,o.height=e.height-r):t.indexOf("s")!==-1&&(o.height=e.height+r),t.indexOf("e")!==-1?o.width=e.width+i:t.indexOf("w")!==-1&&(o.x=e.x+i,o.width=e.width-i),o}function gj(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function wl(e,t,n){var i=t[e],r=n.min&&n.min[e],o=n.max&&n.max[e];return pe(r)&&(i=(/top|left/.test(e)?Eu:wu)(i,r)),pe(o)&&(i=(/top|left/.test(e)?wu:Eu)(i,o)),i}function mj(e,t){if(!t)return e;var n=ce(e);return Ju({top:wl("top",n,t),right:wl("right",n,t),bottom:wl("bottom",n,t),left:wl("left",n,t)})}function vj(e,t,n,i){var r=ce(t),o={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},s=i?ce(i):o,a={top:Eu(o.top,s.top),left:Eu(o.left,s.left),bottom:wu(o.bottom,s.bottom),right:wu(o.right,s.right)};return Ju(a)}function ma(e,t){return typeof e<"u"?e:hj}function yj(e,t){var n,i,r,o;return typeof t=="object"?(n=ma(t.left),i=ma(t.right),r=ma(t.top),o=ma(t.bottom)):n=i=r=o=ma(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+o}}function _j(e){return!(e.waypoints||e.type==="label")}function v1(e,t){var n;if(e.length===void 0?n=Se(e.children,_j):n=e,n.length)return yj(yt(n),t)}var or=Math.abs;function bj(e,t){return m1(ce(t),ce(e))}var wj=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],Pn=30;function yf(e,t){return t=t||[],e.children.filter(function(n){w(n,"bpmn:Lane")&&(yf(n,t),t.push(n))}),t}function Fr(e){return e.children.filter(function(t){return w(t,"bpmn:Lane")})}function An(e){return Ps(e,wj)||e}function Ej(e,t){var n=An(e),i=w(n,"bpmn:Process")?[]:[n],r=yf(n,i),o=ce(e),s=ce(t),a=bj(e,t),c=[],l=wt(e);return r.forEach(function(u){if(u!==e){var f=l?0:a.top,p=l?a.right:0,h=l?0:a.bottom,d=l?a.left:0,g=ce(u);a.top&&(or(g.bottom-o.top)<10&&(h=s.top-g.bottom),or(g.top-o.top)<5&&(f=s.top-g.top)),a.left&&(or(g.right-o.left)<10&&(p=s.left-g.right),or(g.left-o.left)<5&&(d=s.left-g.left)),a.bottom&&(or(g.top-o.bottom)<10&&(f=s.bottom-g.top),or(g.bottom-o.bottom)<5&&(h=s.bottom-g.bottom)),a.right&&(or(g.left-o.right)<10&&(d=s.right-g.left),or(g.right-o.right)<5&&(p=s.right-g.right)),(f||p||h||d)&&c.push({shape:u,newBounds:gj(u,{top:f,right:p,bottom:h,left:d})})}}),c}var xj=500;function Ag(e,t){K.call(this,e);function n(i,r){var o=wt(i),s=Fr(r),a=[],c=[],l=[],u=[];if(Oo(s,function(m){return o?m.y>i.y?c.push(m):a.push(m):m.x>i.x?u.push(m):l.push(m),m.children}),!!s.length){var f;o?c.length&&a.length?f=i.height/2:f=i.height:u.length&&l.length?f=i.width/2:f=i.width;var p,h,d,g;a.length&&(p=t.calculateAdjustments(a,"y",f,i.y-10),t.makeSpace(p.movingShapes,p.resizingShapes,{x:0,y:f},"s")),c.length&&(h=t.calculateAdjustments(c,"y",-f,i.y+i.height+10),t.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:-f},"n")),l.length&&(d=t.calculateAdjustments(l,"x",f,i.x-10),t.makeSpace(d.movingShapes,d.resizingShapes,{x:f,y:0},"e")),u.length&&(g=t.calculateAdjustments(u,"x",-f,i.x+i.width+10),t.makeSpace(g.movingShapes,g.resizingShapes,{x:-f,y:0},"w"))}}this.postExecuted("shape.delete",xj,function(i){var r=i.context,o=r.hints,s=r.shape,a=r.oldParent;w(s,"bpmn:Lane")&&(o&&o.nested||n(s,a))})}Ag.$inject=["eventBus","spaceTool"];re(Ag,K);var V_=500;function _f(e,t){t.invoke(K,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",V_,function(i){var r=i.elements;r.filter(function(o){var s=o.host;return W_(o,s)}).map(function(o){return r.indexOf(o)}).forEach(function(o){i.elements[o]=n._replaceShape(r[o])})},!0),this.preExecute("elements.move",V_,function(i){var r=i.shapes,o=i.newHost;r.forEach(function(s,a){var c=s.host;W_(s,Cj(r,c)?c:o)&&(r[a]=n._replaceShape(s))})},!0)}_f.$inject=["bpmnReplace","injector"];re(_f,K);_f.prototype._replaceShape=function(e){var t=Sj(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function Sj(e){var t=J(e),n=t.eventDefinitions;return n&&n[0]}function W_(e,t){return!Oe(e)&&w(e,"bpmn:BoundaryEvent")&&!t}function Cj(e,t){return e.indexOf(t)!==-1}function kg(e,t,n){K.call(this,e);function i(r,o,s){var a=o.waypoints,c,l,u,f,p,h,d,g=r.outgoing.slice(),m=r.incoming.slice(),E;pe(s.width)?E=he(s):E=s;var x=Mh(a,E);if(x){if(c=a.slice(0,x.index),l=a.slice(x.index+(x.bendpoint?1:0)),!c.length||!l.length)return;u=x.bendpoint?a[x.index]:E,(c.length===1||!G_(r,c[c.length-1]))&&c.push(K_(u)),(l.length===1||!G_(r,l[0]))&&l.unshift(K_(u))}f=o.source,p=o.target,t.canConnect(f,r,o)&&(n.reconnectEnd(o,r,c||E),h=o),t.canConnect(r,p,o)&&(h?d=n.connect(r,p,{type:o.type,waypoints:l}):(n.reconnectStart(o,r,l||E),d=o));var b=[].concat(h&&Se(m,function(y){return y.source===h.source})||[],d&&Se(g,function(y){return y.target===d.target})||[]);b.length&&n.removeElements(b)}this.preExecute("elements.move",function(r){var o=r.newParent,s=r.shapes,a=r.delta,c=s[0];if(!(!c||!o)){o&&o.waypoints&&(r.newParent=o=o.parent);var l=he(c),u={x:l.x+a.x,y:l.y+a.y},f=Me(o.children,function(p){var h=t.canInsert(s,p);return h&&Mh(p.waypoints,u)});f&&(r.targetFlow=f,r.position=u)}},!0),this.postExecuted("elements.move",function(r){var o=r.shapes,s=r.targetFlow,a=r.position;s&&i(o[0],s,a)},!0),this.preExecute("shape.create",function(r){var o=r.parent,s=r.shape;t.canInsert(s,o)&&(r.targetFlow=o,r.parent=o.parent)},!0),this.postExecuted("shape.create",function(r){var o=r.shape,s=r.targetFlow,a=r.position;s&&i(o,s,a)},!0)}re(kg,K);kg.$inject=["eventBus","bpmnRules","modeling"];function G_(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function K_(e){return $({},e)}function Og(e,t){K.call(this,e),this.preExecuted("connection.create",function(n){var i=n.context,r=i.connection,o=i.source,s=i.target,a=i.hints;if(!(a&&a.createElementsBehavior===!1)&&ns(r)){var c=[];w(o,"bpmn:EventBasedGateway")?c=s.incoming.filter(l=>l!==r&&ns(l)):c=s.incoming.filter(l=>l!==r&&ns(l)&&w(l.source,"bpmn:EventBasedGateway")),c.forEach(function(l){t.removeConnection(l)})}}),this.preExecuted("shape.replace",function(n){var i=n.context,r=i.newShape;if(w(r,"bpmn:EventBasedGateway")){var o=r.outgoing.filter(ns).reduce(function(s,a){return s.includes(a.target)?s:s.concat(a.target)},[]);o.forEach(function(s){s.incoming.filter(ns).forEach(function(a){const c=s.incoming.filter(ns).filter(function(l){return l.source===r});(a.source!==r||c.length>1)&&t.removeConnection(a)})})}})}Og.$inject=["eventBus","modeling"];re(Og,K);function ns(e){return w(e,"bpmn:SequenceFlow")}var El=1500,q_=2e3;function y1(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],El,function(i){var r=i.context,o=r.shape||i.shape,s=i.hover;w(s,"bpmn:Lane")&&!Ce(o,["bpmn:Lane","bpmn:Participant"])&&(i.hover=An(s),i.hoverGfx=e.getGraphics(i.hover));var a=n.getRootElement();s!==a&&(o.labelTarget||Ce(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(i.hover=a,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],El,function(i){var r=i.hover;w(r,"bpmn:Lane")&&(i.hover=An(r)||r,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["bendpoint.move.hover"],El,function(i){var r=i.context,o=i.hover,s=r.type;w(o,"bpmn:Lane")&&/reconnect/.test(s)&&(i.hover=An(o)||o,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.start"],El,function(i){var r=i.context,o=r.start;w(o,"bpmn:Lane")&&(r.start=An(o)||o)}),t.on("shape.move.start",q_,function(i){var r=i.shape;w(r,"bpmn:Lane")&&(i.shape=An(r)||r)}),t.on("spaceTool.move",q_,function(i){var r=i.hover;r&&w(r,"bpmn:Lane")&&(i.hover=An(r))})}y1.$inject=["elementRegistry","eventBus","canvas"];function Rj(e){return e.create("bpmn:Category")}function Tj(e){return e.create("bpmn:CategoryValue")}function Pj(e,t,n){return _t(t.get("categoryValue"),e),e.$parent=t,_t(n.get("rootElements"),t),t.$parent=n,e}function Aj(e){var t=e.$parent;return t&&(pt(t.get("categoryValue"),e),e.$parent=null),e}function kj(e){var t=e.$parent;return t&&(pt(t.get("rootElements"),e),e.$parent=null),e}var Y_=770;function Dg(e,t,n,i,r,o){r.invoke(K,this);function s(){return n.filter(function(d){return w(d,"bpmn:Group")})}function a(d,g){return d.some(function(m){var E=J(m),x=E.categoryValueRef&&E.categoryValueRef.$parent;return x===g})}function c(d,g){return d.some(function(m){var E=J(m);return E.categoryValueRef===g})}function l(d,g,m){var E=s().filter(function(x){return x.businessObject!==m});g&&!a(E,g)&&kj(g),d&&!c(E,d)&&Aj(d)}function u(d,g){return Pj(d,g,t.getDefinitions())}function f(d,g){var m=J(d),E=m.categoryValueRef;E||(E=m.categoryValueRef=g.categoryValue=g.categoryValue||Tj(e));var x=E.$parent;x||(x=E.$parent=g.category=g.category||Rj(e)),u(E,x,t.getDefinitions())}function p(d,g){var m=g.category,E=g.categoryValue,x=J(d);E?(x.categoryValueRef=null,l(E,m,x)):l(null,x.categoryValueRef.$parent,x)}this.execute("label.create",function(d){var g=d.context,m=g.labelTarget;w(m,"bpmn:Group")&&f(m,g)}),this.revert("label.create",function(d){var g=d.context,m=g.labelTarget;w(m,"bpmn:Group")&&p(m,g)}),this.execute("shape.delete",function(d){var g=d.context,m=g.shape,E=J(m);if(!(!w(m,"bpmn:Group")||m.labelTarget)){var x=g.categoryValue=E.categoryValueRef,b;x&&(b=g.category=x.$parent,l(x,b,E),E.categoryValueRef=null)}}),this.reverted("shape.delete",function(d){var g=d.context,m=g.shape;if(!(!w(m,"bpmn:Group")||m.labelTarget)){var E=g.category,x=g.categoryValue,b=J(m);x&&(b.categoryValueRef=x,u(x,E))}}),this.execute("shape.create",function(d){var g=d.context,m=g.shape;!w(m,"bpmn:Group")||m.labelTarget||J(m).categoryValueRef&&f(m,g)}),this.reverted("shape.create",function(d){var g=d.context,m=g.shape;!w(m,"bpmn:Group")||m.labelTarget||J(m).categoryValueRef&&p(m,g)});function h(d,g){var m=e.create(d.$type);return o.copyElement(d,m,null,g)}i.on("copyPaste.copyElement",Y_,function(d){var g=d.descriptor,m=d.element;if(!(!w(m,"bpmn:Group")||m.labelTarget)){var E=J(m);if(E.categoryValueRef){var x=E.categoryValueRef;g.categoryValue=h(x,!0),x.$parent&&(g.category=h(x.$parent,!0))}}}),i.on("copyPaste.pasteElement",Y_,function(d){var g=d.descriptor,m=g.businessObject,E=g.categoryValue,x=g.category;E&&(E=m.categoryValueRef=h(E)),x&&(E.$parent=h(x)),delete g.category,delete g.categoryValue})}Dg.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];re(Dg,K);function Fh(e,t,n,i){var r,o,s,a,c;return r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),r==0?null:(o=e.y-n.y,s=e.x-n.x,c=(i.x-n.x)*o-(i.y-n.y)*s,a=c/r,{x:Math.round(e.x+a*(t.x-e.x)),y:Math.round(e.y+a*(t.y-e.y))})}function _1(e){function t(i,r,o){var s={x:o.x,y:o.y-50},a={x:o.x-50,y:o.y},c=Fh(i,r,o,s),l=Fh(i,r,o,a),u;c&&l?J_(c,o)>J_(l,o)?u=l:u=c:u=c||l,i.original=u}function n(i){var r=i.waypoints;t(r[0],r[1],he(i.source)),t(r[r.length-1],r[r.length-2],he(i.target))}e.on("bpmnElement.added",function(i){var r=i.element;r.waypoints&&n(r)})}_1.$inject=["eventBus"];function J_(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Mg(e){K.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=n.context.shape,r=J(i),o=ke(i);if(Ce(r,t)){var s=o.get("isHorizontal");s===void 0&&(s=!0),o.set("isHorizontal",s)}})}Mg.$inject=["eventBus"];re(Mg,K);var b1=Math.sqrt,w1=Math.min,Oj=Math.max,X_=Math.abs;function Z_(e){return Math.pow(e,2)}function va(e,t){return b1(Z_(e.x-t.x)+Z_(e.y-t.y))}function Dj(e,t){var n=0,i,r,o,s,a,c,l,u,f,p,h;for(n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],eb(i,r)?l=[i]:(o=va(e,i),s=va(e,r),c=w1(o,s),l=Mj(i,r,e,c)),l.length<1)throw new Error("expected between [1, 2] circle -> line intersections");l.length===1&&(u={type:"bendpoint",position:l[0],segmentIndex:n,bendpointIndex:eb(i,l[0])?n:n+1}),l.length===2&&(a=Nj(l[0],l[1]),u={type:"segment",position:a,segmentIndex:n,relativeLocation:va(i,a)/va(i,r)}),f=va(u.position,e),(!h||p>f)&&(h=u,p=f)}return h}function Mj(e,t,n,i){var r=t.x-e.x,o=t.y-e.y,s=n.x-e.x,a=n.y-e.y,c=r*r+o*o,l=r*s+o*a,u=s*s+a*a-i*i,f=l/c,p=u/c,h=f*f-p;if(h<0&&h>-1e-6&&(h=0),h<0)return[];var d=b1(h),g=-f+d,m=-f-d,E={x:e.x-r*g,y:e.y-o*g};if(h===0)return[E];var x={x:e.x-r*m,y:e.y-o*m};return[E,x].filter(function(b){return Ij(b,e,t)})}function Ij(e,t,n){return Q_(e.x,t.x,n.x)&&Q_(e.y,t.y,n.y)}function Q_(e,t,n){return e>=w1(t,n)-xu&&e<=Oj(t,n)+xu}function Nj(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var xu=.1;function eb(e,t){return X_(e.x-t.x)<=xu&&X_(e.y-t.y)<=xu}function $j(e,t,n,i){var r=n.segmentIndex,o=t.length-e.length;if(i.segmentMove){var s=i.segmentMove.segmentStartIndex,a=i.segmentMove.newSegmentStartIndex;return r===s?a:r>=a?r+o<a?a:r+o:r}if(i.bendpointMove){var c=i.bendpointMove.insert,l=i.bendpointMove.bendpointIndex,u;if(o===0)return r;if(r>=l&&(u=c?r+1:r-1),r<l&&(u=r,c&&n.type!=="bendpoint"&&l-1===r)){var f=x1(t,l);f<n.relativeLocation&&u++}return u}return o===0?r:i.connectionStart&&r===0?0:i.connectionEnd&&r===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function E1(e,t,n,i){var r=0,o=0,s={point:e,delta:{x:0,y:0}},a=Dj(e,n),c=a.segmentIndex,l=$j(n,t,a,i);if(l<0||l>t.length-2||l===null)return s;var u=tb(n,c),f=tb(t,l),p=a.position,h=Bj(u,p),d=Lj(u,f);if(a.type==="bendpoint"){var g=t.length-n.length,m=a.bendpointIndex,E=n[m];if(t.indexOf(E)!==-1)return s;if(g===0){var x=t[m];return r=x.x-a.position.x,o=x.y-a.position.y,{delta:{x:r,y:o},point:{x:e.x+r,y:e.y+o}}}g<0&&m!==0&&m<n.length-1&&(h=x1(n,m))}var b={x:(f[1].x-f[0].x)*h+f[0].x,y:(f[1].y-f[0].y)*h+f[0].y},y=T5({x:e.x-p.x,y:e.y-p.y},d);return r=b.x+y.x-e.x,o=b.y+y.y-e.y,{point:Bi(b),delta:Bi({x:r,y:o})}}function x1(e,t){var n=_u(e[t-1],e[t]),i=_u(e[t],e[t+1]),r=n/(n+i);return r}function Lj(e,t){var n=C_(e),i=C_(t);return i-n}function tb(e,t){return[e[t],e[t+1]]}function Bj(e,t){var n=_u(e[0],e[1]),i=_u(e[0],t);return n===0?0:i/n}function jj(e,t,n,i){var r=he(e);return E1(r,t,n,i).delta}function kc(e,t,n){var i=Fa(t),r=Fa(n),o=Jn(e,i),s={x:o.x*(n.width/t.width),y:o.y*(n.height/t.height)};return Bi({x:r.x+s.x,y:r.y+s.y})}function nb(e,t,n){var i=Fa(e),r=Fa(t),o=Fa(n),s=Jn(e,i),a=Jn(i,r),c=Fj(i,t,n);if(c)return c;var l={x:a.x*(n.width/t.width),y:a.y*(n.height/t.height)},u={x:o.x+l.x,y:o.y+l.y};return Bi({x:u.x+s.x-e.x,y:u.y+s.y-e.y})}function Fj(e,t,n){var i=ce(t),r=ce(n);if(Hj(i,r))return null;var o=Ut(t,e),s,a,c;if(o==="top")s={x:0,y:r.bottom-i.bottom};else if(o==="bottom")s={x:0,y:r.top-i.top};else if(o==="right")s={x:r.left-i.left,y:0};else if(o==="left")s={x:r.right-i.right,y:0};else return null;return a={x:e.x+s.x,y:e.y+s.y},c=Ut(n,a),c!==o?null:s}function Hj(e,t){return zj(e,t)||Uj(e,t)}function zj(e,t){return e.right!==t.right&&e.left!==t.left}function Uj(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var ib="name",rb="text";function Ig(e,t,n,i){K.call(this,e),this.postExecute("element.updateProperties",r),this.postExecute("element.updateModdleProperties",s=>{J(s.context.element)===s.context.moddleElement&&r(s)});function r(s){var a=s.context,c=a.element,l=a.properties;if(ib in l&&t.updateLabel(c,l[ib]),rb in l&&w(c,"bpmn:TextAnnotation")){var u=i.getTextAnnotationBounds({x:c.x,y:c.y,width:c.width,height:c.height},l[rb]||"");t.updateLabel(c,l.text,u)}}this.postExecute(["shape.create","connection.create"],function(s){var a=s.context,c=a.hints||{};if(c.createElementsBehavior!==!1){var l=a.shape||a.connection;Oe(l)||!So(l)||ti(l)&&t.updateLabel(l,ti(l))}}),this.postExecute("shape.delete",function(s){var a=s.context,c=a.labelTarget,l=a.hints||{};c&&l.unsetLabel!==!1&&t.updateLabel(c,null,null,{removeShape:!1})});function o(s){var a=s.context,c=a.connection,l=c.label,u=$({},a.hints),f=a.newWaypoints||c.waypoints,p=a.oldWaypoints;return typeof u.startChanged>"u"&&(u.startChanged=!!u.connectionStart),typeof u.endChanged>"u"&&(u.endChanged=!!u.connectionEnd),jj(l,f,p,u)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(s){var a=s.context,c=a.hints||{};if(c.labelBehavior!==!1){var l=a.connection,u=l.label,f;!u||!u.parent||(f=o(s),t.moveShape(u,f))}}),this.postExecute(["shape.replace"],function(s){var a=s.context,c=a.newShape,l=a.oldShape,u=J(c);u&&So(u)&&l.label&&c.label&&(c.label.x=l.label.x,c.label.y=l.label.y)}),this.postExecute("shape.resize",function(s){var a=s.context,c=a.shape,l=a.newBounds,u=a.oldBounds;if(ef(c)){var f=c.label,p=he(f),h=Gj(u),d=Wj(p,h),g=Vj(d,u,l);t.moveShape(f,g)}})}re(Ig,K);Ig.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function Vj(e,t,n){var i=kc(e,t,n);return Bi(Jn(i,e))}function Wj(e,t){if(t.length){var n=Kj(e,t);return dg(e,n)}}function Gj(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function Kj(e,t){var n=t.map(function(r){return{line:r,distance:QS(e,r)}}),i=vi(n,"distance");return i[0].line}function qj(e,t,n,i){return E1(e,t,n,i).point}function Ng(e,t){K.call(this,e);function n(i,r){var o=i.context,s=o.connection,a=$({},o.hints),c=o.newWaypoints||s.waypoints,l=o.oldWaypoints;return typeof a.startChanged>"u"&&(a.startChanged=!!a.connectionStart),typeof a.endChanged>"u"&&(a.endChanged=!!a.connectionEnd),qj(r,c,l,a)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(i){var r=i.context,o=r.connection,s=o.outgoing,a=o.incoming;a.forEach(function(c){var l=c.waypoints[c.waypoints.length-1],u=n(i,l),f=[].concat(c.waypoints.slice(0,-1),[u]);t.updateWaypoints(c,f)}),s.forEach(function(c){var l=c.waypoints[0],u=n(i,l),f=[].concat([u],c.waypoints.slice(1));t.updateWaypoints(c,f)})}),this.postExecute(["connection.move"],function(i){var r=i.context,o=r.connection,s=o.outgoing,a=o.incoming,c=r.delta;a.forEach(function(l){var u=l.waypoints[l.waypoints.length-1],f={x:u.x+c.x,y:u.y+c.y},p=[].concat(l.waypoints.slice(0,-1),[f]);t.updateWaypoints(l,p)}),s.forEach(function(l){var u=l.waypoints[0],f={x:u.x+c.x,y:u.y+c.y},p=[].concat([f],l.waypoints.slice(1));t.updateWaypoints(l,p)})})}re(Ng,K);Ng.$inject=["eventBus","modeling"];function bf(e,t,n){var i=Ef(e),r=C1(i,t),o=i[0];return r.length?r[r.length-1]:kc(o.original||o,n,t)}function wf(e,t,n){var i=Ef(e),r=C1(i,t),o=i[i.length-1];return r.length?r[0]:kc(o.original||o,n,t)}function $g(e,t,n){var i=Ef(e),r=S1(t,n),o=i[0];return kc(o.original||o,r,t)}function Lg(e,t,n){var i=Ef(e),r=S1(t,n),o=i[i.length-1];return kc(o.original||o,r,t)}function S1(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function Ef(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function C1(e,t){var n=zt(e,Jj);return Se(n,function(i){return Yj(i,t)})}function Yj(e,t){return Ut(t,e,1)==="intersect"}function Jj(e){return e.original||e}function Bg(e,t){K.call(this,e),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(Xj(i,r)){var o=Zj(i);o.incoming.forEach(function(s){var a=wf(s,r,i);t.reconnectEnd(s,r,a)}),o.outgoing.forEach(function(s){var a=bf(s,r,i);t.reconnectStart(s,r,a)})}},!0)}Bg.$inject=["eventBus","modeling"];re(Bg,K);function Xj(e,t){return w(e,"bpmn:Participant")&&Te(e)&&w(t,"bpmn:Participant")&&!Te(t)}function Zj(e){var t=bc([e],!1),n=[],i=[];return t.forEach(function(r){r!==e&&(r.incoming.forEach(function(o){w(o,"bpmn:MessageFlow")&&n.push(o)}),r.outgoing.forEach(function(o){w(o,"bpmn:MessageFlow")&&i.push(o)}))},[]),{incoming:n,outgoing:i}}const Qj=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function R1(e){const t=J(e);if(!w(t,"bpmn:BoundaryEvent")&&!(w(t,"bpmn:StartEvent")&&Ft(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:Qj.some(i=>w(n[0],i))}function T1(e){return w(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function jg(e,t){e.invoke(K,this),this.postExecuted("shape.replace",function(n){const i=n.context.oldShape,r=n.context.newShape,o=n.context.hints;if(!R1(r))return;const s=T1(r);if(o.targetElement&&o.targetElement[s]!==void 0)return;const c=J(i).get(s),l=J(r).get(s);c!==l&&t.updateProperties(r,{[s]:c})})}jg.$inject=["injector","modeling"];re(jg,K);function Fg(e,t){K.call(this,e),this.preExecute("shape.resize",function(n){var i=n.shape,r=ke(i),o=r&&r.get("label"),s=o&&o.get("bounds");s&&t.updateModdleProperties(i,o,{bounds:void 0})},!0)}re(Fg,K);Fg.$inject=["eventBus","modeling"];function Hg(e,t,n){K.call(this,e),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(!(r.incoming.length!==1||r.outgoing.length!==1)){var o=r.incoming[0],s=r.outgoing[0];if(!(!w(o,"bpmn:SequenceFlow")||!w(s,"bpmn:SequenceFlow"))&&t.canConnect(o.source,s.target,o)){var a=e3(o.waypoints,s.waypoints);n.reconnectEnd(o,s.target,a)}}})}re(Hg,K);Hg.$inject=["eventBus","bpmnRules","modeling"];function is(e){return e.original||e}function e3(e,t){var n=Fh(is(e[e.length-2]),is(e[e.length-1]),is(t[1]),is(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[is(e[0]),is(t[t.length-1])]}function zg(e,t){K.call(this,e),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;w(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;if(i&&!i.businessObject.participants.length){var r=t.makeProcess(),o=i.children.slice();t.moveElements(o,{x:0,y:0},r)}},!0)}zg.$inject=["eventBus","modeling"];re(zg,K);function Ug(e,t,n,i){K.call(this,e);var r=i.get("dragging",!1);function o(c){var l=c.source,u=c.target,f=c.parent;if(f){var p,h;w(c,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(l,u)||(h=!0),n.canConnectMessageFlow(l,u)&&(p="bpmn:MessageFlow")),w(c,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(l,u)||(h=!0),n.canConnectSequenceFlow(l,u)&&(p="bpmn:SequenceFlow")),h&&t.removeConnection(c),p&&t.connect(l,u,{type:p,waypoints:c.waypoints.slice()})}}function s(c){var l=c.context,u=l.connection,f=l.newSource||u.source,p=l.newTarget||u.target,h,d;h=n.canConnect(f,p),!(!h||h.type===u.type)&&(d=t.connect(f,p,{type:h.type,associationDirection:h.associationDirection,waypoints:u.waypoints.slice()}),u.parent&&t.removeConnection(u),l.connection=d,r&&a(u,d))}function a(c,l){var u=r.context(),f=u&&u.payload.previousSelection,p;!f||!f.length||(p=f.indexOf(c),p!==-1&&f.splice(p,1,l))}this.postExecuted("elements.move",function(c){var l=c.closure,u=l.allConnections;M(u,o)},!0),this.preExecute("connection.reconnect",s),this.postExecuted("element.updateProperties",function(c){var l=c.context,u=l.properties,f=l.element,p=f.businessObject,h;u.default&&(h=Me(f.outgoing,Yn({id:f.businessObject.default.id})),h&&t.updateProperties(h,{conditionExpression:void 0})),u.conditionExpression&&p.sourceRef.default===p&&t.updateProperties(f.source,{default:void 0})})}re(Ug,K);Ug.$inject=["eventBus","modeling","bpmnRules","injector"];function xf(e,t,n,i,r,o){i.invoke(K,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(s){var a=s.context,c=a.parent,l=a.elements,u=dn(l,function(f,p){var h=t.canReplace([p],p.host||p.parent||c);return h?f.concat(h.replacements):f},[]);u.length&&this._replaceElements(l,u)},this),this.postExecuted(["elements.move"],500,function(s){var a=s.context,c=a.newParent,l=a.newHost,u=[];M(a.closure.topLevel,function(p){Ft(p)?u=u.concat(p.children):u=u.concat(p)}),u.length===1&&l&&(c=l);var f=t.canReplace(u,c);f&&this._replaceElements(u,f.replacements,l)},this),this.postExecute(["shape.replace"],1500,function(s){var a=s.context,c=a.oldShape,l=a.newShape,u=c.attachers,f;u&&u.length&&(f=t.canReplace(u,l),this._replaceElements(u,f.replacements))},this),this.postExecuted(["shape.replace"],1500,function(s){var a=s.context,c=a.oldShape,l=a.newShape;r.unclaimId(c.businessObject.id,c.businessObject),r.updateProperties(l,{id:c.id})})}re(xf,K);xf.prototype._replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;M(t,function(o){var s={type:o.newElementType},a=n.get(o.oldElementId),c=e.indexOf(a);e[c]=i.replaceElement(a,s,{select:!1})}),t&&r.select(e)};xf.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var t3=1500,n3={width:140,height:120},Vg={width:300,height:60},Wg={width:60,height:300},Ul={width:300,height:150},Vl={width:150,height:300},P1={width:140,height:120},A1={width:50,height:30};function k1(e){e.on("resize.start",t3,function(t){var n=t.context,i=n.shape,r=n.direction,o=n.balanced;(w(i,"bpmn:Lane")||w(i,"bpmn:Participant"))&&(n.resizeConstraints=a3(i,r,o)),w(i,"bpmn:SubProcess")&&Te(i)&&(n.minDimensions=P1),w(i,"bpmn:TextAnnotation")&&(n.minDimensions=A1)})}k1.$inject=["eventBus"];var sr=Math.abs,i3=Math.min,r3=Math.max;function O1(e,t,n,i){var r=e[t];e[t]=r===void 0?n:i(n,r)}function rs(e,t,n){return O1(e,t,n,i3)}function os(e,t,n){return O1(e,t,n,r3)}var o3={top:20,left:50,right:20,bottom:20},s3={top:50,left:20,right:20,bottom:20};function a3(e,t,n){var i=An(e),r=!0,o=!0,s=yf(i,[i]),a=ce(e),c={},l={},u=wt(e),f=u?Vg:Wg;/n/.test(t)?l.top=a.bottom-f.height:/e/.test(t)?l.right=a.left+f.width:/s/.test(t)?l.bottom=a.top+f.height:/w/.test(t)&&(l.left=a.right-f.width),s.forEach(function(d){var g=ce(d);u?(g.top<a.top-10&&(r=!1),g.bottom>a.bottom+10&&(o=!1)):(g.left<a.left-10&&(r=!1),g.right>a.right+10&&(o=!1)),/n/.test(t)&&(n&&sr(a.top-g.bottom)<10&&os(c,"top",g.top+f.height),sr(a.top-g.top)<5&&rs(l,"top",g.bottom-f.height)),/e/.test(t)&&(n&&sr(a.right-g.left)<10&&rs(c,"right",g.right-f.width),sr(a.right-g.right)<5&&os(l,"right",g.left+f.width)),/s/.test(t)&&(n&&sr(a.bottom-g.top)<10&&rs(c,"bottom",g.bottom-f.height),sr(a.bottom-g.bottom)<5&&os(l,"bottom",g.top+f.height)),/w/.test(t)&&(n&&sr(a.left-g.right)<10&&os(c,"left",g.left+f.width),sr(a.left-g.left)<5&&rs(l,"left",g.right-f.width))});var p=i.children.filter(function(d){return!d.hidden&&!d.waypoints&&(w(d,"bpmn:FlowElement")||w(d,"bpmn:Artifact"))}),h=u?o3:s3;return p.forEach(function(d){var g=ce(d);/n/.test(t)&&(!u||r)&&rs(l,"top",g.top-h.top),/e/.test(t)&&(u||o)&&os(l,"right",g.right+h.right),/s/.test(t)&&(!u||o)&&os(l,"bottom",g.bottom+h.bottom),/w/.test(t)&&(u||r)&&rs(l,"left",g.left-h.left)}),{min:l,max:c}}var ob=1001;function D1(e,t){e.on("resize.start",ob+500,function(n){var i=n.context,r=i.shape;(w(r,"bpmn:Lane")||w(r,"bpmn:Participant"))&&(i.balanced=!rc(n))}),e.on("resize.end",ob,function(n){var i=n.context,r=i.shape,o=i.canExecute,s=i.newBounds;if(w(r,"bpmn:Lane")||w(r,"bpmn:Participant"))return o&&(s=dx(s),t.resizeLane(r,s,i.balanced)),!1})}D1.$inject=["eventBus","modeling"];var c3=500;function Gg(e,t,n,i,r){n.invoke(K,this);function o(u){return Ce(u,["bpmn:ReceiveTask","bpmn:SendTask"])||l3(u,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function s(u){var f=e.getDefinitions(),p=f.get("rootElements");return!!Me(p,Yn({id:u.id}))}function a(u){if(w(u,"bpmn:ErrorEventDefinition"))return"errorRef";if(w(u,"bpmn:EscalationEventDefinition"))return"escalationRef";if(w(u,"bpmn:MessageEventDefinition"))return"messageRef";if(w(u,"bpmn:SignalEventDefinition"))return"signalRef"}function c(u){if(Ce(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.get("messageRef");var f=u.get("eventDefinitions"),p=f[0];return p.get(a(p))}function l(u,f){if(Ce(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.set("messageRef",f);var p=u.get("eventDefinitions"),h=p[0];return h.set(a(h),f)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var f=u.shape||u.element;if(o(f)){var p=J(f),h=c(p),d;h&&!s(h)&&(d=e.getDefinitions().get("rootElements"),_t(d,h),u.addedRootElement=h)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var f=u.addedRootElement;if(f){var p=e.getDefinitions().get("rootElements");pt(p,f)}},!0),t.on("copyPaste.copyElement",function(u){var f=u.descriptor,p=u.element;if(!(p.labelTarget||!o(p))){var h=J(p),d=c(h);d&&(f.referencedRootElement=d)}}),t.on("copyPaste.pasteElement",c3,function(u){var f=u.descriptor,p=f.businessObject,h=f.referencedRootElement;h&&(s(h)||(h=i.copyElement(h,r.create(h.$type))),l(p,h),delete f.referencedRootElement)})}Gg.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];re(Gg,K);function l3(e,t){return de(t)||(t=[t]),Dr(t,function(n){return Us(e,n)})}var M1=Math.max;function I1(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,i=t.axis,r=t.start,o={};return M(n,function(s){var a=s.id;w(s,"bpmn:Participant")&&(o[a]=f3(s,i,r)),w(s,"bpmn:Lane")&&(o[a]=wt(s)?Vg:Wg),w(s,"bpmn:SubProcess")&&Te(s)&&(o[a]=P1),w(s,"bpmn:TextAnnotation")&&(o[a]=A1),w(s,"bpmn:Group")&&(o[a]=n3)}),o})}I1.$inject=["eventBus"];function u3(e){return e==="x"}function f3(e,t,n){var i=wt(e);if(!d3(e))return i?Ul:Vl;var r=u3(t),o={};return r?i?o=Ul:o={width:h3(e,n,r),height:Vl.height}:i?o={width:Ul.width,height:p3(e,n,r)}:o=Vl,o}function p3(e,t,n){var i;return i=g3(e,t,n),M1(Ul.height,i)}function h3(e,t,n){var i;return i=m3(e,t,n),M1(Vl.width,i)}function d3(e){return!!Fr(e).length}function g3(e,t,n){var i=Fr(e),r;return r=Kg(i,t,n),e.height-r.height+Vg.height}function m3(e,t,n){var i=Fr(e),r;return r=Kg(i,t,n),e.width-r.width+Wg.width}function Kg(e,t,n){var i,r,o;for(i=0;i<e.length;i++)if(r=e[i],!n&&t>=r.y&&t<=r.y+r.height||n&&t>=r.x&&t<=r.x+r.width)return o=Fr(r),o.length?Kg(o,t,n):r}var sb=400,v3=600,ab={x:180,y:160};function Hr(e,t,n,i,r,o,s){K.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=i,this._bpmnFactory=r,this._bpmnjs=o,this._elementRegistry=s;var a=this;function c(f){return w(f,"bpmn:SubProcess")&&!Te(f)}function l(f){var p=f.shape,h=f.newRootElement,d=J(p);h=a._addDiagram(h||d),f.newRootElement=e.addRootElement(h)}function u(f){var p=f.shape,h=J(p);a._removeDiagram(h);var d=f.newRootElement=s.get(Mi(h));e.removeRootElement(d)}this.executed("shape.create",function(f){var p=f.shape;c(p)&&l(f)},!0),this.postExecuted("shape.create",function(f){var p=f.shape,h=f.newRootElement;!h||!p.children||(a._showRecursively(p.children),a._moveChildrenToShape(p,h))},!0),this.reverted("shape.create",function(f){var p=f.shape;c(p)&&u(f)},!0),this.preExecuted("shape.delete",function(f){var p=f.shape;if(c(p)){var h=s.get(Mi(p));h&&n.removeElements(h.children.slice())}},!0),this.executed("shape.delete",function(f){var p=f.shape;c(p)&&u(f)},!0),this.reverted("shape.delete",function(f){var p=f.shape;c(p)&&l(f)},!0),this.preExecuted("shape.replace",function(f){var p=f.oldShape,h=f.newShape;!c(p)||!c(h)||(f.oldRoot=e.removeRootElement(Mi(p)))},!0),this.postExecuted("shape.replace",function(f){var p=f.newShape,h=f.oldRoot,d=e.findRoot(Mi(p));if(!(!h||!d)){var g=h.children;n.moveElements(g,{x:0,y:0},d)}},!0),this.executed("element.updateProperties",function(f){var p=f.element;if(w(p,"bpmn:SubProcess")){var h=f.properties,d=f.oldProperties,g=d.id,m=h.id;if(g!==m){if(jl(p)){s.updateId(p,ro(m)),s.updateId(g,m);return}var E=s.get(ro(g));E&&s.updateId(ro(g),ro(m))}}},!0),this.reverted("element.updateProperties",function(f){var p=f.element;if(w(p,"bpmn:SubProcess")){var h=f.properties,d=f.oldProperties,g=d.id,m=h.id;if(g!==m){if(jl(p)){s.updateId(p,ro(g)),s.updateId(m,g);return}var E=s.get(ro(m));E&&s.updateId(E,ro(g))}}},!0),t.on("element.changed",function(f){var p=f.element;if(jl(p)){var h=p,d=s.get(Jy(h));!d||d===h||t.fire("element.changed",{element:d})}}),this.executed("shape.toggleCollapse",sb,function(f){var p=f.shape;w(p,"bpmn:SubProcess")&&(Te(p)?u(f):(l(f),a._showRecursively(p.children)))},!0),this.reverted("shape.toggleCollapse",sb,function(f){var p=f.shape;w(p,"bpmn:SubProcess")&&(Te(p)?u(f):(l(f),a._showRecursively(p.children)))},!0),this.postExecuted("shape.toggleCollapse",v3,function(f){var p=f.shape;if(w(p,"bpmn:SubProcess")){var h=f.newRootElement;h&&(Te(p)?a._moveChildrenToShape(h,p):a._moveChildrenToShape(p,h))}},!0),t.on("copyPaste.createTree",function(f){var p=f.element,h=f.children;if(c(p)){var d=Mi(p),g=s.get(d);g&&h.push.apply(h,g.children)}}),t.on("copyPaste.copyElement",function(f){var p=f.descriptor,h=f.element,d=f.elements,g=h.parent,m=w(ke(g),"bpmndi:BPMNPlane");if(m){var E=Jy(g),x=Me(d,function(b){return b.id===E});x&&(p.parent=x.id)}}),t.on("copyPaste.pasteElement",function(f){var p=f.descriptor;p.parent&&(c(p.parent)||p.parent.hidden)&&(p.hidden=!0)})}re(Hr,K);Hr.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,i=e.children,r;if(i){i=i.concat(i.reduce(function(l,u){return u.label&&u.label.parent!==e?l.concat(u.label):l},[]));var o=i.filter(function(l){return!l.hidden});if(!o.length){n.moveElements(i,{x:0,y:0},t,{autoResize:!1});return}var s=yt(o);if(!t.x)r={x:ab.x-s.x,y:ab.y-s.y};else{var a=he(t),c=he(s);r={x:a.x-c.x,y:a.y-c.y}}n.moveElements(i,r,t,{autoResize:!1})}};Hr.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach(function(r){r.hidden=!!t,i=i.concat(r),r.children&&(i=i.concat(n._showRecursively(r.children,r.collapsed||t)))}),i};Hr.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};Hr.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),r=t.create("bpmndi:BPMNDiagram",{plane:i});i.$parent=r;var o=n.createRoot({id:Mi(e),type:e.$type,di:i,businessObject:e,collapsed:!0});return o};Hr.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,i=Me(n,function(r){return r.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(i),1),i};Hr.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function qg(e,t){e.invoke(K,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(!(!w(r,"bpmn:SubProcess")||w(r,"bpmn:AdHocSubProcess")||!(w(i,"bpmn:Task")||w(i,"bpmn:CallActivity"))||!Te(r))){var o=y3(r);t.createShape({type:"bpmn:StartEvent"},o,r)}})}qg.$inject=["injector","modeling"];re(qg,K);function y3(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function Yg(e){K.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;w(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&w(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}re(Yg,K);Yg.$inject=["eventBus"];function Jg(e,t){K.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var i=n.shape;if(Te(i))return;var r=bc(i);r.forEach(function(s){var a=s.incoming.slice(),c=s.outgoing.slice();M(a,function(l){o(l,!0)}),M(c,function(l){o(l,!1)})});function o(s,a){r.indexOf(s.source)!==-1&&r.indexOf(s.target)!==-1||(a?t.reconnectEnd(s,i,he(i)):t.reconnectStart(s,i,he(i)))}},!0)}re(Jg,K);Jg.$inject=["eventBus","modeling"];var Ap=500;function Xg(e,t,n){K.call(this,e);function i(s){s.length&&s.forEach(function(a){a.type==="label"&&!a.businessObject.name&&(a.hidden=!0)})}function r(s,a){var c=s.children,l=a,u,f;return u=_3(c).concat([s]),f=v1(u),f?(l.width=Math.max(f.width,l.width),l.height=Math.max(f.height,l.height),l.x=f.x+(f.width-l.width)/2,l.y=f.y+(f.height-l.height)/2):(l.x=s.x+(s.width-l.width)/2,l.y=s.y+(s.height-l.height)/2),l}function o(s,a){return{x:s.x+(s.width-a.width)/2,y:s.y+(s.height-a.height)/2,width:a.width,height:a.height}}this.executed(["shape.toggleCollapse"],Ap,function(s){var a=s.context,c=a.shape;w(c,"bpmn:SubProcess")&&(c.collapsed?ke(c).isExpanded=!1:(i(c.children),ke(c).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],Ap,function(s){var a=s.context,c=a.shape;c.collapsed?ke(c).isExpanded=!1:ke(c).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],Ap,function(s){var a=s.context.shape,c=t.getDefaultSize(a),l;a.collapsed?l=o(a,c):l=r(a,c),n.resizeShape(a,l,null,{autoResize:a.collapsed?!1:"nwse"})})}re(Xg,K);Xg.$inject=["eventBus","elementFactory","modeling"];function _3(e){return e.filter(function(t){return!t.hidden})}function Zg(e,t,n,i){t.invoke(K,this),this.preExecute("shape.delete",function(r){var o=r.context,s=o.shape,a=s.businessObject;Oe(s)||(w(s,"bpmn:Participant")&&Te(s)&&n.ids.unclaim(a.processRef.id),i.unclaimId(a.id,a))}),this.preExecute("connection.delete",function(r){var o=r.context,s=o.connection,a=s.businessObject;i.unclaimId(a.id,a)}),this.preExecute("canvas.updateRoot",function(){var r=e.getRootElement(),o=r.businessObject;w(r,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}re(Zg,K);Zg.$inject=["canvas","injector","moddle","modeling"];function Qg(e,t){K.call(this,e),this.preExecute("connection.delete",function(n){var i=n.context,r=i.connection,o=r.source;b3(r,o)&&t.updateProperties(o,{default:null})})}re(Qg,K);Qg.$inject=["eventBus","modeling"];function b3(e,t){if(!w(e,"bpmn:SequenceFlow"))return!1;var n=J(t),i=J(e);return n.get("default")===i}var w3=500,E3=5e3;function em(e,t){K.call(this,e);var n;function i(){return n=n||new x3,n.enter(),n}function r(){if(!n)throw new Error("out of bounds release");return n}function o(){if(!n)throw new Error("out of bounds release");var a=n.leave();return a&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),a}var s=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(s,E3,function(a){i()}),this.postExecuted(s,w3,function(a){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(a){var c=a.context,l=c.shape,u=r();l.labelTarget||(w(l,"bpmn:Lane")&&u.addLane(l),w(l,"bpmn:FlowNode")&&u.addFlowNode(l))})}em.$inject=["eventBus","modeling"];re(em,K);function x3(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function tm(e,t){K.call(this,e),this.postExecuted("elements.create",function(n){const i=n.context,r=i.elements;for(const o of r)S3(o)&&!R3(o)&&t.updateProperties(o,{isForCompensation:void 0})})}re(tm,K);tm.$inject=["eventBus","modeling"];function S3(e){const t=J(e);return t&&t.isForCompensation}function C3(e){return e&&w(e,"bpmn:BoundaryEvent")&&Us(e,"bpmn:CompensateEventDefinition")}function R3(e){return e.incoming.filter(n=>C3(n.source)).length>0}const T3={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",_g],appendBehavior:["type",bg],associationBehavior:["type",wg],attachEventBehavior:["type",mf],boundaryEventBehavior:["type",Eg],compensateBoundaryEventBehaviour:["type",xg],createBehavior:["type",Sg],createDataObjectBehavior:["type",Cg],createParticipantBehavior:["type",Rg],dataInputAssociationBehavior:["type",Tg],dataStoreBehavior:["type",Pg],deleteLaneBehavior:["type",Ag],detachEventBehavior:["type",_f],dropOnFlowBehavior:["type",kg],eventBasedGatewayBehavior:["type",Og],fixHoverBehavior:["type",y1],groupBehavior:["type",Dg],importDockingFix:["type",_1],isHorizontalFix:["type",Mg],labelBehavior:["type",Ig],layoutConnectionBehavior:["type",Ng],messageFlowBehavior:["type",Bg],nonInterruptingBehavior:["type",jg],removeElementBehavior:["type",Hg],removeEmbeddedLabelBoundsBehavior:["type",Fg],removeParticipantBehavior:["type",zg],replaceConnectionBehavior:["type",Ug],replaceElementBehaviour:["type",xf],resizeBehavior:["type",k1],resizeLaneBehavior:["type",D1],rootElementReferenceBehavior:["type",Gg],spaceToolBehavior:["type",I1],subProcessPlaneBehavior:["type",Hr],subProcessStartEventBehavior:["type",qg],textAnnotationBehavior:["type",Yg],toggleCollapseConnectionBehaviour:["type",Jg],toggleElementCollapseBehaviour:["type",Xg],unclaimIdBehavior:["type",Zg],unsetDefaultFlowBehavior:["type",Qg],updateFlowNodeRefsBehavior:["type",em],setCompensationActivityAfterPasteBehavior:["type",tm]};function N1(e,t){var n=Ut(e,t,-15);return n!=="intersect"?n:null}function Dt(e){$n.call(this,e)}re(Dt,$n);Dt.$inject=["eventBus"];Dt.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return P3(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},r=i.targetParent,o=i.targetAttach;if(o)return!1;r&&(n.parent=r);try{return Wl(t,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,i=e.target;return Wl(n,i,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return V1(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return He(i)&&!Su(t,i)?!1:Ao(t,function(r){return He(r)?Wl(r.source,r.target,r):r.host?Ha(r,r.host,null,n):Vh(r,i,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return Ha(n,t,null,i)||z1(n,t,i)||U1(n,t)||Su(n,t)}),this.addRule("shape.create",function(e){return Vh(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return Ha(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return Y1(n,t)})};Dt.prototype.canConnectMessageFlow=K1;Dt.prototype.canConnectSequenceFlow=q1;Dt.prototype.canConnectDataAssociation=im;Dt.prototype.canConnectAssociation=W1;Dt.prototype.canConnectCompensationAssociation=G1;Dt.prototype.canMove=U1;Dt.prototype.canAttach=Ha;Dt.prototype.canReplace=z1;Dt.prototype.canDrop=ks;Dt.prototype.canInsert=Su;Dt.prototype.canCreate=Vh;Dt.prototype.canConnect=Wl;Dt.prototype.canResize=V1;Dt.prototype.canCopy=Y1;function P3(e){return Hh(e)?null:Ce(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Hh(e){return!e||Oe(e)}function A3(e,t){return e===t}function cb(e){do{if(w(e,"bpmn:Process"))return J(e);if(w(e,"bpmn:Participant"))return J(e).processRef||J(e)}while(e=e.parent)}function zh(e){return w(e,"bpmn:TextAnnotation")}function nm(e){return w(e,"bpmn:Group")&&!e.labelTarget}function $1(e){return w(e,"bpmn:BoundaryEvent")&&di(e,"bpmn:CompensateEventDefinition")}function Sf(e){return J(e).isForCompensation}function k3(e,t){var n=cb(e),i=cb(t);return n===i}function O3(e){return w(e,"bpmn:InteractionNode")&&!w(e,"bpmn:BoundaryEvent")&&(!w(e,"bpmn:Event")||w(e,"bpmn:ThrowEvent")&&B1(e,"bpmn:MessageEventDefinition"))}function D3(e){return w(e,"bpmn:InteractionNode")&&!Sf(e)&&(!w(e,"bpmn:Event")||w(e,"bpmn:CatchEvent")&&B1(e,"bpmn:MessageEventDefinition"))&&!(w(e,"bpmn:BoundaryEvent")&&!di(e,"bpmn:MessageEventDefinition"))}function lb(e){for(var t=e;t=t.parent;){if(w(t,"bpmn:FlowElementsContainer"))return J(t);if(w(t,"bpmn:Participant"))return J(t).processRef}return null}function L1(e,t){var n=lb(e),i=lb(t);return n===i}function di(e,t){var n=J(e);return!!Me(n.eventDefinitions||[],function(i){return w(i,t)})}function B1(e,t){var n=J(e);return(n.eventDefinitions||[]).every(function(i){return w(i,t)})}function M3(e){return w(e,"bpmn:FlowNode")&&!w(e,"bpmn:EndEvent")&&!Ft(e)&&!(w(e,"bpmn:IntermediateThrowEvent")&&di(e,"bpmn:LinkEventDefinition"))&&!$1(e)&&!Sf(e)}function I3(e){return w(e,"bpmn:FlowNode")&&!w(e,"bpmn:StartEvent")&&!w(e,"bpmn:BoundaryEvent")&&!Ft(e)&&!(w(e,"bpmn:IntermediateCatchEvent")&&di(e,"bpmn:LinkEventDefinition"))&&!Sf(e)}function N3(e){return w(e,"bpmn:ReceiveTask")||w(e,"bpmn:IntermediateCatchEvent")&&(di(e,"bpmn:MessageEventDefinition")||di(e,"bpmn:TimerEventDefinition")||di(e,"bpmn:ConditionalEventDefinition")||di(e,"bpmn:SignalEventDefinition"))}function $3(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function Uh(e,t){var n=$3(t);return n.indexOf(e)!==-1}function Wl(e,t,n){if(Hh(e)||Hh(t))return null;if(!w(n,"bpmn:DataAssociation")){if(K1(e,t))return{type:"bpmn:MessageFlow"};if(q1(e,t))return{type:"bpmn:SequenceFlow"}}var i=im(e,t);return i||(G1(e,t)?{type:"bpmn:Association",associationDirection:"One"}:W1(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function ks(e,t){return Oe(e)||nm(e)?!0:w(t,"bpmn:Participant")&&!Te(t)?!1:w(e,"bpmn:Participant")?w(t,"bpmn:Process")||w(t,"bpmn:Collaboration"):Ce(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:w(e,"bpmn:Lane")?w(t,"bpmn:Participant")||w(t,"bpmn:Lane"):w(e,"bpmn:BoundaryEvent")&&!L3(e)?!1:w(e,"bpmn:FlowElement")&&!w(e,"bpmn:DataStoreReference")?w(t,"bpmn:FlowElementsContainer")?Te(t):Ce(t,["bpmn:Participant","bpmn:Lane"]):w(e,"bpmn:DataStoreReference")&&w(t,"bpmn:Collaboration")?Dr(J(t).get("participants"),function(n){return!!n.get("processRef")}):Ce(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?Ce(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):w(e,"bpmn:MessageFlow")?w(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function L3(e){return J(e).cancelActivity&&(j1(e)||F1(e))}function B3(e){return!Oe(e)&&w(e,"bpmn:BoundaryEvent")}function j3(e){return w(e,"bpmn:Lane")}function F3(e){return B3(e)||w(e,"bpmn:IntermediateThrowEvent")&&j1(e)?!0:w(e,"bpmn:IntermediateCatchEvent")&&F1(e)}function j1(e){var t=J(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function F1(e){return H1(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function H1(e,t){return t.some(function(n){return di(e,n)})}function H3(e){return w(e,"bpmn:ReceiveTask")&&Me(e.incoming,function(t){return w(t.source,"bpmn:EventBasedGateway")})}function Ha(e,t,n,i){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var r=e[0];return Oe(r)||!F3(r)||Ft(t)||!w(t,"bpmn:Activity")||Sf(t)||i&&!N1(i,t)||H3(t)?!1:"attach"}function z1(e,t,n){if(!t)return!1;var i={replacements:[]};return M(e,function(r){Ft(t)||w(r,"bpmn:StartEvent")&&r.type!=="label"&&ks(r,t)&&(N$(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),($$(r)||L$(r)||B$(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),H1(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&w(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),w(t,"bpmn:Transaction")||di(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(w(r,"bpmn:EndEvent")&&ks(r,t)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),w(r,"bpmn:BoundaryEvent")&&Ha(r,t,null,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),i.replacements.length?i:!1}function U1(e,t){return Dr(e,j3)?!1:t?e.every(function(n){return ks(n,t)}):!0}function Vh(e,t,n,i){return t?Oe(e)||nm(e)?!0:A3(n,t)||n&&Uh(n,t)?!1:ks(e,t)||Su(e,t):!1}function V1(e,t){return w(e,"bpmn:SubProcess")?Te(e)&&(!t||t.width>=100&&t.height>=80):!!(w(e,"bpmn:Lane")||w(e,"bpmn:Participant")||zh(e)||nm(e))}function z3(e,t){var n=zh(e),i=zh(t);return(n||i)&&n!==i}function W1(e,t){return Uh(t,e)||Uh(e,t)?!1:z3(e,t)?!0:!!im(e,t)}function G1(e,t){return L1(e,t)&&$1(e)&&w(t,"bpmn:Activity")&&!V3(t,e)&&!Ft(t)}function K1(e,t){return ub(e)&&!ub(t)?!1:O3(e)&&D3(t)&&!k3(e,t)}function q1(e,t){return M3(e)&&I3(t)&&L1(e,t)&&!(w(e,"bpmn:EventBasedGateway")&&!N3(t))}function im(e,t){return Ce(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Ce(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:Ce(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Ce(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function Su(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:Ce(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Oe(t)&&w(e,"bpmn:FlowNode")&&!w(e,"bpmn:BoundaryEvent")&&ks(e,t.parent)}function U3(e,t){return e&&t&&e.indexOf(t)!==-1}function Y1(e,t){return Oe(t)?!0:!(w(t,"bpmn:Lane")&&!U3(e,t.parent))}function ub(e){return Ps(e,"bpmn:Process")||Ps(e,"bpmn:Collaboration")}function V3(e,t){return e.attachers.includes(t)}const W3={__depends__:[Ei],__init__:["bpmnRules"],bpmnRules:["type",Dt]};var G3=2e3;function J1(e,t){e.on("saveXML.start",G3,n);function n(){var i=t.getRootElements();M(i,function(r){var o=ke(r),s,a;s=bc([r],!1),s=Se(s,function(c){return c!==r&&!c.labelTarget}),a=zt(s,ke),o.set("planeElement",a)})}}J1.$inject=["eventBus","canvas"];const K3={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",J1]};function Cf(e){K.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,o=i.parent,s=t.getOrdering(r,o);s&&(s.parent!==void 0&&(i.parent=s.parent),i.parentIndex=s.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,o=i.newParent||r.parent,s=t.getOrdering(r,o);s&&(s.parent!==void 0&&(i.newParent=s.parent),i.newParentIndex=s.index)})}Cf.prototype.getOrdering=function(e,t){return null};re(Cf,K);function rm(e,t){Cf.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function i(s){if(s.labelTarget)return{level:10};var a=Me(n,function(c){return Ce(s,[c.type])});return a&&a.order||{level:1}}function r(s){var a=s.order;if(a||(s.order=a=i(s)),!a)throw new Error(`no order for <${s.id}>`);return a}function o(s,a,c){for(var l=a;l&&!Ce(l,c);)l=l.parent;if(!l)throw new Error(`no parent for <${s.id}> in <${a&&a.id}>`);return l}this.getOrdering=function(s,a){if(s.labelTarget||w(s,"bpmn:TextAnnotation"))return{parent:t.findRoot(a)||t.getRootElement(),index:-1};var c=r(s);c.containers&&(a=o(s,a,c.containers));var l=a.children.indexOf(s),u=KE(a.children,function(f){return!s.labelTarget&&f.labelTarget?!1:c.level<r(f).level});return u!==-1&&l!==-1&&l<u&&(u-=1),{index:u,parent:a}}}rm.$inject=["eventBus","canvas"];re(rm,Cf);const q3={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",rm]};function Oc(){}Oc.prototype.get=function(){return this._data};Oc.prototype.set=function(e){this._data=e};Oc.prototype.clear=function(){var e=this._data;return delete this._data,e};Oc.prototype.isEmpty=function(){return!this._data};const Y3={clipboard:["type",Oc]};var J3="drop-ok",fb="drop-not-ok",pb="attach-ok",hb="new-parent",db="create",X3=2e3;function X1(e,t,n,i,r){function o(c,l,u,f,p){if(!l)return!1;c=Se(c,function(x){var b=x.labelTarget;return!x.parent&&!(Oe(x)&&c.indexOf(b)!==-1)});var h=Me(c,function(x){return!He(x)}),d=!1,g=!1,m=!1;mb(c)&&(d=r.allowed("shape.attach",{position:u,shape:h,target:l})),d||(mb(c)?m=r.allowed("shape.create",{position:u,shape:h,source:f,target:l}):m=r.allowed("elements.create",{elements:c,position:u,target:l}));var E=p.connectionTarget;return m||d?(h&&f&&(g=r.allowed("connection.create",{source:E===f?h:f,target:E===f?f:h,hints:{targetParent:l,targetAttach:d}})),{attach:d,connect:g}):m===null||d===null?null:!1}function s(c,l){[pb,J3,fb,hb].forEach(function(u){u===l?e.addMarker(c,u):e.removeMarker(c,u)})}n.on(["create.move","create.hover"],function(c){var l=c.context,u=l.elements,f=c.hover,p=l.source,h=l.hints||{};if(!f){l.canExecute=!1,l.target=null;return}gb(c);var d={x:c.x,y:c.y},g=l.canExecute=f&&o(u,f,d,p,h);f&&g!==null&&(l.target=f,g&&g.attach?s(f,pb):s(f,g?hb:fb))}),n.on(["create.end","create.out","create.cleanup"],function(c){var l=c.hover;l&&s(l,null)}),n.on("create.end",function(c){var l=c.context,u=l.source,f=l.shape,p=l.elements,h=l.target,d=l.canExecute,g=d&&d.attach,m=d&&d.connect,E=l.hints||{};if(d===!1||!h)return!1;gb(c);var x={x:c.x,y:c.y};m?f=i.appendShape(u,f,x,h,{attach:g,connection:m===!0?{}:m,connectionTarget:E.connectionTarget}):(p=i.createElements(p,x,h,$({},E,{attach:g})),f=Me(p,function(b){return!He(b)})),$(l,{elements:p,shape:f}),$(c,{elements:p,shape:f})});function a(){var c=t.context();c&&c.prefix===db&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",a),n.once(["create.cancel","create.end"],X3,function(){n.off("elements.changed",a)})}),this.start=function(c,l,u){de(l)||(l=[l]);var f=Me(l,function(d){return!He(d)});if(f){u=$({elements:l,hints:{},shape:f},u||{}),M(l,function(d){pe(d.x)||(d.x=0),pe(d.y)||(d.y=0)});var p=Se(l,function(d){return!d.hidden}),h=yt(p);M(l,function(d){He(d)&&(d.waypoints=zt(d.waypoints,function(g){return{x:g.x-h.x-h.width/2,y:g.y-h.y-h.height/2}})),$(d,{x:d.x-h.x-h.width/2,y:d.y-h.y-h.height/2})}),t.init(c,db,{cursor:"grabbing",autoActivate:!0,data:{shape:f,elements:l,context:u}})}}}X1.$inject=["canvas","dragging","eventBus","modeling","rules"];function gb(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function mb(e){return e&&e.length===1&&!He(e[0])}var Z3=750;function Z1(e,t,n,i,r){function o(s){var a=ae("g");ie(a,r.cls("djs-drag-group",["no-events"]));var c=ae("g");return s.forEach(function(l){var u;l.hidden||(l.waypoints?(u=n._createContainer("connection",c),n.drawConnection(yo(u),l)):(u=n._createContainer("shape",c),n.drawShape(yo(u),l),kt(u,l.x,l.y)),i.addDragger(l,a,u))}),a}t.on("create.move",Z3,function(s){var a=s.hover,c=s.context,l=c.elements,u=c.dragGroup;u||(u=c.dragGroup=o(l));var f;a?(u.parentNode||(f=e.getActiveLayer(),me(f,u)),kt(u,s.x,s.y)):vt(u)}),t.on("create.cleanup",function(s){var a=s.context,c=a.dragGroup;c&&vt(c)})}Z1.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Rf={__depends__:[Ji,Xs,Ei,ni],__init__:["create","createPreview"],create:["type",X1],createPreview:["type",Z1]};function om(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var r=t._svg=i.svg;r.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}om.$inject=["eventBus"];om.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||Q3(0,0)};function Q3(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,o=e,s=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,o,s,!1,!1,!1,!1,0,null),n}const Dc={__init__:["mouse"],mouse:["type",om]};function ii(e,t,n,i,r,o,s,a){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=o,this._mouse=s,this._rules=a,r.on("copyPaste.copyElement",function(c){var l=c.descriptor,u=c.element,f=c.elements;l.priority=1,l.id=u.id;var p=Me(f,function(h){return h===u.parent});p&&(l.parent=u.parent.id),e6(u)&&(l.priority=2,l.host=u.host.id),He(u)&&(l.priority=3,l.source=u.source.id,l.target=u.target.id,l.waypoints=t6(u)),Oe(u)&&(l.priority=4,l.labelTarget=u.labelTarget.id),M(["x","y","width","height"],function(h){pe(u[h])&&(l[h]=u[h])}),l.hidden=u.hidden,l.collapsed=u.collapsed}),r.on("copyPaste.pasteElements",function(c){var l=c.hints;$(l,{createElementsBehavior:!1})})}ii.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];ii.prototype.copy=function(e){var t,n;return de(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(de(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};ii.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}};ii.prototype._paste=function(e,t,n,i){M(e,function(o){pe(o.x)||(o.x=0),pe(o.y)||(o.y=0)});var r=yt(e);return M(e,function(o){He(o)&&(o.waypoints=zt(o.waypoints,function(s){return{x:s.x-r.x-r.width/2,y:s.y-r.y-r.height/2}})),$(o,{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2})}),this._modeling.createElements(e,n,t,$({},i))};ii.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},r=[];return M(e,function(o,s){o=vi(o,"priority"),M(o,function(a){var c=$({},_i(a,["priority"]));i[a.parent]?c.parent=i[a.parent]:delete c.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:c});var l;if(He(c)){c.source=i[a.source],c.target=i[a.target],l=i[a.id]=t.createConnection(c),r.push(l);return}if(Oe(c)){c.labelTarget=i[c.labelTarget],l=i[a.id]=t.createLabel(c),r.push(l);return}c.host&&(c.host=i[c.host]),l=i[a.id]=t.createShape(c),r.push(l)})}),r};ii.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(_i(e,["id"]));return t};ii.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(_i(e,["id"]));return t};ii.prototype.createShape=function(e){var t=this._elementFactory.createShape(_i(e,["id"]));return t};ii.prototype.hasRelations=function(e,t){var n,i,r;return!(He(e)&&(i=Me(t,Yn({id:e.source.id})),r=Me(t,Yn({id:e.target.id})),!i||!r)||Oe(e)&&(n=Me(t,Yn({id:e.labelTarget.id})),!n))};ii.prototype.createTree=function(e){var t=this._rules,n=this,i={},r=[],o=Yu(e);function s(l,u){return t.allowed("element.copy",{element:l,elements:u})}function a(l,u){var f=Me(r,function(p){return l===p.element});if(!f){r.push({element:l,depth:u});return}f.depth<u&&(r=c(f,r),r.push({element:f.element,depth:u}))}function c(l,u){var f=u.indexOf(l);return f!==-1&&u.splice(f,1),u}return Oo(o,function(l,u,f){if(Oe(l))return;M(l.labels,function(d){a(d,f)});function p(d){d&&d.length&&M(d,function(g){M(g.labels,function(m){a(m,f)}),a(g,f)})}M([l.attachers,l.incoming,l.outgoing],p),a(l,f);var h=[];return l.children&&(h=l.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:l,children:h}),h}),e=zt(r,function(l){return l.element}),r=zt(r,function(l){return l.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:l.descriptor,element:l.element,elements:e}),l}),r=vi(r,function(l){return l.descriptor.priority}),e=zt(r,function(l){return l.element}),M(r,function(l){var u=l.depth;if(!n.hasRelations(l.element,e)){yb(l.element,e);return}if(!s(l.element,e)){yb(l.element,e);return}i[u]||(i[u]=[]),i[u].push(l.descriptor)}),i};function e6(e){return!!e.host}function t6(e){return zt(e.waypoints,function(t){return t=vb(t),t.original&&(t.original=vb(t.original)),t})}function vb(e){return $({},e)}function yb(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const n6={__depends__:[Y3,Rf,Dc,Ei],__init__:["copyPaste"],copyPaste:["type",ii]};function kp(e,t,n){de(n)||(n=[n]),M(n,function(i){Eo(e[i])||(t[i]=e[i])})}var Op=750;function Q1(e,t,n){function i(c,l){var u=e.create(c.$type);return n.copyElement(c,u,null,l)}t.on("copyPaste.copyElement",Op,function(c){var l=c.descriptor,u=c.element,f=J(u);if(Oe(u))return l;var p=l.businessObject=i(f,!0),h=l.di=i(ke(u),!0);h.bpmnElement=p,kp(p,l,"name"),kp(h,l,"isExpanded"),f.default&&(l.default=f.default.id)});var r="-bpmn-js-refs";function o(c){return c[r]=c[r]||{}}function s(c,l){c[r]=l}function a(c,l,u){var f=J(c);return c.default&&(u[c.default]={element:f,property:"default"}),c.host&&(J(c).attachedToRef=J(l[c.host])),_i(u,dn(u,function(p,h,d){var g=h.element,m=h.property;return d===c.id&&(g.set(m,f),p.push(c.id)),p},[]))}t.on("copyPaste.pasteElement",function(c){var l=c.cache,u=c.descriptor,f=u.businessObject,p=u.di;if(Oe(u)){u.businessObject=J(l[u.labelTarget]),u.di=ke(l[u.labelTarget]);return}f=u.businessObject=i(f),p=u.di=i(p),p.bpmnElement=f,kp(u,f,["isExpanded","name"]),u.type=f.$type}),t.on("copyPaste.copyElement",Op,function(c){var l=c.descriptor,u=c.element;if(w(u,"bpmn:Participant")){var f=J(u);f.processRef&&(l.processRef=i(f.processRef,!0))}}),t.on("copyPaste.pasteElement",function(c){var l=c.descriptor,u=l.processRef;u&&(l.processRef=i(u))}),t.on("copyPaste.pasteElement",Op,function(c){var l=c.cache,u=c.descriptor;s(l,a(u,l,o(l)))})}Q1.$inject=["bpmnFactory","eventBus","moddleCopy"];const i6=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"],r6=["errorRef","escalationRef","messageRef","signalRef"];function Mc(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",i=>{const{propertyNames:r}=i;if(!(!r||!r.length))return vi(r,o=>o==="extensionElements")}),e.on("moddleCopy.canCopyProperty",i=>{const{parent:r,property:o,propertyName:s}=i,a=Ct(r)&&r.$descriptor;if(s&&r6.includes(s))return o;if(s&&i6.includes(s)||s&&a&&!Me(a.properties,Yn({name:s})))return!1}),e.on("moddleCopy.canSetCopiedProperty",i=>{const{property:r}=i;if(w(r,"bpmn:ExtensionElements")&&(!r.values||!r.values.length))return!1})}Mc.$inject=["eventBus","bpmnFactory","moddle"];Mc.prototype.copyElement=function(e,t,n,i=!1){n&&!de(n)&&(n=[n]),n=n||Wh(e.$descriptor);const r=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:i});return r===!1||(de(r)&&(n=r),M(n,o=>{let s;rn(e,o)&&(s=e.get(o));const a=this.copyProperty(s,t,o,i);!xt(a)||this._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:a,propertyName:o})===!1||t.set(o,a)})),t};Mc.prototype.copyProperty=function(e,t,n,i=!1){let r=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:i});if(r===!1)return;if(r)return Ct(r)&&r.$type&&!r.$parent&&(r.$parent=t),r;const o=this._moddle.getPropertyDescriptor(t,n);if(!o.isReference)return o.isId?e&&this._copyId(e,t,i):de(e)?dn(e,(s,a)=>{const c=this.copyProperty(a,t,n,i);return c?s.concat(c):s},[]):Ct(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(r=this._bpmnFactory.create(e.$type),r.$parent=t,r=this.copyElement(e,r,null,i),r):e};Mc.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function Wh(e,t){return dn(e.properties,(n,i)=>t&&i.default?n:n.concat(i.name),[])}const eC={__depends__:[n6],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",Q1],moddleCopy:["type",Mc]};var _b=Math.round;function sm(e,t){this._modeling=e,this._eventBus=t}sm.$inject=["modeling","eventBus"];sm.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,r=this._eventBus;r.fire("replace.start",{element:e,attrs:t,hints:n});var o=t.width||e.width,s=t.height||e.height,a=t.x||e.x,c=t.y||e.y,l=_b(a+o/2),u=_b(c+s/2),f=i.replaceShape(e,$({},t,{x:l,y:u,width:o,height:s}),n);return r.fire("replace.end",{element:e,newElement:f,hints:n}),f};function tC(e,t){t.on("replace.end",500,function(n){const{newElement:i,hints:r={}}=n;r.select!==!1&&e.select(i)})}tC.$inject=["selection","eventBus"];const o6={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",tC],replace:["type",sm]};function s6(e,t,n){de(n)||(n=[n]),M(n,function(i){Eo(e[i])||(t[i]=e[i])})}var a6=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function c6(e,t){var n=e&&rn(e,"collapsed")?e.collapsed:!Te(e),i;return t&&(rn(t,"collapsed")||rn(t,"isExpanded"))?i=rn(t,"collapsed")?t.collapsed:!t.isExpanded:i=n,n!==i}function nC(e,t,n,i,r,o){function s(a,c,l){l=l||{};var u=c.type,f=a.businessObject;if(xl(f)&&(u==="bpmn:SubProcess"||u==="bpmn:AdHocSubProcess")&&c6(a,c))return i.toggleCollapse(a),a;var p=e.create(u),h={type:u,businessObject:p};h.di={},u==="bpmn:ExclusiveGateway"&&(h.di.isMarkerVisible=!0),s6(a.di,h.di,["fill","stroke","background-color","border-color","color"]);var d=Wh(f.$descriptor),g=Wh(p.$descriptor,!0),m=l6(d,g);$(p,ei(c,a6));var E=Se(m,function(y){return y==="eventDefinitions"?bb(a,c.eventDefinitionType):y==="loopCharacteristics"?!Ft(p):rn(p,y)||y==="processRef"&&c.isExpanded===!1||y==="triggeredByEvent"?!1:y==="isForCompensation"?!Ft(p):!0});if(p=n.copyElement(f,p,E),c.eventDefinitionType&&(bb(p,c.eventDefinitionType)||(h.eventDefinitionType=c.eventDefinitionType,h.eventDefinitionAttrs=c.eventDefinitionAttrs)),w(f,"bpmn:Activity")){if(xl(f))h.isExpanded=Te(a);else if(c&&rn(c,"isExpanded")){h.isExpanded=c.isExpanded;var x=t.getDefaultSize(p,{isExpanded:h.isExpanded});h.width=x.width,h.height=x.height,h.x=a.x-(h.width-a.width)/2,h.y=a.y-(h.height-a.height)/2}Te(a)&&!w(f,"bpmn:Task")&&h.isExpanded&&(h.width=a.width,h.height=a.height)}if(xl(f)&&!xl(p)&&(l.moveChildren=!1),w(f,"bpmn:Participant")){c.isExpanded===!0?p.processRef=e.create("bpmn:Process"):l.moveChildren=!1;var b=wt(a);ke(a).isHorizontal||(ke(h).isHorizontal=b),h.width=b?a.width:t.getDefaultSize(h).width,h.height=b?t.getDefaultSize(h).height:a.height}return o.allowed("shape.resize",{shape:p})||(h.height=t.getDefaultSize(h).height,h.width=t.getDefaultSize(h).width),p.name=f.name,Ce(f,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&Ce(p,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(p.default=f.default),c.host&&!w(f,"bpmn:BoundaryEvent")&&w(p,"bpmn:BoundaryEvent")&&(h.host=c.host),(h.type==="bpmn:DataStoreReference"||h.type==="bpmn:DataObjectReference")&&(h.x=a.x+(a.width-h.width)/2),r.replaceElement(a,h,{...l,targetElement:c})}this.replaceElement=s}nC.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function xl(e){return w(e,"bpmn:SubProcess")}function bb(e,t){var n=J(e);return t&&n.get("eventDefinitions").some(function(i){return w(i,t)})}function l6(e,t){return e.filter(function(n){return t.includes(n)})}const iC={__depends__:[eC,o6,ni],bpmnReplace:["type",nC]};var u6=250;function No(e){this._eventBus=e,this._tools=[],this._active=null}No.$inject=["eventBus"];No.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};No.prototype.isActive=function(e){return e&&this._active===e};No.prototype.length=function(e){return this._tools.length};No.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};No.prototype.bindEvents=function(e,t){var n=this._eventBus,i=[];n.on(t.tool+".init",function(r){var o=r.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),M(t,function(r){i.push(r+".ended"),i.push(r+".canceled")}),n.on(i,u6,function(r){this._active&&(f6(r)||this.setActive(null))},this)};function f6(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Fs(t,'.group[data-group="tools"]')}const Tf={__depends__:[Ji],__init__:["toolManager"],toolManager:["type",No]};function p6(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function h6(e,t){var n=[];return M(e.concat(t),function(i){var r=i.incoming,o=i.outgoing;M(r.concat(o),function(s){var a=s.source,c=s.target;(ya(e,a)||ya(e,c)||ya(t,a)||ya(t,c))&&(ya(n,s)||n.push(s))})}),n}function ya(e,t){return e.indexOf(t)!==-1}function d6(e,t,n){var i=e.x,r=e.y,o=e.width,s=e.height,a=n.x,c=n.y;switch(t){case"n":return{x:i,y:r+c,width:o,height:s-c};case"s":return{x:i,y:r,width:o,height:s+c};case"w":return{x:i+a,y:r,width:o-a,height:s};case"e":return{x:i,y:r,width:o+a,height:s};default:throw new Error("unknown direction: "+t)}}var Dp=Math.abs,g6=Math.round,Pi={x:"width",y:"height"},rC="crosshair",ar={n:"top",w:"left",s:"bottom",e:"right"},m6=1500,Sl={n:"s",w:"e",s:"n",e:"w"},Cl=20;function Ln(e,t,n,i,r,o,s){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=o,this._mouse=s;var a=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(c){n.once("spaceTool.selection.ended",function(){a.activateMakeSpace(c.originalEvent)})}),n.on("spaceTool.move",m6,function(c){var l=c.context,u=l.initialized;u||(u=l.initialized=a.init(c,l)),u&&Eb(c)}),n.on("spaceTool.end",function(c){var l=c.context,u=l.axis,f=l.direction,p=l.movingShapes,h=l.resizingShapes,d=l.start;if(l.initialized){Eb(c);var g={x:0,y:0};g[u]=g6(c["d"+u]),a.makeSpace(p,h,g,f,d),n.once("spaceTool.ended",function(m){a.activateSelection(m.originalEvent,!0,!0)})}})}Ln.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];Ln.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:rC,data:{context:{reactivate:n}},trapClick:!1})};Ln.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:rC,data:{context:{}}})};Ln.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)};Ln.prototype.init=function(e,t){var n=Dp(e.dx)>Dp(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(Dp(i)<5)return!1;i<0&&(i*=-1),rc(e)&&(i*=-1);var o=p6(n,i),s=this._canvas.getRootElement();!mu(e)&&e.hover&&(s=e.hover);var a=[...bc(s,!0),...s.attachers||[]],c=this.calculateAdjustments(a,n,i,r),l=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:c.resizingShapes,start:r}),u=v6(c,n,o,r,l);return $(t,c,{axis:n,direction:o,spaceToolConstraints:u,start:r}),cf("resize-"+(n==="x"?"ew":"ns")),!0};Ln.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,o=[],s=[],a=[],c=[];function l(p){o.includes(p)||o.push(p);var h=p.label;h&&!o.includes(h)&&o.push(h)}function u(p){s.includes(p)||s.push(p)}M(e,function(p){if(!(!p.parent||Oe(p))){if(He(p)){c.push(p);return}var h=p[t],d=h+p[Pi[t]];if(y6(p)&&(n>0&&he(p)[t]>i||n<0&&he(p)[t]<i)){a.push(p);return}if(n>0&&h>i||n<0&&d<i){l(p);return}if(h<i&&d>i&&r.allowed("shape.resize",{shape:p})){u(p);return}}}),M(o,function(p){var h=p.attachers;h&&M(h,function(d){l(d)})});var f=o.concat(s);return M(a,function(p){var h=p.host;po(f,h)&&l(p)}),f=o.concat(s),M(c,function(p){var h=p.source,d=p.target,g=p.label;po(f,h)&&po(f,d)&&g&&l(g)}),{movingShapes:o,resizingShapes:s}};Ln.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Ln.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function wb(e){return{top:e.top-Cl,right:e.right+Cl,bottom:e.bottom+Cl,left:e.left-Cl}}function Eb(e){var t=e.context,n=t.spaceToolConstraints;if(n){var i,r;pe(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),pe(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),pe(n.top)&&(r=Math.max(e.y,n.top),e.dy=e.dy+r-e.y,e.y=r),pe(n.bottom)&&(r=Math.min(e.y,n.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function v6(e,t,n,i,r){var o=e.movingShapes,s=e.resizingShapes;if(s.length){var a={},c,l;return M(s,function(u){var f=u.attachers,p=u.children,h=ce(u),d=Se(p,function(L){return!He(L)&&!Oe(L)&&!po(o,L)&&!po(s,L)}),g=Se(p,function(L){return!He(L)&&!Oe(L)&&po(o,L)}),m,E,x,b=[],y=[],R,P,N,k;d.length&&(E=wb(ce(yt(d))),m=i-h[ar[n]]+E[ar[n]],n==="n"?a.bottom=l=pe(l)?Math.min(l,m):m:n==="w"?a.right=l=pe(l)?Math.min(l,m):m:n==="s"?a.top=c=pe(c)?Math.max(c,m):m:n==="e"&&(a.left=c=pe(c)?Math.max(c,m):m)),g.length&&(x=wb(ce(yt(g))),m=i-x[ar[Sl[n]]]+h[ar[Sl[n]]],n==="n"?a.bottom=l=pe(l)?Math.min(l,m):m:n==="w"?a.right=l=pe(l)?Math.min(l,m):m:n==="s"?a.top=c=pe(c)?Math.max(c,m):m:n==="e"&&(a.left=c=pe(c)?Math.max(c,m):m)),f&&f.length&&(f.forEach(function(L){po(o,L)?b.push(L):y.push(L)}),b.length&&(R=ce(yt(b.map(he))),P=h[ar[Sl[n]]]-(R[ar[Sl[n]]]-i)),y.length&&(N=ce(yt(y.map(he))),k=N[ar[n]]-(h[ar[n]]-i)),n==="n"?(m=Math.min(P||1/0,k||1/0),a.bottom=l=pe(l)?Math.min(l,m):m):n==="w"?(m=Math.min(P||1/0,k||1/0),a.right=l=pe(l)?Math.min(l,m):m):n==="s"?(m=Math.max(P||-1/0,k||-1/0),a.top=c=pe(c)?Math.max(c,m):m):n==="e"&&(m=Math.max(P||-1/0,k||-1/0),a.left=c=pe(c)?Math.max(c,m):m));var O=r&&r[u.id];O&&(n==="n"?(m=i+u[Pi[t]]-O[Pi[t]],a.bottom=l=pe(l)?Math.min(l,m):m):n==="w"?(m=i+u[Pi[t]]-O[Pi[t]],a.right=l=pe(l)?Math.min(l,m):m):n==="s"?(m=i-u[Pi[t]]+O[Pi[t]],a.top=c=pe(c)?Math.max(c,m):m):n==="e"&&(m=i-u[Pi[t]]+O[Pi[t]],a.left=c=pe(c)?Math.max(c,m):m))}),a}}function po(e,t){return e.indexOf(t)!==-1}function y6(e){return!!e.host}var Mp="djs-dragging",xb="djs-resizing",_6=250,Rl=Math.max;function oC(e,t,n,i,r){function o(s,a){M(s,function(c){r.addDragger(c,a),n.addMarker(c,Mp)})}e.on("spaceTool.selection.start",function(s){var a=n.getLayer("space"),c=s.context,l={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},u=ae("g");ie(u,i.cls("djs-crosshair-group",["no-events"])),me(a,u);var f=ae("path");ie(f,"d",l.x),Ae(f).add("djs-crosshair"),me(u,f);var p=ae("path");ie(p,"d",l.y),Ae(p).add("djs-crosshair"),me(u,p),c.crosshairGroup=u}),e.on("spaceTool.selection.move",function(s){var a=s.context.crosshairGroup;kt(a,s.x,s.y)}),e.on("spaceTool.selection.cleanup",function(s){var a=s.context,c=a.crosshairGroup;c&&vt(c)}),e.on("spaceTool.move",_6,function(s){var a=s.context,c=a.line,l=a.axis,u=a.movingShapes,f=a.resizingShapes;if(a.initialized){if(!a.dragGroup){var p=n.getLayer("space");c=ae("path"),ie(c,"d","M0,0 L0,0"),Ae(c).add("djs-crosshair"),me(p,c),a.line=c;var h=ae("g");ie(h,i.cls("djs-drag-group",["no-events"])),me(n.getActiveLayer(),h),o(u,h);var d=a.movingConnections=t.filter(function(y){var R=!1;M(u,function(O){M(O.outgoing,function(L){y===L&&(R=!0)})});var P=!1;M(u,function(O){M(O.incoming,function(L){y===L&&(P=!0)})});var N=!1;M(f,function(O){M(O.outgoing,function(L){y===L&&(N=!0)})});var k=!1;return M(f,function(O){M(O.incoming,function(L){y===L&&(k=!0)})}),He(y)&&(R||N)&&(P||k)});o(d,h),a.dragGroup=h}if(!a.frameGroup){var g=ae("g");ie(g,i.cls("djs-frame-group",["no-events"])),me(n.getActiveLayer(),g);var m=[];M(f,function(y){var R=r.addFrame(y,g),P=R.getBBox();m.push({element:R,initialBounds:P}),n.addMarker(y,xb)}),a.frameGroup=g,a.frames=m}var E={x:"M"+s.x+", -10000 L"+s.x+", 10000",y:"M -10000, "+s.y+" L 10000, "+s.y};ie(c,{d:E[l]});var x={x:"y",y:"x"},b={x:s.dx,y:s.dy};b[x[a.axis]]=0,kt(a.dragGroup,b.x,b.y),M(a.frames,function(y){var R=y.element,P=y.initialBounds,N,k;a.direction==="e"?ie(R,{width:Rl(P.width+b.x,5)}):(N=Rl(P.width-b.x,5),ie(R,{width:N,x:P.x+P.width-N})),a.direction==="s"?ie(R,{height:Rl(P.height+b.y,5)}):(k=Rl(P.height-b.y,5),ie(R,{height:k,y:P.y+P.height-k}))})}}),e.on("spaceTool.cleanup",function(s){var a=s.context,c=a.movingShapes,l=a.movingConnections,u=a.resizingShapes,f=a.line,p=a.dragGroup,h=a.frameGroup;M(c,function(d){n.removeMarker(d,Mp)}),M(l,function(d){n.removeMarker(d,Mp)}),p&&(vt(f),vt(p)),M(u,function(d){n.removeMarker(d,xb)}),h&&vt(h)})}oC.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const b6={__init__:["spaceToolPreview"],__depends__:[Ji,Ei,Tf,Xs,Dc],spaceTool:["type",Ln],spaceToolPreview:["type",oC]};function Pf(e,t){e.invoke(Ln,this),this._canvas=t}Pf.$inject=["injector","canvas"];re(Pf,Ln);Pf.prototype.calculateAdjustments=function(e,t,n,i){var r=this._canvas.getRootElement(),o=e[0]===r?null:e[0],s=[];o&&(s=Vu(cx(r.children.filter(l=>w(l,"bpmn:Artifact")),yt(o))));const a=[...e,...s];var c=Ln.prototype.calculateAdjustments.call(this,a,t,n,i);return c.resizingShapes=c.resizingShapes.filter(function(l){return!(w(l,"bpmn:TextAnnotation")||w6(l)&&(t==="y"&&wt(l)||t==="x"&&!wt(l)))}),c};function w6(e){return w(e,"bpmn:Participant")&&!J(e).processRef}const sC={__depends__:[b6],spaceTool:["type",Pf]};function rt(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}rt.$inject=["eventBus","injector"];rt.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};rt.prototype.canExecute=function(e,t){const n={command:e,context:t},i=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r};rt.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};rt.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};rt.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};rt.prototype.register=function(e,t){this._setHandler(e,t)};rt.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};rt.prototype.canUndo=function(){return!!this._getUndoAction()};rt.prototype.canRedo=function(){return!!this._getRedoAction()};rt.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};rt.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};rt.prototype._internalUndo=function(e){const t=e.command,n=e.context,i=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),i.revert&&this._markDirty(i.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};rt.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const i=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const o of i)if(r=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return r};rt.prototype._createId=function(){return this._uid++};rt.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};rt.prototype._internalExecute=function(e,t){const n=e.command,i=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(i),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(i)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(i),this._fire(n,"postExecuted",e)),this._popAction()};rt.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)};rt.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:qE("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};rt.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=de(e)?e:[e],t.dirty=t.dirty.concat(e))};rt.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};rt.prototype._revertedAction=function(e){this._stackIdx--};rt.prototype._getHandler=function(e){return this._handlerMap[e]};rt.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const E6={commandStack:["type",rt]};function xr(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var x6=250,Sb=1400;function am(e,t,n){K.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",Sb,function(r){var o=r.context,s=o.shapes,a=o.validatedShapes;o.shapes=Cb(s),o.validatedShapes=Cb(a)}),i&&t.on("shape.move.start",x6,function(r){var o=r.context,s=o.shapes,a=[];M(s,function(c){M(c.labels,function(l){!l.hidden&&o.shapes.indexOf(l)===-1&&a.push(l),c.labelTarget&&a.push(c)})}),M(a,function(c){i.makeDraggable(o,c,!0)})}),this.preExecuted("elements.move",Sb,function(r){var o=r.context,s=o.closure,a=s.enclosedElements,c=[];M(a,function(l){M(l.labels,function(u){a[u.id]||c.push(u)})}),s.addAll(c)}),this.preExecute(["connection.delete","shape.delete"],function(r){var o=r.context,s=o.connection||o.shape;xr(s.labels,function(a){n.removeShape(a,{nested:!0})})}),this.execute("shape.delete",function(r){var o=r.context,s=o.shape,a=s.labelTarget;a&&(o.labelTargetIndex=Fd(a.labels,s),o.labelTarget=a,s.labelTarget=null)}),this.revert("shape.delete",function(r){var o=r.context,s=o.shape,a=o.labelTarget,c=o.labelTargetIndex;a&&(_t(a.labels,s,c),s.labelTarget=a)})}re(am,K);am.$inject=["injector","eventBus","modeling"];function Cb(e){return Se(e,function(t){return e.indexOf(t.labelTarget)===-1})}const S6={__init__:["labelSupport"],labelSupport:["type",am]};var C6=251,Rb=1401,Tb="attach-ok";function cm(e,t,n,i,r){K.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",Rb,function(s){var a=s.context,c=a.shapes,l=a.validatedShapes;a.shapes=R6(c),a.validatedShapes=T6(l)}),o&&t.on("shape.move.start",C6,function(s){var a=s.context,c=a.shapes,l=Gh(c);M(l,function(u){o.makeDraggable(a,u,!0),M(u.labels,function(f){o.makeDraggable(a,f,!0)})})}),o&&t.on("shape.move.start",function(s){var a=s.context,c=a.shapes;if(c.length===1){var l=c[0],u=l.host;u&&(n.addMarker(u,Tb),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(u,Tb)}))}}),this.preExecuted("elements.move",Rb,function(s){var a=s.context,c=a.closure,l=a.shapes,u=Gh(l);M(u,function(f){c.add(f,c.topLevel[f.host.id])})}),this.postExecuted("elements.move",function(s){var a=s.context,c=a.shapes,l=a.newHost,u;l&&c.length!==1||(l?u=c:u=Se(c,function(f){var p=f.host;return P6(f)&&!A6(c,p)}),M(u,function(f){r.updateAttachment(f,l)}))}),this.postExecuted("elements.move",function(s){var a=s.context.shapes;M(a,function(c){M(c.attachers,function(l){M(l.outgoing.slice(),function(u){var f=i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});f||r.removeConnection(u)}),M(l.incoming.slice(),function(u){var f=i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});f||r.removeConnection(u)})})})}),this.postExecute("shape.create",function(s){var a=s.context,c=a.shape,l=a.host;l&&r.updateAttachment(c,l)}),this.postExecute("shape.replace",function(s){var a=s.context,c=a.oldShape,l=a.newShape;xr(c.attachers,function(u){var f=i.allowed("elements.move",{target:l,shapes:[u]});f==="attach"?r.updateAttachment(u,l):r.removeShape(u)}),l.attachers.length&&M(l.attachers,function(u){var f=nb(u,c,l);r.moveShape(u,f,u.parent)})}),this.postExecute("shape.resize",function(s){var a=s.context,c=a.shape,l=a.oldBounds,u=a.newBounds,f=c.attachers,p=a.hints||{};p.attachSupport!==!1&&M(f,function(h){var d=nb(h,l,u);r.moveShape(h,d,h.parent),M(h.labels,function(g){r.moveShape(g,d,g.parent)})})}),this.preExecute("shape.delete",function(s){var a=s.context.shape;xr(a.attachers,function(c){r.removeShape(c)}),a.host&&r.updateAttachment(a,null)})}re(cm,K);cm.$inject=["injector","eventBus","canvas","rules","modeling"];function Gh(e){return Nd(zt(e,function(t){return t.attachers||[]}))}function R6(e){var t=Gh(e);return bI("id",e,t)}function T6(e){var t=js(e,"id");return Se(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function P6(e){return!!e.host}function A6(e,t){return e.indexOf(t)!==-1}const k6={__depends__:[Ei],__init__:["attachSupport"],attachSupport:["type",cm]};function Bn(e){this._model=e}Bn.$inject=["moddle"];Bn.prototype._needsId=function(e){return Ce(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};Bn.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;w(e,"bpmn:Activity")?t="Activity":w(e,"bpmn:Event")?t="Event":w(e,"bpmn:Gateway")?t="Gateway":Ce(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};Bn.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};Bn.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};Bn.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",$({bpmnElement:e,bounds:this.createDiBounds()},t))};Bn.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};Bn.prototype.createDiWaypoints=function(e){var t=this;return zt(e,function(n){return t.createDiWaypoint(n)})};Bn.prototype.createDiWaypoint=function(e){return this.create("dc:Point",ei(e,["x","y"]))};Bn.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",$({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};Bn.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",$({bpmnElement:e},t))};function mn(e,t,n){K.call(this,e),this._bpmnFactory=t;var i=this;function r(h){var d=h.context,g=d.hints||{},m;!d.cropped&&g.createElementsBehavior!==!1&&(m=d.connection,m.waypoints=n.getCroppedWaypoints(m),d.cropped=!0)}this.executed(["connection.layout","connection.create"],r),this.reverted(["connection.layout"],function(h){delete h.context.cropped});function o(h){var d=h.context;i.updateParent(d.shape||d.connection,d.oldParent)}function s(h){var d=h.context,g=d.shape||d.connection,m=d.parent||d.newParent;i.updateParent(g,m)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],ln(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],ln(s));function a(h){var d=h.context,g=d.oldRoot,m=g.children;M(m,function(E){w(E,"bpmn:BaseElement")&&i.updateParent(E)})}this.executed(["canvas.updateRoot"],a),this.reverted(["canvas.updateRoot"],a);function c(h){var d=h.context.shape;w(d,"bpmn:BaseElement")&&i.updateBounds(d)}this.executed(["shape.move","shape.create","shape.resize"],ln(function(h){h.context.shape.type!=="label"&&c(h)})),this.reverted(["shape.move","shape.create","shape.resize"],ln(function(h){h.context.shape.type!=="label"&&c(h)})),e.on("shape.changed",function(h){h.element.type==="label"&&c({context:{shape:h.element}})});function l(h){i.updateConnection(h.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],ln(l)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],ln(l));function u(h){i.updateConnectionWaypoints(h.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],ln(u)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],ln(u)),this.executed("connection.reconnect",ln(function(h){var d=h.context,g=d.connection,m=d.oldSource,E=d.newSource,x=J(g),b=J(m),y=J(E);x.conditionExpression&&!Ce(y,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(d.oldConditionExpression=x.conditionExpression,delete x.conditionExpression),m!==E&&b.default===x&&(d.oldDefault=b.default,delete b.default)})),this.reverted("connection.reconnect",ln(function(h){var d=h.context,g=d.connection,m=d.oldSource,E=d.newSource,x=J(g),b=J(m),y=J(E);d.oldConditionExpression&&(x.conditionExpression=d.oldConditionExpression),d.oldDefault&&(b.default=d.oldDefault,delete y.default)}));function f(h){i.updateAttachment(h.context)}this.executed(["element.updateAttachment"],ln(f)),this.reverted(["element.updateAttachment"],ln(f)),this.executed("element.updateLabel",ln(p)),this.reverted("element.updateLabel",ln(p));function p(h){const{element:d}=h.context,g=ti(d),m=ke(d),E=m&&m.get("label");So(d)||jl(d)||(g&&!E?m.set("label",t.create("bpmndi:BPMNLabel")):!g&&E&&m.set("label",void 0))}}re(mn,K);mn.$inject=["eventBus","bpmnFactory","connectionDocking"];mn.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject};mn.prototype.updateParent=function(e,t){if(!Oe(e)&&!(w(e,"bpmn:DataStoreReference")&&e.parent&&w(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,r=ke(e),o=n&&n.businessObject,s=ke(n);w(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,o,t&&t.businessObject),w(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),w(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(i,o),w(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,o),this.updateDiParent(r,s)}};mn.prototype.updateBounds=function(e){var t=ke(e),n=D6(e);if(n){var i=Jn(n,t.get("bounds"));$(n,{x:e.x+i.x,y:e.y+i.y})}var r=Oe(e)?this._getLabel(t):t,o=r.bounds;o||(o=this._bpmnFactory.createDiBounds(),r.set("bounds",o)),$(o,{x:e.x,y:e.y,width:e.width,height:e.height})};mn.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var i,r;w(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),pt(i,e)),w(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),_t(r,e))}};mn.prototype.updateDiConnection=function(e,t,n){var i=ke(e),r=ke(t),o=ke(n);i.sourceElement&&i.sourceElement.bpmnElement!==J(t)&&(i.sourceElement=t&&r),i.targetElement&&i.targetElement.bpmnElement!==J(n)&&(i.targetElement=n&&o)};mn.prototype.updateDiParent=function(e,t){if(t&&!w(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(pt(n,e),e.$parent=null)}};function O6(e){for(;e&&!w(e,"bpmn:Definitions");)e=e.$parent;return e}mn.prototype.getLaneSet=function(e){var t,n;return w(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(w(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};mn.prototype.updateSemanticParent=function(e,t,n){var i;if(e.$parent!==t&&!((w(e,"bpmn:DataInput")||w(e,"bpmn:DataOutput"))&&(w(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(w(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(w(e,"bpmn:FlowElement")){if(t){if(w(t,"bpmn:Participant"))t=t.processRef;else if(w(t,"bpmn:Lane"))do t=t.$parent.$parent;while(w(t,"bpmn:Lane"))}i="flowElements"}else if(w(e,"bpmn:Artifact")){for(;t&&!w(t,"bpmn:Process")&&!w(t,"bpmn:SubProcess")&&!w(t,"bpmn:Collaboration");)if(w(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;i="artifacts"}else if(w(e,"bpmn:MessageFlow"))i="messageFlows";else if(w(e,"bpmn:Participant")){i="participants";var r=e.processRef,o;r&&(o=O6(e.$parent||t),e.$parent&&(pt(o.get("rootElements"),r),r.$parent=null),t&&(_t(o.get("rootElements"),r),r.$parent=o))}else w(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":w(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var s;if(e.$parent&&(s=e.$parent.get(i),pt(s,e)),t?(s=t.get(i),s.push(e),e.$parent=t):e.$parent=null,n){var a=n.get(i);pt(s,e),t&&(a||(a=[],t.set(i,a)),a.push(e))}}};mn.prototype.updateConnectionWaypoints=function(e){var t=ke(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};mn.prototype.updateConnection=function(e){var t=e.connection,n=J(t),i=t.source,r=J(i),o=t.target,s=J(t.target),a;if(w(n,"bpmn:DataAssociation"))w(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=r,a=e.parent||e.newParent||s,this.updateSemanticParent(n,s,a)):w(n,"bpmn:DataOutputAssociation")&&(a=e.parent||e.newParent||r,this.updateSemanticParent(n,r,a),n.targetRef=s);else{var c=w(n,"bpmn:SequenceFlow");n.sourceRef!==r&&(c&&(pt(n.sourceRef&&n.sourceRef.get("outgoing"),n),r&&r.get("outgoing")&&r.get("outgoing").push(n)),n.sourceRef=r),n.targetRef!==s&&(c&&(pt(n.targetRef&&n.targetRef.get("incoming"),n),s&&s.get("incoming")&&s.get("incoming").push(n)),n.targetRef=s)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,i,o)};mn.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function ln(e){return function(t){var n=t.context,i=n.shape||n.connection||n.element;w(i,"bpmn:BaseElement")&&e(t)}}function D6(e){if(w(e,"bpmn:Activity")){var t=ke(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function zr(e,t){Gi.call(this),this._bpmnFactory=e,this._moddle=t}re(zr,Gi);zr.$inject=["bpmnFactory","moddle"];zr.prototype._baseCreate=Gi.prototype.create;zr.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,$({type:"label",di:n},nc,t))}return this.createElement(e,t)};zr.prototype.createElement=function(e,t){t=$({},t||{});var n,i=t.businessObject,r=t.di;if(!i){if(!t.type)throw new Error("no shape type specified");i=this._bpmnFactory.create(t.type),Hx(i)}if(!I6(r)){var o=$({},r||{},{id:i.id+"_di"});e==="root"?r=this._bpmnFactory.createDiPlane(i,o):e==="connection"?r=this._bpmnFactory.createDiEdge(i,o):r=this._bpmnFactory.createDiShape(i,o)}w(i,"bpmn:Group")&&(t=$({isFrame:!0},t)),t=M6(i,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=Kh(r,t,"isExpanded")),Ce(i,["bpmn:Lane","bpmn:Participant"])&&(t=Kh(r,t,"isHorizontal")),w(i,"bpmn:SubProcess")&&(t.collapsed=!Te(i,r)),w(i,"bpmn:ExclusiveGateway")&&(rn(r,"isMarkerVisible")?r.isMarkerVisible===void 0&&(r.isMarkerVisible=!1):r.isMarkerVisible=!0),xt(t.triggeredByEvent)&&(i.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),xt(t.cancelActivity)&&(i.cancelActivity=t.cancelActivity,delete t.cancelActivity);var s,a;return t.eventDefinitionType&&(s=i.get("eventDefinitions")||[],a=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(a.condition=this._bpmnFactory.create("bpmn:FormalExpression")),s.push(a),a.$parent=i,i.eventDefinitions=s,delete t.eventDefinitionType),n=this.getDefaultSize(i,r),t=$({id:i.id},n,t,{businessObject:i,di:r}),this._baseCreate(e,t)};zr.prototype.getDefaultSize=function(e,t){var n=J(e);if(t=t||ke(e),w(n,"bpmn:SubProcess"))return Te(n,t)?{width:350,height:200}:{width:100,height:80};if(w(n,"bpmn:Task"))return{width:100,height:80};if(w(n,"bpmn:Gateway"))return{width:50,height:50};if(w(n,"bpmn:Event"))return{width:36,height:36};if(w(n,"bpmn:Participant")){var i=t.isHorizontal===void 0||t.isHorizontal===!0;return Te(n,t)?i?{width:600,height:250}:{width:250,height:600}:i?{width:400,height:60}:{width:60,height:400}}return w(n,"bpmn:Lane")?{width:400,height:100}:w(n,"bpmn:DataObjectReference")?{width:36,height:50}:w(n,"bpmn:DataStoreReference")?{width:50,height:50}:w(n,"bpmn:TextAnnotation")?{width:100,height:30}:w(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};zr.prototype.createParticipantShape=function(e){return Ct(e)||(e={isExpanded:e}),e=$({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function M6(e,t,n){return M(n,function(i){t=Kh(e,t,i)}),t}function Kh(e,t,n){return t[n]===void 0?t:(e[n]=t[n],_i(t,[n]))}function I6(e){return Ce(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function Af(e,t){this._modeling=e,this._canvas=t}Af.$inject=["modeling","canvas"];Af.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;M(n,function(r){var o={x:0,y:0};xt(i.left)?o.x=i.left-r.x:xt(i.right)?o.x=i.right-r.width-r.x:xt(i.center)?o.x=i.center-Math.round(r.width/2)-r.x:xt(i.top)?o.y=i.top-r.y:xt(i.bottom)?o.y=i.bottom-r.height-r.y:xt(i.middle)&&(o.y=i.middle-Math.round(r.height/2)-r.y),t.moveElements([r],o,r.parent)})};Af.prototype.postExecute=function(e){};function kf(e){this._modeling=e}kf.$inject=["modeling"];kf.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,r=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:r.attach}),e.shape=i};kf.prototype.postExecute=function(e){var t=e.hints||{};N6(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function N6(e,t){return Dr(e.outgoing,function(n){return n.target===t})}function Of(e,t){this._canvas=e,this._layouter=t}Of.$inject=["canvas","layouter"];Of.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,o=e.parentIndex,s=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,s)),this._canvas.addConnection(t,r,o),t};Of.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Tl=Math.round;function lm(e){this._modeling=e}lm.$inject=["modeling"];lm.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,r=e.position,o=e.hints,s=this._modeling;M(t,function(f){pe(f.x)||(f.x=0),pe(f.y)||(f.y=0)});var a=Se(t,function(f){return!f.hidden}),c=yt(a);M(t,function(f){He(f)&&(f.waypoints=zt(f.waypoints,function(p){return{x:Tl(p.x-c.x-c.width/2+r.x),y:Tl(p.y-c.y-c.height/2+r.y)}})),$(f,{x:Tl(f.x-c.x-c.width/2+r.x),y:Tl(f.y-c.y-c.height/2+r.y)})});var l=Yu(t),u={};M(t,function(f){if(He(f)){u[f.id]=pe(i)?s.createConnection(u[f.source.id],u[f.target.id],i,f,f.parent||n,o):s.createConnection(u[f.source.id],u[f.target.id],f,f.parent||n,o);return}var p=$({},o);l.indexOf(f)===-1&&(p.autoResize=!1),Oe(f)&&(p=_i(p,["attach"])),u[f.id]=pe(i)?s.createShape(f,ei(f,["x","y","width","height"]),f.parent||n,i,p):s.createShape(f,ei(f,["x","y","width","height"]),f.parent||n,p)}),e.elements=Vu(u)};var Pb=Math.round;function Ur(e){this._canvas=e}Ur.$inject=["canvas"];Ur.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?$(t,n):$(t,{x:n.x-Pb(t.width/2),y:n.y-Pb(t.height/2)}),this._canvas.addShape(t,i,r),t};Ur.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function Ic(e){Ur.call(this,e)}re(Ic,Ur);Ic.$inject=["canvas"];var $6=Ur.prototype.execute;Ic.prototype.execute=function(e){var t=e.shape;return B6(t),t.labelTarget=e.labelTarget,$6.call(this,e)};var L6=Ur.prototype.revert;Ic.prototype.revert=function(e){return e.shape.labelTarget=null,L6.call(this,e)};function B6(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function Nc(e,t){this._canvas=e,this._modeling=t}Nc.$inject=["canvas","modeling"];Nc.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;xr(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),xr(n.outgoing,function(i){t.removeConnection(i,{nested:!0})})};Nc.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Fd(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};Nc.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,_t(n.children,t,i),this._canvas.addConnection(t,n),t};function um(e,t){this._modeling=e,this._elementRegistry=t}um.$inject=["modeling","elementRegistry"];um.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;M(i,function(r){n.get(r.id)&&(r.waypoints?t.removeConnection(r):t.removeShape(r))})};function $c(e,t){this._canvas=e,this._modeling=t}$c.$inject=["canvas","modeling"];$c.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;xr(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),xr(n.outgoing,function(i){t.removeConnection(i,{nested:!0})}),xr(n.children,function(i){He(i)?t.removeConnection(i,{nested:!0}):t.removeShape(i,{nested:!0})})};$c.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=Fd(i.children,n),t.removeShape(n),n};$c.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return _t(i.children,n,r),t.addShape(n,i),n};function Df(e){this._modeling=e}Df.$inject=["modeling"];var Ab={x:"y",y:"x"};Df.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function o(m,E){m.range.min=Math.min(E[i],m.range.min),m.range.max=Math.max(E[i]+E[r],m.range.max)}function s(m){return m[i]+m[r]/2}function a(m){return m.length-1}function c(m){return m.max-m.min}function l(m,E){var x={y:0};x[i]=m-s(E),x[i]&&(x[Ab[i]]=0,t.moveElements([E],x,E.parent))}var u=n[0],f=a(n),p=n[f],h,d,g=0;M(n,function(m,E){var x,b,y;if(m.elements.length<2){E&&E!==n.length-1&&(o(m,m.elements[0]),g+=c(m.range));return}x=vi(m.elements,i),b=x[0],E===f&&(b=x[a(x)]),y=s(b),m.range=null,M(x,function(R){if(l(y,R),m.range===null){m.range={min:R[i],max:R[i]+R[r]};return}o(m,R)}),E&&E!==n.length-1&&(g+=c(m.range))}),d=Math.abs(p.range.min-u.range.max),h=Math.round((d-g)/(n.length-1)),!(h<n.length-1)&&M(n,function(m,E){var x={},b;m===u||m===p||(b=n[E-1],m.range.max=0,M(m.elements,function(y,R){x[Ab[i]]=0,x[i]=b.range.max-y[i]+h,m.range.min!==y[i]&&(x[i]+=y[i]-m.range.min),x[i]&&t.moveElements([y],x,y.parent),m.range.max=Math.max(y[i]+y[r],R?m.range.max:0)}))})};Df.prototype.postExecute=function(e){};function Mf(e,t){this._layouter=e,this._canvas=t}Mf.$inject=["layouter","canvas"];Mf.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return $(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};Mf.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function fm(){}fm.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=pt(o.children,t),_t(i.children,t,r),t.parent=i,M(t.waypoints,function(s){s.x+=n.x,s.y+=n.y,s.original&&(s.original.x+=n.x,s.original.y+=n.y)}),t};fm.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,o=e.delta;return pt(n.children,t),_t(i.children,t,r),t.parent=i,M(t.waypoints,function(s){s.x-=o.x,s.y-=o.y,s.original&&(s.original.x-=o.x,s.original.y-=o.y)}),t};function pm(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}pm.prototype.add=function(e,t){return this.addAll([e],t)};pm.prototype.addAll=function(e,t){var n=u2(e,!!t,this);return $(this,n),this};function Lc(e){this._modeling=e}Lc.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};Lc.prototype.moveClosure=function(e,t,n,i,r){var o=this._modeling,s=e.allShapes,a=e.allConnections,c=e.enclosedConnections,l=e.topLevel,u=!1;r&&r.parent===n&&(u=!0),M(s,function(f){o.moveShape(f,t,l[f.id]&&!u&&n,{recurse:!1,layout:!1})}),M(a,function(f){var p=!!s[f.source.id],h=!!s[f.target.id];c[f.id]&&p&&h?o.moveConnection(f,t,l[f.id]&&!u&&n):o.layoutConnection(f,{connectionStart:p&&$g(f,f.source,t),connectionEnd:h&&Lg(f,f.target,t)})})};Lc.prototype.getClosure=function(e){return new pm().addAll(e,!0)};function If(e){this._helper=new Lc(e)}If.$inject=["modeling"];If.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};If.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function $o(e){this._modeling=e,this._helper=new Lc(e)}$o.$inject=["modeling"];$o.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldBounds=ei(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=pt(o.children,t),_t(i.children,t,r),$(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t};$o.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;i.layout!==!1&&(M(t.incoming,function(o){r.layoutConnection(o,{connectionEnd:Lg(o,t,n)})}),M(t.outgoing,function(o){r.layoutConnection(o,{connectionStart:$g(o,t,n)})})),i.recurse!==!1&&this.moveChildren(e)};$o.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return _t(n.children,t,i),$(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t};$o.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};$o.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Bc(e){this._modeling=e}Bc.$inject=["modeling"];Bc.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return de(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i};Bc.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,o=e.hints||{},s={};o.connectionStart&&(s.connectionStart=o.connectionStart),o.connectionEnd&&(s.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(n&&(!i||o.docking==="source")&&(s.connectionStart=s.connectionStart||kb(de(r)?r[0]:r)),i&&(!n||o.docking==="target")&&(s.connectionEnd=s.connectionEnd||kb(de(r)?r[r.length-1]:r)),o.newWaypoints&&(s.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,s))};Bc.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),i&&(r.waypoints=i),r};function kb(e){return e.original||e}function Zi(e,t){this._modeling=e,this._rules=t}Zi.$inject=["modeling","rules"];Zi.prototype.preExecute=function(e){var t=this,n=this._modeling,i=this._rules,r=e.oldShape,o=e.newData,s=e.hints||{},a;function c(d,g,m){return i.allowed("connection.reconnect",{connection:m,source:d,target:g})}var l={x:o.x,y:o.y},u={x:r.x,y:r.y,width:r.width,height:r.height};a=e.newShape=e.newShape||t.createShape(o,l,r.parent,s),r.host&&n.updateAttachment(a,r.host);var f;s.moveChildren!==!1&&(f=r.children.slice(),n.moveElements(f,{x:0,y:0},a,s));var p=r.incoming.slice(),h=r.outgoing.slice();M(p,function(d){var g=d.source,m=c(g,a,d);m&&t.reconnectEnd(d,a,wf(d,a,u),s)}),M(h,function(d){var g=d.target,m=c(a,g,d);m&&t.reconnectStart(d,a,bf(d,a,u),s)})};Zi.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};Zi.prototype.execute=function(e){};Zi.prototype.revert=function(e){};Zi.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)};Zi.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)};Zi.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)};function jc(e){this._modeling=e}jc.$inject=["modeling"];jc.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},$(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};jc.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,r=e.hints||{};r.layout!==!1&&(M(n.incoming,function(o){t.layoutConnection(o,{connectionEnd:wf(o,n,i)})}),M(n.outgoing,function(o){t.layoutConnection(o,{connectionStart:bf(o,n,i)})}))};jc.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return $(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function Vr(e){this._modeling=e}Vr.$inject=["modeling"];Vr.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,o=e.start,s={};this.moveShapes(i,t),M(r,function(a){s[a.id]=F6(a)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(h6(i,r),t,n,o,i,r,s)};Vr.prototype.execute=function(){};Vr.prototype.revert=function(){};Vr.prototype.moveShapes=function(e,t){var n=this;M(e,function(i){n._modeling.moveShape(i,t,null,{autoResize:!1,layout:!1,recurse:!1})})};Vr.prototype.resizeShapes=function(e,t,n){var i=this;M(e,function(r){var o=d6(r,n,t);i._modeling.resizeShape(r,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})};Vr.prototype.updateConnectionWaypoints=function(e,t,n,i,r,o,s){var a=this,c=r.concat(o);M(e,function(l){var u=l.source,f=l.target,p=j6(l),h=aC(n),d={};cr(c,u)&&cr(c,f)?(p=zt(p,function(g){return Db(g,i,n)&&(g[h]=g[h]+t[h]),g.original&&Db(g.original,i,n)&&(g.original[h]=g.original[h]+t[h]),g}),a._modeling.updateWaypoints(l,p,{labelBehavior:!1})):(cr(c,u)||cr(c,f))&&(cr(r,u)?d.connectionStart=$g(l,u,t):cr(r,f)?d.connectionEnd=Lg(l,f,t):cr(o,u)?d.connectionStart=bf(l,u,s[u.id]):cr(o,f)&&(d.connectionEnd=wf(l,f,s[f.id])),a._modeling.layoutConnection(l,d))})};function Ob(e){return $({},e)}function j6(e){return zt(e.waypoints,function(t){return t=Ob(t),t.original&&(t.original=Ob(t.original)),t})}function aC(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function Db(e,t,n){var i=aC(n);if(/e|s/.test(n))return e[i]>t;if(/n|w/.test(n))return e[i]<t}function cr(e,t){return e.indexOf(t)!==-1}function F6(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Nf(e){this._modeling=e}Nf.$inject=["modeling"];Nf.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=cC(n),t.collapsed=!t.collapsed;var i=lC(n,t.collapsed);return[t].concat(i)};Nf.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children,r=uC(i,n);return t.collapsed=!t.collapsed,[t].concat(r)};function cC(e){var t={};return M(e,function(n){t[n.id]=n.hidden,n.children&&(t=$({},t,cC(n.children)))}),t}function lC(e,t){var n=[];return M(e,function(i){i.hidden=t,n=n.concat(i),i.children&&(n=n.concat(lC(i.children,i.collapsed||t)))}),n}function uC(e,t){var n=[];return M(e,function(i){i.hidden=t[i.id],n=n.concat(i),i.children&&(n=n.concat(uC(i.children,t)))}),n}function $f(e){this._modeling=e}$f.$inject=["modeling"];$f.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=fC(i,t),pC(n,t),t.host=n,t};$f.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,fC(n,t),pC(i,t,r),t};function fC(e,t){return pt(e&&e.attachers,t)}function pC(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),_t(i,t,n)}}function hm(){}hm.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};hm.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function ze(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}ze.$inject=["eventBus","elementFactory","commandStack"];ze.prototype.getHandlers=function(){return{"shape.append":kf,"shape.create":Ur,"shape.delete":$c,"shape.move":$o,"shape.resize":jc,"shape.replace":Zi,"shape.toggleCollapse":Nf,spaceTool:Vr,"label.create":Ic,"connection.create":Of,"connection.delete":Nc,"connection.move":fm,"connection.layout":Mf,"connection.updateWaypoints":hm,"connection.reconnect":Bc,"elements.create":lm,"elements.move":If,"elements.delete":um,"elements.distribute":Df,"elements.align":Af,"element.updateAttachment":$f}};ze.prototype.registerHandlers=function(e){M(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};ze.prototype.moveShape=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=null);var o={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)};ze.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};ze.prototype.moveElements=function(e,t,n,i){i=i||{};var r=i.attach,o=n,s;r===!0?(s=n,o=n.parent):r===!1&&(s=null);var a={shapes:e,delta:t,newParent:o,newHost:s,hints:i};this._commandStack.execute("elements.move",a)};ze.prototype.moveConnection=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)};ze.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};ze.prototype.createConnection=function(e,t,n,i,r,o){typeof n=="object"&&(o=r,r=i,i=n,n=void 0),i=this._create("connection",i);var s={source:e,target:t,parent:r,parentIndex:n,connection:i,hints:o};return this._commandStack.execute("connection.create",s),s.connection};ze.prototype.createShape=function(e,t,n,i,r){typeof i!="number"&&(r=i,i=void 0),r=r||{};var o=r.attach,s,a;e=this._create("shape",e),o?(s=n.parent,a=n):s=n;var c={position:t,shape:e,parent:s,parentIndex:i,host:a,hints:r};return this._commandStack.execute("shape.create",c),c.shape};ze.prototype.createElements=function(e,t,n,i,r){de(e)||(e=[e]),typeof i!="number"&&(r=i,i=void 0),r=r||{};var o={position:t,elements:e,parent:n,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",o),o.elements};ze.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape};ze.prototype.appendShape=function(e,t,n,i,r){r=r||{},t=this._create("shape",t);var o={source:e,position:n,target:i,shape:t,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",o),o.shape};ze.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};ze.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)};ze.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};ze.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};ze.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape};ze.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};ze.prototype.resizeShape=function(e,t,n,i){var r={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)};ze.prototype.createSpace=function(e,t,n,i,r){var o={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",o)};ze.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)};ze.prototype.reconnect=function(e,t,n,i,r){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",o)};ze.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,$(i,{docking:"source"}))};ze.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,$(i,{docking:"target"}))};ze.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)};ze.prototype._create=function(e,t){return U2(t)?t:this._elementFactory.create(e,t)};ze.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function Fc(e){this._elementRegistry=e}Fc.$inject=["elementRegistry"];Fc.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var r=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||H6(n,lu(i));return hC(n,i),e.oldProperties=o,e.changed=r,r};Fc.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return hC(n,t),i};Fc.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return w(e,"bpmn:DataObject")?z6(e,t):[]};function H6(e,t){return dn(t,function(n,i){return n[i]=e.get(i),n},{})}function hC(e,t){M(t,function(n,i){e.set(i,n)})}function z6(e,t){return t.filter(function(n){return w(n,"bpmn:DataObjectReference")&&J(n).dataObjectRef===e})}var _a="default",Fi="id",dC="di",U6={width:0,height:0};function Hc(e,t,n,i){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=i}Hc.$inject=["elementRegistry","moddle","modeling","textRenderer"];Hc.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var i=this._elementRegistry,r=this._moddle.ids,o=t.businessObject,s=q6(e.properties),a=e.oldProperties||V6(t,s);return gC(s,o)&&(r.unclaim(o[Fi]),i.updateId(t,s[Fi]),r.claim(s[Fi],o)),_a in s&&(s[_a]&&n.push(i.get(s[_a].id)),o[_a]&&n.push(i.get(o[_a].id))),mC(t,s),e.oldProperties=a,e.changed=n,n};Hc.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&J(n).name;if(i){var r=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,r,U6)}};Hc.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,o=this._elementRegistry,s=this._moddle.ids;return mC(t,i),gC(n,r)&&(s.unclaim(n[Fi]),o.updateId(t,i[Fi]),s.claim(i[Fi],r)),e.changed};function gC(e,t){return Fi in e&&e[Fi]!==t[Fi]}function V6(e,t){var n=lu(t),i=e.businessObject,r=ke(e);return dn(n,function(o,s){return s!==dC?o[s]=i.get(s):o[s]=W6(r,lu(t.di)),o},{})}function W6(e,t){return dn(t,function(n,i){return n[i]=e&&e.get(i),n},{})}function mC(e,t){var n=e.businessObject,i=ke(e);M(t,function(r,o){o!==dC?n.set(o,r):i&&G6(i,r)})}function G6(e,t){M(t,function(n,i){e.set(i,n)})}var K6=["default"];function q6(e){var t=$({},e);return K6.forEach(function(n){n in e&&(t[n]=J(t[n]))}),t}function Lf(e,t){this._canvas=e,this._modeling=t}Lf.$inject=["canvas","modeling"];Lf.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),o=r.businessObject,s=o.$parent,a=ke(r);return t.setRootElement(n),t.removeRootElement(r),_t(s.rootElements,i),i.$parent=s,pt(s.rootElements,o),o.$parent=null,r.di=null,a.bpmnElement=i,n.di=a,e.oldRoot=r,[]};Lf.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=e.oldRoot,o=r.businessObject,s=i.$parent,a=ke(n);return t.setRootElement(r),t.removeRootElement(n),pt(s.rootElements,i),i.$parent=null,_t(s.rootElements,o),o.$parent=s,n.di=null,a.bpmnElement=o,r.di=a,[]};function dm(e,t){this._modeling=e,this._spaceTool=t}dm.$inject=["modeling","spaceTool"];dm.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,o=An(i),s=o===i,a=s?i:i.parent,c=Fr(a),l=wt(i);if(l?r==="left"?r="top":r==="right"&&(r="bottom"):r==="top"?r="left":r==="bottom"&&(r="right"),!c.length){var u=l?{x:i.x+Pn,y:i.y,width:i.width-Pn,height:i.height}:{x:i.x,y:i.y+Pn,width:i.width,height:i.height-Pn};n.createShape({type:"bpmn:Lane",isHorizontal:l},u,a)}var f=[];Oo(o,function(y){return f.push(y),y.label&&f.push(y.label),y===i?[]:Se(y.children,function(R){return R!==i})});var p,h,d,g,m;r==="top"?(p=-120,h=i.y,d=h+10,g="n",m="y"):r==="left"?(p=-120,h=i.x,d=h+10,g="w",m="x"):r==="bottom"?(p=120,h=i.y+i.height,d=h-10,g="s",m="y"):r==="right"&&(p=120,h=i.x+i.width,d=h-10,g="e",m="x");var E=t.calculateAdjustments(f,m,p,d),x=l?{x:0,y:p}:{x:p,y:0};t.makeSpace(E.movingShapes,E.resizingShapes,x,g,d);var b=l?{x:i.x+(s?Pn:0),y:h-(r==="top"?120:0),width:i.width-(s?Pn:0),height:120}:{x:h-(r==="left"?120:0),y:i.y+(s?Pn:0),width:120,height:i.height-(s?Pn:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:l},b,a)};function gm(e){this._modeling=e}gm.$inject=["modeling"];gm.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,i=e.count,r=Fr(n),o=r.length;if(o>i)throw new Error(`more than <${i}> child lanes`);var s=wt(n),a=s?n.height:n.width,c=Math.round(a/i),l,u,f,p;for(p=0;p<i;p++)p===i-1?l=a-c*p:l=c,u=s?{x:n.x+Pn,y:n.y+p*c,width:n.width-Pn,height:l}:{x:n.x+p*c,y:n.y+Pn,width:l,height:n.height-Pn},p<o?t.resizeShape(r[p],u):(f={type:"bpmn:Lane",isHorizontal:s},t.createShape(f,u,n))};function zc(e,t){this._modeling=e,this._spaceTool=t}zc.$inject=["modeling","spaceTool"];zc.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;i!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};zc.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=Ej(e,t);n.resizeShape(e,t),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})};zc.prototype.resizeSpace=function(e,t){var n=this._spaceTool,i=ce(e),r=ce(t),o=m1(r,i),s=An(e),a=[],c=[];Oo(s,function(d){return a.push(d),(w(d,"bpmn:Lane")||w(d,"bpmn:Participant"))&&c.push(d),d.children});var l,u,f,p,h;(o.bottom||o.top)&&(l=o.bottom||o.top,u=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),f=o.bottom?"s":"n",p=o.top>0||o.bottom<0?-l:l,h=n.calculateAdjustments(a,"y",p,u),n.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:l},f)),(o.left||o.right)&&(l=o.right||o.left,u=e.x+(o.right?e.width:0)+(o.right?-10:100),f=o.right?"e":"w",p=o.left>0||o.right<0?-l:l,h=n.calculateAdjustments(c,"x",p,u),n.makeSpace(h.movingShapes,h.resizingShapes,{x:l,y:0},f))};var cc="flowNodeRef",mm="lanes";function Uc(e){this._elementRegistry=e}Uc.$inject=["elementRegistry"];Uc.prototype._computeUpdates=function(e,t){var n=[],i=[],r={},o=[];function s(u,f){var p=ce(f),h={x:u.x+u.width/2,y:u.y+u.height/2};return h.x>p.left&&h.x<p.right&&h.y>p.top&&h.y<p.bottom}function a(u){n.indexOf(u)===-1&&(o.push(u),n.push(u))}function c(u){var f=An(u);return r[f.id]||(r[f.id]=yf(f)),r[f.id]}function l(u){if(!u.parent)return[];var f=c(u);return f.filter(function(p){return s(u,p)}).map(function(p){return p.businessObject})}return t.forEach(function(u){var f=An(u);if(!(!f||n.indexOf(f)!==-1)){var p=f.children.filter(function(h){return w(h,"bpmn:FlowNode")});p.forEach(a),n.push(f)}}),e.forEach(a),o.forEach(function(u){var f=u.businessObject,p=f.get(mm),h=p.slice(),d=l(u);i.push({flowNode:f,remove:h,add:d})}),t.forEach(function(u){var f=u.businessObject;u.parent||f.get(cc).forEach(function(p){i.push({flowNode:p,remove:[f],add:[]})})}),i};Uc.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var i=n.flowNode,r=i.get(mm);n.remove.forEach(function(o){pt(r,o),pt(o.get(cc),i)}),n.add.forEach(function(o){_t(r,o),_t(o.get(cc),i)})}),[]};Uc.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var i=n.flowNode,r=i.get(mm);n.add.forEach(function(o){pt(r,o),pt(o.get(cc),i)}),n.remove.forEach(function(o){_t(r,o),_t(o.get(cc),i)})}),[]};function Bf(e){this._moddle=e}Bf.$inject=["moddle"];Bf.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.claim(n,i):t.unclaim(n),[]};Bf.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.unclaim(n):t.claim(n,i),[]};var Y6={fill:void 0,stroke:void 0};function vm(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(hn(t)){var n=J6(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}vm.$inject=["commandStack"];vm.prototype.postExecute=function(e){var t=e.elements,n=e.colors||Y6,i=this,r={};"fill"in n&&$(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&$(r,{"border-color":this._normalizeColor(n.stroke)}),M(t,function(o){var s=He(o)?ei(r,["border-color"]):r,a=ke(o);if(X6(s),Oe(o))i._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:a.label,properties:{color:r["border-color"]}});else{if(!Ce(a,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;i._commandStack.execute("element.updateProperties",{element:o,properties:{di:s}})}})};function J6(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function X6(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var Z6={width:0,height:0};function vC(e,t,n){function i(c,l){var u=c.label||c,f=c.labelTarget||c;return U$(u,l),[u,f]}function r(c){var l=c.element,u=l.businessObject,f=c.newLabel;if(!Oe(l)&&So(l)&&!ef(l)&&!Mb(f)){var p=7,h=Zd(l);h={x:h.x,y:h.y+p},e.createLabel(l,h,{id:u.id+"_label",businessObject:u,di:l.di})}}function o(c){return c.oldLabel=ti(c.element),i(c.element,c.newLabel)}function s(c){return i(c.element,c.oldLabel)}function a(c){var l=c.element,u=l.label||l,f=c.newLabel,p=c.newBounds,h=c.hints||{};if(!(!Oe(u)&&!w(u,"bpmn:TextAnnotation"))){if(Oe(u)&&Mb(f)){h.removeShape!==!1&&e.removeShape(u,{unsetLabel:!1});return}var d=ti(l);typeof p>"u"&&(p=t.getExternalLabelBounds(u,d)),p&&e.resizeShape(u,p,Z6)}}this.preExecute=r,this.execute=o,this.revert=s,this.postExecute=a}vC.$inject=["modeling","textRenderer","bpmnFactory"];function Mb(e){return!e||!e.trim()}function Vt(e,t,n,i){ze.call(this,e,t,n),this._bpmnRules=i}re(Vt,ze);Vt.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];Vt.prototype.getHandlers=function(){var e=ze.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=Fc,e["element.updateProperties"]=Hc,e["canvas.updateRoot"]=Lf,e["lane.add"]=dm,e["lane.resize"]=zc,e["lane.split"]=gm,e["lane.updateRefs"]=Uc,e["id.updateClaim"]=Bf,e["element.setColor"]=vm,e["element.updateLabel"]=vC,e};Vt.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})};Vt.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,i)};Vt.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};Vt.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};Vt.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};Vt.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};Vt.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};Vt.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};Vt.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};Vt.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};Vt.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};Vt.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};Vt.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function yC(){}yC.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||he(t.source||e.source),t.connectionEnd||he(t.target||e.target)]};var Pl=20,Q6=5,Cu=Math.round,Ib=20,e4={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function t4(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function n4(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function _C(e,t,n){var i=Ut(t,e,Q6),r=n.split(":")[0],o=Cu((t.x-e.x)/2+e.x),s=Cu((t.y-e.y)/2+e.y),a,c,l=n4(r,i),u=/h|r|l/.test(r),f=!1,p=!1;return l?(a=u?{x:o,y:e.y}:{x:e.x,y:s},c=u?"h:h":"v:v"):(f=t4(i,r),c=u?"h:v":"v:h",f?u?(p=s===e.y,a={x:e.x+Pl*(/l/.test(r)?-1:1),y:p?s+Pl:s}):(p=o===e.x,a={x:p?o+Pl:o,y:e.y+Pl*(/t/.test(r)?-1:1)}):a={x:o,y:s}),{waypoints:ym(e,a,c).concat(a),directions:c,turnNextDirections:p}}function i4(e,t,n){return _C(e,t,n)}function r4(e,t,n){var i=_C(t,e,Nb(n));return{waypoints:i.waypoints.slice().reverse(),directions:Nb(i.directions),turnNextDirections:i.turnNextDirections}}function o4(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(i=i=="h"?"v":"h");var r=n+":"+i,o=ym(e.waypoints[e.waypoints.length-1],t.waypoints[0],r);return{waypoints:o,directions:r}}function Nb(e){return e.split(":").reverse().join(":")}function s4(e,t,n){var i=Cu((t.x-e.x)/2+e.x),r=Cu((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:i,y:e.y},{x:i,y:t.y}];if(n==="v:v")return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function ym(e,t,n){if(n=n||"h:h",!g4(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(bC(n)){var i=i4(e,t,n),r=r4(e,t,n),o=o4(i,r);return[].concat(i.waypoints,o.waypoints,r.waypoints)}return s4(e,t,n)}function a4(e,t,n){var i=ym(e,t,n);return i.unshift(e),i.push(t),wC(i)}function c4(e,t,n,i,r){var o=r&&r.preferredLayouts||[],s=yI(o,"straight")[0]||"h:h",a=e4[s]||0,c=Ut(e,t,a),l=d4(c,s);n=n||he(e),i=i||he(t);var u=l.split(":"),f=Lb(n,e,u[0],m4(c)),p=Lb(i,t,u[1],c);return a4(f,p,l)}function l4(e,t,n,i,r,o){de(n)&&(r=n,o=i,n=he(e),i=he(t)),o=$({preferredLayouts:[]},o),r=r||[];var s=o.preferredLayouts,a=s.indexOf("straight")!==-1,c;return c=a&&f4(e,t,n,i,o),c||(c=o.connectionEnd&&h4(t,e,i,r),c)||(c=o.connectionStart&&p4(e,t,n,r),c)?c:!o.connectionStart&&!o.connectionEnd&&r&&r.length?r:c4(e,t,n,i,o)}function u4(e,t,n){return e>=t&&e<=n}function $b(e,t,n){var i={x:"width",y:"height"};return u4(t[e],n[e],n[e]+n[i[e]])}function f4(e,t,n,i,r){var o={},s,a;return a=Ut(e,t),/^(top|bottom|left|right)$/.test(a)?(/top|bottom/.test(a)&&(s="x"),/left|right/.test(a)&&(s="y"),r.preserveDocking==="target"?$b(s,i,e)?(o[s]=i[s],[{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}},{x:i.x,y:i.y}]):null:$b(s,n,t)?(o[s]=n[s],[{x:n.x,y:n.y},{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y,original:{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y}}]):null):null}function p4(e,t,n,i){return _m(e,t,n,i)}function h4(e,t,n,i){var r=i.slice().reverse();return r=_m(e,t,n,r),r?r.reverse():null}function _m(e,t,n,i){function r(u){return u.length<3?!0:u.length>4?!1:!!Me(u,function(f,p){var h=u[p-1];return h&&wc(f,h)<3})}function o(u,f,p){var h=Ii(f,u);switch(h){case"v":return{x:p.x,y:u.y};case"h":return{x:u.x,y:p.y}}return{x:u.x,y:u.y}}function s(u,f,p){var h;for(h=u.length-2;h!==0;h--)if(ky(u[h],f,Ib)||ky(u[h],p,Ib))return u.slice(h);return u}if(r(i))return null;var a=i[0],c=i.slice(),l;return c[0]=n,c[1]=o(c[1],a,n),l=s(c,e,t),l!==c&&(c=_m(e,t,n,l)),c&&Ii(c)?null:c}function d4(e,t){if(bC(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function g4(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function bC(e){return e&&/t|r|b|l/.test(e)}function m4(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function Lb(e,t,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function wC(e){return e.reduce(function(t,n,i){var r=t[t.length-1],o=e[i+1];return Hd(r,o,n,0)||t.push(n),t},[])}var v4=-10,y4=40,_4={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},b4={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},bm={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Sa={top:"t",right:"r",bottom:"b",left:"l"};function jf(e){this._elementRegistry=e}re(jf,yC);jf.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,i=t.target||e.target,r=t.waypoints||e.waypoints,o=t.connectionStart,s=t.connectionEnd,a=this._elementRegistry,c,l;if(o||(o=Bb(r&&r[0],n)),s||(s=Bb(r&&r[r.length-1],i)),(w(e,"bpmn:Association")||w(e,"bpmn:DataAssociation"))&&r&&!jb(n,i))return[].concat([o],r.slice(1,-1),[s]);var u=GS(n,a)?_4:b4;return w(e,"bpmn:MessageFlow")?c=E4(n,i,u):(w(e,"bpmn:SequenceFlow")||jb(n,i))&&(n===i?c={preferredLayouts:P4(n,e,u)}:w(n,"bpmn:BoundaryEvent")?c={preferredLayouts:A4(n,i,s,u)}:lc(n)||lc(i)?c={preferredLayouts:u.subProcess,preserveDocking:S4(n)}:w(n,"bpmn:Gateway")?c={preferredLayouts:u.fromGateway}:w(i,"bpmn:Gateway")?c={preferredLayouts:u.toGateway}:c={preferredLayouts:u.default}),c&&(c=$(c,t),l=wC(l4(n,i,o,s,r,c))),l||[o,s]};function w4(e){var t=e.host;return Ut(he(e),t,v4)}function E4(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:x4(e,t)}}function x4(e,t){return w(t,"bpmn:Participant")?"source":w(e,"bpmn:Participant")?"target":lc(t)?"source":lc(e)||w(t,"bpmn:Event")?"target":w(e,"bpmn:Event")?"source":null}function S4(e){return lc(e)?"target":"source"}function Bb(e,t){return e?e.original||e:he(t)}function jb(e,t){return w(t,"bpmn:Activity")&&w(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function lc(e){return w(e,"bpmn:SubProcess")&&Te(e)}function ho(e,t){return e===t}function C4(e,t){return t.indexOf(e)!==-1}function Os(e){var t=/right|left/.exec(e);return t&&t[0]}function Ds(e){var t=/top|bottom/.exec(e);return t&&t[0]}function Fb(e,t){return bm[e]===t}function R4(e,t){var n=Os(e),i=bm[n];return t.indexOf(i)!==-1}function T4(e,t){var n=Ds(e),i=bm[n];return t.indexOf(i)!==-1}function EC(e){return e==="right"||e==="left"}function P4(e,t,n){var i=t.waypoints,r=i&&i.length&&Ut(i[0],e);return r==="top"?n.loop.fromTop:r==="right"?n.loop.fromRight:r==="left"?n.loop.fromLeft:n.loop.fromBottom}function A4(e,t,n,i){var r=he(e),o=he(t),s=w4(e),a,c,l=ho(e.host,t),u=C4(s,["top","right","bottom","left"]),f=Ut(o,r,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return l?k4(s,u,e,t,n,i):(a=O4(s,f,u,i.isHorizontal),c=D4(s,f,u,i.isHorizontal),[a+":"+c])}function k4(e,t,n,i,r,o){var s=t?e:o.isHorizontal?Ds(e):Os(e),a=Sa[s],c;return t?EC(e)?c=Hb("y",n,i,r)?"h":o.boundaryLoop.alternateHorizontalSide:c=Hb("x",n,i,r)?"v":o.boundaryLoop.alternateVerticalSide:c=o.boundaryLoop.default,[a+":"+c]}function Hb(e,t,n,i){var r=y4;return!(Ip(e,i,n,r)||Ip(e,i,{x:n.x+n.width,y:n.y+n.height},r)||Ip(e,i,he(t),r))}function Ip(e,t,n,i){return Math.abs(t[e]-n[e])<i}function O4(e,t,n,i){if(n)return Sa[e];var r=Ds(e),o=Os(e),s=Ds(t),a=Os(t);if(i){if(ho(r,s)||Fb(o,a))return Sa[r]}else if(ho(o,a)||Fb(r,s))return Sa[o];return Sa[i?o:r]}function D4(e,t,n,i){return n?EC(e)?R4(e,t)||ho(e,t)?"h":"v":T4(e,t)||ho(e,t)?"v":"h":i?ho(Ds(e),Ds(t))?"h":"v":ho(Os(e),Os(t))?"v":"h"}jf.$inject=["elementRegistry"];function zb(e){return $({original:e.point.original||e.point},e.actual)}function Wr(e,t){this._elementRegistry=e,this._graphicsFactory=t}Wr.$inject=["elementRegistry","graphicsFactory"];Wr.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),o=e.waypoints.slice(i.idx+1,r.idx);return o.unshift(zb(i)),o.push(zb(r)),o};Wr.prototype.getDockingPoint=function(e,t,n){var i=e.waypoints,r,o,s;return r=n?0:i.length-1,o=i[r],s=this._getIntersection(t,e,n),{point:o,actual:s||o,idx:r}};Wr.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return wh(i,r,n)};Wr.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};Wr.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};Wr.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const xC={__init__:["modeling","bpmnUpdater"],__depends__:[T3,W3,K3,q3,iC,E6,S6,k6,ni,Qd,sC],bpmnFactory:["type",Bn],bpmnUpdater:["type",mn],elementFactory:["type",zr],modeling:["type",Vt],layouter:["type",jf],connectionDocking:["type",Wr]},Ub=Math.round;function Ff(e,t,n,i,r,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=i,this._layouter=r,this._rules=o}Ff.prototype.create=function(e,t,n){const i=this._complexPreview,r=this._connectionDocking,o=this._elementFactory,s=this._eventBus,a=this._layouter,c=this._rules,l=o.createShape($({type:t},n)),u=s.fire("autoPlace",{source:e,shape:l});if(!u)return;$(l,{x:u.x-Ub(l.width/2),y:u.y-Ub(l.height/2)});const f=c.allowed("connection.create",{source:e,target:l,hints:{targetParent:e.parent}});let p=null;f&&(p=o.createConnection(f),p.waypoints=a.layoutConnection(p,{source:e,target:l}),p.waypoints=r.getCroppedWaypoints(p,e,l)),i.create({created:[l,p].filter(h=>!ec(h))})};Ff.prototype.cleanUp=function(){this._complexPreview.cleanUp()};Ff.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const M4={__depends__:[pg,nj,xC],__init__:["appendPreview"],appendPreview:["type",Ff]};var Vb=Math.min,Wb=Math.max;function Np(e){e.preventDefault()}function za(e){e.stopPropagation()}function I4(e){return e.nodeType===Node.TEXT_NODE}function N4(e){return[].slice.call(e)}function ri(e){this.container=e.container,this.parent=qe('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Fe("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=on(this.autoResize,this),this.handlePaste=on(this.handlePaste,this)}ri.prototype.create=function(e,t,n,i){var r=this,o=this.parent,s=this.content,a=this.container;i=this.options=i||{},t=this.style=t||{};var c=ei(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);$(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},c);var l=ei(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return $(s.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},l),i.centerVertically&&$(s.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},l),s.innerText=n,ye.bind(s,"keydown",this.keyHandler),ye.bind(s,"mousedown",za),ye.bind(s,"paste",r.handlePaste),i.autoResize&&ye.bind(s,"input",this.autoResize),i.resizable&&this.resizable(t),a.appendChild(o),this.setSelection(s.lastChild,s.lastChild&&s.lastChild.length),o};ri.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var i;if(e.clipboardData?i=e.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),t.autoResize){var r=this.autoResize(n);r&&this.resizeHandler(r)}};ri.prototype.insertText=function(e){e=$4(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};ri.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,i=t.endContainer,r=t.startOffset,o=t.endOffset,s=t.commonAncestorContainer,a=N4(s.childNodes),c,l;if(I4(s)){var u=n.textContent;n.textContent=u.substring(0,r)+e+u.substring(o),c=n,l=r+e.length}else if(n===this.content&&i===this.content){var f=document.createTextNode(e);this.content.insertBefore(f,a[r]),c=f,l=f.textContent.length}else{var p=a.indexOf(n),h=a.indexOf(i);a.forEach(function(d,g){g===p?d.textContent=n.textContent.substring(0,r)+e+i.textContent.substring(o):g>p&&g<=h&&yi(d)}),c=n,l=r+e.length}c&&l!==void 0&&setTimeout(function(){self.setSelection(c,l)})};ri.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}};ri.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,s=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=qe('<div class="djs-direct-editing-resize-handle"></div>');var a,c,l,u,f=function(d){Np(d),za(d),a=d.clientX,c=d.clientY;var g=t.getBoundingClientRect();l=g.width,u=g.height,ye.bind(document,"mousemove",p),ye.bind(document,"mouseup",h)},p=function(d){Np(d),za(d);var g=Vb(Wb(l+d.clientX-a,i),o),m=Vb(Wb(u+d.clientY-c,r),s);t.style.width=g+"px",t.style.height=m+"px",e.resizeHandler({width:l,height:u,dx:d.clientX-a,dy:d.clientY-c})},h=function(d){Np(d),za(d),ye.unbind(document,"mousemove",p,!1),ye.unbind(document,"mouseup",h,!1)};ye.bind(n,"mousedown",f)}$(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};ri.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),ye.unbind(t,"keydown",this.keyHandler),ye.unbind(t,"mousedown",za),ye.unbind(t,"input",this.autoResize),ye.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),yi(n)),yi(e)};ri.prototype.getValue=function(){return this.content.innerText.trim()};ri.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};ri.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};function $4(e){return e.replace(/\r\n|\r|\n/g,`
`)}function jn(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new ri({container:t.getContainer(),keyHandler:on(this._handleKey,this),resizeHandler:on(this._handleResize,this)})}jn.$inject=["eventBus","canvas"];jn.prototype.registerProvider=function(e){this._providers.push(e)};jn.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};jn.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};jn.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};jn.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};jn.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue(),o=e.context.text;(r!==o||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}};jn.prototype.getValue=function(){return this._textbox.getValue()};jn.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};jn.prototype._handleResize=function(e){this._fire("resize",e)};jn.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=Me(this._providers,function(i){return(t=i.activate(e))?i:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const SC={__depends__:[sf],__init__:["directEditing"],directEditing:["type",jn]};function L4(e){return function(t){var n=t.target,i=J(e),r=i.eventDefinitions&&i.eventDefinitions[0],o=i.$type===n.type,s=(r&&r.$type)===n.eventDefinitionType,a=!!n.triggeredByEvent==!!i.triggeredByEvent,c=n.isExpanded===void 0||n.isExpanded===Te(e);return!o||!s||!a||!c}}var B4=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],j4=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],F4=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],H4=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],z4=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],U4=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],V4=[{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}}],CC=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],W4=CC,Gb=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}},{label:"Ad-hoc sub-process (expanded)",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}}],G4=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],K4=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],q4=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],Y4=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],J4=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],X4=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}],Z4={"bpmn:MessageEventDefinition":[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}}],"bpmn:TimerEventDefinition":[{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}}],"bpmn:ConditionalEventDefinition":[{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}}],"bpmn:SignalEventDefinition":[{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],"bpmn:ErrorEventDefinition":[{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}}],"bpmn:EscalationEventDefinition":[{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}}],"bpmn:CompensateEventDefinition":[{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}}]};const Kb={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function Fn(e,t,n,i,r,o,s,a){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=o,this._translate=s,this._moddleCopy=a,this._register()}Fn.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];Fn.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};Fn.prototype.getPopupMenuEntries=function(e){var a;var t=e.businessObject,n=this._rules,i=[],r,o=[];if(de(e)||!n.allowed("shape.replace",{element:e}))return{};var s=L4(e);return w(t,"bpmn:DataObjectReference")?this._createEntries(e,G4):w(t,"bpmn:DataStoreReference")&&!w(e.parent,"bpmn:Collaboration")?this._createEntries(e,K4):(w(t,"bpmn:Event")&&!w(t,"bpmn:BoundaryEvent")&&(r=(a=t.get("eventDefinitions")[0])==null?void 0:a.$type,i=Z4[r]||[],!Ft(t.$parent)&&w(t.$parent,"bpmn:SubProcess")&&(i=Se(i,function(c){return c.target.type!=="bpmn:StartEvent"}))),w(t,"bpmn:StartEvent")&&!w(t.$parent,"bpmn:SubProcess")?(o=Se(B4.concat(i),s),this._createEntries(e,o)):w(t,"bpmn:Participant")?(o=Se(X4,function(c){return Te(e)!==c.target.isExpanded}),this._createEntries(e,o)):w(t,"bpmn:StartEvent")&&Ft(t.$parent)?(o=Se(Y4.concat(i),function(c){var l=c.target,u=l.isInterrupting!==!1,f=t.isInterrupting===u;return s(c)||!s(c)&&!f}),this._createEntries(e,o)):w(t,"bpmn:StartEvent")&&!Ft(t.$parent)&&w(t.$parent,"bpmn:SubProcess")?(o=Se(j4.concat(i),s),this._createEntries(e,o)):w(t,"bpmn:EndEvent")?(o=Se(H4.concat(i),function(c){var l=c.target;return l.eventDefinitionType=="bpmn:CancelEventDefinition"&&!w(t.$parent,"bpmn:Transaction")?!1:s(c)}),this._createEntries(e,o)):w(t,"bpmn:BoundaryEvent")?(o=Se(q4,function(c){var l=c.target;if(l.eventDefinitionType=="bpmn:CancelEventDefinition"&&!w(t.attachedToRef,"bpmn:Transaction"))return!1;var u=l.cancelActivity!==!1,f=t.cancelActivity==u;return s(c)||!s(c)&&!f}),this._createEntries(e,o)):w(t,"bpmn:IntermediateCatchEvent")||w(t,"bpmn:IntermediateThrowEvent")?(o=Se(F4.concat(i),s),this._createEntries(e,o)):w(t,"bpmn:Gateway")?(o=Se(z4,s),this._createEntries(e,o)):w(t,"bpmn:Transaction")?(o=Se(CC,s),this._createEntries(e,o)):Ft(t)&&Te(e)?(o=Se(W4,s),this._createEntries(e,o)):w(t,"bpmn:AdHocSubProcess")&&Te(e)?(o=Se(V4,s),this._createEntries(e,o)):w(t,"bpmn:SubProcess")&&Te(e)?(o=Se(U4,s),this._createEntries(e,o)):w(t,"bpmn:SubProcess")&&!Te(e)?(o=Se(Gb,function(c){var l=c.target.type===e.type,u=c.target.isExpanded===!0;return l===u}),this._createEntries(e,o)):w(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,J4):w(t,"bpmn:FlowNode")?(o=Se(Gb,s),this._createEntries(e,o)):{})};Fn.prototype.getPopupMenuHeaderEntries=function(e){var t={};return w(e,"bpmn:Activity")&&!Ft(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),w(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),w(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),R1(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};Fn.prototype._createEntries=function(e,t){var n={},i=this;return M(t,function(r){n[r.actionName]=i._createEntry(r,e)}),n};Fn.prototype._createSequenceFlowEntries=function(e,t){var n=J(e),i={},r=this._modeling,o=this._moddle,s=this;return M(t,function(a){switch(a.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(w(n.sourceRef,"bpmn:ExclusiveGateway")||w(n.sourceRef,"bpmn:InclusiveGateway")||w(n.sourceRef,"bpmn:ComplexGateway")||w(n.sourceRef,"bpmn:Activity"))&&(i={...i,[a.actionName]:s._createEntry(a,e,function(){r.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&w(n.sourceRef,"bpmn:Activity")&&(i={...i,[a.actionName]:s._createEntry(a,e,function(){var c=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:c})})});break;default:w(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(i={...i,[a.actionName]:s._createEntry(a,e,function(){r.updateProperties(e,{conditionExpression:void 0})})}),(w(n.sourceRef,"bpmn:ExclusiveGateway")||w(n.sourceRef,"bpmn:InclusiveGateway")||w(n.sourceRef,"bpmn:ComplexGateway")||w(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(i={...i,[a.actionName]:s._createEntry(a,e,function(){r.updateProperties(e.source,{default:void 0})})})}}),i};Fn.prototype._createEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement,o=function(){return r(t,e.target)},s=e.label;return s&&typeof s=="function"&&(s=s(t)),n=n||o,{label:i(s),className:e.className,action:n}};Fn.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function i(l,u){if(u.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}var f=e.businessObject.get("loopCharacteristics");f&&w(f,u.options.loopCharacteristics)?t._modeling.updateModdleProperties(e,f,{isSequential:u.options.isSequential}):(f=t._moddle.create(u.options.loopCharacteristics,{isSequential:u.options.isSequential}),t._modeling.updateProperties(e,{loopCharacteristics:f}))}var r=J(e),o=r.loopCharacteristics,s,a,c;return o&&(s=o.isSequential,a=o.isSequential===void 0,c=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:c,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:s,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:a,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};Fn.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,i=e.businessObject.dataObjectRef;if(!i)return{};function r(s,a){t._modeling.updateModdleProperties(e,i,{isCollection:!a.active})}var o=i.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:r}}};Fn.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,i=this._translate;function r(s,a){var c=a.active,l;c||(l=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:l})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:i("Participant multiplicity"),active:!!o,action:r}}};Fn.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=J(e),i=this,r=T1(e),o=w(e,"bpmn:BoundaryEvent")?Kb["intermediate-event-non-interrupting"]:Kb["start-event-non-interrupting"],s=!n[r];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:s,action:function(){i._modeling.updateProperties(e,{[r]:!!s})}}}};const Q4={__depends__:[lg,iC,pg],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",Fn]};function Vc(e,t,n,i,r,o,s,a,c,l,u,f,p){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=s,this._create=a,this._popupMenu=c,this._canvas=l,this._rules=u,this._translate=f,this._eventBus=n,this._appendPreview=p,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(h){var d=h.context,g=d.shape;if(!(!rc(h)||!i.isOpen(g))){var m=i.getEntries(g);m.replace&&m.replace.action.click(h,g)}}),n.on("contextPad.close",function(){p.cleanUp()})}Vc.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];Vc.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&$(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(i,r){t.removeElements(r.slice())}}}}),n};Vc.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return de(t)?Ao(e,n=>t.includes(n)):t};Vc.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,s=this._popupMenu,a=this._autoPlace,c=this._translate,l=this._appendPreview,u={};if(e.type==="label")return this._isDeleteAllowed([e])&&$(u,d()),u;var f=e.businessObject;function p(b,y){r.start(b,y)}function h(b,y){n.removeElements([y])}function d(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:c("Delete"),action:{click:h}}}}function g(b){var y=5,R=t.getPad(b).html,P=R.getBoundingClientRect(),N={x:P.left,y:P.bottom+y};return N}function m(b,y,R,P){function N(L,F){var B=i.createShape($({type:b},P));o.start(L,B,{source:F})}var k=a?function(L,F){var B=i.createShape($({type:b},P));a.append(F,B)}:N,O=a?function(L,F){return l.create(F,b,P),()=>{l.cleanUp()}}:null;return{group:"model",className:y,title:R,action:{dragstart:N,click:k,hover:O}}}function E(b){return function(y,R){n.splitLane(R,b),t.open(R,!0)}}if(Ce(f,["bpmn:Lane","bpmn:Participant"])&&Te(e)){var x=Fr(e);$(u,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:c("Add lane above"),action:{click:function(b,y){n.addLane(y,"top")}}}}),x.length<2&&((wt(e)?e.height>=120:e.width>=120)&&$(u,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:c("Divide into two lanes"),action:{click:E(2)}}}),(wt(e)?e.height>=180:e.width>=180)&&$(u,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:c("Divide into three lanes"),action:{click:E(3)}}})),$(u,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:c("Add lane below"),action:{click:function(b,y){n.addLane(y,"bottom")}}}})}return w(f,"bpmn:FlowNode")&&(w(f,"bpmn:EventBasedGateway")?$(u,{"append.receive-task":m("bpmn:ReceiveTask","bpmn-icon-receive-task",c("Append receive task")),"append.message-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",c("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",c("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",c("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",c("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):qb(f,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?$(u,{"append.compensation-activity":m("bpmn:Task","bpmn-icon-task",c("Append compensation activity"),{isForCompensation:!0})}):!w(f,"bpmn:EndEvent")&&!f.isForCompensation&&!qb(f,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!Ft(f)&&$(u,{"append.end-event":m("bpmn:EndEvent","bpmn-icon-end-event-none",c("Append end event")),"append.gateway":m("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",c("Append gateway")),"append.append-task":m("bpmn:Task","bpmn-icon-task",c("Append task")),"append.intermediate-event":m("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",c("Append intermediate/boundary event"))})),s.isEmpty(e,"bpmn-replace")||$(u,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:c("Change element"),action:{click:function(b,y){var R=$(g(y),{cursor:{x:b.x,y:b.y}});s.open(y,"bpmn-replace",R,{title:c("Change element"),width:300,search:!0})}}}}),w(f,"bpmn:SequenceFlow")&&$(u,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation"))}),w(f,"bpmn:MessageFlow")&&$(u,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation"))}),Ce(f,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&$(u,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect to other element"),action:{click:p,dragstart:p}}}),w(f,"bpmn:TextAnnotation")&&$(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect using association"),action:{click:p,dragstart:p}}}),Ce(f,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&$(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect using data input association"),action:{click:p,dragstart:p}}}),w(f,"bpmn:Group")&&$(u,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation"))}),this._isDeleteAllowed([e])&&$(u,d()),u};function qb(e,t,n){var i=e.$instanceOf(t),r=!1,o=e.eventDefinitions||[];return M(o,function(s){s.$type===n&&(r=!0)}),i&&r}const eF={__depends__:[M4,SC,bS,ni,vg,Rf,Q4],__init__:["contextPadProvider"],contextPadProvider:["type",Vc]};var tF={horizontal:["x","width"],vertical:["y","height"]},Yb=5;function Qi(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var i=t.allowed("elements.distribute",{elements:n});return de(i)?i:i?n:[]})}Qi.$inject=["modeling","rules"];Qi.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};Qi.prototype.trigger=function(e,t){var n=this._modeling,i,r;if(!(e.length<3)&&(this._setOrientation(t),r=this._filterElements(e),i=this._createGroups(r),!(i.length<=2)))return n.distributeElements(i,this._axis,this._dimension),i};Qi.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(M(t,function(o){r=o(r,n,i)}),r):e};Qi.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var o=vi(e,i);return M(o,function(s,a){var c=n._findRange(s,i,r),l,u=t[t.length-1];u&&n._hasIntersection(u.range,c)?t[t.length-1].elements.push(s):(l={range:c,elements:[s]},t.push(l))}),t};Qi.prototype._setOrientation=function(e){var t=tF[e];this._axis=t[0],this._dimension=t[1]};Qi.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};Qi.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+Yb,max:t+n-Yb}};const nF={__init__:["distributeElements"],distributeElements:["type",Qi]};function Hf(e){$n.call(this,e)}Hf.$inject=["eventBus"];re(Hf,$n);Hf.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=Se(t,function(n){var i=Ce(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)}),t=Yu(t),t.length<3?!1:t})};var Jb={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},iF=900;function Wc(e,t,n,i){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",iF,this)}Wc.$inject=["popupMenu","distributeElements","translate","rules"];Wc.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&$(t,this._getEntries(e)),t};Wc.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};Wc.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,i=this._popupMenu,r={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:Jb.horizontal,action:function(o,s){t.trigger(e,"horizontal"),i.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:Jb.vertical,action:function(o,s){t.trigger(e,"vertical"),i.close()}}};return r};const rF={__depends__:[lg,nF],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",Hf],distributeElementsMenuProvider:["type",Wc]};var RC="is not a registered action",oF="is already registered";function Hn(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}Hn.$inject=["eventBus","injector"];Hn.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),s=e.get("canvas",!1),a=e.get("rules",!1),c=e.get("keyboardMove",!1),l=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&i&&this.register("copy",function(){var u=i.get();if(u.length)return o.copy(u)}),o&&this.register("paste",function(){o.paste()}),r&&this.register("stepZoom",function(u){r.stepZoom(u.value)}),s&&this.register("zoom",function(u){s.zoom(u.value)}),n&&i&&a&&this.register("removeSelection",function(){var u=i.get();if(u.length){var f=a.allowed("elements.delete",{elements:u}),p;f!==!1&&(de(f)?p=f:p=u,p.length&&n.removeElements(p.slice()))}}),c&&this.register("moveCanvas",function(u){c.moveCanvas(u)}),l&&this.register("moveSelection",function(u){l.moveSelection(u.direction,u.accelerated)})};Hn.prototype.trigger=function(e,t){if(!this._actions[e])throw wm(e,RC);return this._actions[e](t)};Hn.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);M(e,function(i,r){n._registerAction(r,i)})};Hn.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw wm(e,oF);this._actions[e]=t};Hn.prototype.unregister=function(e){if(!this.isRegistered(e))throw wm(e,RC);this._actions[e]=void 0};Hn.prototype.getActions=function(){return Object.keys(this._actions)};Hn.prototype.isRegistered=function(e){return!!this._actions[e]};function wm(e,t){return new Error(e+" "+t)}const sF={__init__:["editorActions"],editorActions:["type",Hn]};function zf(e){e.invoke(Hn,this)}re(zf,Hn);zf.$inject=["injector"];zf.prototype._registerDefaultActions=function(e){Hn.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),r=e.get("spaceTool",!1),o=e.get("lassoTool",!1),s=e.get("handTool",!1),a=e.get("globalConnect",!1),c=e.get("distributeElements",!1),l=e.get("alignElements",!1),u=e.get("directEditing",!1),f=e.get("searchPad",!1),p=e.get("modeling",!1),h=e.get("contextPad",!1);t&&n&&i&&this._registerAction("selectElements",function(){var d=t.getRootElement(),g=n.filter(function(m){return m!==d});return i.select(g),g}),r&&this._registerAction("spaceTool",function(){r.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),s&&this._registerAction("handTool",function(){s.toggle()}),a&&this._registerAction("globalConnectTool",function(){a.toggle()}),i&&c&&this._registerAction("distributeElements",function(d){var g=i.get(),m=d.type;g.length&&c.trigger(g,m)}),i&&l&&this._registerAction("alignElements",function(d){var g=i.get(),m=[],E=d.type;g.length&&(m=Se(g,function(x){return!w(x,"bpmn:Lane")}),l.trigger(m,E))}),i&&p&&this._registerAction("setColor",function(d){var g=i.get();g.length&&p.setColor(g,d)}),i&&u&&this._registerAction("directEditing",function(){var d=i.get();d.length&&u.activate(d[0])}),f&&this._registerAction("find",function(){f.toggle()}),t&&p&&this._registerAction("moveToOrigin",function(){var d=t.getRootElement(),g,m;w(d,"bpmn:Collaboration")?m=n.filter(function(E){return w(E.parent,"bpmn:Collaboration")}):m=n.filter(function(E){return E!==d&&!w(E.parent,"bpmn:SubProcess")}),g=yt(m),p.moveElements(m,{x:-g.x,y:-g.y},d)}),i&&h&&this._registerAction("replaceElement",function(d){h.triggerEntry("replace","click",d)})};const aF={__depends__:[sF],editorActions:["type",zf]};function TC(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,i=t.shape;Ce(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}TC.$inject=["eventBus"];var Gl=10;function $p(e,t,n){return n||(n="round"),Math[n](e/t)*t}var cF=1200,lF=800;function Gr(e,t,n){var i=!n||n.active!==!1;this._eventBus=t;var r=this;t.on("diagram.init",lF,function(){r.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],cF,function(o){var s=o.originalEvent;if(!(!r.active||s&&Dn(s))){var a=o.context,c=a.gridSnappingContext;c||(c=a.gridSnappingContext={}),["x","y"].forEach(function(l){var u={},f=fF(o,l,e);f&&(u.offset=f);var p=uF(o,l);p&&$(u,p),As(o,l)||r.snapEvent(o,l,u)})}})}Gr.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);ut(e,t,i)};Gr.prototype.getGridSpacing=function(){return Gl};Gr.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=$p(e,Gl);var i,r;return t&&t.min&&(i=t.min,pe(i)&&(i=$p(i+n,Gl,"ceil"),e=Math.max(e,i))),t&&t.max&&(r=t.max,pe(r)&&(r=$p(r+n,Gl,"floor"),e=Math.min(e,r))),e-=n,e};Gr.prototype.isActive=function(){return this.active};Gr.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};Gr.prototype.toggleActive=function(){this.setActive(!this.active)};Gr.$inject=["elementRegistry","eventBus","config.gridSnapping"];function uF(e,t){var n=e.context,i=n.createConstraints,r=n.resizeConstraints||{},o=n.gridSnappingContext,s=o.snapConstraints;if(s&&s[t])return s[t];s||(s=o.snapConstraints={}),s[t]||(s[t]={});var a=n.direction;i&&(Kl(t)?(s.x.min=i.left,s.x.max=i.right):(s.y.min=i.top,s.y.max=i.bottom));var c=r.min,l=r.max;return c&&(Kl(t)?Zb(a)?s.x.max=c.left:s.x.min=c.right:Xb(a)?s.y.max=c.top:s.y.min=c.bottom),l&&(Kl(t)?Zb(a)?s.x.min=l.left:s.x.max=l.right:Xb(a)?s.y.min=l.top:s.y.max=l.bottom),s[t]}function fF(e,t,n){var i=e.context,r=e.shape,o=i.gridSnappingContext,s=o.snapLocation,a=o.snapOffset;return a&&pe(a[t])||(a||(a=o.snapOffset={}),pe(a[t])||(a[t]=0),!r)||(n.get(r.id)||(Kl(t)?a[t]+=r[t]+r.width/2:a[t]+=r[t]+r.height/2),!s)||(t==="x"?/left/.test(s)?a[t]-=r.width/2:/right/.test(s)&&(a[t]+=r.width/2):/top/.test(s)?a[t]-=r.height/2:/bottom/.test(s)&&(a[t]+=r.height/2)),a[t]}function Kl(e){return e==="x"}function Xb(e){return e.indexOf("n")!==-1}function Zb(e){return e.indexOf("w")!==-1}function Lo(e,t){K.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,o=r.hints||{},s=o.autoResize;if(s){var a=r.shape,c=r.newBounds;hn(s)?r.newBounds=n.snapComplex(c,s):r.newBounds=n.snapSimple(a,c)}})}Lo.$inject=["eventBus","gridSnapping","modeling"];re(Lo,K);Lo.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Lo.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Lo.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),r=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),r&&(i?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),$(e,o),e};Lo.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),r=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),i&&(r?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),$(e,o),e};var pF=2e3;function PC(e,t){e.on(["spaceTool.move","spaceTool.end"],pF,function(n){var i=n.context;if(i.initialized){var r=i.axis,o;r==="x"?(o=t.snapValue(n.dx),n.x=n.x+o-n.dx,n.dx=o):(o=t.snapValue(n.dy),n.y=n.y+o-n.dy,n.dy=o)}})}PC.$inject=["eventBus","gridSnapping"];const hF={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Lo],gridSnappingSpaceToolBehavior:["type",PC]},dF={__depends__:[hF],__init__:["gridSnapping"],gridSnapping:["type",Gr]};var gF=2e3;function AC(e,t,n){e.on("autoPlace",gF,function(i){var r=i.source,o=he(r),s=i.shape,a=KS(r,s,n);return["x","y"].forEach(function(c){var l={};a[c]!==o[c]&&(a[c]>o[c]?l.min=a[c]:l.max=a[c],w(s,"bpmn:TextAnnotation")&&(mF(c)?l.offset=-s.width/2:l.offset=-s.height/2),a[c]=t.snapValue(a[c],l))}),a})}AC.$inject=["eventBus","gridSnapping","elementRegistry"];function mF(e){return e==="x"}var vF=1750;function kC(e,t,n){t.on(["create.start","shape.move.start"],vF,function(i){var r=i.context,o=r.shape,s=e.getRootElement();if(!(!w(o,"bpmn:Participant")||!w(s,"bpmn:Process")||!s.children.length)){var a=r.createConstraints;a&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))}})}kC.$inject=["canvas","eventBus","gridSnapping"];var yF=3e3;function Uf(e,t,n){K.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],yF,function(r){var o=r.context,s=o.connection,a=o.hints||{},c=s.waypoints;a.connectionStart||a.connectionEnd||a.createElementsBehavior===!1||_F(c)&&n.updateWaypoints(s,i.snapMiddleSegments(c))})}Uf.$inject=["eventBus","gridSnapping","modeling"];re(Uf,K);Uf.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var i=1;i<e.length-2;i++)n=EF(t,e[i],e[i+1]),e[i]=n[0],e[i+1]=n[1];return e};function _F(e){return e.length>3}function bF(e){return e==="h"}function wF(e){return e==="v"}function EF(e,t,n){var i=Ii(t,n),r={};return bF(i)&&(r.y=e.snapValue(t.y)),wF(i)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=$({},t,r),n=$({},n,r)),[t,n]}const xF={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",AC],gridSnappingParticipantBehavior:["type",kC],gridSnappingLayoutConnectionBehavior:["type",Uf]},SF={__depends__:[dF,xF],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",TC]};var CF=30,OC=30;function Gc(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,o=i.gfx;if(w(r,"bpmn:Lane"))return n._createParticipantHit(r,o);if(w(r,"bpmn:Participant"))return Te(r)?n._createParticipantHit(r,o):n._createDefaultHit(r,o);if(w(r,"bpmn:SubProcess"))return Te(r)?n._createSubProcessHit(r,o):n._createDefaultHit(r,o)})}Gc.$inject=["eventBus","interactionEvents"];Gc.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};Gc.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=wt(e)?{width:CF,height:e.height}:{width:e.width,height:OC};return this._interactionEvents.createBoxHit(t,"all",n),!0};Gc.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:OC}),!0};const RF={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Gc]};function Vf(e){e.invoke(Gs,this)}re(Vf,Gs);Vf.$inject=["injector"];Vf.prototype.registerBindings=function(e,t){Gs.prototype.registerBindings.call(this,e,t);function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("selectElements",function(i){var r=i.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["s","S"],r))return t.trigger("spaceTool"),!0}),n("lassoTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["l","L"],r))return t.trigger("lassoTool"),!0}),n("handTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["h","H"],r))return t.trigger("handTool"),!0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["c","C"],r))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["e","E"],r))return t.trigger("directEditing"),!0}),n("replaceElement",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["r","R"],r))return t.trigger("replaceElement",r),!0})};const TF={__depends__:[ng],__init__:["keyboardBindings"],keyboardBindings:["type",Vf]};var PF={moveSpeed:1,moveSpeedAccelerated:10},AF=1500,Qb="left",e0="up",t0="right",n0="down",kF={ArrowLeft:Qb,Left:Qb,ArrowUp:e0,Up:e0,ArrowRight:t0,Right:t0,ArrowDown:n0,Down:n0},OF={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function DC(e,t,n,i,r){var o=this;this._config=$({},PF,e||{}),t.addListener(AF,function(s){var a=s.keyEvent,c=kF[a.key];if(c&&!t.isCmd(a)){var l=t.isShift(a);return o.moveSelection(c,l),!0}}),this.moveSelection=function(s,a){var c=r.get();if(c.length){var l=this._config[a?"moveSpeedAccelerated":"moveSpeed"],u=OF[s](l),f=i.allowed("elements.move",{shapes:c});f&&n.moveElements(c,u)}}}DC.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const DF={__depends__:[ng,ni],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",DC]};var i0=10;function Kc(e,t,n,i){this._dragging=i,this._rules=t;var r=this;function o(c,l){var u=c.shape,f=c.direction,p=c.resizeConstraints,h;c.delta=l,h=dj(u,f,l),c.newBounds=mj(h,p),c.canExecute=r.canResize(c)}function s(c){var l=c.resizeConstraints,u=c.minBounds;l===void 0&&(u===void 0&&(u=r.computeMinResizeBox(c)),c.resizeConstraints={min:ce(u)})}function a(c){var l=c.shape,u=c.canExecute,f=c.newBounds;if(u){if(f=dx(f),!MF(l,f))return;n.resizeShape(l,f)}}e.on("resize.start",function(c){s(c.context)}),e.on("resize.move",function(c){var l={x:c.dx,y:c.dy};o(c.context,l)}),e.on("resize.end",function(c){a(c.context)})}Kc.prototype.canResize=function(e){var t=this._rules,n=ei(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};Kc.prototype.activate=function(e,t,n){var i=this._dragging,r,o;if(typeof n=="string"&&(n={direction:n}),r=$({shape:t},n),o=r.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,MC(t,o),"resize",{autoActivate:!0,cursor:IF(o),data:{shape:t,context:r}})};Kc.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,i,r;return i=e.minDimensions||{width:i0,height:i0},r=v1(t,e.childrenBoxPadding),vj(n,t,i,r)};Kc.$inject=["eventBus","rules","modeling","dragging"];function MF(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function MC(e,t){var n=he(e),i=ce(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function IF(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var r0="djs-resizing",o0="resize-not-ok",NF=500;function IC(e,t,n){function i(o){var s=o.shape,a=o.newBounds,c=o.frame;c||(c=o.frame=n.addFrame(s,t.getActiveLayer()),t.addMarker(s,r0)),a.width>5&&ie(c,{x:a.x,width:a.width}),a.height>5&&ie(c,{y:a.y,height:a.height}),o.canExecute?Ae(c).remove(o0):Ae(c).add(o0)}function r(o){var s=o.shape,a=o.frame;a&&vt(o.frame),t.removeMarker(s,r0)}e.on("resize.move",NF,function(o){i(o.context)}),e.on("resize.cleanup",function(o){r(o.context)})}IC.$inject=["eventBus","canvas","previewSupport"];var s0=-6,a0=8,c0=20,ba="djs-resizer",$F=["n","w","s","e","nw","ne","se","sw"];function Kr(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",function(o){var s=o.newSelection;r.removeResizers(),s.length===1&&M(s,on(r.addResizer,r))}),e.on("shape.changed",function(o){var s=o.element;n.isSelected(s)&&(r.removeResizers(),r.addResizer(s))})}Kr.prototype.makeDraggable=function(e,t,n){var i=this._resize;function r(o){Lr(o)&&i.activate(o,e,n)}ye.bind(t,"mousedown",r),ye.bind(t,"touchstart",r)};Kr.prototype._createResizer=function(e,t,n,i){var r=this._getResizersParent(),o=LF(i),s=ae("g");Ae(s).add(ba),Ae(s).add(ba+"-"+e.id),Ae(s).add(ba+"-"+i),me(r,s);var a=ae("rect");ie(a,{x:-8/2+o.x,y:-8/2+o.y,width:a0,height:a0}),Ae(a).add(ba+"-visual"),me(s,a);var c=ae("rect");return ie(c,{x:-20/2+o.x,y:-20/2+o.y,width:c0,height:c0}),Ae(c).add(ba+"-hit"),me(s,c),Nl(s,t,n),s};Kr.prototype.createResizer=function(e,t){var n=MC(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)};Kr.prototype.addResizer=function(e){var t=this;He(e)||!this._resize.canResize({shape:e})||M($F,function(n){t.createResizer(e,n)})};Kr.prototype.removeResizers=function(){var e=this._getResizersParent();Ku(e)};Kr.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};Kr.$inject=["eventBus","canvas","selection","resize"];function LF(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=6:e.indexOf("w")!==-1&&(t.x=s0),e.indexOf("s")!==-1?t.y=6:e.indexOf("n")!==-1&&(t.y=s0),t}const NC={__depends__:[Ei,Ji,Xs],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Kc],resizePreview:["type",IC],resizeHandles:["type",Kr]};var BF=2e3;function qc(e,t,n,i,r,o,s){this._bpmnFactory=t,this._canvas=n,this._modeling=r,this._textRenderer=s,i.registerProvider(this),e.on("element.dblclick",function(c){a(c.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){i.isActive()&&i.complete()}),e.on(["shape.remove","connection.remove"],BF,function(c){i.isActive(c.element)&&i.cancel()}),e.on(["commandStack.changed"],function(c){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(c){o.removeResizers()}),e.on("create.end",500,function(c){var l=c.context,u=l.shape,f=c.context.canExecute,p=c.isTouch;p||f&&(l.hints&&l.hints.createElementsBehavior===!1||a(u))}),e.on("autoPlace.end",500,function(c){a(c.shape)});function a(c,l){(l||Ce(c,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||Em(c))&&i.activate(c)}}qc.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];qc.prototype.activate=function(e){var t=ti(e);if(t!==void 0){var n={text:t},i=this.getEditingBBox(e);$(n,i);var r={},o=n.style||{};return $(o,{backgroundColor:null,border:null}),(Ce(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Em(e))&&$(r,{centerVertically:!0}),So(e)&&($(r,{autoResize:!0}),$(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),w(e,"bpmn:TextAnnotation")&&($(r,{resizable:!0,autoResize:!0}),$(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),$(n,{options:r,style:o}),n}};qc.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r={x:i.x+i.width/2,y:i.y+i.height/2},o={x:i.x,y:i.y},s=t.zoom(),a=this._textRenderer.getDefaultStyle(),c=this._textRenderer.getExternalStyle(),l=c.fontSize*s,u=c.lineHeight,f=a.fontSize*s,p=a.lineHeight,h={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(w(e,"bpmn:Lane")||HF(e)){var d=wt(e),g=d?{width:i.height,height:30*s,x:i.x-i.height/2+15*s,y:r.y-30*s/2}:{width:i.width,height:30*s};$(o,g),$(h,{fontSize:f+"px",lineHeight:p,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:d?"rotate(-90deg)":null})}if(FF(e)){var m=wt(e),E=m?{width:i.width,height:i.height}:{width:i.height,height:i.width,x:r.x-i.height/2,y:r.y-i.width/2};$(o,E),$(h,{fontSize:f+"px",lineHeight:p,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:m?null:"rotate(-90deg)"})}(Ce(e,["bpmn:Task","bpmn:CallActivity"])||Em(e))&&($(o,{width:i.width,height:i.height}),$(h,{fontSize:f+"px",lineHeight:p,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"})),jF(e)&&($(o,{width:i.width,x:i.x}),$(h,{fontSize:f+"px",lineHeight:p,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"}));var x=90*s,b=7*s,y=4*s;if(n.labelTarget&&($(o,{width:x,height:i.height+b+y,x:r.x-x/2,y:i.y-b}),$(h,{fontSize:l+"px",lineHeight:u,paddingTop:b+"px",paddingBottom:y+"px"})),So(n)&&!ef(n)&&!Oe(n)){var R=Zd(e),P=t.getAbsoluteBBox({x:R.x,y:R.y,width:0,height:0}),N=l+b+y;$(o,{width:x,height:N,x:P.x-x/2,y:P.y-N/2}),$(h,{fontSize:l+"px",lineHeight:u,paddingTop:b+"px",paddingBottom:y+"px"})}return w(e,"bpmn:TextAnnotation")&&($(o,{width:i.width,height:i.height,minWidth:30*s,minHeight:10*s}),$(h,{textAlign:"left",paddingTop:5*s+"px",paddingBottom:7*s+"px",paddingLeft:7*s+"px",paddingRight:5*s+"px",fontSize:f+"px",lineHeight:p})),{bounds:o,style:h}};qc.prototype.update=function(e,t,n,i){var r,o;w(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/o.width*i.width,height:e.height/o.height*i.height}),zF(t)&&(t=null),this._modeling.updateLabel(e,t,r)};function Em(e){return w(e,"bpmn:SubProcess")&&!Te(e)}function jF(e){return w(e,"bpmn:SubProcess")&&Te(e)}function FF(e){return w(e,"bpmn:Participant")&&!Te(e)}function HF(e){return w(e,"bpmn:Participant")&&Te(e)}function zF(e){return!e||!e.trim()}var l0="djs-element-hidden",u0="djs-label-hidden";function $C(e,t,n){var i=this,r=t.getDefaultLayer(),o,s,a;e.on("directEditing.activate",function(c){var l=c.active;if(o=l.element.label||l.element,w(o,"bpmn:TextAnnotation")){s=t.getAbsoluteBBox(o),a=ae("g");var u=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),f=i.path=ae("path");ie(f,{d:u,strokeWidth:2,stroke:UF(o)}),me(a,f),me(r,a),kt(a,o.x,o.y)}w(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,l0):(w(o,"bpmn:Task")||w(o,"bpmn:CallActivity")||w(o,"bpmn:SubProcess")||w(o,"bpmn:Participant")||w(o,"bpmn:Lane"))&&t.addMarker(o,u0)}),e.on("directEditing.resize",function(c){if(w(o,"bpmn:TextAnnotation")){var l=c.height,u=c.dy,f=Math.max(o.height/s.height*(l+u),0),p=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:f,position:{mx:0,my:0}});ie(i.path,{d:p})}}),e.on(["directEditing.complete","directEditing.cancel"],function(c){var l=c.active;l&&(t.removeMarker(l.element.label||l.element,l0),t.removeMarker(o,u0)),o=void 0,s=void 0,a&&(vt(a),a=void 0)})}$C.$inject=["eventBus","canvas","pathMap"];function UF(e,t){var n=ke(e);return n.get("stroke")||t||"black"}const VF={__depends__:[Qd,NC,SC],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",qc],labelEditingPreview:["type",$C]};var WF=new Tc("tt");function GF(e){var t=qe('<div class="djs-tooltip-container" />');return $t(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function KF(e,t,n){$t(e,{left:t+"px",top:n+"px"})}function xm(e,t){e.style.display=t===!1?"none":""}var LC="djs-tooltip",Lp="."+LC;function sn(e,t){this._eventBus=e,this._canvas=t,this._ids=WF,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=GF(t.getContainer());var n=this;pn.bind(this._tooltipRoot,Lp,"mousedown",function(i){i.stopPropagation()}),pn.bind(this._tooltipRoot,Lp,"mouseover",function(i){n.trigger("mouseover",i)}),pn.bind(this._tooltipRoot,Lp,"mouseout",function(i){n.trigger("mouseout",i)}),this._init()}sn.$inject=["eventBus","canvas"];sn.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=$({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};sn.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(Bt(n,"data-tooltip-id"));i&&(e==="mouseover"&&i.timeout&&this.clearTimeout(i),e==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))};sn.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};sn.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};sn.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};sn.prototype.remove=function(e){var t=this.get(e);t&&(yi(t.html),yi(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};sn.prototype.show=function(){xm(this._tooltipRoot)};sn.prototype.hide=function(){xm(this._tooltipRoot,!1)};sn.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i};sn.prototype._addTooltip=function(e){var t=e.id,n=e.html,i,r=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),hn(n)&&(n=qe(n)),i=qe('<div data-tooltip-id="'+t+'" class="'+LC+'">'),$t(i,{position:"absolute"}),i.appendChild(n),e.type&&st(i).add("djs-tooltip-"+e.type),e.className&&st(i).add(e.className),e.htmlContainer=i,r.appendChild(i),this._tooltips[t]=e,this._updateTooltip(e)};sn.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;KF(n,t.x,t.y)};sn.prototype._updateTooltipVisibilty=function(e){M(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,r=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(r=!1),xm(i,r))})};sn.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const qF={__init__:["tooltips"],tooltips:["type",sn]};var YF="flow elements must be children of pools/participants",JF="Data object must be placed within a pool/participant.";function BC(e,t,n){function i(r,o,s){t.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(r){var o=r.context,s=o.shape,a=o.target;w(a,"bpmn:Collaboration")&&(w(s,"bpmn:FlowNode")?i(r,n(YF)):w(s,"bpmn:DataObjectReference")&&i(r,n(JF)))})}BC.$inject=["eventBus","tooltips","translate"];const XF={__depends__:[qF],__init__:["modelingFeedback"],modelingFeedback:["type",BC]};var ZF=500,QF=1e3;function Bo(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(o){var s=ae("rect");return ie(s,$({x:0,y:0,rx:4,width:100,height:100},n)),s}e.on(["shape.added","shape.changed"],ZF,function(o){var s=o.element,a=o.gfx,c=Fe(".djs-outline",a);c||(c=i.getOutline(s)||r(),me(a,c)),i.updateShapeOutline(c,s)}),e.on(["connection.added","connection.changed"],function(o){var s=o.element,a=o.gfx,c=Fe(".djs-outline",a);c||(c=r(),me(a,c)),i.updateConnectionOutline(c,s)})}Bo.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&M(i,function(r){n=n||r.updateOutline(t,e)}),n||ie(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};Bo.prototype.updateConnectionOutline=function(e,t){var n=yt(t);ie(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};Bo.prototype.registerProvider=function(e,t){t||(t=e,e=QF),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};Bo.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Bo.prototype.getOutline=function(e){var t,n=this._getProviders();return M(n,function(i){bt(i.getOutline)&&(t=t||i.getOutline(e))}),t};Bo.$inject=["eventBus","styles","elementRegistry"];var Al=6;function Sm(e,t,n){this._canvas=t;var i=this;e.on("element.changed",function(r){n.isSelected(r.element)&&i._updateMultiSelectionOutline(n.get())}),e.on("selection.changed",function(r){var o=r.newSelection;i._updateMultiSelectionOutline(o)})}Sm.prototype._updateMultiSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Ku(t);var n=e.length>1,i=this._canvas.getContainer();if(Ae(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=e8(yt(e)),o=ae("rect");ie(o,$({rx:3},r)),Ae(o).add("djs-selection-outline"),me(t,o)}};Sm.$inject=["eventBus","canvas","selection"];function e8(e){return{x:e.x-Al,y:e.y-Al,width:e.width+Al*2,height:e.height+Al*2}}const jC={__depends__:[ni],__init__:["outline","multiSelectionOutline"],outline:["type",Bo],multiSelectionOutline:["type",Sm]};var t8=500,n8=1250,i8=1500,Ru=Math.round;function r8(e){return{x:e.x+Ru(e.width/2),y:e.y+Ru(e.height/2)}}function FC(e,t,n,i,r){function o(a,c,l,u){return r.allowed("elements.move",{shapes:a,delta:c,position:l,target:u})}e.on("shape.move.start",i8,function(a){var c=a.context,l=a.shape,u=i.get().slice();u.indexOf(l)===-1&&(u=[l]),u=o8(u),$(c,{shapes:u,validatedShapes:u,shape:l})}),e.on("shape.move.start",n8,function(a){var c=a.context,l=c.validatedShapes,u;if(u=c.canExecute=o(l),!u)return!1}),e.on("shape.move.move",t8,function(a){var c=a.context,l=c.validatedShapes,u=a.hover,f={x:a.dx,y:a.dy},p={x:a.x,y:a.y},h;if(h=o(l,f,p,u),c.delta=f,c.canExecute=h,h===null){c.target=null;return}c.target=u}),e.on("shape.move.end",function(a){var c=a.context,l=c.delta,u=c.canExecute,f=u==="attach",p=c.shapes;if(u===!1)return!1;l.x=Ru(l.x),l.y=Ru(l.y),!(l.x===0&&l.y===0)&&n.moveElements(p,l,c.target,{primaryShape:c.shape,attach:f})}),e.on("element.mousedown",function(a){if(Lr(a)){var c=Vs(a);if(!c)throw new Error("must supply DOM mousedown event");return s(c,a.element)}});function s(a,c,l,u){if(Ct(l)&&(u=l,l=!1),!(c.waypoints||!c.parent)&&!Ae(a.target).has("djs-hit-no-move")){var f=r8(c);return t.init(a,f,"shape.move",{cursor:"grabbing",autoActivate:l,data:{shape:c,context:u||{}}}),!0}}this.start=s}FC.$inject=["eventBus","dragging","modeling","selection","rules"];function o8(e){var t=js(e,"id");return Se(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var f0=499,Bp="djs-dragging",p0="drop-ok",h0="drop-not-ok",d0="new-parent",g0="attach-ok";function HC(e,t,n,i){function r(c){var l=o(c),u=s8(l);return u}function o(c){var l=bc(c,!0),u=l.flatMap(h=>(h.incoming||[]).concat(h.outgoing||[])),f=l.concat(u),p=[...new Set(f)];return p}function s(c,l){[g0,p0,h0,d0].forEach(function(u){u===l?t.addMarker(c,u):t.removeMarker(c,u)})}function a(c,l,u){i.addDragger(l,c.dragGroup),u&&t.addMarker(l,Bp),c.allDraggedElements?c.allDraggedElements.push(l):c.allDraggedElements=[l]}e.on("shape.move.start",f0,function(c){var l=c.context,u=l.shapes,f=l.allDraggedElements,p=r(u);if(!l.dragGroup){var h=ae("g");ie(h,n.cls("djs-drag-group",["no-events"]));var d=t.getActiveLayer();me(d,h),l.dragGroup=h}p.forEach(function(g){i.addDragger(g,l.dragGroup)}),f?f=Nd([f,o(u)]):f=o(u),M(f,function(g){t.addMarker(g,Bp)}),l.allDraggedElements=f,l.differentParents=a8(u)}),e.on("shape.move.move",f0,function(c){var l=c.context,u=l.dragGroup,f=l.target,p=l.shape.parent,h=l.canExecute;f&&(h==="attach"?s(f,g0):l.canExecute&&p&&f.id!==p.id?s(f,d0):s(f,l.canExecute?p0:h0)),kt(u,c.dx,c.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(c){var l=c.context,u=l.target;u&&s(u,null)}),e.on("shape.move.cleanup",function(c){var l=c.context,u=l.allDraggedElements,f=l.dragGroup;M(u,function(p){t.removeMarker(p,Bp)}),f&&vt(f)}),this.makeDraggable=a}HC.$inject=["eventBus","canvas","styles","previewSupport"];function s8(e){var t=Se(e,function(n){return He(n)?Me(e,Yn({id:n.source.id}))&&Me(e,Yn({id:n.target.id})):!0});return t}function a8(e){return _I(js(e,function(t){return t.parent&&t.parent.id}))!==1}const c8={__depends__:[sf,ni,jC,Ei,Ji,Xs],__init__:["move","movePreview"],move:["type",FC],movePreview:["type",HC]};var zC=".djs-palette-toggle",UC=".entry",l8=zC+", "+UC,qh="djs-palette-",u8="shown",Yh="open",m0="two-column",f8=1e3;function ht(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}ht.$inject=["eventBus","canvas"];ht.prototype.registerProvider=function(e,t){t||(t=e,e=f8),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};ht.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(h8,{})};ht.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};ht.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=qe(ht.HTML_MARKUP);n.appendChild(i),st(n).add(qh+u8),pn.bind(i,l8,"click",function(r){var o=r.delegateTarget;if(QE(o,zC))return e.toggle();e.trigger("click",r)}),ye.bind(i,"mousedown",function(r){r.stopPropagation()}),pn.bind(i,UC,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})};ht.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};ht.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,r,o=st(n),s=st(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(m0,r),s.toggle(qh+m0,r),"open"in e&&(o.toggle(Yh,e.open),s.toggle(qh+Yh,e.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})};ht.prototype._update=function(){var e=Fe(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Gu(e),M(t,function(n,i){var r=n.group||"default",o=Fe("[data-group="+ic(r)+"]",e);o||(o=qe('<div class="group"></div>'),Bt(o,"data-group",r),e.appendChild(o));var s=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),a=qe(s);if(o.appendChild(a),!n.separator&&(Bt(a,"data-action",i),n.title&&Bt(a,"title",n.title),n.className&&p8(a,n.className),n.imageUrl)){var c=qe("<img>");Bt(c,"src",n.imageUrl),a.appendChild(c)}}),this.open()};ht.prototype.trigger=function(e,t,n){var i,r,o=t.delegateTarget||t.target;return o?(i=Bt(o,"data-action"),r=t.originalEvent||t,this.triggerEntry(i,e,r,n)):t.preventDefault()};ht.prototype.triggerEntry=function(e,t,n,i){var r=this._entries,o,s;if(o=r[e],!!o&&(s=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(bt(s)){if(t==="click")return s(n,i)}else if(s[t])return s[t](n,i);n.preventDefault()}};ht.prototype._layoutChanged=function(){this._toggleState({})};ht.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n};ht.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};ht.prototype.open=function(){this._toggleState({open:!0})};ht.prototype.toggle=function(){this.isOpen()?this.close():this.open()};ht.prototype.isActiveTool=function(e){return e&&this._activeTool===e};ht.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=Fe(".djs-palette-entries",this._container),this._toolsContainer=Fe("[data-group=tools]",t)),n=this._toolsContainer,M(n.children,function(i){var r=i.getAttribute("data-action");if(r){var o=st(i);r=r.replace("-tool",""),o.contains("entry")&&r===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};ht.prototype.isOpen=function(){return st(this._container).has(Yh)};ht.prototype._getParentContainer=function(){return this._canvas.getContainer()};ht.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function p8(e,t){var n=st(e),i=de(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}function h8(e,t){var n=t.getPaletteEntries();return bt(n)?n(e):(M(n,function(i,r){e[r]=i}),e)}const d8={__init__:["palette"],palette:["type",ht]};var VC="crosshair";function jo(e,t,n,i,r,o,s){this._selection=r,this._dragging=n,this._mouse=s;var a=this,c={create:function(l){var u=t.getActiveLayer(),f;f=l.frame=ae("rect"),ie(f,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),me(u,f)},update:function(l){var u=l.frame,f=l.bbox;ie(u,{x:f.x,y:f.y,width:f.width,height:f.height})},remove:function(l){l.frame&&vt(l.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(l){var u=l.originalEvent.target;!l.hover&&!(u instanceof SVGElement)||e.once("lasso.selection.ended",function(){a.activateLasso(l.originalEvent,!0)})}),e.on("lasso.end",0,function(l){var u=l.context,f=jp(l),p=i.filter(function(d){return d}),h=mu(l);a.select(p,f,h?u.selection:[])}),e.on("lasso.start",function(l){var u=l.context;u.bbox=jp(l),c.create(u),u.selection=r.get()}),e.on("lasso.move",function(l){var u=l.context;u.bbox=jp(l),c.update(u)}),e.on("lasso.cleanup",function(l){var u=l.context;c.remove(u)}),e.on("element.mousedown",1500,function(l){if(mu(l))return a.activateLasso(l.originalEvent),!0})}jo.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];jo.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:VC,data:{context:{}}})};jo.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:VC,data:{context:{}},keepSelection:!0})};jo.prototype.select=function(e,t,n=[]){var i=cx(e,t);this._selection.select([...n,...Vu(i)])};jo.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};jo.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function jp(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}const g8={__depends__:[Tf,Dc],__init__:["lassoTool"],lassoTool:["type",jo]};var Fp=1500,WC="grab";function Zs(e,t,n,i,r,o){this._dragging=n,this._mouse=o;var s=this,a=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",Fp,function(c){if(rc(c))return s.activateMove(c.originalEvent,!0),!1}),a&&a.addListener(Fp,function(c){if(!(!v0(c.keyEvent)||s.isActive())){var l=s._mouse.getLastMoveEvent();s.activateMove(l,!!l)}},"keyboard.keydown"),a&&a.addListener(Fp,function(c){!v0(c.keyEvent)||!s.isActive()||s.toggle()},"keyboard.keyup"),e.on("hand.end",function(c){var l=c.originalEvent.target;if(!c.hover&&!(l instanceof SVGElement))return!1;e.once("hand.ended",function(){s.activateMove(c.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(c){var l=t.viewbox().scale;t.scroll({dx:c.dx*l,dy:c.dy*l})}),e.on("hand.move.end",function(c){var l=c.context,u=l.reactivate;return!rc(c)&&u&&e.once("hand.move.ended",function(f){s.activateHand(f.originalEvent,!0,!0)}),!1})}Zs.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];Zs.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:WC,data:{context:n||{}}})};Zs.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:WC,data:{context:{reactivate:n}}})};Zs.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};Zs.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function v0(e){return Et("Space",e)}const m8={__depends__:[Tf,Dc],__init__:["handTool"],handTool:["type",Zs]};var y0="connect-ok",_0="connect-not-ok";function Qs(e,t,n,i,r,o,s){var a=this;this._dragging=t,this._rules=o,this._mouse=s,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(c){var l=c.context,u=c.hover,f=l.canStartConnect=a.canStartConnect(u);f!==null&&(l.startTarget=u,i.addMarker(u,f?y0:_0))}),e.on(["global-connect.out","global-connect.cleanup"],function(c){var l=c.context.startTarget,u=c.context.canStartConnect;l&&i.removeMarker(l,u?y0:_0)}),e.on(["global-connect.ended"],function(c){var l=c.context,u=l.startTarget,f={x:c.x,y:c.y},p=a.canStartConnect(u);if(p)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,u,f)}),!1})}Qs.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];Qs.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};Qs.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};Qs.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};Qs.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const v8={__depends__:[vg,Ei,Ji,Tf,Dc],globalConnect:["type",Qs]};function Cm(e,t,n,i,r,o,s,a){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=s,this._translate=a,e.registerProvider(this)}Cm.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Cm.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,r=this._lassoTool,o=this._handTool,s=this._globalConnect,a=this._translate;function c(f,p,h,d,g){function m(E){var x=n.createShape($({type:f},g));t.start(E,x)}return{group:p,className:h,title:d,action:{dragstart:m,click:m}}}function l(f){var p=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),h=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:p});t.start(f,[p,h],{hints:{autoSelect:[p]}})}function u(f){t.start(f,n.createParticipantShape())}return $(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:a("Activate hand tool"),action:{click:function(f){o.activateHand(f)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:a("Activate lasso tool"),action:{click:function(f){r.activateSelection(f)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:a("Activate create/remove space tool"),action:{click:function(f){i.activateSelection(f)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:a("Activate global connect tool"),action:{click:function(f){s.start(f)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":c("bpmn:StartEvent","event","bpmn-icon-start-event-none",a("Create start event")),"create.intermediate-event":c("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",a("Create intermediate/boundary event")),"create.end-event":c("bpmn:EndEvent","event","bpmn-icon-end-event-none",a("Create end event")),"create.exclusive-gateway":c("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",a("Create gateway")),"create.task":c("bpmn:Task","activity","bpmn-icon-task",a("Create task")),"create.data-object":c("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",a("Create data object reference")),"create.data-store":c("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",a("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:a("Create expanded sub-process"),action:{dragstart:l,click:l}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:a("Create pool/participant"),action:{dragstart:u,click:u}},"create.group":c("bpmn:Group","artifact","bpmn-icon-group",a("Create group"))}),e};const y8={__depends__:[d8,Rf,sC,g8,m8,v8,nf],__init__:["paletteProvider"],paletteProvider:["type",Cm]};var _8=250;function Rm(e,t,n,i,r){K.call(this,e);function o(a){var c=a.canExecute.replacements;M(c,function(l){var u=l.oldElementId,f={type:l.newElementType};if(!a.visualReplacements[u]){var p=t.get(u);$(f,{x:p.x,y:p.y});var h=n.createShape(f);i.addShape(h,p.parent);var d=Fe('[data-element-id="'+ic(p.id)+'"]',a.dragGroup);d&&ie(d,{display:"none"});var g=r.addDragger(h,a.dragGroup);a.visualReplacements[u]=g,i.removeShape(h)}})}function s(a){var c=a.visualReplacements;M(c,function(l,u){var f=Fe('[data-element-id="'+ic(u)+'"]',a.dragGroup);f&&ie(f,{display:"inline"}),l.remove(),c[u]&&delete c[u]})}e.on("shape.move.move",_8,function(a){var c=a.context,l=c.canExecute;c.visualReplacements||(c.visualReplacements={}),l&&l.replacements?o(c):s(c)})}Rm.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];re(Rm,K);const b8={__depends__:[Xs],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Rm]};var w8=1250,Hp=40,E8=20,x8=10,b0=20,GC=["x","y"],S8=Math.abs;function KC(e){e.on(["connect.hover","connect.move","connect.end"],w8,function(t){var n=t.context,i=n.canExecute,r=n.start,o=n.hover,s=n.source,a=n.target;t.originalEvent&&Dn(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&o&&C8(t,o,A8(o)),o&&P8(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=kn(r),Ce(o,["bpmn:Event","bpmn:Gateway"])&&w0(t,kn(o)),Ce(o,["bpmn:Task","bpmn:SubProcess"])&&R8(t,o),w(s,"bpmn:BoundaryEvent")&&a===s.host&&T8(t)):qC(i,"bpmn:MessageFlow")?(w(r,"bpmn:Event")&&(n.connectionStart=kn(r)),w(o,"bpmn:Event")&&w0(t,kn(o))):n.connectionStart=n.initialConnectionStart)})}KC.$inject=["eventBus"];function C8(e,t,n){GC.forEach(function(i){var r=YC(i,t);e[i]<t[i]+n?ut(e,i,t[i]+n):e[i]>t[i]+r-n&&ut(e,i,t[i]+r-n)})}function R8(e,t){var n=kn(t);GC.forEach(function(i){k8(e,t,i)&&ut(e,i,n[i])})}function T8(e){var t=e.context,n=t.source,i=t.target;if(!O8(t)){var r=kn(n),o=Ut(r,i,-10),s=[];/top|bottom/.test(o)&&s.push("x"),/left|right/.test(o)&&s.push("y"),s.forEach(function(a){var c=e[a],l;S8(c-r[a])<Hp&&(c>r[a]?l=r[a]+Hp:l=r[a]-Hp,ut(e,a,l))})}}function w0(e,t){ut(e,"x",t.x),ut(e,"y",t.y)}function qC(e,t){return e&&e.type===t}function P8(e,t){return Dr(t,function(n){return qC(e,n)})}function YC(e,t){return e==="x"?t.width:t.height}function A8(e){return w(e,"bpmn:Task")?x8:E8}function k8(e,t,n){return e[n]>t[n]+b0&&e[n]<t[n]+YC(n,t)-b0}function O8(e){var t=e.hover,n=e.source;return t&&n&&t===n}function qr(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}qr.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};qr.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};qr.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};qr.prototype.getSnapLocations=function(){return this._snapLocations};qr.prototype.setSnapLocations=function(e){this._snapLocations=e};qr.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new Wf,n.initDefaults(this._defaultSnaps)),n};function Wf(){this._snapValues={}}Wf.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};Wf.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&j5(e[n],r[n],i)};Wf.prototype.initDefaults=function(e){var t=this;M(e||{},function(n,i){M(n,function(r){t.add(i,r)})})};var D8=1250;function xi(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],D8,function(r){var o=r.context,s=o.shape,a=o.snapContext,c=o.target;if(!(r.originalEvent&&Dn(r.originalEvent))&&!(As(r)||!c)){var l=a.pointsForTarget(c);l.initialized||(l=i.addSnapTargetPoints(l,s,c),l.initialized=!0),n.snap(r,l)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}xi.$inject=["elementRegistry","eventBus","snapping"];xi.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,i=n.shape,r=n.snapContext;r||(r=n.snapContext=new qr);var o;t.get(i.id)?o=kn(i,e):o={x:e.x+kn(i).x,y:e.y+kn(i).y};var s={x:o.x-i.width/2,y:o.y-i.height/2},a={x:o.x+i.width/2,y:o.y+i.height/2};return r.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),Oe(i)||(r.setSnapOrigin("top-left",{x:s.x-e.x,y:s.y-e.y}),r.setSnapOrigin("bottom-right",{x:a.x-e.x,y:a.y-e.y})),r};xi.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return M(i,function(r){if(Oe(r)){Oe(t)&&e.add("mid",kn(r));return}if(He(r)){if(r.waypoints.length<3)return;var o=r.waypoints.slice(1,-1);M(o,function(s){e.add("mid",s)});return}e.add("mid",kn(r))}),!pe(t.x)||!pe(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",kn(t)),e};xi.prototype.getSnapTargets=function(e,t){return l1(t).filter(function(n){return!M8(n)})};function M8(e){return!!e.hidden}var E0=1500;function ea(e,t){t.invoke(xi,this),e.on(["create.move","create.end"],E0,L8),e.on(["create.move","create.end","shape.move.move","shape.move.end"],E0,function(n){var i=n.context,r=i.canExecute,o=i.target,s=r&&(r==="attach"||r.attach);s&&!As(n)&&I8(n,o)})}re(ea,xi);ea.$inject=["eventBus","injector"];ea.prototype.initSnap=function(e){var t=xi.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return M(n.outgoing,function(r){var o=r.waypoints[0];o=o.original||o,t.setSnapOrigin(r.id+"-docking",S0(o,i,e))}),M(n.incoming,function(r){var o=r.waypoints[r.waypoints.length-1];o=o.original||o,t.setSnapOrigin(r.id+"-docking",S0(o,i,e))}),w(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};ea.prototype.addSnapTargetPoints=function(e,t,n){xi.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);M(i,function(o){($8(o)||N8([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",a1(o)),e.add("bottom-right",c1(o)))});var r=this._elementRegistry;return M(t.incoming,function(o){if(r.get(t.id)){x0(i,o.source)||e.add("mid",he(o.source));var s=o.waypoints[0];e.add(o.id+"-docking",s.original||s)}}),M(t.outgoing,function(o){if(r.get(t.id)){x0(i,o.target)||e.add("mid",he(o.target));var s=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",s.original||s)}}),w(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};ea.prototype.getSnapTargets=function(e,t){return xi.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!w(n,"bpmn:Lane")})};function I8(e,t){var n=ce(t),i=N1(e,t),r=e.context,o=r.shape,s;o.parent?s={x:0,y:0}:s=he(o),/top/.test(i)?ut(e,"y",n.top-s.y):/bottom/.test(i)&&ut(e,"y",n.bottom-s.y),/left/.test(i)?ut(e,"x",n.left-s.x):/right/.test(i)&&ut(e,"x",n.right-s.x)}function N8(e,t){return e.every(function(n){return w(n,t)})}function $8(e){return w(e,"bpmn:SubProcess")&&Te(e)?!0:w(e,"bpmn:Participant")}function L8(e){var t=e.context,n=t.createConstraints;if(n){var i=n.top,r=n.right,o=n.bottom,s=n.left;(s&&s>=e.x||r&&r<=e.x)&&ut(e,"x",e.x),(i&&i>=e.y||o&&o<=e.y)&&ut(e,"y",e.y)}}function x0(e,t){return e.indexOf(t)!==-1}function S0(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var B8=1250;function Yc(e,t){var n=this;e.on(["resize.start"],function(i){n.initSnap(i)}),e.on(["resize.move","resize.end"],B8,function(i){var r=i.context,o=r.shape,s=o.parent,a=r.direction,c=r.snapContext;if(!(i.originalEvent&&Dn(i.originalEvent))&&!As(i)){var l=c.pointsForTarget(s);l.initialized||(l=n.addSnapTargetPoints(l,o,s,a),l.initialized=!0),H8(a)&&ut(i,"x",i.x),z8(a)&&ut(i,"y",i.y),t.snap(i,l)}}),e.on(["resize.cleanup"],function(){t.hide()})}Yc.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,r=t.snapContext;r||(r=t.snapContext=new qr);var o=JC(n,i);return r.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),r};Yc.prototype.addSnapTargetPoints=function(e,t,n,i){var r=this.getSnapTargets(t,n);return M(r,function(o){e.add("corner",c1(o)),e.add("corner",a1(o))}),e.add("corner",JC(t,i)),e};Yc.$inject=["eventBus","snapping"];Yc.prototype.getSnapTargets=function(e,t){return l1(t).filter(function(n){return!j8(n,e)&&!He(n)&&!F8(n)&&!Oe(n)})};function JC(e,t){var n=he(e),i=ce(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function j8(e,t){return e.host===t}function F8(e){return!!e.hidden}function H8(e){return e==="n"||e==="s"}function z8(e){return e==="e"||e==="w"}var U8=7,V8=1e3;function Yr(e){this._canvas=e,this._asyncHide=YE(on(this.hide,this),V8)}Yr.$inject=["canvas"];Yr.prototype.snap=function(e,t){var n=e.context,i=n.snapContext,r=i.getSnapLocations(),o={x:As(e,"x"),y:As(e,"y")};M(r,function(s){var a=i.getSnapOrigin(s),c={x:e.x+a.x,y:e.y+a.y};if(M(["x","y"],function(l){var u;o[l]||(u=t.snap(c,s,l,U8),u!==void 0&&(o[l]={value:u,originValue:u-a[l]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),M(["x","y"],function(s){var a=o[s];Ct(a)&&ut(e,s,a.originValue)})};Yr.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=ae("path");return ie(n,{d:"M0,0 L0,0"}),Ae(n).add("djs-snap-line"),me(t,n),{update:function(i){pe(i)?e==="horizontal"?ie(n,{d:"M-100000,"+i+" L+100000,"+i,display:""}):ie(n,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):ie(n,{display:"none"})}}};Yr.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};Yr.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};Yr.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};Yr.prototype.hide=function(){M(this._snapLines,function(e){e.update()})};const W8={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",xi],resizeSnapping:["type",Yc],snapping:["type",Yr]},G8={__depends__:[W8],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",KC],createMoveSnapping:["type",ea]};var XC=300;function ve(e,t,n,i){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=i,this._container=this._getBoxHtml(),this._searchInput=Fe(ve.INPUT_SELECTOR,this._container),this._resultsContainer=Fe(ve.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}ve.$inject=["canvas","eventBus","selection","translate"];ve.prototype._bindEvents=function(){var e=this;function t(n,i,r,o){e._eventMaps.push({el:n,type:r,listener:pn.bind(n,i,r,o)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,ve.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,ve.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,ve.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,ve.INPUT_SELECTOR,"keydown",function(n){Et("ArrowUp",n)&&n.preventDefault(),Et("ArrowDown",n)&&n.preventDefault()}),t(this._container,ve.INPUT_SELECTOR,"keyup",function(n){if(Et("Escape",n))return e.close();if(Et("Enter",n)){var i=e._getCurrentResult();return i?e._select(i):e.close(!1)}if(Et("ArrowUp",n))return e._scrollToDirection(!0);if(Et("ArrowDown",n))return e._scrollToDirection();Et(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};ve.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){pn.unbind(e.el,e.type,e.listener)})};ve.prototype._search=function(e){var t=this;if(this._clearResults(),!!e.trim()){var n=this._searchProvider.find(e);if(n=n.filter(function(r){return!t._canvas.getRootElements().includes(r.element)}),!n.length){this._selection.select(null);return}n.forEach(function(r){var o=r.element.id,s=t._createResultNode(r,o);t._results[o]={element:r.element,node:s}});var i=Fe(ve.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}};ve.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};ve.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}};ve.prototype._clearResults=function(){Gu(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};ve.prototype._getCurrentResult=function(){return Fe(ve.RESULT_SELECTED_SELECTOR,this._resultsContainer)};ve.prototype._createResultNode=function(e,t){var n=qe(ve.RESULT_HTML);return e.primaryTokens.length>0&&C0(n,e.primaryTokens,ve.RESULT_PRIMARY_HTML),C0(n,e.secondaryTokens,ve.RESULT_SECONDARY_HTML),Bt(n,ve.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};ve.prototype.registerProvider=function(e){this._searchProvider=e};ve.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._selection.select(null),this._bindEvents(),this._open=!0,st(this._canvas.getContainer()).add("djs-search-open"),st(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};ve.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,st(this._canvas.getContainer()).remove("djs-search-open"),st(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"),this._canvas.restoreFocus())};ve.prototype.toggle=function(){this.isOpen()?this.close():this.open()};ve.prototype.isOpen=function(){return this._open};ve.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&st(t).remove(ve.RESULT_SELECTED_CLASS);var n=Bt(e,ve.RESULT_ID_ATTRIBUTE),i=this._results[n].element;st(e).add(ve.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(i,{top:XC}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}};ve.prototype._select=function(e){var t=Bt(e,ve.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:XC}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};ve.prototype._getBoxHtml=function(){const e=qe(ve.BOX_HTML),t=Fe(ve.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function C0(e,t,n){var i=K8(t),r=qe(n);r.innerHTML=i,e.appendChild(r)}function K8(e){var t="";return e.forEach(function(n){var i=Zx(n.value||n.matched||n.normal),r=n.match||n.matched;r?t+='<b class="'+ve.RESULT_HIGHLIGHT_CLASS+'">'+i+"</b>":t+=i}),t!==""?t:null}ve.CONTAINER_SELECTOR=".djs-search-container";ve.INPUT_SELECTOR=".djs-search-input input";ve.RESULTS_CONTAINER_SELECTOR=".djs-search-results";ve.RESULT_SELECTOR=".djs-search-result";ve.RESULT_SELECTED_CLASS="djs-search-result-selected";ve.RESULT_SELECTED_SELECTOR="."+ve.RESULT_SELECTED_CLASS;ve.RESULT_ID_ATTRIBUTE="data-result-id";ve.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";ve.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;ve.RESULT_HTML='<div class="djs-search-result"></div>';ve.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';ve.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const q8={__depends__:[nf,of,ni],searchPad:["type",ve]};function Tm(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._search=i,t.registerProvider(this)}Tm.$inject=["elementRegistry","searchPad","canvas","search"];Tm.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(i){return!Oe(i)&&!t.includes(i)});return this._search(n.map(i=>({element:i,label:ti(i),id:i.id})),e,{keys:["label","id"]}).map(Y8)};function Y8(e){const{item:{element:t},tokens:n}=e;return{element:t,primaryTokens:n.label,secondaryTokens:n.id}}const J8={__depends__:[q8,HS],__init__:["bpmnSearch"],bpmnSearch:["type",Tm]},X8="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",Z8="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",Q8={width:36,height:50},eH={width:50,height:50};function R0(e,t,n){return ae("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const us=5;function Gf(e,t){this._styles=t,e.registerProvider(this)}Gf.$inject=["outline","styles"];Gf.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!Oe(e))return w(e,"bpmn:Gateway")?(n=ae("rect"),$(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),ie(n,$({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):Ce(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=ae("rect"),ie(n,$({x:-5,y:-5,rx:14,width:e.width+us*2,height:e.height+us*2},t))):w(e,"bpmn:EndEvent")?(n=ae("circle"),ie(n,$({cx:e.width/2,cy:e.height/2,r:e.width/2+us+1},t))):w(e,"bpmn:Event")?(n=ae("circle"),ie(n,$({cx:e.width/2,cy:e.height/2,r:e.width/2+us},t))):w(e,"bpmn:DataObjectReference")&&T0(e,"bpmn:DataObjectReference")?n=R0(X8,{x:-6,y:-6},t):w(e,"bpmn:DataStoreReference")&&T0(e,"bpmn:DataStoreReference")&&(n=R0(Z8,{x:-6,y:-6},t)),n};Gf.prototype.updateOutline=function(e,t){if(!Oe(e))return Ce(e,["bpmn:SubProcess","bpmn:Group"])?(ie(t,{width:e.width+us*2,height:e.height+us*2}),!0):!!Ce(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function T0(e,t){var n;return t==="bpmn:DataObjectReference"?n=Q8:t==="bpmn:DataStoreReference"&&(n=eH),e.width===n.width&&e.height===n.height}const tH={__depends__:[jC],__init__:["outlineProvider"],outlineProvider:["type",Gf]};var nH='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Hi(e){Rc.call(this,e)}re(Hi,Rc);Hi.Viewer=Br;Hi.NavigatedViewer=oc;Hi.prototype.createDiagram=function(){return this.importXML(nH)};Hi.prototype._interactionModules=[pS,mS,_S];Hi.prototype._modelingModules=[ZB,pg,w5,g5,H5,vg,K5,eF,eC,Rf,rF,aF,SF,RF,TF,DF,VF,xC,XF,c8,y8,b8,NC,G8,J8,tH];Hi.prototype._modules=[].concat(Br.prototype._modules,Hi.prototype._interactionModules,Hi.prototype._modelingModules);export{ft as A,De as B,pc as C,$i as D,vH as E,fn as F,bP as G,xH as H,SH as I,uH as J,iH as K,aH as L,gw as M,Hi as N,dH as O,zw as T,Br as V,mc as _,nn as a,dc as b,mr as c,mH as d,zi as e,gi as f,tl as g,sH as h,Lt as i,$w as j,oT as k,hH as l,pH as m,Vn as n,Nt as o,eu as p,fH as q,rH as r,gH as s,td as t,be as u,ow as v,Pa as w,lH as x,oH as y,cH as z};
