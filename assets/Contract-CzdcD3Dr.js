import{_ as I}from"./index-C3nnlCsr.js";import{a as d,o as i,b as e,A as J,B as $,p as f,C,c as w,t as p,q as g,x as k,D as B,E as T,F as y,f as h,g as j,e as q,h as O}from"./vendor-5kUzFu23.js";const z={},A={class:"skeleton-item"};function L(b,l){return i(),d("div",A,l[0]||(l[0]=[e("div",{class:"avatar shimmer"},null,-1),e("div",{class:"text shimmer"},null,-1)]))}const U=I(z,[["render",L],["__scopeId","data-v-fd72d860"]]),R={class:"modal"},E={key:1,class:"border p-5 m-5"},G={class:"form-group"},X={class:"form-group"},K={class:"form-group"},Y={class:"form-group"},Z={__name:"ModalDialog",props:{show:Boolean,form:Object,onClose:Function,onSave:Function},setup(b){const l=b,a=J({id:"",name:"",email:"",age:""});$(()=>l.form,r=>{Object.assign(a,r)},{immediate:!0});const v=f(!0),u=()=>{var r;(r=l.onClose)==null||r.call(l)},m=()=>{var r;(r=l.onSave)==null||r.call(l,{...a}),u()};return C(()=>{setTimeout(()=>{console.log("looooooo"),v.value=!1},500)}),(r,o)=>(i(),d("div",{class:"overlay",onClick:B(u,["self"])},[e("div",R,[e("button",{class:"close-btn",onClick:u},"✕"),v.value?(i(),w(U,{key:0})):(i(),d("div",E,[e("div",G,[o[3]||(o[3]=e("label",null,"ID：",-1)),e("span",null,p(a.id),1)]),e("div",X,[o[4]||(o[4]=e("label",null,"姓名：",-1)),g(e("input",{"onUpdate:modelValue":o[0]||(o[0]=c=>a.name=c),required:""},null,512),[[k,a.name]])]),e("div",K,[o[5]||(o[5]=e("label",null,"邮箱：",-1)),g(e("input",{"onUpdate:modelValue":o[1]||(o[1]=c=>a.email=c)},null,512),[[k,a.email]])]),e("div",Y,[o[6]||(o[6]=e("label",null,"年龄：",-1)),g(e("input",{"onUpdate:modelValue":o[2]||(o[2]=c=>a.age=c),type:"number"},null,512),[[k,a.age]])]),e("div",{class:"actions"},[e("button",{onClick:m},"保存"),e("button",{onClick:u},"取消")])]))])]))}},H=I(Z,[["__scopeId","data-v-08962c33"]]),Q="https://gpnkvmnrhnzlnphnante.supabase.co",W="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdwbmt2bW5yaG56bG5waG5hbnRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2NDk4NzAsImV4cCI6MjA2ODIyNTg3MH0.ba0RLTsufIDJkK_dyq_X9mbKFj7FTqarbbEHC61x8tY",_=T(Q,W),P={key:1,class:"table-container"},ee={class:"actions"},oe=["onClick"],se=["onClick"],te={__name:"Contract",setup(b){const l=f(!1);function a(){l.value=!0}function v(){l.value=!1}const u=s=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array.from(crypto.getRandomValues(new Uint8Array(s))).map(n=>t[n%t.length]).join("")},m=f(!1),r=f([]),o=async()=>{m.value=!0;const{data:s,error:t}=await _.from("users").select("*");t?console.error("Fetch error:",t):(r.value=s,m.value=!1)},c=f({id:"",name:"",email:"",age:""});C(()=>{o()});const x=s=>{c.value=s,a()},F=()=>{c.value={id:u(16),name:"",email:"",age:""},a()},M=s=>{r.value.findIndex(n=>n.id===s.id)!==-1?V(s):S(s)},S=async s=>{const{data:t,error:n}=await _.from("users").insert([s]).select();n?console.error("addUser error:",n):(console.log("add_new_data_: ",t),o())},V=async s=>{console.log("updata:",s);const{error:t}=await _.from("users").update(s).eq("id",s.id);t?console.error("updateUser_error:",t):o()},N=async s=>{if(confirm("确定要删除这个用户吗？"+s)){const{error:t}=await _.from("users").delete().eq("id",s);t?console.error("del_User error:",t):o()}};return(s,t)=>(i(),d("div",null,[m.value?(i(),d(y,{key:0},h(5,n=>j(U,{key:n})),64)):(i(),d("div",P,[e("h2",null,[t[0]||(t[0]=O("用户列表 ")),e("button",{onClick:o,class:"p-5 m-5"},"查询数据"),e("button",{onClick:F,class:"p-5 m-5"},"新增")]),l.value?(i(),w(H,{key:0,show:l.value,form:c.value,onClose:v,onSave:M},null,8,["show","form"])):q("",!0),e("table",null,[t[1]||(t[1]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"姓名"),e("th",null,"邮箱"),e("th",null,"年龄"),e("th",null,"操作")])],-1)),e("tbody",null,[(i(!0),d(y,null,h(r.value,n=>(i(),d("tr",{key:n.id},[e("td",null,p(n.id),1),e("td",null,p(n.name),1),e("td",null,p(n.email),1),e("td",null,p(n.age),1),e("td",ee,[e("button",{onClick:D=>x(n),class:"p-5 m-5"},"编辑",8,oe),e("button",{onClick:D=>N(n.id),class:"p-5"},"删除",8,se)])]))),128))])])]))]))}},ae=I(te,[["__scopeId","data-v-2b63867e"]]);export{ae as default};
